var smash={};smash.router={__parseRouteRegex:/{(.*?)}/gi,__dynamicParts:[],__routes:{static:[],dynamic:[]}},smash.router.add=function(t,r){var s=smash.router.parseRoute(t);return s.regex?(s.callback=r,smash.router.__routes.dynamic[s.depth]||(smash.router.__routes.dynamic[s.depth]=[]),smash.router.__routes.dynamic[s.depth][s.numVars]||(smash.router.__routes.dynamic[s.depth][s.numVars]=[]),void smash.router.__routes.dynamic[s.depth][s.numVars].push(s)):void(smash.router.__routes.static[t]=r)},smash.router.set=function(t){window.history.pushState("","",t),window.dispatchEvent(new Event("popstate"))},smash.router.redirect=function(t){window.location=t},smash.router.handleNotFound=function(t){console.log("route: "+JSON.stringify(t)+" does not exist")},smash.router.run=function(){window.onpopstate=function(t){smash.router.execute()},smash.router.execute()},smash.router.execute=function(){var t=this.getPath();if(this.__routes.static[t.path])return void this.__routes.static[t.path]();var r=t.path.split("/").length-1;if(this.__routes.dynamic[r]){var s,e,a={};for(var o in this.__routes.dynamic[r])for(var n in this.__routes.dynamic[r][o]){var s=this.__routes.dynamic[r][o][n];if(e=t.path.match(s.regex)){for(var u=0;u<s.numVars;u++)a[s.vars[u]]=e[u+1];return void s.callback(a)}}}smash.router.handleNotFound(t)},smash.router.getPath=function(){var t=document.createElement("a");return t.href=window.location,{host:t.hostname,path:t.pathname}},smash.router.parseRoute=function(t){"/"!=t.substring(0,1)&&(t="/"+t),"/"==t.substring(t.length-2)&&(t="/"+t);var r={path:t,depth:t.split("/").length-1,vars:[],numVars:0};if(smash.router.__dynamicParts=t.match(smash.router.__parseRouteRegex),void 0!=smash.router.__dynamicParts&&null!=smash.router.__dynamicParts){for(var s="^"+t.replace(/\//gi,"\\/")+"$",e=0;e<smash.router.__dynamicParts.length;e++)r.numVars++,r.vars.push(smash.router.__dynamicParts[e].substring(1,smash.router.__dynamicParts[e].length-1)),s=s.replace(smash.router.__dynamicParts[e],"(.*?)");r.regex=new RegExp(s,"i")}return r};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNtYXNoLmpzIiwicm91dGVyLmpzIl0sIm5hbWVzIjpbInNtYXNoIiwicm91dGVyIiwiX19wYXJzZVJvdXRlUmVnZXgiLCJfX2R5bmFtaWNQYXJ0cyIsIl9fcm91dGVzIiwic3RhdGljIiwiZHluYW1pYyIsImFkZCIsInBhdGgiLCJjYWxsYmFjayIsInJvdXRlIiwicGFyc2VSb3V0ZSIsInJlZ2V4IiwiZGVwdGgiLCJudW1WYXJzIiwicHVzaCIsInNldCIsIndpbmRvdyIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJyZWRpcmVjdCIsImxvY2F0aW9uIiwiaGFuZGxlTm90Rm91bmQiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsInJ1biIsIm9ucG9wc3RhdGUiLCJldmVudCIsImV4ZWN1dGUiLCJ0aGlzIiwiZ2V0UGF0aCIsInNwbGl0IiwibGVuZ3RoIiwibWF0Y2hlcyIsImRhdGEiLCJ2YXJOdW0iLCJpdGVtIiwibWF0Y2giLCJpIiwidmFycyIsImwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiaG9zdCIsImhvc3RuYW1lIiwicGF0aG5hbWUiLCJzdWJzdHJpbmciLCJ1bmRlZmluZWQiLCJyZXBsYWNlIiwiUmVnRXhwIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxTQ0FBQSxPQUFBQyxRQUNBQyxrQkFBQSxZQUNBQyxrQkFDQUMsVUFDQUMsVUFDQUMsYUFJQU4sTUFBQUMsT0FBQU0sSUFBQSxTQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFWLE1BQUFDLE9BQUFVLFdBQUFILEVBQ0EsT0FBQUUsR0FBQUUsT0FDQUYsRUFBQUQsU0FBQUEsRUFDQVQsTUFBQUMsT0FBQUcsU0FBQUUsUUFBQUksRUFBQUcsU0FDQWIsTUFBQUMsT0FBQUcsU0FBQUUsUUFBQUksRUFBQUcsV0FFQWIsTUFBQUMsT0FBQUcsU0FBQUUsUUFBQUksRUFBQUcsT0FBQUgsRUFBQUksV0FDQWQsTUFBQUMsT0FB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LnJvdXRlciA9IHtcbiAgICBfX3BhcnNlUm91dGVSZWdleDogL3soLio/KX0vaWcsXG4gICAgX19keW5hbWljUGFydHM6IFtdLFxuICAgIF9fcm91dGVzOiB7XG4gICAgICAgIHN0YXRpYzogW10sXG4gICAgICAgIGR5bmFtaWM6IFtdXG4gICAgfVxufTtcblxuc21hc2gucm91dGVyLmFkZCA9IGZ1bmN0aW9uKHBhdGgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHJvdXRlID0gc21hc2gucm91dGVyLnBhcnNlUm91dGUocGF0aCk7XG4gICAgaWYgKHJvdXRlLnJlZ2V4KSB7XG4gICAgICAgIHJvdXRlLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIGlmICghc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdKSB7XG4gICAgICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXVtyb3V0ZS5udW1WYXJzXSkge1xuICAgICAgICAgICAgc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdLnB1c2gocm91dGUpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5zdGF0aWNbcGF0aF0gPSBjYWxsYmFjaztcbn07XG5cbnNtYXNoLnJvdXRlci5zZXQgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShcIlwiLCBcIlwiLCByb3V0ZSk7XG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdwb3BzdGF0ZScpKTtcbn07XG5cbnNtYXNoLnJvdXRlci5yZWRpcmVjdCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgd2luZG93LmxvY2F0aW9uID0gcm91dGU7XG59O1xuXG5zbWFzaC5yb3V0ZXIuaGFuZGxlTm90Rm91bmQgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIGNvbnNvbGUubG9nKFwicm91dGU6IFwiICsgSlNPTi5zdHJpbmdpZnkocm91dGUpICsgXCIgZG9lcyBub3QgZXhpc3RcIik7XG59O1xuXG5zbWFzaC5yb3V0ZXIucnVuID0gZnVuY3Rpb24oKSB7XG4gICAgd2luZG93Lm9ucG9wc3RhdGUgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBzbWFzaC5yb3V0ZXIuZXhlY3V0ZSgpO1xuICAgIH07XG4gICAgc21hc2gucm91dGVyLmV4ZWN1dGUoKTtcbn1cblxuc21hc2gucm91dGVyLmV4ZWN1dGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGF0aCA9IHRoaXMuZ2V0UGF0aCgpO1xuICAgIGlmICh0aGlzLl9fcm91dGVzLnN0YXRpY1twYXRoLnBhdGhdKSB7XG4gICAgICAgIHRoaXMuX19yb3V0ZXMuc3RhdGljW3BhdGgucGF0aF0oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgZGVwdGggPSBwYXRoLnBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aC0xO1xuICAgIGlmICh0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdKSB7XG4gICAgICAgIHZhciByb3V0ZTtcbiAgICAgICAgdmFyIG1hdGNoZXM7XG4gICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgIGZvciAodmFyIHZhck51bSBpbiB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF1bdmFyTnVtXSkge1xuICAgICAgICAgICAgICAgIHZhciByb3V0ZSA9IHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF1bdmFyTnVtXVtpdGVtXTtcbiAgICAgICAgICAgICAgICBtYXRjaGVzID0gcGF0aC5wYXRoLm1hdGNoKHJvdXRlLnJlZ2V4KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxyb3V0ZS5udW1WYXJzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtyb3V0ZS52YXJzW2ldXSA9IG1hdGNoZXNbaSsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm91dGUuY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNtYXNoLnJvdXRlci5oYW5kbGVOb3RGb3VuZChwYXRoKTtcbn07XG5cbnNtYXNoLnJvdXRlci5nZXRQYXRoID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBsLmhyZWYgPSB3aW5kb3cubG9jYXRpb247XG4gICAgcmV0dXJuIHtob3N0OiBsLmhvc3RuYW1lLCBwYXRoOiBsLnBhdGhuYW1lfTtcbn07XG5cbnNtYXNoLnJvdXRlci5wYXJzZVJvdXRlID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIGlmIChwYXRoLnN1YnN0cmluZygwLDEpICE9IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG4gICAgfVxuICAgIGlmIChwYXRoLnN1YnN0cmluZyhwYXRoLmxlbmd0aC0yKSA9PSBcIi9cIikge1xuICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoO1xuICAgIH1cbiAgICB2YXIgcm91dGUgPSB7XG4gICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgIGRlcHRoOiAocGF0aC5zcGxpdChcIi9cIikubGVuZ3RoIC0gMSksXG4gICAgICAgIHZhcnM6IFtdLFxuICAgICAgICBudW1WYXJzOiAwXG4gICAgfTtcbiAgICBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMgPSBwYXRoLm1hdGNoKHNtYXNoLnJvdXRlci5fX3BhcnNlUm91dGVSZWdleCk7XG4gICAgaWYgKHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cyAhPSB1bmRlZmluZWQgJiYgc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzICE9IG51bGwpIHtcbiAgICAgICAgdmFyIHJlZ2V4ID0gXCJeXCIgKyBwYXRoLnJlcGxhY2UoL1xcLy9pZywgXCJcXFxcL1wiKSArIFwiJFwiO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByb3V0ZS5udW1WYXJzKys7XG4gICAgICAgICAgICByb3V0ZS52YXJzLnB1c2goc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzW2ldLnN1YnN0cmluZygxLCBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0ubGVuZ3RoLTEpKTtcbiAgICAgICAgICAgIHJlZ2V4ID0gcmVnZXgucmVwbGFjZShzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0sIFwiKC4qPylcIik7XG4gICAgICAgIH1cbiAgICAgICAgcm91dGUucmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4LCAnaScpO1xuICAgIH1cbiAgICByZXR1cm4gcm91dGU7XG59O1xuIl19
