window.addEventListener("load",function(e){smash.init()},!1);var smash={};smash.init=function(){smash.config.init(),smash.sidebar.init(),smash.searchbox.init(),smash.workspace.init(),smash.input.init()},smash.get=function(e,s){try{return e.querySelector(s)}catch(e){console.log(e)}},smash.getAll=function(e,s){try{return e.querySelectorAll(s)}catch(e){console.log(e)}},smash.hide=function(e,s){for(var a=smash.getAll(e,s),t=0;t<a.length;t++)a[t].style.display="none"},smash.show=function(e,s){for(var a=smash.getAll(e,s),t=0;t<a.length;t++)a[t].style.display=""},smash.on=function(e,s,a,t){for(var n=smash.getAll(e,s),r=0;r<n.length;r++)n[r][a]=t},smash.ajax={_headers_:[]},smash.ajax.addHeader=function(e,s){smash.ajax._headers_[e]=s},smash.ajax.removeHeader=function(e){delete smash.ajax._headers_[e]},smash.ajax._xhr_=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,s=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],a=0;a<s.length;a++)try{e=new ActiveXObject(s[a]);break}catch(e){}return e},smash.ajax.send=function(e,s,a,t,n,r){void 0===r&&(r=!0);var o=smash.ajax._xhr_();o.responseType=n,o.onreadystatechange=function(){4==o.readyState&&(200==o.status||201==o.status?s&&s(o.response):console.log(o.status,o.response))},o.open(a,e,r),"json"==n?o.setRequestHeader("Content-type","application/json"):"POST"==a&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var i in smash.ajax._headers_)o.setRequestHeader(i,smash.ajax._headers_[i]);o.send(t)},smash.ajax.get=function(e,s,a,t,n){var r=[];for(var o in a)r.push(encodeURIComponent(o)+"="+encodeURIComponent(a[o]));smash.ajax.send(e+(r.length?"?"+r.join("&"):""),s,"GET",null,t,n)},smash.ajax.post=function(e,s,a,t,n){var r;if(a)if("json"!=t){var o=[];for(var i in a)o.push(encodeURIComponent(i)+"="+encodeURIComponent(a[i]));r=o.join("&")}else r=JSON.stringify(a);smash.ajax.send(e,s,"POST",r,t,n)},smash.class={},smash.class.add=function(e,s){smash.class.has(e,s)||(e.classList?e.classList.add(s):e.className+=" "+s)},smash.class.remove=function(e,s){smash.class.has(e,s)&&(e.classList?e.classList.remove(s):e.className=e.className.replace(s,""))},smash.class.has=function(e,s){return(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(" "+s+" ")>-1},smash.class.toggle=function(e,s){smash.class.has(e,s)?smash.class.remove(e,s):smash.class.add(e,s)},smash.config={_values_:{_sidebar_lock_:!1}},smash.config.init=function(){var e=smash.storage.get("config");e&&(smash.config._values_=e)},smash.config.get=function(e){var s="_"+e+"_";if(s in smash.config._values_)return smash.config._values_[s];throw new smash.Exception("001",'Invalid config option "'+e+'"')},smash.config.set=function(e,s){var a="_"+e+"_";if(!a in smash.config._values_)throw new smash.Exception("001",'Invalid config option "'+e+'"');smash.config._values_[a]=s,smash.storage.set("config",smash.config._values_)},smash.dialog={},smash.dialog.new=function(e){var s=smash.dialog.checkBackdrop(),a=document.createElement("div");a.className="smash-dialog",a.innerHTML=e,s.appendChild(a)},smash.dialog.checkBackdrop=function(){if(e=smash.get(document,".smash-dialog-backdrop"))return(dialog=smash.get(document,".smash-dialog-backdrop .smash-dialog"))&&e.removeChild(dialog),e;var e=document.createElement("div");return e.className="smash-dialog-backdrop",e.innerHTML='<div class="smash-dialog-background"></div>',smash.get(e,".smash-dialog-background").onclick=smash.dialog.close,smash.get(document,"body").appendChild(e),e},smash.dialog.close=function(){(dialog=smash.get(document,".smash-dialog-backdrop"))&&smash.get(document,"body").removeChild(dialog)},smash.Exception=function(e,s){this.value=e,this.message=s,this.toString=function(){return"SmashException "+this.value+": "+this.message}},smash.input={},smash.input.init=function(){for(var e,s=document.querySelectorAll(".smash-input input, .smash-textarea textarea"),a=0;a<s.length;a++)if(e=s[a],!smash.class.has(e.parentElement,"smash-initialised")){if(e.parentElement.setValue=function(s){(e=this.querySelector("input"))?(e.value=s,e.onkeyup()):(e=this.querySelector("textarea"))&&(e.value=s,e.onkeyup())},e.parentElement.getValue=function(){if(e=this.querySelector("input")){var e=this.querySelector("input");return e.value}if(e=this.querySelector("textarea")){var e=this.querySelector("input");return e.value}return null},smash.class.has(e.parentElement,"has-floating-label")){smash.class.remove(e.parentElement,"has-floating-label"),smash.class.add(e.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=e.placeholder,e.parentElement.appendChild(t),e.onkeyup=function(e){var s=this.parentElement.querySelector("label");s&&(""!=this.value?smash.class.add(s,"show"):smash.class.remove(s,"show"))}}e.parentElement.getAttribute("value")&&e.parentElement.setValue(e.parentElement.getAttribute("value")),smash.class.add(e.parentElement,"smash-initialised")}for(var n,r=document.querySelectorAll(".smash-select select"),a=0;a<r.length;a++)if(n=r[a],!smash.class.has(n.parentElement,"smash-initialised")){if(smash.class.has(n.parentElement,"has-floating-label")){smash.class.remove(n.parentElement,"has-floating-label"),smash.class.add(n.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=n.getAttribute("placeholder"),n.parentElement.appendChild(t)}n.parentElement.setValue=function(e){smash.class.remove(this,"is-focussed");var s=this.querySelector("select"),a=this.querySelector("input"),t=s.value;s.value=e,s.selectedIndex>-1&&(a.value=s.options[s.selectedIndex].text),a.focus(),a.onfocus(),t!=e&&s.onchange&&s.onchange()},n.parentElement.getValue=function(){var e=this.querySelector("select");return e.selectedIndex==-1?null:e.options[e.selectedIndex].value};var e=document.createElement("input");e.type="text",e.placeholder=n.getAttribute("placeholder"),e.setAttribute("readonly","readonly"),n.parentElement.appendChild(e);for(var o=n.querySelectorAll("option"),i=document.createElement("ul"),c=0;c<o.length;c++){var h=o[c];if(h.getAttribute("value")){var l=document.createElement("li");l.setAttribute("value",h.value),l.innerHTML=h.innerHTML,i.appendChild(l),l.onmousedown=function(e){this.parentElement.parentElement.setValue(this.getAttribute("value")),e.stopPropagation(),window.onmousedown=null}}}n.parentElement.appendChild(i),e.onfocus=function(e){var s=this.parentElement.querySelector("label");s&&(""!=this.value?smash.class.add(s,"show"):smash.class.remove(s,"show"))},n.parentElement.onclick=function(){smash.class.add(this,"is-focussed");var e=this;window.onmousedown=function(){console.log("click outside"),window.onmousedown=null,smash.class.remove(e,"is-focussed")}},n.parentElement.getAttribute("value")&&n.parentElement.setValue(n.parentElement.getAttribute("value")),smash.class.add(n.parentElement,"smash-initialised")}smash.input.checkboxInit()},smash.input.checkboxInit=function(){for(var e,s=document.querySelectorAll(".smash-checkbox input"),a=0;a<s.length;a++)if(e=s[a],!smash.class.has(e.parentElement,"smash-initialised")){var t=document.createElement("span");if(t.className="checks",t.innerHTML='<i class="material-icons">check_box_outline_blank</i><i class="material-icons checked">check_box</i>',e.parentElement.appendChild(t),label=e.getAttribute("label")){var n=document.createElement("span");n.className="label",n.innerHTML=label,e.parentElement.appendChild(n)}smash.class.add(e.parentElement,"smash-initialised"),e.checked=smash.class.has(e.parentElement,"checked"),e.parentElement.onclick=function(){smash.class.toggle(this,"checked"),smash.get(this,"input").checked=smash.class.has(this,"checked")},e.parentElement.getValue=function(){return smash.class.has(this,"checked")},e.parentElement.setValue=function(e){smash.class.has(this,"checked")!=e&&this.onclick()}}},smash.router={__parseRouteRegex:/{(.*?)}/gi,__dynamicParts:[],__routes:{static:[],dynamic:[]}},smash.router.add=function(e,s){var a=smash.router.parseRoute(e);return a.regex?(a.callback=s,smash.router.__routes.dynamic[a.depth]||(smash.router.__routes.dynamic[a.depth]=[]),smash.router.__routes.dynamic[a.depth][a.numVars]||(smash.router.__routes.dynamic[a.depth][a.numVars]=[]),void smash.router.__routes.dynamic[a.depth][a.numVars].push(a)):void(smash.router.__routes.static[e]=s)},smash.router.set=function(e){smash.router.displayURL(e),window.dispatchEvent(new Event("popstate"))},smash.router.displayURL=function(e){window.history.pushState("","",e)},smash.router.redirect=function(e){window.location=e},smash.router.handleNotFound=function(e){console.log("route: "+JSON.stringify(e)+" does not exist")},smash.router.run=function(){window.onpopstate=function(e){smash.router.execute()},smash.router.execute()},smash.router.execute=function(){var e=this.getPath();if(this.__routes.static[e.path])return void this.__routes.static[e.path]();var s=e.path.split("/").length-1;if(this.__routes.dynamic[s]){var a,t,n={};for(var r in this.__routes.dynamic[s])for(var o in this.__routes.dynamic[s][r]){var a=this.__routes.dynamic[s][r][o];if(t=e.path.match(a.regex)){for(var i=0;i<a.numVars;i++)n[a.vars[i]]=t[i+1];return void a.callback(n)}}}smash.router.handleNotFound(e)},smash.router.getPath=function(){var e=document.createElement("a");return e.href=window.location,{host:e.hostname,path:e.pathname}},smash.router.parseRoute=function(e){"/"!=e.substring(0,1)&&(e="/"+e),"/"==e.substring(e.length-2)&&(e="/"+e);var s={path:e,depth:e.split("/").length-1,vars:[],numVars:0};if(smash.router.__dynamicParts=e.match(smash.router.__parseRouteRegex),void 0!=smash.router.__dynamicParts&&null!=smash.router.__dynamicParts){for(var a="^"+e.replace(/\//gi,"\\/")+"$",t=0;t<smash.router.__dynamicParts.length;t++)s.numVars++,s.vars.push(smash.router.__dynamicParts[t].substring(1,smash.router.__dynamicParts[t].length-1)),a=a.replace(smash.router.__dynamicParts[t],"(.*?)");s.regex=new RegExp(a,"i")}return s},smash.router.queryParam=function(e){var s="[\\?&]"+e+"=([^&#]*)",a=new RegExp(s),t=a.exec(window.location.search);if(null!=t)return t[1]},smash.searchbox={i_:!1,minAutoCompleteLength:3,onfocus:void 0,onblur:void 0,onvalue:void 0},smash.searchbox.init=function(){if(!smash.searchbox.i_){var e=document.querySelector(".smash-searchbox input");e&&(e.onfocus=function(){0==this.value.length&&smash.searchbox.results('<div class="smash-instruction">Start typing to find results</div>'),smash.class.add(document.querySelector(".smash-header"),"is-focussed"),smash.class.add(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onfocus&&smash.searchbox.onfocus()},e.onblur=function(){smash.class.remove(document.querySelector(".smash-header"),"is-focussed"),smash.class.remove(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onblur&&smash.searchbox.onblur()},e.onkeyup=function(e){this.value.length<smash.searchbox.minAutoCompleteLength||smash.searchbox.onchange&&smash.searchbox.onchange(this.value)},smash.searchbox.i_=!0)}},smash.searchbox.results=function(e){var s=document.querySelector(".smash-searchbox .smash-searchbox-results");s.innerHTML=e},smash.sidebar={i_:!1},smash.sidebar.init=function(){if(!smash.sidebar.i_){var e=document.querySelector(".smash-sidebar .lock");if(e){e.onclick=function(){smash.sidebar.toggleLock()};var s=document.querySelector(".smash-sidebar");smash.class.add(s,"is-unlocked"),smash.sidebar.i_=!0,smash.config.get("sidebar_lock")&&smash.sidebar.toggleLock()}}},smash.sidebar.toggleLock=function(){smash.sidebar.i_&&(smash.class.toggle(document.querySelector(".smash-sidebar .lock"),"unlock"),smash.class.toggle(document.querySelector(".smash-sidebar"),"is-unlocked"),smash.config.set("sidebar_lock",!smash.class.has(document.querySelector(".smash-sidebar"),"is-unlocked")))},smash.storage={},smash.storage.set=function(e,s){localStorage.setItem(e,JSON.stringify(s))},smash.storage.unset=function(e){localStorage.removeItem(e)},smash.storage.get=function(e){var s=localStorage.getItem(e);if(s)return JSON.parse(s)},smash.storage.clear=function(){localStorage.clear()},smash.workspace={baseTitle:void 0,_ws_:void 0,_hdr_:void 0,_sb_:void 0,_tabs_:[]},smash.workspace.init=function(){smash.workspace._ws_=document.querySelector(".smash-workspace"),smash.workspace._ws_&&(smash.workspace._hdr_=document.querySelector(".smash-header"),smash.workspace._hdr_&&smash.class.add(smash.workspace._ws_,"has-header"),smash.workspace._sb_=document.querySelector(".smash-workspace .smash-sidebar"),smash.workspace._sb_&&smash.class.add(smash.workspace._ws_,"has-sidebar"))},smash.workspace.addTab=function(e,s,a,t){if(!smash.get(document,".smash-tab-pane")){var n=smash.get(document,".smash-panel");if(!n)return void console.log("To add a tab there needs to be a panel");n.innerHTML='<div class="smash-tab-pane"><div class="smash-tabs"></div><div class="smash-panes"></div></div>'}var r=smash.get(document,".smash-tab-pane .smash-tabs"),o=smash.get(document,".smash-tab-pane .smash-panes");if(document.title=smash.workspace.createTitle(s),c=smash.get(r,'.smash-tab[data-id="'+e+'"]')){var i=smash.get(o,'.smash-pane[data-id="'+e+'"]');return i.innerHTML=a,c.dataset.url=t,c.onclick(),{tab:c,pane:i}}smash.hide(o,".smash-pane"),(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active");var c=document.createElement("div");c.className="smash-tab active",c.dataset.id=e,c.dataset.url=t,c.innerHTML=s+'<i class="material-icons close">close</i>',c.onclick=function(e){(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active"),smash.class.add(this,"active"),smash.hide(document,".smash-pane"),smash.show(document,'.smash-pane[data-id="'+this.dataset.id+'"]'),this.dataset.url&&"undefined"!=this.dataset.url&&smash.router.displayURL(this.dataset.url),document.title=smash.workspace.createTitle(this.innerHTML)},smash.on(c,".close","onclick",function(e){smash.class.has(this.parentElement,"active")&&(this.parentElement.previousSibling?this.parentElement.previousSibling.onclick():this.parentElement.nextSibling&&this.parentElement.nextSibling.onclick()),(i=smash.get(document,'.smash-pane[data-id="'+this.parentElement.dataset.id+'"]'))&&i.parentElement.removeChild(i),this.parentElement.parentElement.removeChild(this.parentElement),e.stopPropagation()}),r.appendChild(c);var i=document.createElement("div");return i.className="smash-pane",i.dataset.id=e,i.innerHTML=a,o.appendChild(i),{tab:c,pane:i}},smash.workspace.activeTab=function(){var e=smash.get(tabs,".smash-tab.active");if(!e)return null;var s=smash.get(document,'.smash-pane[data-id="'+e.dataset.id+'"]');return s?{tab:e,pane:s}:null},smash.workspace.createTitle=function(e){return e.replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/gi,"")+(smash.workspace.baseTitle?" | "+smash.workspace.baseTitle:"")};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNtYXNoLmpzIiwiYWpheC5qcyIsImNsYXNzLmpzIiwiY29uZmlnLmpzIiwiZGlhbG9nLmpzIiwiZXhjZXB0aW9uLmpzIiwiaW5wdXQuanMiLCJyb3V0ZXIuanMiLCJzZWFyY2hib3guanMiLCJzaWRlYmFyLmpzIiwic3RvcmFnZS5qcyIsIndvcmtzcGFjZS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInNtYXNoIiwiaW5pdCIsImNvbmZpZyIsInNpZGViYXIiLCJzZWFyY2hib3giLCJ3b3Jrc3BhY2UiLCJpbnB1dCIsImdldCIsInBhcmVudCIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImNvbnNvbGUiLCJsb2ciLCJnZXRBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGlkZSIsImVsIiwiaSIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsInNob3ciLCJvbiIsImV2ZW50IiwiY2FsbGJhY2siLCJlbGVtZW50cyIsImFqYXgiLCJfaGVhZGVyc18iLCJhZGRIZWFkZXIiLCJuYW1lIiwidmFsdWUiLCJyZW1vdmVIZWFkZXIiLCJfeGhyXyIsIlhNTEh0dHBSZXF1ZXN0IiwieGhyIiwidmVyc2lvbnMiLCJBY3RpdmVYT2JqZWN0Iiwic2VuZCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJyZXNwb25zZVR5cGUiLCJhc3luYyIsInVuZGVmaW5lZCIsIngiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInF1ZXJ5Iiwia2V5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJwb3N0IiwiZGF0YVN0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJjbGFzcyIsImFkZCIsImNsYXNzTmFtZSIsImhhcyIsImNsYXNzTGlzdCIsInJlbW92ZSIsInJlcGxhY2UiLCJpbmRleE9mIiwidG9nZ2xlIiwiX3ZhbHVlc18iLCJfc2lkZWJhcl9sb2NrXyIsInYiLCJzdG9yYWdlIiwib3B0aW9uIiwibyIsIkV4Y2VwdGlvbiIsInNldCIsImRpYWxvZyIsIm5ldyIsImNvbnRlbnQiLCJiYWNrZHJvcCIsImNoZWNrQmFja2Ryb3AiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsInJlbW92ZUNoaWxkIiwib25jbGljayIsImNsb3NlIiwibWVzc2FnZSIsInRoaXMiLCJ0b1N0cmluZyIsImlucHV0cyIsInBhcmVudEVsZW1lbnQiLCJzZXRWYWx1ZSIsIm9ua2V5dXAiLCJnZXRWYWx1ZSIsImxhYmVsIiwicGxhY2Vob2xkZXIiLCJsIiwiZ2V0QXR0cmlidXRlIiwic2VsZWN0Iiwic2VsZWN0cyIsIm9sZCIsInNlbGVjdGVkSW5kZXgiLCJvcHRpb25zIiwidGV4dCIsImZvY3VzIiwib25mb2N1cyIsIm9uY2hhbmdlIiwidHlwZSIsInNldEF0dHJpYnV0ZSIsInVsIiwiaiIsImxpIiwib25tb3VzZWRvd24iLCJzdG9wUHJvcGFnYXRpb24iLCJjaGVja2JveEluaXQiLCJjaGVja2JveCIsImNoZWNrYm94ZXMiLCJjIiwiY2hlY2tlZCIsInJvdXRlciIsIl9fcGFyc2VSb3V0ZVJlZ2V4IiwiX19keW5hbWljUGFydHMiLCJfX3JvdXRlcyIsInN0YXRpYyIsImR5bmFtaWMiLCJwYXRoIiwicm91dGUiLCJwYXJzZVJvdXRlIiwicmVnZXgiLCJkZXB0aCIsIm51bVZhcnMiLCJkaXNwbGF5VVJMIiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInJlZGlyZWN0IiwibG9jYXRpb24iLCJoYW5kbGVOb3RGb3VuZCIsInJ1biIsIm9ucG9wc3RhdGUiLCJleGVjdXRlIiwiZ2V0UGF0aCIsInNwbGl0IiwibWF0Y2hlcyIsInZhck51bSIsIml0ZW0iLCJtYXRjaCIsInZhcnMiLCJocmVmIiwiaG9zdCIsImhvc3RuYW1lIiwicGF0aG5hbWUiLCJzdWJzdHJpbmciLCJSZWdFeHAiLCJxdWVyeVBhcmFtIiwicGFyYW0iLCJyZWdleFMiLCJyZXN1bHRzIiwiZXhlYyIsInNlYXJjaCIsImlfIiwibWluQXV0b0NvbXBsZXRlTGVuZ3RoIiwib25ibHVyIiwib252YWx1ZSIsInNzYiIsInNpYmwiLCJ0b2dnbGVMb2NrIiwic2liIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInVuc2V0IiwicmVtb3ZlSXRlbSIsImdldEl0ZW0iLCJwYXJzZSIsImNsZWFyIiwiYmFzZVRpdGxlIiwiX3dzXyIsIl9oZHJfIiwiX3NiXyIsIl90YWJzXyIsImFkZFRhYiIsImlkIiwidGl0bGUiLCJwYW5lbCIsInRhYnMiLCJwYW5lc0NvbnRhaW5lciIsImNyZWF0ZVRpdGxlIiwidGFiIiwicGFuZSIsImRhdGFzZXQiLCJhY3RpdmUiLCJwcmV2aW91c1NpYmxpbmciLCJuZXh0U2libGluZyIsImFjdGl2ZVRhYiJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQUFDLGlCQUFBLE9BQUEsU0FBQUMsR0FDQUMsTUFBQUMsU0FDQSxFQUVBLElBQUFELFNBRUFBLE9BQUFDLEtBQUEsV0FDQUQsTUFBQUUsT0FBQUQsT0FDQUQsTUFBQUcsUUFBQUYsT0FDQUQsTUFBQUksVUFBQUgsT0FDQUQsTUFBQUssVUFBQUosT0FDQUQsTUFBQU0sTUFBQUwsUUFHQUQsTUFBQU8sSUFBQSxTQUFBQyxFQUFBQyxHQUNBLElBQ0EsTUFBQUQsR0FBQUUsY0FBQUQsR0FDQSxNQUFBVixHQUNBWSxRQUFBQyxJQUFBYixLQUtBQyxNQUFBYSxPQUFBLFNBQUFMLEVBQUFDLEdBQ0EsSUFDQSxNQUFBRCxHQUFBTSxpQkFBQUwsR0FDQSxNQUFBVixHQUNBWSxRQUFBQyxJQUFBYixLQUtBQyxNQUFBZSxLQUFBLFNBQUFQLEVBQUFDLEdBRUEsSUFBQSxHQURBTyxHQUFBaEIsTUFBQWEsT0FBQUwsRUFBQUMsR0FDQVEsRUFBQSxFQUFBQSxFQUFBRCxFQUFBRSxPQUFBRCxJQUNBRCxFQUFBQyxHQUFBRSxNQUFBQyxRQUFBLFFBSUFwQixNQUFBcUIsS0FB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Z00sVUFBQSxXQUNBLEdBQUFOLEdBQUEvTCxNQUFBTyxJQUFBcUwsS0FBQSxvQkFDQSxLQUFBRyxFQUNBLE1BQUEsS0FFQSxJQUFBQyxHQUFBaE0sTUFBQU8sSUFBQTJFLFNBQUEsd0JBQUE2RyxFQUFBRSxRQUFBUixHQUFBLEtBQ0EsT0FBQU8sSUFHQUQsSUFBQUEsRUFBQUMsS0FBQUEsR0FGQSxNQUtBaE0sTUFBQUssVUFBQXlMLFlBQUEsU0FBQUosR0FDQSxNQUFBQSxHQUFBeEgsUUFBQSxrQ0FBQSxLQUFBbEUsTUFBQUssVUFBQThLLFVBQUEsTUFBQW5MLE1BQUFLLFVBQUE4SyxVQUFBIiwiZmlsZSI6InNtYXNoLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKGUpe1xuICAgIHNtYXNoLmluaXQoKTtcbn0sIGZhbHNlKTtcblxudmFyIHNtYXNoID0ge307XG5cbnNtYXNoLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBzbWFzaC5jb25maWcuaW5pdCgpO1xuICAgIHNtYXNoLnNpZGViYXIuaW5pdCgpO1xuICAgIHNtYXNoLnNlYXJjaGJveC5pbml0KCk7XG4gICAgc21hc2gud29ya3NwYWNlLmluaXQoKTtcbiAgICBzbWFzaC5pbnB1dC5pbml0KCk7XG59O1xuXG5zbWFzaC5nZXQgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5nZXRBbGwgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5oaWRlID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHZhciBlbCA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8ZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG59O1xuXG5zbWFzaC5zaG93ID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHZhciBlbCA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8ZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgIH1cbn07XG5cbnNtYXNoLm9uID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3RvciwgZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGVsZW1lbnRzID0gc21hc2guZ2V0QWxsKHBhcmVudCwgc2VsZWN0b3IpO1xuICAgIGZvciAodmFyIGk9MDsgaTxlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbGVtZW50c1tpXVtldmVudF0gPSBjYWxsYmFjaztcbiAgICB9XG59O1xuIiwic21hc2guYWpheCA9IHtcbiAgICBfaGVhZGVyc186IFtdXG59O1xuXG5zbWFzaC5hamF4LmFkZEhlYWRlciA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgc21hc2guYWpheC5faGVhZGVyc19bbmFtZV0gPSB2YWx1ZTtcbn07XG5cbnNtYXNoLmFqYXgucmVtb3ZlSGVhZGVyID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSBzbWFzaC5hamF4Ll9oZWFkZXJzX1tuYW1lXTtcbn07XG5cbnNtYXNoLmFqYXguX3hocl8gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIH1cbiAgICB2YXIgdmVyc2lvbnMgPSBbXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuNi4wXCIsXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuNS4wXCIsXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuNC4wXCIsXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuMy4wXCIsXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuMi4wXCIsXG4gICAgICAgIFwiTWljcm9zb2Z0LlhtbEh0dHBcIlxuICAgIF07XG4gICAgdmFyIHhocjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnNpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB4aHIgPSBuZXcgQWN0aXZlWE9iamVjdCh2ZXJzaW9uc1tpXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB4aHI7XG59O1xuXG5zbWFzaC5hamF4LnNlbmQgPSBmdW5jdGlvbiAodXJsLCBjYWxsYmFjaywgbWV0aG9kLCBkYXRhLCByZXNwb25zZVR5cGUsIGFzeW5jKSB7XG4gICAgaWYgKGFzeW5jID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXN5bmMgPSB0cnVlO1xuICAgIH1cbiAgICB2YXIgeCA9IHNtYXNoLmFqYXguX3hocl8oKTtcbiAgICB4LnJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZTtcbiAgICB4Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoeC5yZWFkeVN0YXRlID09IDQpIHtcblx0XHRcdGlmICh4LnN0YXR1cyA9PSAyMDAgfHwgeC5zdGF0dXMgPT0gMjAxKSB7XG5cdFx0XHRcdGNhbGxiYWNrICYmIGNhbGxiYWNrKHgucmVzcG9uc2UpO1xuXHRcdFx0fSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh4LnN0YXR1cywgeC5yZXNwb25zZSk7XG5cdFx0XHR9XG5cdFx0fVxuICAgIH07XG4gICAgeC5vcGVuKG1ldGhvZCwgdXJsLCBhc3luYyk7XG4gICAgaWYgKHJlc3BvbnNlVHlwZSA9PSAnanNvbicpIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIH0gZWxzZSBpZiAobWV0aG9kID09ICdQT1NUJykge1xuICAgICAgICB4LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKTtcbiAgICB9XG4gICAgZm9yICh2YXIgbmFtZSBpbiBzbWFzaC5hamF4Ll9oZWFkZXJzXykge1xuICAgICAgICB4LnNldFJlcXVlc3RIZWFkZXIobmFtZSwgc21hc2guYWpheC5faGVhZGVyc19bbmFtZV0pO1xuICAgIH1cbiAgICB4LnNlbmQoZGF0YSlcbn07XG5cbnNtYXNoLmFqYXguZ2V0ID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2ssIGRhdGEsIHJlc3BvbnNlVHlwZSwgYXN5bmMpIHtcbiAgICB2YXIgcXVlcnkgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICBxdWVyeS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba2V5XSkpO1xuICAgIH1cbiAgICBzbWFzaC5hamF4LnNlbmQodXJsICsgKHF1ZXJ5Lmxlbmd0aCA/ICc/JyArIHF1ZXJ5LmpvaW4oJyYnKSA6ICcnKSwgY2FsbGJhY2ssICdHRVQnLCBudWxsLCByZXNwb25zZVR5cGUsICBhc3luYylcbn07XG5cbnNtYXNoLmFqYXgucG9zdCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBkYXRhLCByZXNwb25zZVR5cGUsIGFzeW5jKSB7XG4gICAgdmFyIGRhdGFTdHI7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlVHlwZSAhPSAnanNvbicpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba2V5XSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YVN0ciA9IHF1ZXJ5LmpvaW4oJyYnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YVN0ciA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNtYXNoLmFqYXguc2VuZCh1cmwsIGNhbGxiYWNrLCAnUE9TVCcsIGRhdGFTdHIsIHJlc3BvbnNlVHlwZSwgYXN5bmMpXG59O1xuIiwic21hc2guY2xhc3MgPSB7fTtcblxuc21hc2guY2xhc3MuYWRkID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIGlmICghc21hc2guY2xhc3MuaGFzKGVsLCBjbGFzc05hbWUpKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdCA/IGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKSA6IGVsLmNsYXNzTmFtZSArPSAoJyAnICsgY2xhc3NOYW1lKTtcbiAgICB9XG59O1xuXG5zbWFzaC5jbGFzcy5yZW1vdmUgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhlbCwgY2xhc3NOYW1lKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QgPyBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSkgOiBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShjbGFzc05hbWUsICcnKTtcbiAgICB9XG59O1xuXG5zbWFzaC5jbGFzcy5oYXMgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuICgoXCIgXCIgKyBlbC5jbGFzc05hbWUgKyBcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZywgXCIgXCIpLmluZGV4T2YoXCIgXCIgKyBjbGFzc05hbWUgKyBcIiBcIikgPiAtMSk7XG59O1xuXG5zbWFzaC5jbGFzcy50b2dnbGUgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgc21hc2guY2xhc3MuaGFzKGVsLCBjbGFzc05hbWUpID8gc21hc2guY2xhc3MucmVtb3ZlKGVsLCBjbGFzc05hbWUpIDogc21hc2guY2xhc3MuYWRkKGVsLCBjbGFzc05hbWUpO1xufTtcbiIsInNtYXNoLmNvbmZpZyA9IHtcbiAgICBfdmFsdWVzXzoge1xuICAgICAgICBfc2lkZWJhcl9sb2NrXzogZmFsc2VcbiAgICB9XG59XG5cbnNtYXNoLmNvbmZpZy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSBzbWFzaC5zdG9yYWdlLmdldCgnY29uZmlnJyk7XG4gICAgaWYgKHYpIHtcbiAgICAgICAgc21hc2guY29uZmlnLl92YWx1ZXNfID0gdjtcbiAgICB9XG59O1xuXG5zbWFzaC5jb25maWcuZ2V0ID0gZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgdmFyIG8gPSAnXycgKyBvcHRpb24gKyAnXyc7XG4gICAgaWYgKG8gaW4gc21hc2guY29uZmlnLl92YWx1ZXNfKSB7XG4gICAgICAgIHJldHVybiBzbWFzaC5jb25maWcuX3ZhbHVlc19bb107XG4gICAgfVxuICAgIHRocm93IG5ldyBzbWFzaC5FeGNlcHRpb24oJzAwMScsICdJbnZhbGlkIGNvbmZpZyBvcHRpb24gXCInICsgb3B0aW9uICsgJ1wiJyk7XG59O1xuXG5zbWFzaC5jb25maWcuc2V0ID0gZnVuY3Rpb24ob3B0aW9uLCB2YWx1ZSkge1xuICAgIHZhciBvID0gJ18nICsgb3B0aW9uICsgJ18nO1xuICAgIGlmICghbyBpbiBzbWFzaC5jb25maWcuX3ZhbHVlc18pIHtcbiAgICAgICAgdGhyb3cgbmV3IHNtYXNoLkV4Y2VwdGlvbignMDAxJywgJ0ludmFsaWQgY29uZmlnIG9wdGlvbiBcIicgKyBvcHRpb24gKyAnXCInKTtcbiAgICB9XG4gICAgc21hc2guY29uZmlnLl92YWx1ZXNfW29dID0gdmFsdWU7XG4gICAgc21hc2guc3RvcmFnZS5zZXQoJ2NvbmZpZycsIHNtYXNoLmNvbmZpZy5fdmFsdWVzXyk7XG59O1xuIiwic21hc2guZGlhbG9nID0ge307XG5cbnNtYXNoLmRpYWxvZy5uZXcgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgdmFyIGJhY2tkcm9wID0gc21hc2guZGlhbG9nLmNoZWNrQmFja2Ryb3AoKTtcblxuICAgIHZhciBkaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaWFsb2cuY2xhc3NOYW1lID0gJ3NtYXNoLWRpYWxvZyc7XG4gICAgZGlhbG9nLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgYmFja2Ryb3AuYXBwZW5kQ2hpbGQoZGlhbG9nKTtcbn07XG5cbnNtYXNoLmRpYWxvZy5jaGVja0JhY2tkcm9wID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGJhY2tkcm9wID0gc21hc2guZ2V0KGRvY3VtZW50LCBcIi5zbWFzaC1kaWFsb2ctYmFja2Ryb3BcIikpIHtcbiAgICAgICAgaWYgKGRpYWxvZyA9IHNtYXNoLmdldChkb2N1bWVudCwgXCIuc21hc2gtZGlhbG9nLWJhY2tkcm9wIC5zbWFzaC1kaWFsb2dcIikpIHtcbiAgICAgICAgICAgIGJhY2tkcm9wLnJlbW92ZUNoaWxkKGRpYWxvZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhY2tkcm9wO1xuICAgIH1cbiAgICB2YXIgYmFja2Ryb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBiYWNrZHJvcC5jbGFzc05hbWUgPSAnc21hc2gtZGlhbG9nLWJhY2tkcm9wJztcbiAgICBiYWNrZHJvcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cInNtYXNoLWRpYWxvZy1iYWNrZ3JvdW5kXCI+PC9kaXY+JztcbiAgICBzbWFzaC5nZXQoYmFja2Ryb3AsICcuc21hc2gtZGlhbG9nLWJhY2tncm91bmQnKS5vbmNsaWNrID0gc21hc2guZGlhbG9nLmNsb3NlO1xuICAgIHNtYXNoLmdldChkb2N1bWVudCwgJ2JvZHknKS5hcHBlbmRDaGlsZChiYWNrZHJvcCk7XG4gICAgcmV0dXJuIGJhY2tkcm9wO1xufTtcblxuc21hc2guZGlhbG9nLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGRpYWxvZyA9IHNtYXNoLmdldChkb2N1bWVudCwgXCIuc21hc2gtZGlhbG9nLWJhY2tkcm9wXCIpKSB7XG4gICAgICAgIHNtYXNoLmdldChkb2N1bWVudCwgJ2JvZHknKS5yZW1vdmVDaGlsZChkaWFsb2cpO1xuICAgIH1cbn07XG4iLCJzbWFzaC5FeGNlcHRpb24gPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnU21hc2hFeGNlcHRpb24gJyArIHRoaXMudmFsdWUgKyAnOiAnICsgdGhpcy5tZXNzYWdlO1xuICAgIH07XG59O1xuIiwic21hc2guaW5wdXQgPSB7fTtcblxuc21hc2guaW5wdXQuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtYXNoLWlucHV0IGlucHV0LCAuc21hc2gtdGV4dGFyZWEgdGV4dGFyZWFcIik7XG4gICAgdmFyIGlucHV0O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlucHV0ID0gaW5wdXRzW2ldO1xuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKGlucHV0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaW5wdXQub25rZXl1cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKGlucHV0LnBhcmVudEVsZW1lbnQsICdmbG9hdGluZy1sYWJlbCcpO1xuXG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gaW5wdXQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGwsICdzaG93Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChpbnB1dC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKTtcbiAgICB9XG4gICAgdmFyIHNlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtYXNoLXNlbGVjdCBzZWxlY3RcIik7XG4gICAgdmFyIHNlbGVjdDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2VsZWN0ID0gc2VsZWN0c1tpXTtcbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhzZWxlY3QucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdoYXMtZmxvYXRpbmctbGFiZWwnKSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnaGFzLWZsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUodGhpcywgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgICAgICB2YXIgb2xkID0gc2VsZWN0LnZhbHVlO1xuICAgICAgICAgICAgc2VsZWN0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoc2VsZWN0LnNlbGVjdGVkSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgaW5wdXQub25mb2N1cygpO1xuICAgICAgICAgICAgaWYgKG9sZCAhPSB2YWx1ZSAmJiBzZWxlY3Qub25jaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Qub25jaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5nZXRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3Quc2VsZWN0ZWRJbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdC5vcHRpb25zW3NlbGVjdC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBpbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gc2VsZWN0LmdldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgXCJyZWFkb25seVwiKTtcbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuXG4gICAgICAgIHZhciBvcHRpb25zID0gc2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJvcHRpb25cIik7XG4gICAgICAgIHZhciB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb3B0aW9ucy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IG9wdGlvbnNbal07XG4gICAgICAgICAgICBpZiAoIW9wdGlvbi5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBvcHRpb24udmFsdWUpO1xuICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gb3B0aW9uLmlubmVySFRNTDtcbiAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGxpKTtcbiAgICAgICAgICAgIGxpLm9ubW91c2Vkb3duID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKHRoaXMuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNlZG93biA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodWwpO1xuICAgICAgICBpbnB1dC5vbmZvY3VzID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIGwgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsXCIpO1xuICAgICAgICAgICAgaWYgKGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKHRoaXMsICdpcy1mb2N1c3NlZCcpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXM7XG4gICAgICAgICAgICB3aW5kb3cub25tb3VzZWRvd24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNsaWNrIG91dHNpZGVcIik7XG4gICAgICAgICAgICAgICAgd2luZG93Lm9ubW91c2Vkb3duID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoc2VsZWN0LCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHNlbGVjdC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkge1xuICAgICAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUoc2VsZWN0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpO1xuICAgIH1cbiAgICBzbWFzaC5pbnB1dC5jaGVja2JveEluaXQoKTtcbn07XG5cbnNtYXNoLmlucHV0LmNoZWNrYm94SW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbWFzaC1jaGVja2JveCBpbnB1dFwiKTtcbiAgICB2YXIgY2hlY2tib3g7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGVja2JveGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNoZWNrYm94ID0gY2hlY2tib3hlc1tpXTtcbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhjaGVja2JveC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYyA9ICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIGMuY2xhc3NOYW1lID0gJ2NoZWNrcyc7XG4gICAgICAgIGMuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5jaGVja19ib3hfb3V0bGluZV9ibGFuazwvaT48aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNoZWNrZWRcIj5jaGVja19ib3g8L2k+JztcbiAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChjKTtcblxuICAgICAgICBpZiAobGFiZWwgPSBjaGVja2JveC5nZXRBdHRyaWJ1dGUoJ2xhYmVsJykpIHtcbiAgICAgICAgICAgIHZhciBsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgbC5jbGFzc05hbWUgPSAnbGFiZWwnO1xuICAgICAgICAgICAgbC5pbm5lckhUTUwgPSBsYWJlbDtcbiAgICAgICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobCk7XG4gICAgICAgIH1cbiAgICAgICAgc21hc2guY2xhc3MuYWRkKGNoZWNrYm94LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpO1xuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gc21hc2guY2xhc3MuaGFzKGNoZWNrYm94LnBhcmVudEVsZW1lbnQsICdjaGVja2VkJyk7XG5cbiAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy50b2dnbGUodGhpcywgJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgIHNtYXNoLmdldCh0aGlzLCAnaW5wdXQnKS5jaGVja2VkID0gc21hc2guY2xhc3MuaGFzKHRoaXMsICdjaGVja2VkJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5nZXRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNtYXNoLmNsYXNzLmhhcyh0aGlzLCAnY2hlY2tlZCcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyh0aGlzLCAnY2hlY2tlZCcpID09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbmNsaWNrKCk7XG4gICAgICAgIH07XG4gICAgfVxufTtcbiIsInNtYXNoLnJvdXRlciA9IHtcbiAgICBfX3BhcnNlUm91dGVSZWdleDogL3soLio/KX0vaWcsXG4gICAgX19keW5hbWljUGFydHM6IFtdLFxuICAgIF9fcm91dGVzOiB7XG4gICAgICAgIHN0YXRpYzogW10sXG4gICAgICAgIGR5bmFtaWM6IFtdXG4gICAgfVxufTtcblxuc21hc2gucm91dGVyLmFkZCA9IGZ1bmN0aW9uKHBhdGgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHJvdXRlID0gc21hc2gucm91dGVyLnBhcnNlUm91dGUocGF0aCk7XG4gICAgaWYgKHJvdXRlLnJlZ2V4KSB7XG4gICAgICAgIHJvdXRlLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIGlmICghc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdKSB7XG4gICAgICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXVtyb3V0ZS5udW1WYXJzXSkge1xuICAgICAgICAgICAgc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdLnB1c2gocm91dGUpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5zdGF0aWNbcGF0aF0gPSBjYWxsYmFjaztcbn07XG5cbnNtYXNoLnJvdXRlci5zZXQgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIHNtYXNoLnJvdXRlci5kaXNwbGF5VVJMKHJvdXRlKTtcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3BvcHN0YXRlJykpO1xufTtcblxuc21hc2gucm91dGVyLmRpc3BsYXlVUkwgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShcIlwiLCBcIlwiLCByb3V0ZSk7XG59O1xuXG5zbWFzaC5yb3V0ZXIucmVkaXJlY3QgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIHdpbmRvdy5sb2NhdGlvbiA9IHJvdXRlO1xufTtcblxuc21hc2gucm91dGVyLmhhbmRsZU5vdEZvdW5kID0gZnVuY3Rpb24ocm91dGUpIHtcbiAgICBjb25zb2xlLmxvZyhcInJvdXRlOiBcIiArIEpTT04uc3RyaW5naWZ5KHJvdXRlKSArIFwiIGRvZXMgbm90IGV4aXN0XCIpO1xufTtcblxuc21hc2gucm91dGVyLnJ1biA9IGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5vbnBvcHN0YXRlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgc21hc2gucm91dGVyLmV4ZWN1dGUoKTtcbiAgICB9O1xuICAgIHNtYXNoLnJvdXRlci5leGVjdXRlKCk7XG59XG5cbnNtYXNoLnJvdXRlci5leGVjdXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBhdGggPSB0aGlzLmdldFBhdGgoKTtcbiAgICBpZiAodGhpcy5fX3JvdXRlcy5zdGF0aWNbcGF0aC5wYXRoXSkge1xuICAgICAgICB0aGlzLl9fcm91dGVzLnN0YXRpY1twYXRoLnBhdGhdKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGRlcHRoID0gcGF0aC5wYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGgtMTtcbiAgICBpZiAodGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXSkge1xuICAgICAgICB2YXIgcm91dGU7XG4gICAgICAgIHZhciBtYXRjaGVzO1xuICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICBmb3IgKHZhciB2YXJOdW0gaW4gdGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdW3Zhck51bV0pIHtcbiAgICAgICAgICAgICAgICB2YXIgcm91dGUgPSB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdW3Zhck51bV1baXRlbV07XG4gICAgICAgICAgICAgICAgbWF0Y2hlcyA9IHBhdGgucGF0aC5tYXRjaChyb3V0ZS5yZWdleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8cm91dGUubnVtVmFyczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbcm91dGUudmFyc1tpXV0gPSBtYXRjaGVzW2krMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJvdXRlLmNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzbWFzaC5yb3V0ZXIuaGFuZGxlTm90Rm91bmQocGF0aCk7XG59O1xuXG5zbWFzaC5yb3V0ZXIuZ2V0UGF0aCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgbC5ocmVmID0gd2luZG93LmxvY2F0aW9uO1xuICAgIHJldHVybiB7aG9zdDogbC5ob3N0bmFtZSwgcGF0aDogbC5wYXRobmFtZX07XG59O1xuXG5zbWFzaC5yb3V0ZXIucGFyc2VSb3V0ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBpZiAocGF0aC5zdWJzdHJpbmcoMCwxKSAhPSBcIi9cIikge1xuICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoO1xuICAgIH1cbiAgICBpZiAocGF0aC5zdWJzdHJpbmcocGF0aC5sZW5ndGgtMikgPT0gXCIvXCIpIHtcbiAgICAgICAgcGF0aCA9IFwiL1wiICsgcGF0aDtcbiAgICB9XG4gICAgdmFyIHJvdXRlID0ge1xuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICBkZXB0aDogKHBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aCAtIDEpLFxuICAgICAgICB2YXJzOiBbXSxcbiAgICAgICAgbnVtVmFyczogMFxuICAgIH07XG4gICAgc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzID0gcGF0aC5tYXRjaChzbWFzaC5yb3V0ZXIuX19wYXJzZVJvdXRlUmVnZXgpO1xuICAgIGlmIChzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMgIT0gdW5kZWZpbmVkICYmIHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cyAhPSBudWxsKSB7XG4gICAgICAgIHZhciByZWdleCA9IFwiXlwiICsgcGF0aC5yZXBsYWNlKC9cXC8vaWcsIFwiXFxcXC9cIikgKyBcIiRcIjtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcm91dGUubnVtVmFycysrO1xuICAgICAgICAgICAgcm91dGUudmFycy5wdXNoKHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0c1tpXS5zdWJzdHJpbmcoMSwgc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzW2ldLmxlbmd0aC0xKSk7XG4gICAgICAgICAgICByZWdleCA9IHJlZ2V4LnJlcGxhY2Uoc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzW2ldLCBcIiguKj8pXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJvdXRlLnJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleCwgJ2knKTtcbiAgICB9XG4gICAgcmV0dXJuIHJvdXRlO1xufTtcblxuc21hc2gucm91dGVyLnF1ZXJ5UGFyYW0gPSBmdW5jdGlvbihwYXJhbSkge1xuICAgIHZhciByZWdleFMgPSBcIltcXFxcPyZdXCIrcGFyYW0rXCI9KFteJiNdKilcIixcbiAgICByZWdleCA9IG5ldyBSZWdFeHAoIHJlZ2V4UyApLFxuICAgIHJlc3VsdHMgPSByZWdleC5leGVjKCB3aW5kb3cubG9jYXRpb24uc2VhcmNoICk7XG4gICAgaWYoIHJlc3VsdHMgPT0gbnVsbCApe1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0c1sxXTsvL2RlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzFdLnJlcGxhY2UoL1xcKy9nLCBcIiBcIikpO1xufTtcbiIsInNtYXNoLnNlYXJjaGJveCA9IHtcbiAgICBpXzogZmFsc2UsXG4gICAgbWluQXV0b0NvbXBsZXRlTGVuZ3RoOiAzLFxuICAgIG9uZm9jdXM6IHVuZGVmaW5lZCxcbiAgICBvbmJsdXI6IHVuZGVmaW5lZCxcbiAgICBvbnZhbHVlOiB1bmRlZmluZWQsXG59O1xuXG5zbWFzaC5zZWFyY2hib3guaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChzbWFzaC5zZWFyY2hib3guaV8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc3NiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggaW5wdXRcIik7XG4gICAgaWYgKCFzc2IpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzc2Iub25mb2N1cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94LnJlc3VsdHMoJzxkaXYgY2xhc3M9XCJzbWFzaC1pbnN0cnVjdGlvblwiPlN0YXJ0IHR5cGluZyB0byBmaW5kIHJlc3VsdHM8L2Rpdj4nKTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1oZWFkZXJcIiksICdpcy1mb2N1c3NlZCcpO1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpLCAnc2hvdycpO1xuICAgICAgICBpZiAoc21hc2guc2VhcmNoYm94Lm9uZm9jdXMpIHtcbiAgICAgICAgICAgIHNtYXNoLnNlYXJjaGJveC5vbmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNzYi5vbmJsdXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtaGVhZGVyXCIpLCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2VhcmNoYm94IC5zbWFzaC1zZWFyY2hib3gtcmVzdWx0c1wiKSwgJ3Nob3cnKTtcbiAgICAgICAgaWYgKHNtYXNoLnNlYXJjaGJveC5vbmJsdXIpIHtcbiAgICAgICAgICAgIHNtYXNoLnNlYXJjaGJveC5vbmJsdXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc3NiLm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA8IHNtYXNoLnNlYXJjaGJveC5taW5BdXRvQ29tcGxldGVMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc21hc2guc2VhcmNoYm94Lm9uY2hhbmdlKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gub25jaGFuZ2UodGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNtYXNoLnNlYXJjaGJveC5pXyA9IHRydWU7XG59O1xuXG5zbWFzaC5zZWFyY2hib3gucmVzdWx0cyA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2VhcmNoYm94IC5zbWFzaC1zZWFyY2hib3gtcmVzdWx0c1wiKTtcbiAgICByZXN1bHRzLmlubmVySFRNTCA9IGNvbnRlbnQ7XG59O1xuIiwic21hc2guc2lkZWJhciA9IHtcbiAgICBpXzogZmFsc2Vcbn07XG5cbnNtYXNoLnNpZGViYXIuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChzbWFzaC5zaWRlYmFyLmlfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHNpYmwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXIgLmxvY2tcIik7XG4gICAgaWYgKCFzaWJsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2libC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNtYXNoLnNpZGViYXIudG9nZ2xlTG9jaygpO1xuICAgIH07XG5cbiAgICB2YXIgc2liID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyXCIpO1xuICAgIHNtYXNoLmNsYXNzLmFkZChzaWIsICdpcy11bmxvY2tlZCcpO1xuICAgIHNtYXNoLnNpZGViYXIuaV8gPSB0cnVlO1xuICAgIGlmIChzbWFzaC5jb25maWcuZ2V0KCdzaWRlYmFyX2xvY2snKSkge1xuICAgICAgICBzbWFzaC5zaWRlYmFyLnRvZ2dsZUxvY2soKTtcbiAgICB9XG59O1xuXG5zbWFzaC5zaWRlYmFyLnRvZ2dsZUxvY2sgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXNtYXNoLnNpZGViYXIuaV8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzbWFzaC5jbGFzcy50b2dnbGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyIC5sb2NrXCIpLCAndW5sb2NrJyk7XG4gICAgc21hc2guY2xhc3MudG9nZ2xlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhclwiKSwgJ2lzLXVubG9ja2VkJyk7XG4gICAgc21hc2guY29uZmlnLnNldCgnc2lkZWJhcl9sb2NrJywgIXNtYXNoLmNsYXNzLmhhcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXJcIiksICdpcy11bmxvY2tlZCcpKTtcbn07XG4iLCJzbWFzaC5zdG9yYWdlID0ge307XG5cbnNtYXNoLnN0b3JhZ2Uuc2V0ID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbn07XG5cbnNtYXNoLnN0b3JhZ2UudW5zZXQgPSBmdW5jdGlvbihrZXkpIHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xufTtcblxuc21hc2guc3RvcmFnZS5nZXQgPSBmdW5jdGlvbihrZXkpIHtcbiAgICB2YXIgaSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgaWYgKCFpKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnBhcnNlKGkpO1xufTtcblxuc21hc2guc3RvcmFnZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xufTtcbiIsInNtYXNoLndvcmtzcGFjZSA9IHtcbiAgICBiYXNlVGl0bGU6IHVuZGVmaW5lZCxcbiAgICBfd3NfOiB1bmRlZmluZWQsXG4gICAgX2hkcl86IHVuZGVmaW5lZCxcbiAgICBfc2JfOiB1bmRlZmluZWQsXG4gICAgX3RhYnNfOiBbXVxufTtcblxuc21hc2gud29ya3NwYWNlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBzbWFzaC53b3Jrc3BhY2UuX3dzXyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtd29ya3NwYWNlXCIpO1xuICAgIGlmICghc21hc2gud29ya3NwYWNlLl93c18pIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHNtYXNoLndvcmtzcGFjZS5faGRyXyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtaGVhZGVyXCIpO1xuICAgIGlmIChzbWFzaC53b3Jrc3BhY2UuX2hkcl8pIHtcbiAgICAgICAgc21hc2guY2xhc3MuYWRkKHNtYXNoLndvcmtzcGFjZS5fd3NfLCAnaGFzLWhlYWRlcicpO1xuICAgIH1cbiAgICBzbWFzaC53b3Jrc3BhY2UuX3NiXyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtd29ya3NwYWNlIC5zbWFzaC1zaWRlYmFyXCIpO1xuICAgIGlmIChzbWFzaC53b3Jrc3BhY2UuX3NiXykge1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc21hc2gud29ya3NwYWNlLl93c18sICdoYXMtc2lkZWJhcicpO1xuICAgIH1cbn07XG5cbnNtYXNoLndvcmtzcGFjZS5hZGRUYWIgPSBmdW5jdGlvbihpZCwgdGl0bGUsIGNvbnRlbnQsIHVybCkge1xuICAgIGlmICghc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXRhYi1wYW5lJykpIHtcbiAgICAgICAgdmFyIHBhbmVsID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVsJyk7XG4gICAgICAgIGlmICghcGFuZWwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUbyBhZGQgYSB0YWIgdGhlcmUgbmVlZHMgdG8gYmUgYSBwYW5lbCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHBhbmVsLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwic21hc2gtdGFiLXBhbmVcIj48ZGl2IGNsYXNzPVwic21hc2gtdGFic1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJzbWFzaC1wYW5lc1wiPjwvZGl2PjwvZGl2Pic7XG4gICAgfVxuICAgIHZhciB0YWJzID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXRhYi1wYW5lIC5zbWFzaC10YWJzJyk7XG4gICAgdmFyIHBhbmVzQ29udGFpbmVyID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXRhYi1wYW5lIC5zbWFzaC1wYW5lcycpO1xuXG4gICAgZG9jdW1lbnQudGl0bGUgPSBzbWFzaC53b3Jrc3BhY2UuY3JlYXRlVGl0bGUodGl0bGUpO1xuXG4gICAgaWYgKHRhYiA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYltkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpKSB7XG4gICAgICAgIHZhciBwYW5lID0gc21hc2guZ2V0KHBhbmVzQ29udGFpbmVyLCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyBpZCArICdcIl0nKTtcbiAgICAgICAgcGFuZS5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgICAgICB0YWIuZGF0YXNldC51cmwgPSB1cmw7XG4gICAgICAgIHRhYi5vbmNsaWNrKCk7XG4gICAgICAgIHJldHVybiB7dGFiOiB0YWIsIHBhbmU6IHBhbmV9O1xuICAgIH1cblxuICAgIHNtYXNoLmhpZGUocGFuZXNDb250YWluZXIsIFwiLnNtYXNoLXBhbmVcIik7XG4gICAgaWYgKGFjdGl2ZSA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYi5hY3RpdmUnKSkge1xuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoYWN0aXZlLCAnYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHRhYlxuICAgIHZhciB0YWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRhYi5jbGFzc05hbWUgPSAnc21hc2gtdGFiIGFjdGl2ZSc7XG4gICAgdGFiLmRhdGFzZXQuaWQgPSBpZDtcbiAgICB0YWIuZGF0YXNldC51cmwgPSB1cmw7XG4gICAgdGFiLmlubmVySFRNTCA9IHRpdGxlICsgJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2xvc2VcIj5jbG9zZTwvaT4nO1xuICAgIHRhYi5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoYWN0aXZlID0gc21hc2guZ2V0KHRhYnMsICcuc21hc2gtdGFiLmFjdGl2ZScpKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoYWN0aXZlLCAnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgc21hc2guY2xhc3MuYWRkKHRoaXMsICdhY3RpdmUnKTtcbiAgICAgICAgc21hc2guaGlkZShkb2N1bWVudCwgJy5zbWFzaC1wYW5lJyk7XG4gICAgICAgIHNtYXNoLnNob3coZG9jdW1lbnQsICcuc21hc2gtcGFuZVtkYXRhLWlkPVwiJyArIHRoaXMuZGF0YXNldC5pZCArICdcIl0nKTtcbiAgICAgICAgaWYgKHRoaXMuZGF0YXNldC51cmwgJiYgdGhpcy5kYXRhc2V0LnVybCAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBzbWFzaC5yb3V0ZXIuZGlzcGxheVVSTCh0aGlzLmRhdGFzZXQudXJsKTtcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudC50aXRsZSA9IHNtYXNoLndvcmtzcGFjZS5jcmVhdGVUaXRsZSh0aGlzLmlubmVySFRNTCk7XG4gICAgfTtcbiAgICBzbWFzaC5vbih0YWIsICcuY2xvc2UnLCAnb25jbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyh0aGlzLnBhcmVudEVsZW1lbnQsICdhY3RpdmUnKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50RWxlbWVudC5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQucHJldmlvdXNTaWJsaW5nLm9uY2xpY2soKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wYXJlbnRFbGVtZW50Lm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm5leHRTaWJsaW5nLm9uY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFuZSA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC1wYW5lW2RhdGEtaWQ9XCInICsgdGhpcy5wYXJlbnRFbGVtZW50LmRhdGFzZXQuaWQgKyAnXCJdJykpIHtcbiAgICAgICAgICAgIHBhbmUucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChwYW5lKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLnBhcmVudEVsZW1lbnQpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICAgIHRhYnMuYXBwZW5kQ2hpbGQodGFiKTtcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBwYW5lIHdpdGggdGhlIHByb3ZpZGVkIGNvbnRlbnRcbiAgICB2YXIgcGFuZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcGFuZS5jbGFzc05hbWUgPSAnc21hc2gtcGFuZSc7XG4gICAgcGFuZS5kYXRhc2V0LmlkID0gaWQ7XG4gICAgcGFuZS5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgIHBhbmVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHBhbmUpO1xuICAgIHJldHVybiB7dGFiOiB0YWIsIHBhbmU6IHBhbmV9O1xufTtcblxuc21hc2gud29ya3NwYWNlLmFjdGl2ZVRhYiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0YWIgPSBzbWFzaC5nZXQodGFicywgJy5zbWFzaC10YWIuYWN0aXZlJylcbiAgICBpZiAoIXRhYikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIHBhbmUgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtcGFuZVtkYXRhLWlkPVwiJyArIHRhYi5kYXRhc2V0LmlkICsgJ1wiXScpO1xuICAgIGlmICghcGFuZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHt0YWI6IHRhYiwgcGFuZTogcGFuZX07XG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuY3JlYXRlVGl0bGUgPSBmdW5jdGlvbih0aXRsZSkge1xuICAgIHJldHVybiB0aXRsZS5yZXBsYWNlKC88KFtePl0rPykoW14+XSo/KT4oLio/KTxcXC9cXDE+L2lnLCBcIlwiKSArIChzbWFzaC53b3Jrc3BhY2UuYmFzZVRpdGxlID8gJyB8ICcgKyBzbWFzaC53b3Jrc3BhY2UuYmFzZVRpdGxlIDogXCJcIilcbn07XG4iXX0=
