window.addEventListener("load",function(s){smash.init()},!1);var smash={};smash.init=function(){smash.config.init(),smash.sidebar.init(),smash.searchbox.init(),smash.workspace.init(),smash.input.init()},smash.get=function(s,e){try{return s.querySelector(e)}catch(s){console.log(s)}},smash.getAll=function(s,e){try{return s.querySelectorAll(e)}catch(s){console.log(s)}},smash.hide=function(s,e){for(var a=smash.getAll(s,e),t=0;t<a.length;t++)a[t].style.display="none"},smash.show=function(s,e){for(var a=smash.getAll(s,e),t=0;t<a.length;t++)a[t].style.display=""},smash.on=function(s,e,a,t){for(var n=smash.getAll(s,e),o=0;o<n.length;o++)n[o][a]=t},smash.ajax={_headers_:[]},smash.ajax.addHeader=function(s,e){smash.ajax._headers_[s]=e},smash.ajax.removeHeader=function(s){delete smash.ajax._headers_[s]},smash.ajax._xhr_=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var s,e=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],a=0;a<e.length;a++)try{s=new ActiveXObject(e[a]);break}catch(s){}return s},smash.ajax.send=function(s,e,a,t,n,o){void 0===o&&(o=!0);var r=smash.ajax._xhr_();r.responseType=n,r.onreadystatechange=function(){4==r.readyState&&(200==r.status||201==r.status?e&&e(r.response):console.log(r.status,r.response))},r.open(a,s,o),"json"==n?r.setRequestHeader("Content-type","application/json"):"POST"==a&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var i in smash.ajax._headers_)r.setRequestHeader(i,smash.ajax._headers_[i]);r.send(t)},smash.ajax.get=function(s,e,a,t,n){var o=[];for(var r in a)o.push(encodeURIComponent(r)+"="+encodeURIComponent(a[r]));smash.ajax.send(s+(o.length?"?"+o.join("&"):""),e,"GET",null,t,n)},smash.ajax.post=function(s,e,a,t,n){var o;if(a)if("json"!=t){var r=[];for(var i in a)r.push(encodeURIComponent(i)+"="+encodeURIComponent(a[i]));o=r.join("&")}else o=JSON.stringify(a);smash.ajax.send(s,e,"POST",o,t,n)},smash.class={},smash.class.add=function(s,e){smash.class.has(s,e)||(s.classList?s.classList.add(e):s.className+=" "+e)},smash.class.remove=function(s,e){smash.class.has(s,e)&&(s.classList?s.classList.remove(e):s.className=s.className.replace(e,""))},smash.class.has=function(s,e){return(" "+s.className+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1},smash.class.toggle=function(s,e){smash.class.has(s,e)?smash.class.remove(s,e):smash.class.add(s,e)},smash.config={_values_:{_sidebar_lock_:!1}},smash.config.init=function(){var s=smash.storage.get("config");s&&(smash.config._values_=s)},smash.config.get=function(s){var e="_"+s+"_";if(e in smash.config._values_)return smash.config._values_[e];throw new smash.Exception("001",'Invalid config option "'+s+'"')},smash.config.set=function(s,e){var a="_"+s+"_";if(!a in smash.config._values_)throw new smash.Exception("001",'Invalid config option "'+s+'"');smash.config._values_[a]=e,smash.storage.set("config",smash.config._values_)},smash.dialog={},smash.dialog.new=function(s){var e=smash.dialog.checkBackdrop(),a=document.createElement("div");a.className="smash-dialog",a.innerHTML=s,e.appendChild(a)},smash.dialog.checkBackdrop=function(){if(s=smash.get(document,".smash-dialog-backdrop"))return(dialog=smash.get(document,".smash-dialog-backdrop .smash-dialog"))&&s.removeChild(dialog),s;var s=document.createElement("div");return s.className="smash-dialog-backdrop",s.innerHTML='<div class="smash-dialog-background"></div>',smash.get(s,".smash-dialog-background").onclick=smash.dialog.close,smash.get(document,"body").appendChild(s),s},smash.dialog.close=function(){(dialog=smash.get(document,".smash-dialog-backdrop"))&&smash.get(document,"body").removeChild(dialog)},smash.Exception=function(s,e){this.value=s,this.message=e,this.toString=function(){return"SmashException "+this.value+": "+this.message}},smash.input={},smash.input.init=function(){for(var s,e=document.querySelectorAll(".smash-input input, .smash-textarea textarea"),a=0;a<e.length;a++)if(s=e[a],!smash.class.has(s.parentElement,"smash-initialised")){if(s.parentElement.setValue=function(e){(s=this.querySelector("input"))?(s.value=e,s.onkeyup()):(s=this.querySelector("textarea"))&&(s.value=e,s.onkeyup())},s.parentElement.getValue=function(){if(s=this.querySelector("input")){var s=this.querySelector("input");return s.value}if(s=this.querySelector("textarea")){var s=this.querySelector("input");return s.value}return null},smash.class.has(s.parentElement,"has-floating-label")){smash.class.remove(s.parentElement,"has-floating-label"),smash.class.add(s.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=s.placeholder,s.parentElement.appendChild(t),s.onkeyup=function(s){var e=this.parentElement.querySelector("label");e&&(""!=this.value?smash.class.add(e,"show"):smash.class.remove(e,"show"))}}s.parentElement.getAttribute("value")&&s.parentElement.setValue(s.parentElement.getAttribute("value")),smash.class.add(s.parentElement,"smash-initialised")}for(var n,o=document.querySelectorAll(".smash-select select"),a=0;a<o.length;a++)if(n=o[a],!smash.class.has(n.parentElement,"smash-initialised")){if(smash.class.has(n.parentElement,"has-floating-label")){smash.class.remove(n.parentElement,"has-floating-label"),smash.class.add(n.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=n.getAttribute("placeholder"),n.parentElement.appendChild(t)}n.parentElement.setValue=function(s){smash.class.remove(this,"is-focussed");var e=this.querySelector("select"),a=this.querySelector("input"),t=e.value;e.value=s,e.selectedIndex>-1&&(a.value=e.options[e.selectedIndex].text),a.focus(),a.onfocus(),t!=s&&e.onchange&&e.onchange()},n.parentElement.getValue=function(){var s=this.querySelector("select");return s.selectedIndex==-1?null:s.options[s.selectedIndex].value};var s=document.createElement("input");s.type="text",s.placeholder=n.getAttribute("placeholder"),s.setAttribute("readonly","readonly"),n.parentElement.appendChild(s);for(var r=n.querySelectorAll("option"),i=document.createElement("ul"),h=0;h<r.length;h++){var c=r[h];if(c.getAttribute("value")){var l=document.createElement("li");l.setAttribute("value",c.value),l.innerHTML=c.innerHTML,i.appendChild(l),l.onmousedown=function(s){this.parentElement.parentElement.setValue(this.getAttribute("value")),s.stopPropagation(),window.onmousedown=null}}}n.parentElement.appendChild(i),s.onfocus=function(s){var e=this.parentElement.querySelector("label");e&&(""!=this.value?smash.class.add(e,"show"):smash.class.remove(e,"show"))},n.parentElement.onclick=function(){smash.class.add(this,"is-focussed");var s=this;window.onmousedown=function(){console.log("click outside"),window.onmousedown=null,smash.class.remove(s,"is-focussed")}},n.parentElement.getAttribute("value")&&n.parentElement.setValue(n.parentElement.getAttribute("value")),smash.class.add(n.parentElement,"smash-initialised")}},smash.router={__parseRouteRegex:/{(.*?)}/gi,__dynamicParts:[],__routes:{static:[],dynamic:[]}},smash.router.add=function(s,e){var a=smash.router.parseRoute(s);return a.regex?(a.callback=e,smash.router.__routes.dynamic[a.depth]||(smash.router.__routes.dynamic[a.depth]=[]),smash.router.__routes.dynamic[a.depth][a.numVars]||(smash.router.__routes.dynamic[a.depth][a.numVars]=[]),void smash.router.__routes.dynamic[a.depth][a.numVars].push(a)):void(smash.router.__routes.static[s]=e)},smash.router.set=function(s){smash.router.displayURL(s),window.dispatchEvent(new Event("popstate"))},smash.router.displayURL=function(s){window.history.pushState("","",s)},smash.router.redirect=function(s){window.location=s},smash.router.handleNotFound=function(s){console.log("route: "+JSON.stringify(s)+" does not exist")},smash.router.run=function(){window.onpopstate=function(s){smash.router.execute()},smash.router.execute()},smash.router.execute=function(){var s=this.getPath();if(this.__routes.static[s.path])return void this.__routes.static[s.path]();var e=s.path.split("/").length-1;if(this.__routes.dynamic[e]){var a,t,n={};for(var o in this.__routes.dynamic[e])for(var r in this.__routes.dynamic[e][o]){var a=this.__routes.dynamic[e][o][r];if(t=s.path.match(a.regex)){for(var i=0;i<a.numVars;i++)n[a.vars[i]]=t[i+1];return void a.callback(n)}}}smash.router.handleNotFound(s)},smash.router.getPath=function(){var s=document.createElement("a");return s.href=window.location,{host:s.hostname,path:s.pathname}},smash.router.parseRoute=function(s){"/"!=s.substring(0,1)&&(s="/"+s),"/"==s.substring(s.length-2)&&(s="/"+s);var e={path:s,depth:s.split("/").length-1,vars:[],numVars:0};if(smash.router.__dynamicParts=s.match(smash.router.__parseRouteRegex),void 0!=smash.router.__dynamicParts&&null!=smash.router.__dynamicParts){for(var a="^"+s.replace(/\//gi,"\\/")+"$",t=0;t<smash.router.__dynamicParts.length;t++)e.numVars++,e.vars.push(smash.router.__dynamicParts[t].substring(1,smash.router.__dynamicParts[t].length-1)),a=a.replace(smash.router.__dynamicParts[t],"(.*?)");e.regex=new RegExp(a,"i")}return e},smash.router.queryParam=function(s){var e="[\\?&]"+s+"=([^&#]*)",a=new RegExp(e),t=a.exec(window.location.search);if(null!=t)return t[1]},smash.searchbox={i_:!1,minAutoCompleteLength:3,onfocus:void 0,onblur:void 0,onvalue:void 0},smash.searchbox.init=function(){if(!smash.searchbox.i_){var s=document.querySelector(".smash-searchbox input");s&&(s.onfocus=function(){0==this.value.length&&smash.searchbox.results('<div class="smash-instruction">Start typing to find results</div>'),smash.class.add(document.querySelector(".smash-header"),"is-focussed"),smash.class.add(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onfocus&&smash.searchbox.onfocus()},s.onblur=function(){smash.class.remove(document.querySelector(".smash-header"),"is-focussed"),smash.class.remove(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onblur&&smash.searchbox.onblur()},s.onkeyup=function(s){this.value.length<smash.searchbox.minAutoCompleteLength||smash.searchbox.onchange&&smash.searchbox.onchange(this.value)},smash.searchbox.i_=!0)}},smash.searchbox.results=function(s){var e=document.querySelector(".smash-searchbox .smash-searchbox-results");e.innerHTML=s},smash.sidebar={i_:!1},smash.sidebar.init=function(){if(!smash.sidebar.i_){var s=document.querySelector(".smash-sidebar .lock");if(s){s.onclick=function(){smash.sidebar.toggleLock()};var e=document.querySelector(".smash-sidebar");smash.class.add(e,"is-unlocked"),smash.sidebar.i_=!0,smash.config.get("sidebar_lock")&&smash.sidebar.toggleLock()}}},smash.sidebar.toggleLock=function(){smash.sidebar.i_&&(smash.class.toggle(document.querySelector(".smash-sidebar .lock"),"unlock"),smash.class.toggle(document.querySelector(".smash-sidebar"),"is-unlocked"),smash.config.set("sidebar_lock",!smash.class.has(document.querySelector(".smash-sidebar"),"is-unlocked")))},smash.storage={},smash.storage.set=function(s,e){localStorage.setItem(s,JSON.stringify(e))},smash.storage.unset=function(s){localStorage.removeItem(s)},smash.storage.get=function(s){var e=localStorage.getItem(s);if(e)return JSON.parse(e)},smash.storage.clear=function(){localStorage.clear()},smash.workspace={baseTitle:void 0,_ws_:void 0,_hdr_:void 0,_sb_:void 0,_tabs_:[]},smash.workspace.init=function(){smash.workspace._ws_=document.querySelector(".smash-workspace"),smash.workspace._ws_&&(smash.workspace._hdr_=document.querySelector(".smash-header"),smash.workspace._hdr_&&smash.class.add(smash.workspace._ws_,"has-header"),smash.workspace._sb_=document.querySelector(".smash-workspace .smash-sidebar"),smash.workspace._sb_&&smash.class.add(smash.workspace._ws_,"has-sidebar"))},smash.workspace.addTab=function(s,e,a,t){if(!smash.get(document,".smash-tab-pane")){var n=smash.get(document,".smash-panel");if(!n)return void console.log("To add a tab there needs to be a panel");n.innerHTML='<div class="smash-tab-pane"><div class="smash-tabs"></div><div class="smash-panes"></div></div>'}var o=smash.get(document,".smash-tab-pane .smash-tabs"),r=smash.get(document,".smash-tab-pane .smash-panes");if(document.title=smash.workspace.createTitle(e),h=smash.get(o,'.smash-tab[data-id="'+s+'"]')){var i=smash.get(r,'.smash-pane[data-id="'+s+'"]');return i.innerHTML=a,h.dataset.url=t,h.onclick(),{tab:h,pane:i}}smash.hide(r,".smash-pane"),(active=smash.get(o,".smash-tab.active"))&&smash.class.remove(active,"active");var h=document.createElement("div");h.className="smash-tab active",h.dataset.id=s,h.dataset.url=t,h.innerHTML=e+'<i class="material-icons close">close</i>',h.onclick=function(s){(active=smash.get(o,".smash-tab.active"))&&smash.class.remove(active,"active"),smash.class.add(this,"active"),smash.hide(document,".smash-pane"),smash.show(document,'.smash-pane[data-id="'+this.dataset.id+'"]'),this.dataset.url&&"undefined"!=this.dataset.url&&smash.router.displayURL(this.dataset.url),document.title=smash.workspace.createTitle(this.innerHTML)},smash.on(h,".close","onclick",function(s){smash.class.has(this.parentElement,"active")&&(this.parentElement.previousSibling?this.parentElement.previousSibling.onclick():this.parentElement.nextSibling&&this.parentElement.nextSibling.onclick()),(i=smash.get(document,'.smash-pane[data-id="'+this.parentElement.dataset.id+'"]'))&&i.parentElement.removeChild(i),this.parentElement.parentElement.removeChild(this.parentElement),s.stopPropagation()}),o.appendChild(h);var i=document.createElement("div");return i.className="smash-pane",i.dataset.id=s,i.innerHTML=a,r.appendChild(i),{tab:h,pane:i}},smash.workspace.activeTab=function(){var s=smash.get(tabs,".smash-tab.active");if(!s)return null;var e=smash.get(document,'.smash-pane[data-id="'+s.dataset.id+'"]');return e?{tab:s,pane:e}:null},smash.workspace.createTitle=function(s){return s.replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/gi,"")+(smash.workspace.baseTitle?" | "+smash.workspace.baseTitle:"")};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNtYXNoLmpzIiwiYWpheC5qcyIsImNsYXNzLmpzIiwiY29uZmlnLmpzIiwiZGlhbG9nLmpzIiwiZXhjZXB0aW9uLmpzIiwiaW5wdXQuanMiLCJyb3V0ZXIuanMiLCJzZWFyY2hib3guanMiLCJzaWRlYmFyLmpzIiwic3RvcmFnZS5qcyIsIndvcmtzcGFjZS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInNtYXNoIiwiaW5pdCIsImNvbmZpZyIsInNpZGViYXIiLCJzZWFyY2hib3giLCJ3b3Jrc3BhY2UiLCJpbnB1dCIsImdldCIsInBhcmVudCIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImNvbnNvbGUiLCJsb2ciLCJnZXRBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGlkZSIsImVsIiwiaSIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsInNob3ciLCJvbiIsImV2ZW50IiwiY2FsbGJhY2siLCJlbGVtZW50cyIsImFqYXgiLCJfaGVhZGVyc18iLCJhZGRIZWFkZXIiLCJuYW1lIiwidmFsdWUiLCJyZW1vdmVIZWFkZXIiLCJfeGhyXyIsIlhNTEh0dHBSZXF1ZXN0IiwieGhyIiwidmVyc2lvbnMiLCJBY3RpdmVYT2JqZWN0Iiwic2VuZCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJyZXNwb25zZVR5cGUiLCJhc3luYyIsInVuZGVmaW5lZCIsIngiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInF1ZXJ5Iiwia2V5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJwb3N0IiwiZGF0YVN0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJjbGFzcyIsImFkZCIsImNsYXNzTmFtZSIsImhhcyIsImNsYXNzTGlzdCIsInJlbW92ZSIsInJlcGxhY2UiLCJpbmRleE9mIiwidG9nZ2xlIiwiX3ZhbHVlc18iLCJfc2lkZWJhcl9sb2NrXyIsInYiLCJzdG9yYWdlIiwib3B0aW9uIiwibyIsIkV4Y2VwdGlvbiIsInNldCIsImRpYWxvZyIsIm5ldyIsImNvbnRlbnQiLCJiYWNrZHJvcCIsImNoZWNrQmFja2Ryb3AiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsInJlbW92ZUNoaWxkIiwib25jbGljayIsImNsb3NlIiwibWVzc2FnZSIsInRoaXMiLCJ0b1N0cmluZyIsImlucHV0cyIsInBhcmVudEVsZW1lbnQiLCJzZXRWYWx1ZSIsIm9ua2V5dXAiLCJnZXRWYWx1ZSIsImxhYmVsIiwicGxhY2Vob2xkZXIiLCJsIiwiZ2V0QXR0cmlidXRlIiwic2VsZWN0Iiwic2VsZWN0cyIsIm9sZCIsInNlbGVjdGVkSW5kZXgiLCJvcHRpb25zIiwidGV4dCIsImZvY3VzIiwib25mb2N1cyIsIm9uY2hhbmdlIiwidHlwZSIsInNldEF0dHJpYnV0ZSIsInVsIiwiaiIsImxpIiwib25tb3VzZWRvd24iLCJzdG9wUHJvcGFnYXRpb24iLCJyb3V0ZXIiLCJfX3BhcnNlUm91dGVSZWdleCIsIl9fZHluYW1pY1BhcnRzIiwiX19yb3V0ZXMiLCJzdGF0aWMiLCJkeW5hbWljIiwicGF0aCIsInJvdXRlIiwicGFyc2VSb3V0ZSIsInJlZ2V4IiwiZGVwdGgiLCJudW1WYXJzIiwiZGlzcGxheVVSTCIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJyZWRpcmVjdCIsImxvY2F0aW9uIiwiaGFuZGxlTm90Rm91bmQiLCJydW4iLCJvbnBvcHN0YXRlIiwiZXhlY3V0ZSIsImdldFBhdGgiLCJzcGxpdCIsIm1hdGNoZXMiLCJ2YXJOdW0iLCJpdGVtIiwibWF0Y2giLCJ2YXJzIiwiaHJlZiIsImhvc3QiLCJob3N0bmFtZSIsInBhdGhuYW1lIiwic3Vic3RyaW5nIiwiUmVnRXhwIiwicXVlcnlQYXJhbSIsInBhcmFtIiwicmVnZXhTIiwicmVzdWx0cyIsImV4ZWMiLCJzZWFyY2giLCJpXyIsIm1pbkF1dG9Db21wbGV0ZUxlbmd0aCIsIm9uYmx1ciIsIm9udmFsdWUiLCJzc2IiLCJzaWJsIiwidG9nZ2xlTG9jayIsInNpYiIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJ1bnNldCIsInJlbW92ZUl0ZW0iLCJnZXRJdGVtIiwicGFyc2UiLCJjbGVhciIsImJhc2VUaXRsZSIsIl93c18iLCJfaGRyXyIsIl9zYl8iLCJfdGFic18iLCJhZGRUYWIiLCJpZCIsInRpdGxlIiwicGFuZWwiLCJ0YWJzIiwicGFuZXNDb250YWluZXIiLCJjcmVhdGVUaXRsZSIsInRhYiIsInBhbmUiLCJkYXRhc2V0IiwiYWN0aXZlIiwicHJldmlvdXNTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJhY3RpdmVUYWIiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFBQyxpQkFBQSxPQUFBLFNBQUFDLEdBQ0FDLE1BQUFDLFNBQ0EsRUFFQSxJQUFBRCxTQUVBQSxPQUFBQyxLQUFBLFdBQ0FELE1BQUFFLE9BQUFELE9BQ0FELE1BQUFHLFFBQUFGLE9BQ0FELE1BQUFJLFVBQUFILE9BQ0FELE1BQUFLLFVBQUFKLE9BQ0FELE1BQUFNLE1BQUFMLFFBR0FELE1BQUFPLElBQUEsU0FBQUMsRUFBQUMsR0FDQSxJQUNBLE1BQUFELEdBQUFFLGNBQUFELEdBQ0EsTUFBQVYsR0FDQVksUUFBQUMsSUFBQWIsS0FLQUMsTUFBQWEsT0FBQSxTQUFBTCxFQUFBQyxHQUNBLElBQ0EsTUFBQUQsR0FBQU0saUJBQUFMLEdBQ0EsTUFBQVYsR0FDQVksUUFBQUMsSUFBQWIsS0FLQUMsTUFBQWUsS0FBQSxTQUFBUCxFQUFBQyxHQUVBLElBQUEsR0FEQU8sR0FBQWhCLE1BQUFhLE9BQUFMLEVBQUFDLEdBQ0FRLEVBQUEsRUFBQUEsRUFBQUQsRUFBQUUsT0FBQUQsSUFDQUQsRUFBQUMsR0FBQUUsTUFBQUMsUUFBQSxRQUlBcEIsTUFBQXFCLEtBQUEsU0FBQWIsRUFBQUMsR0FFQSxJQUFBLEdBREFPLEdBQUFoQixNQUFBYSxPQUFBTCxFQUFB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QUFBTCxFQUNBeUcsRUFBQW5HLFlBQUFzRyxJQUNBRCxJQUFBQSxFQUFBQyxLQUFBQSxJQUdBM0wsTUFBQUssVUFBQTJMLFVBQUEsV0FDQSxHQUFBTixHQUFBMUwsTUFBQU8sSUFBQWdMLEtBQUEsb0JBQ0EsS0FBQUcsRUFDQSxNQUFBLEtBRUEsSUFBQUMsR0FBQTNMLE1BQUFPLElBQUEyRSxTQUFBLHdCQUFBd0csRUFBQUUsUUFBQVIsR0FBQSxLQUNBLE9BQUFPLElBR0FELElBQUFBLEVBQUFDLEtBQUFBLEdBRkEsTUFLQTNMLE1BQUFLLFVBQUFvTCxZQUFBLFNBQUFKLEdBQ0EsTUFBQUEsR0FBQW5ILFFBQUEsa0NBQUEsS0FBQWxFLE1BQUFLLFVBQUF5SyxVQUFBLE1BQUE5SyxNQUFBSyxVQUFBeUssVUFBQSIsImZpbGUiOiJzbWFzaC5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbihlKXtcbiAgICBzbWFzaC5pbml0KCk7XG59LCBmYWxzZSk7XG5cbnZhciBzbWFzaCA9IHt9O1xuXG5zbWFzaC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgc21hc2guY29uZmlnLmluaXQoKTtcbiAgICBzbWFzaC5zaWRlYmFyLmluaXQoKTtcbiAgICBzbWFzaC5zZWFyY2hib3guaW5pdCgpO1xuICAgIHNtYXNoLndvcmtzcGFjZS5pbml0KCk7XG4gICAgc21hc2guaW5wdXQuaW5pdCgpO1xufTtcblxuc21hc2guZ2V0ID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuc21hc2guZ2V0QWxsID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuc21hc2guaGlkZSA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgICB2YXIgZWwgPSBzbWFzaC5nZXRBbGwocGFyZW50LCBzZWxlY3Rvcik7XG4gICAgZm9yICh2YXIgaT0wOyBpPGVsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVsW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxufTtcblxuc21hc2guc2hvdyA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgICB2YXIgZWwgPSBzbWFzaC5nZXRBbGwocGFyZW50LCBzZWxlY3Rvcik7XG4gICAgZm9yICh2YXIgaT0wOyBpPGVsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVsW2ldLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICB9XG59O1xuXG5zbWFzaC5vbiA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IsIGV2ZW50LCBjYWxsYmFjaykge1xuICAgIHZhciBlbGVtZW50cyA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8ZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxlbWVudHNbaV1bZXZlbnRdID0gY2FsbGJhY2s7XG4gICAgfVxufTtcbiIsInNtYXNoLmFqYXggPSB7XG4gICAgX2hlYWRlcnNfOiBbXVxufTtcblxuc21hc2guYWpheC5hZGRIZWFkZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHNtYXNoLmFqYXguX2hlYWRlcnNfW25hbWVdID0gdmFsdWU7XG59O1xuXG5zbWFzaC5hamF4LnJlbW92ZUhlYWRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgc21hc2guYWpheC5faGVhZGVyc19bbmFtZV07XG59O1xuXG5zbWFzaC5hamF4Ll94aHJfID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB9XG4gICAgdmFyIHZlcnNpb25zID0gW1xuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjYuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjUuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjQuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjMuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjIuMFwiLFxuICAgICAgICBcIk1pY3Jvc29mdC5YbWxIdHRwXCJcbiAgICBdO1xuICAgIHZhciB4aHI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJzaW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgeGhyID0gbmV3IEFjdGl2ZVhPYmplY3QodmVyc2lvbnNbaV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geGhyO1xufTtcblxuc21hc2guYWpheC5zZW5kID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2ssIG1ldGhvZCwgZGF0YSwgcmVzcG9uc2VUeXBlLCBhc3luYykge1xuICAgIGlmIChhc3luYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFzeW5jID0gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIHggPSBzbWFzaC5hamF4Ll94aHJfKCk7XG4gICAgeC5yZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGU7XG4gICAgeC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHgucmVhZHlTdGF0ZSA9PSA0KSB7XG5cdFx0XHRpZiAoeC5zdGF0dXMgPT0gMjAwIHx8IHguc3RhdHVzID09IDIwMSkge1xuXHRcdFx0XHRjYWxsYmFjayAmJiBjYWxsYmFjayh4LnJlc3BvbnNlKTtcblx0XHRcdH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coeC5zdGF0dXMsIHgucmVzcG9uc2UpO1xuXHRcdFx0fVxuXHRcdH1cbiAgICB9O1xuICAgIHgub3BlbihtZXRob2QsIHVybCwgYXN5bmMpO1xuICAgIGlmIChyZXNwb25zZVR5cGUgPT0gJ2pzb24nKSB7XG4gICAgICAgIHguc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PSAnUE9TVCcpIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7XG4gICAgfVxuICAgIGZvciAodmFyIG5hbWUgaW4gc21hc2guYWpheC5faGVhZGVyc18pIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHNtYXNoLmFqYXguX2hlYWRlcnNfW25hbWVdKTtcbiAgICB9XG4gICAgeC5zZW5kKGRhdGEpXG59O1xuXG5zbWFzaC5hamF4LmdldCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBkYXRhLCByZXNwb25zZVR5cGUsIGFzeW5jKSB7XG4gICAgdmFyIHF1ZXJ5ID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgICAgcXVlcnkucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW2tleV0pKTtcbiAgICB9XG4gICAgc21hc2guYWpheC5zZW5kKHVybCArIChxdWVyeS5sZW5ndGggPyAnPycgKyBxdWVyeS5qb2luKCcmJykgOiAnJyksIGNhbGxiYWNrLCAnR0VUJywgbnVsbCwgcmVzcG9uc2VUeXBlLCAgYXN5bmMpXG59O1xuXG5zbWFzaC5hamF4LnBvc3QgPSBmdW5jdGlvbiAodXJsLCBjYWxsYmFjaywgZGF0YSwgcmVzcG9uc2VUeXBlLCBhc3luYykge1xuICAgIHZhciBkYXRhU3RyO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICAgIGlmIChyZXNwb25zZVR5cGUgIT0gJ2pzb24nKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW2tleV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGFTdHIgPSBxdWVyeS5qb2luKCcmJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGFTdHIgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzbWFzaC5hamF4LnNlbmQodXJsLCBjYWxsYmFjaywgJ1BPU1QnLCBkYXRhU3RyLCByZXNwb25zZVR5cGUsIGFzeW5jKVxufTtcbiIsInNtYXNoLmNsYXNzID0ge307XG5cbnNtYXNoLmNsYXNzLmFkZCA9IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpIHtcbiAgICBpZiAoIXNtYXNoLmNsYXNzLmhhcyhlbCwgY2xhc3NOYW1lKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QgPyBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSkgOiBlbC5jbGFzc05hbWUgKz0gKCcgJyArIGNsYXNzTmFtZSk7XG4gICAgfVxufTtcblxuc21hc2guY2xhc3MucmVtb3ZlID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoZWwsIGNsYXNzTmFtZSkpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0ID8gZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpIDogZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UoY2xhc3NOYW1lLCAnJyk7XG4gICAgfVxufTtcblxuc21hc2guY2xhc3MuaGFzID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIHJldHVybiAoKFwiIFwiICsgZWwuY2xhc3NOYW1lICsgXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csIFwiIFwiKS5pbmRleE9mKFwiIFwiICsgY2xhc3NOYW1lICsgXCIgXCIpID4gLTEpO1xufTtcblxuc21hc2guY2xhc3MudG9nZ2xlID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIHNtYXNoLmNsYXNzLmhhcyhlbCwgY2xhc3NOYW1lKSA/IHNtYXNoLmNsYXNzLnJlbW92ZShlbCwgY2xhc3NOYW1lKSA6IHNtYXNoLmNsYXNzLmFkZChlbCwgY2xhc3NOYW1lKTtcbn07XG4iLCJzbWFzaC5jb25maWcgPSB7XG4gICAgX3ZhbHVlc186IHtcbiAgICAgICAgX3NpZGViYXJfbG9ja186IGZhbHNlXG4gICAgfVxufVxuXG5zbWFzaC5jb25maWcuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gc21hc2guc3RvcmFnZS5nZXQoJ2NvbmZpZycpO1xuICAgIGlmICh2KSB7XG4gICAgICAgIHNtYXNoLmNvbmZpZy5fdmFsdWVzXyA9IHY7XG4gICAgfVxufTtcblxuc21hc2guY29uZmlnLmdldCA9IGZ1bmN0aW9uKG9wdGlvbikge1xuICAgIHZhciBvID0gJ18nICsgb3B0aW9uICsgJ18nO1xuICAgIGlmIChvIGluIHNtYXNoLmNvbmZpZy5fdmFsdWVzXykge1xuICAgICAgICByZXR1cm4gc21hc2guY29uZmlnLl92YWx1ZXNfW29dO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgc21hc2guRXhjZXB0aW9uKCcwMDEnLCAnSW52YWxpZCBjb25maWcgb3B0aW9uIFwiJyArIG9wdGlvbiArICdcIicpO1xufTtcblxuc21hc2guY29uZmlnLnNldCA9IGZ1bmN0aW9uKG9wdGlvbiwgdmFsdWUpIHtcbiAgICB2YXIgbyA9ICdfJyArIG9wdGlvbiArICdfJztcbiAgICBpZiAoIW8gaW4gc21hc2guY29uZmlnLl92YWx1ZXNfKSB7XG4gICAgICAgIHRocm93IG5ldyBzbWFzaC5FeGNlcHRpb24oJzAwMScsICdJbnZhbGlkIGNvbmZpZyBvcHRpb24gXCInICsgb3B0aW9uICsgJ1wiJyk7XG4gICAgfVxuICAgIHNtYXNoLmNvbmZpZy5fdmFsdWVzX1tvXSA9IHZhbHVlO1xuICAgIHNtYXNoLnN0b3JhZ2Uuc2V0KCdjb25maWcnLCBzbWFzaC5jb25maWcuX3ZhbHVlc18pO1xufTtcbiIsInNtYXNoLmRpYWxvZyA9IHt9O1xuXG5zbWFzaC5kaWFsb2cubmV3ID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHZhciBiYWNrZHJvcCA9IHNtYXNoLmRpYWxvZy5jaGVja0JhY2tkcm9wKCk7XG5cbiAgICB2YXIgZGlhbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGlhbG9nLmNsYXNzTmFtZSA9ICdzbWFzaC1kaWFsb2cnO1xuICAgIGRpYWxvZy5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgIGJhY2tkcm9wLmFwcGVuZENoaWxkKGRpYWxvZyk7XG59O1xuXG5zbWFzaC5kaWFsb2cuY2hlY2tCYWNrZHJvcCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChiYWNrZHJvcCA9IHNtYXNoLmdldChkb2N1bWVudCwgXCIuc21hc2gtZGlhbG9nLWJhY2tkcm9wXCIpKSB7XG4gICAgICAgIGlmIChkaWFsb2cgPSBzbWFzaC5nZXQoZG9jdW1lbnQsIFwiLnNtYXNoLWRpYWxvZy1iYWNrZHJvcCAuc21hc2gtZGlhbG9nXCIpKSB7XG4gICAgICAgICAgICBiYWNrZHJvcC5yZW1vdmVDaGlsZChkaWFsb2cpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYWNrZHJvcDtcbiAgICB9XG4gICAgdmFyIGJhY2tkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYmFja2Ryb3AuY2xhc3NOYW1lID0gJ3NtYXNoLWRpYWxvZy1iYWNrZHJvcCc7XG4gICAgYmFja2Ryb3AuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJzbWFzaC1kaWFsb2ctYmFja2dyb3VuZFwiPjwvZGl2Pic7XG4gICAgc21hc2guZ2V0KGJhY2tkcm9wLCAnLnNtYXNoLWRpYWxvZy1iYWNrZ3JvdW5kJykub25jbGljayA9IHNtYXNoLmRpYWxvZy5jbG9zZTtcbiAgICBzbWFzaC5nZXQoZG9jdW1lbnQsICdib2R5JykuYXBwZW5kQ2hpbGQoYmFja2Ryb3ApO1xuICAgIHJldHVybiBiYWNrZHJvcDtcbn07XG5cbnNtYXNoLmRpYWxvZy5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChkaWFsb2cgPSBzbWFzaC5nZXQoZG9jdW1lbnQsIFwiLnNtYXNoLWRpYWxvZy1iYWNrZHJvcFwiKSkge1xuICAgICAgICBzbWFzaC5nZXQoZG9jdW1lbnQsICdib2R5JykucmVtb3ZlQ2hpbGQoZGlhbG9nKTtcbiAgICB9XG59O1xuIiwic21hc2guRXhjZXB0aW9uID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJ1NtYXNoRXhjZXB0aW9uICcgKyB0aGlzLnZhbHVlICsgJzogJyArIHRoaXMubWVzc2FnZTtcbiAgICB9O1xufTtcbiIsInNtYXNoLmlucHV0ID0ge307XG5cbnNtYXNoLmlucHV0LmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbWFzaC1pbnB1dCBpbnB1dCwgLnNtYXNoLXRleHRhcmVhIHRleHRhcmVhXCIpO1xuICAgIHZhciBpbnB1dDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpbnB1dCA9IGlucHV0c1tpXTtcbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhpbnB1dC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnNldFZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBpbnB1dC5vbmtleXVwKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIikpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dC52YWx1ZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInRleHRhcmVhXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKGlucHV0LnBhcmVudEVsZW1lbnQsICdoYXMtZmxvYXRpbmctbGFiZWwnKSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGlucHV0LnBhcmVudEVsZW1lbnQsICdoYXMtZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChpbnB1dC5wYXJlbnRFbGVtZW50LCAnZmxvYXRpbmctbGFiZWwnKTtcblxuICAgICAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IGlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICBpbnB1dC5vbmtleXVwID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHZhciBsID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgICAgICBpZiAobCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnB1dC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkge1xuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5zZXRWYWx1ZShpbnB1dC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoaW5wdXQucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJyk7XG4gICAgfVxuICAgIHZhciBzZWxlY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbWFzaC1zZWxlY3Qgc2VsZWN0XCIpO1xuICAgIHZhciBzZWxlY3Q7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNlbGVjdCA9IHNlbGVjdHNbaV07XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnaGFzLWZsb2F0aW5nLWxhYmVsJykpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShzZWxlY3QucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSBzZWxlY3QuZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHRoaXMsICdpcy1mb2N1c3NlZCcpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICAgICAgdmFyIG9sZCA9IHNlbGVjdC52YWx1ZTtcbiAgICAgICAgICAgIHNlbGVjdC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKHNlbGVjdC5zZWxlY3RlZEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHNlbGVjdC5vcHRpb25zW3NlbGVjdC5zZWxlY3RlZEluZGV4XS50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgIGlucHV0Lm9uZm9jdXMoKTtcbiAgICAgICAgICAgIGlmIChvbGQgIT0gdmFsdWUgJiYgc2VsZWN0Lm9uY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0Lm9uY2hhbmdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3QgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XG4gICAgICAgICAgICBpZiAoc2VsZWN0LnNlbGVjdGVkSW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Qub3B0aW9uc1tzZWxlY3Quc2VsZWN0ZWRJbmRleF0udmFsdWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGlucHV0KTtcblxuICAgICAgICB2YXIgb3B0aW9ucyA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKFwib3B0aW9uXCIpO1xuICAgICAgICB2YXIgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9wdGlvbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zW2pdO1xuICAgICAgICAgICAgaWYgKCFvcHRpb24uZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgb3B0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgIGxpLmlubmVySFRNTCA9IG9wdGlvbi5pbm5lckhUTUw7XG4gICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgICAgICBsaS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5zZXRWYWx1ZSh0aGlzLmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cub25tb3VzZWRvd24gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHVsKTtcbiAgICAgICAgaW5wdXQub25mb2N1cyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBsID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZCh0aGlzLCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3QgPSB0aGlzO1xuICAgICAgICAgICAgd2luZG93Lm9ubW91c2Vkb3duID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjbGljayBvdXRzaWRlXCIpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNlZG93biA9IG51bGw7XG4gICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHNlbGVjdCwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzZWxlY3QucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKHNlbGVjdC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgIH1cbiAgICAgICAgc21hc2guY2xhc3MuYWRkKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKTtcbiAgICB9XG59O1xuIiwic21hc2gucm91dGVyID0ge1xuICAgIF9fcGFyc2VSb3V0ZVJlZ2V4OiAveyguKj8pfS9pZyxcbiAgICBfX2R5bmFtaWNQYXJ0czogW10sXG4gICAgX19yb3V0ZXM6IHtcbiAgICAgICAgc3RhdGljOiBbXSxcbiAgICAgICAgZHluYW1pYzogW11cbiAgICB9XG59O1xuXG5zbWFzaC5yb3V0ZXIuYWRkID0gZnVuY3Rpb24ocGF0aCwgY2FsbGJhY2spIHtcbiAgICB2YXIgcm91dGUgPSBzbWFzaC5yb3V0ZXIucGFyc2VSb3V0ZShwYXRoKTtcbiAgICBpZiAocm91dGUucmVnZXgpIHtcbiAgICAgICAgcm91dGUuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgaWYgKCFzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF0pIHtcbiAgICAgICAgICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdKSB7XG4gICAgICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10ucHVzaChyb3V0ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc21hc2gucm91dGVyLl9fcm91dGVzLnN0YXRpY1twYXRoXSA9IGNhbGxiYWNrO1xufTtcblxuc21hc2gucm91dGVyLnNldCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgc21hc2gucm91dGVyLmRpc3BsYXlVUkwocm91dGUpO1xuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncG9wc3RhdGUnKSk7XG59O1xuXG5zbWFzaC5yb3V0ZXIuZGlzcGxheVVSTCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKFwiXCIsIFwiXCIsIHJvdXRlKTtcbn07XG5cbnNtYXNoLnJvdXRlci5yZWRpcmVjdCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgd2luZG93LmxvY2F0aW9uID0gcm91dGU7XG59O1xuXG5zbWFzaC5yb3V0ZXIuaGFuZGxlTm90Rm91bmQgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIGNvbnNvbGUubG9nKFwicm91dGU6IFwiICsgSlNPTi5zdHJpbmdpZnkocm91dGUpICsgXCIgZG9lcyBub3QgZXhpc3RcIik7XG59O1xuXG5zbWFzaC5yb3V0ZXIucnVuID0gZnVuY3Rpb24oKSB7XG4gICAgd2luZG93Lm9ucG9wc3RhdGUgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBzbWFzaC5yb3V0ZXIuZXhlY3V0ZSgpO1xuICAgIH07XG4gICAgc21hc2gucm91dGVyLmV4ZWN1dGUoKTtcbn1cblxuc21hc2gucm91dGVyLmV4ZWN1dGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGF0aCA9IHRoaXMuZ2V0UGF0aCgpO1xuICAgIGlmICh0aGlzLl9fcm91dGVzLnN0YXRpY1twYXRoLnBhdGhdKSB7XG4gICAgICAgIHRoaXMuX19yb3V0ZXMuc3RhdGljW3BhdGgucGF0aF0oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgZGVwdGggPSBwYXRoLnBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aC0xO1xuICAgIGlmICh0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdKSB7XG4gICAgICAgIHZhciByb3V0ZTtcbiAgICAgICAgdmFyIG1hdGNoZXM7XG4gICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgIGZvciAodmFyIHZhck51bSBpbiB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF1bdmFyTnVtXSkge1xuICAgICAgICAgICAgICAgIHZhciByb3V0ZSA9IHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF1bdmFyTnVtXVtpdGVtXTtcbiAgICAgICAgICAgICAgICBtYXRjaGVzID0gcGF0aC5wYXRoLm1hdGNoKHJvdXRlLnJlZ2V4KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxyb3V0ZS5udW1WYXJzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtyb3V0ZS52YXJzW2ldXSA9IG1hdGNoZXNbaSsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm91dGUuY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNtYXNoLnJvdXRlci5oYW5kbGVOb3RGb3VuZChwYXRoKTtcbn07XG5cbnNtYXNoLnJvdXRlci5nZXRQYXRoID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBsLmhyZWYgPSB3aW5kb3cubG9jYXRpb247XG4gICAgcmV0dXJuIHtob3N0OiBsLmhvc3RuYW1lLCBwYXRoOiBsLnBhdGhuYW1lfTtcbn07XG5cbnNtYXNoLnJvdXRlci5wYXJzZVJvdXRlID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIGlmIChwYXRoLnN1YnN0cmluZygwLDEpICE9IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG4gICAgfVxuICAgIGlmIChwYXRoLnN1YnN0cmluZyhwYXRoLmxlbmd0aC0yKSA9PSBcIi9cIikge1xuICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoO1xuICAgIH1cbiAgICB2YXIgcm91dGUgPSB7XG4gICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgIGRlcHRoOiAocGF0aC5zcGxpdChcIi9cIikubGVuZ3RoIC0gMSksXG4gICAgICAgIHZhcnM6IFtdLFxuICAgICAgICBudW1WYXJzOiAwXG4gICAgfTtcbiAgICBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMgPSBwYXRoLm1hdGNoKHNtYXNoLnJvdXRlci5fX3BhcnNlUm91dGVSZWdleCk7XG4gICAgaWYgKHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cyAhPSB1bmRlZmluZWQgJiYgc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzICE9IG51bGwpIHtcbiAgICAgICAgdmFyIHJlZ2V4ID0gXCJeXCIgKyBwYXRoLnJlcGxhY2UoL1xcLy9pZywgXCJcXFxcL1wiKSArIFwiJFwiO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByb3V0ZS5udW1WYXJzKys7XG4gICAgICAgICAgICByb3V0ZS52YXJzLnB1c2goc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzW2ldLnN1YnN0cmluZygxLCBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0ubGVuZ3RoLTEpKTtcbiAgICAgICAgICAgIHJlZ2V4ID0gcmVnZXgucmVwbGFjZShzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0sIFwiKC4qPylcIik7XG4gICAgICAgIH1cbiAgICAgICAgcm91dGUucmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4LCAnaScpO1xuICAgIH1cbiAgICByZXR1cm4gcm91dGU7XG59O1xuXG5zbWFzaC5yb3V0ZXIucXVlcnlQYXJhbSA9IGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgdmFyIHJlZ2V4UyA9IFwiW1xcXFw/Jl1cIitwYXJhbStcIj0oW14mI10qKVwiLFxuICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cCggcmVnZXhTICksXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWMoIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKTtcbiAgICBpZiggcmVzdWx0cyA9PSBudWxsICl7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzWzFdOy8vZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMV0ucmVwbGFjZSgvXFwrL2csIFwiIFwiKSk7XG59O1xuIiwic21hc2guc2VhcmNoYm94ID0ge1xuICAgIGlfOiBmYWxzZSxcbiAgICBtaW5BdXRvQ29tcGxldGVMZW5ndGg6IDMsXG4gICAgb25mb2N1czogdW5kZWZpbmVkLFxuICAgIG9uYmx1cjogdW5kZWZpbmVkLFxuICAgIG9udmFsdWU6IHVuZGVmaW5lZCxcbn07XG5cbnNtYXNoLnNlYXJjaGJveC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNtYXNoLnNlYXJjaGJveC5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzc2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCBpbnB1dFwiKTtcbiAgICBpZiAoIXNzYikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNzYi5vbmZvY3VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gucmVzdWx0cygnPGRpdiBjbGFzcz1cInNtYXNoLWluc3RydWN0aW9uXCI+U3RhcnQgdHlwaW5nIHRvIGZpbmQgcmVzdWx0czwvZGl2PicpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLWhlYWRlclwiKSwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCAuc21hc2gtc2VhcmNoYm94LXJlc3VsdHNcIiksICdzaG93Jyk7XG4gICAgICAgIGlmIChzbWFzaC5zZWFyY2hib3gub25mb2N1cykge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc3NiLm9uYmx1ciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1oZWFkZXJcIiksICdpcy1mb2N1c3NlZCcpO1xuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpLCAnc2hvdycpO1xuICAgICAgICBpZiAoc21hc2guc2VhcmNoYm94Lm9uYmx1cikge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uYmx1cigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzc2Iub25rZXl1cCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoIDwgc21hc2guc2VhcmNoYm94Lm1pbkF1dG9Db21wbGV0ZUxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzbWFzaC5zZWFyY2hib3gub25jaGFuZ2UpIHtcbiAgICAgICAgICAgIHNtYXNoLnNlYXJjaGJveC5vbmNoYW5nZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc21hc2guc2VhcmNoYm94LmlfID0gdHJ1ZTtcbn07XG5cbnNtYXNoLnNlYXJjaGJveC5yZXN1bHRzID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHZhciByZXN1bHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpO1xuICAgIHJlc3VsdHMuaW5uZXJIVE1MID0gY29udGVudDtcbn07XG4iLCJzbWFzaC5zaWRlYmFyID0ge1xuICAgIGlfOiBmYWxzZVxufTtcblxuc21hc2guc2lkZWJhci5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNtYXNoLnNpZGViYXIuaV8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc2libCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhciAubG9ja1wiKTtcbiAgICBpZiAoIXNpYmwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzaWJsLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc21hc2guc2lkZWJhci50b2dnbGVMb2NrKCk7XG4gICAgfTtcblxuICAgIHZhciBzaWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXJcIik7XG4gICAgc21hc2guY2xhc3MuYWRkKHNpYiwgJ2lzLXVubG9ja2VkJyk7XG4gICAgc21hc2guc2lkZWJhci5pXyA9IHRydWU7XG4gICAgaWYgKHNtYXNoLmNvbmZpZy5nZXQoJ3NpZGViYXJfbG9jaycpKSB7XG4gICAgICAgIHNtYXNoLnNpZGViYXIudG9nZ2xlTG9jaygpO1xuICAgIH1cbn07XG5cbnNtYXNoLnNpZGViYXIudG9nZ2xlTG9jayA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghc21hc2guc2lkZWJhci5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNtYXNoLmNsYXNzLnRvZ2dsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXIgLmxvY2tcIiksICd1bmxvY2snKTtcbiAgICBzbWFzaC5jbGFzcy50b2dnbGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyXCIpLCAnaXMtdW5sb2NrZWQnKTtcbiAgICBzbWFzaC5jb25maWcuc2V0KCdzaWRlYmFyX2xvY2snLCAhc21hc2guY2xhc3MuaGFzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhclwiKSwgJ2lzLXVubG9ja2VkJykpO1xufTtcbiIsInNtYXNoLnN0b3JhZ2UgPSB7fTtcblxuc21hc2guc3RvcmFnZS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xufTtcblxuc21hc2guc3RvcmFnZS51bnNldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG59O1xuXG5zbWFzaC5zdG9yYWdlLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHZhciBpID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICBpZiAoIWkpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoaSk7XG59O1xuXG5zbWFzaC5zdG9yYWdlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG59O1xuIiwic21hc2gud29ya3NwYWNlID0ge1xuICAgIGJhc2VUaXRsZTogdW5kZWZpbmVkLFxuICAgIF93c186IHVuZGVmaW5lZCxcbiAgICBfaGRyXzogdW5kZWZpbmVkLFxuICAgIF9zYl86IHVuZGVmaW5lZCxcbiAgICBfdGFic186IFtdXG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHNtYXNoLndvcmtzcGFjZS5fd3NfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC13b3Jrc3BhY2VcIik7XG4gICAgaWYgKCFzbWFzaC53b3Jrc3BhY2UuX3dzXykge1xuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgc21hc2gud29ya3NwYWNlLl9oZHJfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1oZWFkZXJcIik7XG4gICAgaWYgKHNtYXNoLndvcmtzcGFjZS5faGRyXykge1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc21hc2gud29ya3NwYWNlLl93c18sICdoYXMtaGVhZGVyJyk7XG4gICAgfVxuICAgIHNtYXNoLndvcmtzcGFjZS5fc2JfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC13b3Jrc3BhY2UgLnNtYXNoLXNpZGViYXJcIik7XG4gICAgaWYgKHNtYXNoLndvcmtzcGFjZS5fc2JfKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChzbWFzaC53b3Jrc3BhY2UuX3dzXywgJ2hhcy1zaWRlYmFyJyk7XG4gICAgfVxufTtcblxuc21hc2gud29ya3NwYWNlLmFkZFRhYiA9IGZ1bmN0aW9uKGlkLCB0aXRsZSwgY29udGVudCwgdXJsKSB7XG4gICAgaWYgKCFzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLXBhbmUnKSkge1xuICAgICAgICB2YXIgcGFuZWwgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtcGFuZWwnKTtcbiAgICAgICAgaWYgKCFwYW5lbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1RvIGFkZCBhIHRhYiB0aGVyZSBuZWVkcyB0byBiZSBhIHBhbmVsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcGFuZWwuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJzbWFzaC10YWItcGFuZVwiPjxkaXYgY2xhc3M9XCJzbWFzaC10YWJzXCI+PC9kaXY+PGRpdiBjbGFzcz1cInNtYXNoLXBhbmVzXCI+PC9kaXY+PC9kaXY+JztcbiAgICB9XG4gICAgdmFyIHRhYnMgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLXBhbmUgLnNtYXNoLXRhYnMnKTtcbiAgICB2YXIgcGFuZXNDb250YWluZXIgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLXBhbmUgLnNtYXNoLXBhbmVzJyk7XG5cbiAgICBkb2N1bWVudC50aXRsZSA9IHNtYXNoLndvcmtzcGFjZS5jcmVhdGVUaXRsZSh0aXRsZSk7XG5cbiAgICBpZiAodGFiID0gc21hc2guZ2V0KHRhYnMsICcuc21hc2gtdGFiW2RhdGEtaWQ9XCInICsgaWQgKyAnXCJdJykpIHtcbiAgICAgICAgdmFyIHBhbmUgPSBzbWFzaC5nZXQocGFuZXNDb250YWluZXIsICcuc21hc2gtcGFuZVtkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpO1xuICAgICAgICBwYW5lLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgICAgIHRhYi5kYXRhc2V0LnVybCA9IHVybDtcbiAgICAgICAgdGFiLm9uY2xpY2soKTtcbiAgICAgICAgcmV0dXJuIHt0YWI6IHRhYiwgcGFuZTogcGFuZX07XG4gICAgfVxuXG4gICAgc21hc2guaGlkZShwYW5lc0NvbnRhaW5lciwgXCIuc21hc2gtcGFuZVwiKTtcbiAgICBpZiAoYWN0aXZlID0gc21hc2guZ2V0KHRhYnMsICcuc21hc2gtdGFiLmFjdGl2ZScpKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShhY3RpdmUsICdhY3RpdmUnKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgdGFiXG4gICAgdmFyIHRhYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFiLmNsYXNzTmFtZSA9ICdzbWFzaC10YWIgYWN0aXZlJztcbiAgICB0YWIuZGF0YXNldC5pZCA9IGlkO1xuICAgIHRhYi5kYXRhc2V0LnVybCA9IHVybDtcbiAgICB0YWIuaW5uZXJIVE1MID0gdGl0bGUgKyAnPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyBjbG9zZVwiPmNsb3NlPC9pPic7XG4gICAgdGFiLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChhY3RpdmUgPSBzbWFzaC5nZXQodGFicywgJy5zbWFzaC10YWIuYWN0aXZlJykpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShhY3RpdmUsICdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQodGhpcywgJ2FjdGl2ZScpO1xuICAgICAgICBzbWFzaC5oaWRlKGRvY3VtZW50LCAnLnNtYXNoLXBhbmUnKTtcbiAgICAgICAgc21hc2guc2hvdyhkb2N1bWVudCwgJy5zbWFzaC1wYW5lW2RhdGEtaWQ9XCInICsgdGhpcy5kYXRhc2V0LmlkICsgJ1wiXScpO1xuICAgICAgICBpZiAodGhpcy5kYXRhc2V0LnVybCAmJiB0aGlzLmRhdGFzZXQudXJsICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHNtYXNoLnJvdXRlci5kaXNwbGF5VVJMKHRoaXMuZGF0YXNldC51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gc21hc2gud29ya3NwYWNlLmNyZWF0ZVRpdGxlKHRoaXMuaW5uZXJIVE1MKTtcbiAgICB9O1xuICAgIHNtYXNoLm9uKHRhYiwgJy5jbG9zZScsICdvbmNsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHRoaXMucGFyZW50RWxlbWVudCwgJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50LnByZXZpb3VzU2libGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wcmV2aW91c1NpYmxpbmcub25jbGljaygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBhcmVudEVsZW1lbnQubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQubmV4dFNpYmxpbmcub25jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYW5lID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyB0aGlzLnBhcmVudEVsZW1lbnQuZGF0YXNldC5pZCArICdcIl0nKSkge1xuICAgICAgICAgICAgcGFuZS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHBhbmUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMucGFyZW50RWxlbWVudCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG4gICAgdGFicy5hcHBlbmRDaGlsZCh0YWIpO1xuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHBhbmUgd2l0aCB0aGUgcHJvdmlkZWQgY29udGVudFxuICAgIHZhciBwYW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwYW5lLmNsYXNzTmFtZSA9ICdzbWFzaC1wYW5lJztcbiAgICBwYW5lLmRhdGFzZXQuaWQgPSBpZDtcbiAgICBwYW5lLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgcGFuZXNDb250YWluZXIuYXBwZW5kQ2hpbGQocGFuZSk7XG4gICAgcmV0dXJuIHt0YWI6IHRhYiwgcGFuZTogcGFuZX07XG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuYWN0aXZlVGFiID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRhYiA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYi5hY3RpdmUnKVxuICAgIGlmICghdGFiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgcGFuZSA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC1wYW5lW2RhdGEtaWQ9XCInICsgdGFiLmRhdGFzZXQuaWQgKyAnXCJdJyk7XG4gICAgaWYgKCFwYW5lKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4ge3RhYjogdGFiLCBwYW5lOiBwYW5lfTtcbn07XG5cbnNtYXNoLndvcmtzcGFjZS5jcmVhdGVUaXRsZSA9IGZ1bmN0aW9uKHRpdGxlKSB7XG4gICAgcmV0dXJuIHRpdGxlLnJlcGxhY2UoLzwoW14+XSs/KShbXj5dKj8pPiguKj8pPFxcL1xcMT4vaWcsIFwiXCIpICsgKHNtYXNoLndvcmtzcGFjZS5iYXNlVGl0bGUgPyAnIHwgJyArIHNtYXNoLndvcmtzcGFjZS5iYXNlVGl0bGUgOiBcIlwiKVxufTtcbiJdfQ==
