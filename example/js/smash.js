window.addEventListener("load",function(e){smash.init()},!1);var smash={};smash.init=function(){smash.config.init(),smash.sidebar.init(),smash.searchbox.init(),smash.workspace.init(),smash.input.init()},smash.get=function(e,s){try{return e.querySelector(s)}catch(e){console.log(e)}},smash.getAll=function(e,s){try{return e.querySelectorAll(s)}catch(e){console.log(e)}},smash.hide=function(e,s){for(var a=smash.getAll(e,s),t=0;t<a.length;t++)a[t].style.display="none"},smash.show=function(e,s){for(var a=smash.getAll(e,s),t=0;t<a.length;t++)a[t].style.display=""},smash.on=function(e,s,a,t){for(var n=smash.getAll(e,s),o=0;o<n.length;o++)n[o][a]=t},smash.fuzzyCompare=function(e,s){if(void 0==s||void 0==e)return!1;var a=".*?"+e.toLowerCase().split("").join(".*?")+".*?";return s.toLowerCase().match(a)},smash.ajax={_headers_:[]},smash.ajax.addHeader=function(e,s){smash.ajax._headers_[e]=s},smash.ajax.removeHeader=function(e){delete smash.ajax._headers_[e]},smash.ajax.onerror=function(e){console.log(e)},smash.ajax.onunauthorized=function(e){smash.ajax.onerror(e)},smash.ajax._xhr_=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,s=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],a=0;a<s.length;a++)try{e=new ActiveXObject(s[a]);break}catch(e){}return e},smash.ajax.send=function(e,s,a,t,n,o,r){void 0===r&&(r=!0),void 0===o&&(o=smash.ajax.onerror);var i=smash.ajax._xhr_();i.responseType=n,i.onreadystatechange=function(){if(4==i.readyState)switch(i.status){case 200:case 201:s&&s(i.response);break;case 401:smash.ajax.onunauthorized(i.response);break;default:o(i.response)}},i.open(a,e,r),"json"==n?i.setRequestHeader("Content-type","application/json"):"POST"==a&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var h in smash.ajax._headers_)i.setRequestHeader(h,smash.ajax._headers_[h]);i.send(t)},smash.ajax.get=function(e,s,a,t,n,o){var r=[];for(var i in a)r.push(encodeURIComponent(i)+"="+encodeURIComponent(a[i]));smash.ajax.send(e+(r.length?"?"+r.join("&"):""),s,"GET",null,t,n,o)},smash.ajax.post=function(e,s,a,t,n,o){var r;if(a)if("json"!=t){var i=[];for(var h in a)i.push(encodeURIComponent(h)+"="+encodeURIComponent(a[h]));r=i.join("&")}else r=JSON.stringify(a);smash.ajax.send(e,s,"POST",r,t,n,o)},smash.class={},smash.class.add=function(e,s){smash.class.has(e,s)||(e.classList?e.classList.add(s):e.className+=" "+s)},smash.class.remove=function(e,s){smash.class.has(e,s)&&(e.classList?e.classList.remove(s):e.className=e.className.replace(s,""))},smash.class.has=function(e,s){return(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(" "+s+" ")>-1},smash.class.toggle=function(e,s){smash.class.has(e,s)?smash.class.remove(e,s):smash.class.add(e,s)},smash.config={_values_:{_sidebar_lock_:!1}},smash.config.init=function(){var e=smash.storage.get("config");e&&(smash.config._values_=e)},smash.config.get=function(e){var s="_"+e+"_";if(s in smash.config._values_)return smash.config._values_[s];throw new smash.Exception("001",'Invalid config option "'+e+'"')},smash.config.set=function(e,s){var a="_"+e+"_";if(!a in smash.config._values_)throw new smash.Exception("001",'Invalid config option "'+e+'"');smash.config._values_[a]=s,smash.storage.set("config",smash.config._values_)},smash.dialog={},smash.dialog.new=function(e){var s=smash.dialog.checkBackdrop(),a=document.createElement("div");a.className="smash-dialog",a.innerHTML=e,s.appendChild(a)},smash.dialog.checkBackdrop=function(){if(e=smash.get(document,".smash-dialog-backdrop"))return(dialog=smash.get(document,".smash-dialog-backdrop .smash-dialog"))&&e.removeChild(dialog),e;var e=document.createElement("div");return e.className="smash-dialog-backdrop",e.innerHTML='<div class="smash-dialog-background"></div>',smash.get(e,".smash-dialog-background").onclick=smash.dialog.close,smash.get(document,"body").appendChild(e),e},smash.dialog.close=function(){(dialog=smash.get(document,".smash-dialog-backdrop"))&&smash.get(document,"body").removeChild(dialog)},smash.Exception=function(e,s){this.value=e,this.message=s,this.toString=function(){return"SmashException "+this.value+": "+this.message}},smash.input={},smash.input.init=function(){for(var e,s=document.querySelectorAll(".smash-input input, .smash-textarea textarea"),a=0;a<s.length;a++)if(e=s[a],!smash.class.has(e.parentElement,"smash-initialised")){if(e.parentElement.setValue=function(s){(e=this.querySelector("input"))?(e.value=s,e.onkeyup()):(e=this.querySelector("textarea"))&&(e.value=s,e.onkeyup())},e.parentElement.getValue=function(){if(e=this.querySelector("input")){var e=this.querySelector("input");return e.value}if(e=this.querySelector("textarea")){var e=this.querySelector("input");return e.value}return null},smash.class.has(e.parentElement,"has-floating-label")){smash.class.remove(e.parentElement,"has-floating-label"),smash.class.add(e.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=e.placeholder,e.parentElement.appendChild(t),e.onkeyup=function(e){var s=this.parentElement.querySelector("label");s&&(""!=this.value?smash.class.add(s,"show"):smash.class.remove(s,"show"))}}e.parentElement.getAttribute("value")&&e.parentElement.setValue(e.parentElement.getAttribute("value")),smash.class.add(e.parentElement,"smash-initialised")}for(var n,o=document.querySelectorAll(".smash-select select"),a=0;a<o.length;a++)if(n=o[a],!smash.class.has(n.parentElement,"smash-initialised")){if(smash.class.has(n.parentElement,"has-floating-label")){smash.class.remove(n.parentElement,"has-floating-label"),smash.class.add(n.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=n.getAttribute("placeholder"),n.parentElement.appendChild(t)}n.parentElement.setValue=function(e){smash.class.remove(this,"is-focussed");var s=this.querySelector("select"),a=this.querySelector("input"),t=s.value;s.value=e,s.selectedIndex>-1&&(a.value=s.options[s.selectedIndex].text),a.focus(),a.onfocus(),t!=e&&s.onchange&&s.onchange()},n.parentElement.getValue=function(){var e=this.querySelector("select");return e.selectedIndex==-1?null:e.options[e.selectedIndex].value};var e=document.createElement("input");e.type="text",e.placeholder=n.getAttribute("placeholder"),e.setAttribute("readonly","readonly"),n.parentElement.appendChild(e);for(var r=n.querySelectorAll("option"),i=document.createElement("ul"),h=0;h<r.length;h++){var c=r[h];if(c.getAttribute("value")){var l=document.createElement("li");l.setAttribute("value",c.value),l.innerHTML=c.innerHTML,i.appendChild(l),l.onmousedown=function(e){this.parentElement.parentElement.setValue(this.getAttribute("value")),e.stopPropagation(),window.onmousedown()}}}n.parentElement.appendChild(i),e.onfocus=function(e){var s=this.parentElement.querySelector("label");s&&(""!=this.value?smash.class.add(s,"show"):smash.class.remove(s,"show"))},n.parentElement.onclick=function(){smash.class.add(this,"is-focussed");var e=this,s="";window.onmousedown=function(){if(window.onmousedown=null,window.onkeyup=null,items=smash.getAll(e,"ul li")){for(var s=0;s<items.length;s++)items[s].style.display="";smash.show(e,"ul")}smash.class.remove(e,"is-focussed")},window.onkeyup=function(a){switch(a.keyCode){case 8:s.length>0&&(s=s.substring(0,s.length-1));break;case 27:s="";break;default:s+=String.fromCharCode(a.keyCode)}if(items=smash.getAll(e,"ul li")){smash.show(e,"ul");for(var t,n=!1,o=0;o<items.length;o++)t=items[o],smash.fuzzyCompare(s,t.innerHTML)?(t.style.display="",n=!0):t.style.display="none";n||smash.hide(e,"ul")}},window.focus()},n.parentElement.getAttribute("value")&&n.parentElement.setValue(n.parentElement.getAttribute("value")),smash.class.add(n.parentElement,"smash-initialised")}smash.input.checkboxInit()},smash.input.checkboxInit=function(){for(var e,s=document.querySelectorAll(".smash-checkbox input"),a=0;a<s.length;a++)if(e=s[a],!smash.class.has(e.parentElement,"smash-initialised")){var t=document.createElement("span");if(t.className="checks",t.innerHTML='<i class="material-icons">check_box_outline_blank</i><i class="material-icons checked">check_box</i>',e.parentElement.appendChild(t),label=e.getAttribute("label")){var n=document.createElement("span");n.className="label",n.innerHTML=label,e.parentElement.appendChild(n)}smash.class.add(e.parentElement,"smash-initialised"),e.checked=smash.class.has(e.parentElement,"checked"),e.parentElement.onclick=function(){smash.class.toggle(this,"checked"),smash.get(this,"input").checked=smash.class.has(this,"checked"),e.parentElement.onchange&&e.parentElement.onchange(smash.class.has(this,"checked"))},e.parentElement.getValue=function(){return smash.class.has(this,"checked")},e.parentElement.setValue=function(e){smash.class.has(this,"checked")!=e&&this.onclick()}}},smash.router={__parseRouteRegex:/{(.*?)}/gi,__dynamicParts:[],__routes:{static:[],dynamic:[]}},smash.router.add=function(e,s){var a=smash.router.parseRoute(e);return a.regex?(a.callback=s,smash.router.__routes.dynamic[a.depth]||(smash.router.__routes.dynamic[a.depth]=[]),smash.router.__routes.dynamic[a.depth][a.numVars]||(smash.router.__routes.dynamic[a.depth][a.numVars]=[]),void smash.router.__routes.dynamic[a.depth][a.numVars].push(a)):void(smash.router.__routes.static[e]=s)},smash.router.set=function(e){smash.router.displayURL(e),window.dispatchEvent(new Event("popstate"))},smash.router.displayURL=function(e){window.history.pushState("","",e)},smash.router.redirect=function(e){window.location=e},smash.router.handleNotFound=function(e){console.log("route: "+JSON.stringify(e)+" does not exist")},smash.router.run=function(){window.onpopstate=function(e){smash.router.execute()},smash.router.execute()},smash.router.execute=function(){var e=this.getPath();if(this.__routes.static[e.path])return void this.__routes.static[e.path]();var s=e.path.split("/").length-1;if(this.__routes.dynamic[s]){var a,t,n={};for(var o in this.__routes.dynamic[s])for(var r in this.__routes.dynamic[s][o]){var a=this.__routes.dynamic[s][o][r];if(t=e.path.match(a.regex)){for(var i=0;i<a.numVars;i++)n[a.vars[i]]=t[i+1];return void a.callback(n)}}}smash.router.handleNotFound(e)},smash.router.getPath=function(){var e=document.createElement("a");return e.href=window.location,{host:e.hostname,path:e.pathname}},smash.router.parseRoute=function(e){"/"!=e.substring(0,1)&&(e="/"+e),"/"==e.substring(e.length-2)&&(e="/"+e);var s={path:e,depth:e.split("/").length-1,vars:[],numVars:0};if(smash.router.__dynamicParts=e.match(smash.router.__parseRouteRegex),void 0!=smash.router.__dynamicParts&&null!=smash.router.__dynamicParts){for(var a="^"+e.replace(/\//gi,"\\/")+"$",t=0;t<smash.router.__dynamicParts.length;t++)s.numVars++,s.vars.push(smash.router.__dynamicParts[t].substring(1,smash.router.__dynamicParts[t].length-1)),a=a.replace(smash.router.__dynamicParts[t],"(.*?)");s.regex=new RegExp(a,"i")}return s},smash.router.queryParam=function(e){var s="[\\?&]"+e+"=([^&#]*)",a=new RegExp(s),t=a.exec(window.location.search);if(null!=t)return t[1]},smash.searchbox={i_:!1,minAutoCompleteLength:3,onfocus:void 0,onblur:void 0,onvalue:void 0},smash.searchbox.init=function(){if(!smash.searchbox.i_){var e=document.querySelector(".smash-searchbox input");e&&(e.onfocus=function(){0==this.value.length&&smash.searchbox.results('<div class="smash-instruction">Start typing to find results</div>'),smash.class.add(document.querySelector(".smash-header"),"is-focussed"),smash.class.add(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onfocus&&smash.searchbox.onfocus()},e.onblur=function(){smash.class.remove(document.querySelector(".smash-header"),"is-focussed"),smash.class.remove(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onblur&&smash.searchbox.onblur()},e.onkeyup=function(e){this.value.length<smash.searchbox.minAutoCompleteLength||smash.searchbox.onchange&&smash.searchbox.onchange(this.value)},smash.searchbox.i_=!0)}},smash.searchbox.results=function(e){var s=document.querySelector(".smash-searchbox .smash-searchbox-results");s.innerHTML=e},smash.sidebar={i_:!1},smash.sidebar.init=function(){if(!smash.sidebar.i_){var e=document.querySelector(".smash-sidebar .lock");if(e){e.onclick=function(){smash.sidebar.toggleLock()};var s=document.querySelector(".smash-sidebar");smash.class.add(s,"is-unlocked"),smash.sidebar.i_=!0,smash.config.get("sidebar_lock")&&smash.sidebar.toggleLock()}}},smash.sidebar.toggleLock=function(){smash.sidebar.i_&&(smash.class.toggle(document.querySelector(".smash-sidebar .lock"),"unlock"),smash.class.toggle(document.querySelector(".smash-sidebar"),"is-unlocked"),smash.config.set("sidebar_lock",!smash.class.has(document.querySelector(".smash-sidebar"),"is-unlocked")))},smash.storage={},smash.storage.set=function(e,s){localStorage.setItem(e,JSON.stringify(s))},smash.storage.unset=function(e){localStorage.removeItem(e)},smash.storage.get=function(e){var s=localStorage.getItem(e);if(s)return JSON.parse(s)},smash.storage.clear=function(){localStorage.clear()},smash.workspace={baseTitle:void 0,_ws_:void 0,_hdr_:void 0,_sb_:void 0,_tabs_:[]},smash.workspace.init=function(){smash.workspace._ws_=document.querySelector(".smash-workspace"),smash.workspace._ws_&&(smash.workspace._hdr_=document.querySelector(".smash-header"),smash.workspace._hdr_&&smash.class.add(smash.workspace._ws_,"has-header"),smash.workspace._sb_=document.querySelector(".smash-workspace .smash-sidebar"),smash.workspace._sb_&&smash.class.add(smash.workspace._ws_,"has-sidebar"))},smash.workspace.addTab=function(e,s,a,t){if(!smash.get(document,".smash-tab-pane")){var n=smash.get(document,".smash-panel");if(!n)return void console.log("To add a tab there needs to be a panel");n.innerHTML='<div class="smash-tab-pane"><div class="smash-tabs"></div><div class="smash-panes"></div></div>'}var o=smash.get(document,".smash-tab-pane .smash-tabs"),r=smash.get(document,".smash-tab-pane .smash-panes");if(document.title=smash.workspace.createTitle(s),h=smash.get(o,'.smash-tab[data-id="'+e+'"]')){var i=smash.get(r,'.smash-pane[data-id="'+e+'"]');return i.innerHTML=a,h.dataset.url=t,h.onclick(),{tab:h,pane:i}}smash.hide(r,".smash-pane"),(active=smash.get(o,".smash-tab.active"))&&smash.class.remove(active,"active");var h=document.createElement("div");h.className="smash-tab active",h.dataset.id=e,h.dataset.url=t,h.innerHTML=s+'<i class="material-icons close">close</i>',h.onclick=function(e){(active=smash.get(o,".smash-tab.active"))&&smash.class.remove(active,"active"),smash.class.add(this,"active"),smash.hide(document,".smash-pane"),smash.show(document,'.smash-pane[data-id="'+this.dataset.id+'"]'),this.dataset.url&&"undefined"!=this.dataset.url&&smash.router.displayURL(this.dataset.url),document.title=smash.workspace.createTitle(this.innerHTML)},smash.on(h,".close","onclick",function(e){this.parentElement.onclose&&!this.parentElement.onclose()||(smash.class.has(this.parentElement,"active")&&(this.parentElement.previousSibling?this.parentElement.previousSibling.onclick():this.parentElement.nextSibling&&this.parentElement.nextSibling.onclick()),(i=smash.get(document,'.smash-pane[data-id="'+this.parentElement.dataset.id+'"]'))&&i.parentElement.removeChild(i),this.parentElement.parentElement.removeChild(this.parentElement),e.stopPropagation())}),o.appendChild(h);var i=document.createElement("div");return i.className="smash-pane",i.dataset.id=e,i.innerHTML=a,r.appendChild(i),{tab:h,pane:i}},smash.workspace.activeTab=function(){var e=smash.get(tabs,".smash-tab.active");if(!e)return null;var s=smash.get(document,'.smash-pane[data-id="'+e.dataset.id+'"]');return s?{tab:e,pane:s}:null},smash.workspace.createTitle=function(e){return e.replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/gi,"")+(smash.workspace.baseTitle?" | "+smash.workspace.baseTitle:"")};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNtYXNoLmpzIiwiYWpheC5qcyIsImNsYXNzLmpzIiwiY29uZmlnLmpzIiwiZGlhbG9nLmpzIiwiZXhjZXB0aW9uLmpzIiwiaW5wdXQuanMiLCJyb3V0ZXIuanMiLCJzZWFyY2hib3guanMiLCJzaWRlYmFyLmpzIiwic3RvcmFnZS5qcyIsIndvcmtzcGFjZS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInNtYXNoIiwiaW5pdCIsImNvbmZpZyIsInNpZGViYXIiLCJzZWFyY2hib3giLCJ3b3Jrc3BhY2UiLCJpbnB1dCIsImdldCIsInBhcmVudCIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImNvbnNvbGUiLCJsb2ciLCJnZXRBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGlkZSIsImVsIiwiaSIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsInNob3ciLCJvbiIsImV2ZW50IiwiY2FsbGJhY2siLCJlbGVtZW50cyIsImZ1enp5Q29tcGFyZSIsInNlYXJjaCIsImNvbXBhcmUiLCJ1bmRlZmluZWQiLCJyZWdleCIsInRvTG93ZXJDYXNlIiwic3BsaXQiLCJqb2luIiwibWF0Y2giLCJhamF4IiwiX2hlYWRlcnNfIiwiYWRkSGVhZGVyIiwibmFtZSIsInZhbHVlIiwicmVtb3ZlSGVhZGVyIiwib25lcnJvciIsIm1lc3NhZ2UiLCJvbnVuYXV0aG9yaXplZCIsIl94aHJfIiwiWE1MSHR0cFJlcXVlc3QiLCJ4aHIiLCJ2ZXJzaW9ucyIsIkFjdGl2ZVhPYmplY3QiLCJzZW5kIiwidXJsIiwibWV0aG9kIiwiZGF0YSIsInJlc3BvbnNlVHlwZSIsImFzeW5jIiwieCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXNwb25zZSIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwicXVlcnkiLCJrZXkiLCJwdXNoIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicG9zdCIsImRhdGFTdHIiLCJKU09OIiwic3RyaW5naWZ5IiwiY2xhc3MiLCJhZGQiLCJjbGFzc05hbWUiLCJoYXMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJyZXBsYWNlIiwiaW5kZXhPZiIsInRvZ2dsZSIsIl92YWx1ZXNfIiwiX3NpZGViYXJfbG9ja18iLCJ2Iiwic3RvcmFnZSIsIm9wdGlvbiIsIm8iLCJFeGNlcHRpb24iLCJzZXQiLCJkaWFsb2ciLCJuZXciLCJjb250ZW50IiwiYmFja2Ryb3AiLCJjaGVja0JhY2tkcm9wIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaGlsZCIsIm9uY2xpY2siLCJjbG9zZSIsInRoaXMiLCJ0b1N0cmluZyIsImlucHV0cyIsInBhcmVudEVsZW1lbnQiLCJzZXRWYWx1ZSIsIm9ua2V5dXAiLCJnZXRWYWx1ZSIsImxhYmVsIiwicGxhY2Vob2xkZXIiLCJsIiwiZ2V0QXR0cmlidXRlIiwic2VsZWN0Iiwic2VsZWN0cyIsIm9sZCIsInNlbGVjdGVkSW5kZXgiLCJvcHRpb25zIiwidGV4dCIsImZvY3VzIiwib25mb2N1cyIsIm9uY2hhbmdlIiwidHlwZSIsInNldEF0dHJpYnV0ZSIsInVsIiwiaiIsImxpIiwib25tb3VzZWRvd24iLCJzdG9wUHJvcGFnYXRpb24iLCJxIiwiaXRlbXMiLCJrZXlDb2RlIiwic3Vic3RyaW5nIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiaXRlbSIsInJlc3VsdHMiLCJjaGVja2JveEluaXQiLCJjaGVja2JveCIsImNoZWNrYm94ZXMiLCJjIiwiY2hlY2tlZCIsInJvdXRlciIsIl9fcGFyc2VSb3V0ZVJlZ2V4IiwiX19keW5hbWljUGFydHMiLCJfX3JvdXRlcyIsInN0YXRpYyIsImR5bmFtaWMiLCJwYXRoIiwicm91dGUiLCJwYXJzZVJvdXRlIiwiZGVwdGgiLCJudW1WYXJzIiwiZGlzcGxheVVSTCIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJyZWRpcmVjdCIsImxvY2F0aW9uIiwiaGFuZGxlTm90Rm91bmQiLCJydW4iLCJvbnBvcHN0YXRlIiwiZXhlY3V0ZSIsImdldFBhdGgiLCJtYXRjaGVzIiwidmFyTnVtIiwidmFycyIsImhyZWYiLCJob3N0IiwiaG9zdG5hbWUiLCJwYXRobmFtZSIsIlJlZ0V4cCIsInF1ZXJ5UGFyYW0iLCJwYXJhbSIsInJlZ2V4UyIsImV4ZWMiLCJpXyIsIm1pbkF1dG9Db21wbGV0ZUxlbmd0aCIsIm9uYmx1ciIsIm9udmFsdWUiLCJzc2IiLCJzaWJsIiwidG9nZ2xlTG9jayIsInNpYiIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJ1bnNldCIsInJlbW92ZUl0ZW0iLCJnZXRJdGVtIiwicGFyc2UiLCJjbGVhciIsImJhc2VUaXRsZSIsIl93c18iLCJfaGRyXyIsIl9zYl8iLCJfdGFic18iLCJhZGRUYWIiLCJpZCIsInRpdGxlIiwicGFuZWwiLCJ0YWJzIiwicGFuZXNDb250YWluZXIiLCJjcmVhdGVUaXRsZSIsInRhYiIsInBhbmUiLCJkYXRhc2V0IiwiYWN0aXZlIiwib25jbG9zZSIsInByZXZpb3VzU2libGluZyIsIm5leHRTaWJsaW5nIiwiYWN0aXZlVGFiIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBQUMsaUJBQUEsT0FBQSxTQUFBQyxHQUNBQyxNQUFBQyxTQUNBLEVBRUEsSUFBQUQsU0FFQUEsT0FBQUMsS0FBQSxXQUNBRCxNQUFBRSxPQUFBRCxPQUNBRCxNQUFBRyxRQUFBRixPQUNBRCxNQUFBSSxVQUFBSCxPQUNBRCxNQUFBSyxVQUFBSixPQUNBRCxNQUFBTSxNQUFBTCxRQUdBRCxNQUFBTyxJQUFBLFNBQUFDLEVBQUFDLEdBQ0EsSUFDQSxNQUFBRCxHQUFBRSxjQUFBRCxHQUNBLE1BQUFWLEdBQ0FZLFFBQUFDLElBQUFiLEtBS0FDLE1BQUFhLE9BQUEsU0FBQUwsRUFBQUMsR0FDQSxJQUNBLE1BQUFELEdBQUFNLGlCQUFBTCxHQUNBLE1BQUFWLEdBQ0FZLFFBQUFDLElBQUFiLEtBS0FDLE1BQUFlLEtBQUEsU0FBQVAsRUFBQUMs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S0FBQUcsY0FBQXlHLGFBQ0E1RyxLQUFBRyxjQUFBeUcsWUFBQTlHLFlBR0F5RyxFQUFBMU0sTUFBQU8sSUFBQXFGLFNBQUEsd0JBQUFPLEtBQUFHLGNBQUFxRyxRQUFBUixHQUFBLFFBQ0FPLEVBQUFwRyxjQUFBTixZQUFBMEcsR0FFQXZHLEtBQUFHLGNBQUFBLGNBQUFOLFlBQUFHLEtBQUFHLGVBQ0F2RyxFQUFBOEgscUJBRUF5RSxFQUFBdkcsWUFBQTBHLEVBR0EsSUFBQUMsR0FBQTlHLFNBQUFDLGNBQUEsTUFLQSxPQUpBNkcsR0FBQWxJLFVBQUEsYUFDQWtJLEVBQUFDLFFBQUFSLEdBQUFBLEVBQ0FPLEVBQUE1RyxVQUFBTCxFQUNBOEcsRUFBQXhHLFlBQUEyRyxJQUNBRCxJQUFBQSxFQUFBQyxLQUFBQSxJQUdBMU0sTUFBQUssVUFBQTJNLFVBQUEsV0FDQSxHQUFBUCxHQUFBek0sTUFBQU8sSUFBQStMLEtBQUEsb0JBQ0EsS0FBQUcsRUFDQSxNQUFBLEtBRUEsSUFBQUMsR0FBQTFNLE1BQUFPLElBQUFxRixTQUFBLHdCQUFBNkcsRUFBQUUsUUFBQVIsR0FBQSxLQUNBLE9BQUFPLElBR0FELElBQUFBLEVBQUFDLEtBQUFBLEdBRkEsTUFLQTFNLE1BQUFLLFVBQUFtTSxZQUFBLFNBQUFKLEdBQ0EsTUFBQUEsR0FBQXhILFFBQUEsa0NBQUEsS0FBQTVFLE1BQUFLLFVBQUF3TCxVQUFBLE1BQUE3TCxNQUFBSyxVQUFBd0wsVUFBQSIsImZpbGUiOiJzbWFzaC5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbihlKXtcbiAgICBzbWFzaC5pbml0KCk7XG59LCBmYWxzZSk7XG5cbnZhciBzbWFzaCA9IHt9O1xuXG5zbWFzaC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgc21hc2guY29uZmlnLmluaXQoKTtcbiAgICBzbWFzaC5zaWRlYmFyLmluaXQoKTtcbiAgICBzbWFzaC5zZWFyY2hib3guaW5pdCgpO1xuICAgIHNtYXNoLndvcmtzcGFjZS5pbml0KCk7XG4gICAgc21hc2guaW5wdXQuaW5pdCgpO1xufTtcblxuc21hc2guZ2V0ID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuc21hc2guZ2V0QWxsID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuc21hc2guaGlkZSA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgICB2YXIgZWwgPSBzbWFzaC5nZXRBbGwocGFyZW50LCBzZWxlY3Rvcik7XG4gICAgZm9yICh2YXIgaT0wOyBpPGVsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVsW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxufTtcblxuc21hc2guc2hvdyA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgICB2YXIgZWwgPSBzbWFzaC5nZXRBbGwocGFyZW50LCBzZWxlY3Rvcik7XG4gICAgZm9yICh2YXIgaT0wOyBpPGVsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVsW2ldLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICB9XG59O1xuXG5zbWFzaC5vbiA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IsIGV2ZW50LCBjYWxsYmFjaykge1xuICAgIHZhciBlbGVtZW50cyA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8ZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxlbWVudHNbaV1bZXZlbnRdID0gY2FsbGJhY2s7XG4gICAgfVxufTtcblxuc21hc2guZnV6enlDb21wYXJlID0gZnVuY3Rpb24oc2VhcmNoLCBjb21wYXJlKSB7XG4gICAgaWYgKGNvbXBhcmUgPT0gdW5kZWZpbmVkIHx8IHNlYXJjaCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgcmVnZXggPSBcIi4qP1wiICsgc2VhcmNoLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCJcIikuam9pbihcIi4qP1wiKSArIFwiLio/XCI7XG4gICAgcmV0dXJuIGNvbXBhcmUudG9Mb3dlckNhc2UoKS5tYXRjaChyZWdleCk7XG59O1xuIiwic21hc2guYWpheCA9IHtcbiAgICBfaGVhZGVyc186IFtdXG59O1xuXG5zbWFzaC5hamF4LmFkZEhlYWRlciA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgc21hc2guYWpheC5faGVhZGVyc19bbmFtZV0gPSB2YWx1ZTtcbn07XG5cbnNtYXNoLmFqYXgucmVtb3ZlSGVhZGVyID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSBzbWFzaC5hamF4Ll9oZWFkZXJzX1tuYW1lXTtcbn07XG5cbnNtYXNoLmFqYXgub25lcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbn07XG5cbnNtYXNoLmFqYXgub251bmF1dGhvcml6ZWQgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgc21hc2guYWpheC5vbmVycm9yKG1lc3NhZ2UpO1xufTtcblxuc21hc2guYWpheC5feGhyXyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgfVxuICAgIHZhciB2ZXJzaW9ucyA9IFtcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC42LjBcIixcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC41LjBcIixcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC40LjBcIixcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC4zLjBcIixcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC4yLjBcIixcbiAgICAgICAgXCJNaWNyb3NvZnQuWG1sSHR0cFwiXG4gICAgXTtcbiAgICB2YXIgeGhyO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVyc2lvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHhociA9IG5ldyBBY3RpdmVYT2JqZWN0KHZlcnNpb25zW2ldKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHhocjtcbn07XG5cbnNtYXNoLmFqYXguc2VuZCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBtZXRob2QsIGRhdGEsIHJlc3BvbnNlVHlwZSwgb25lcnJvciwgYXN5bmMpIHtcbiAgICBpZiAoYXN5bmMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhc3luYyA9IHRydWU7XG4gICAgfVxuICAgIGlmIChvbmVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb25lcnJvciA9IHNtYXNoLmFqYXgub25lcnJvcjtcbiAgICB9XG4gICAgdmFyIHggPSBzbWFzaC5hamF4Ll94aHJfKCk7XG4gICAgeC5yZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGU7XG4gICAgeC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHgucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHguc3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIDIwMDpcbiAgICAgICAgICAgIGNhc2UgMjAxOlxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh4LnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQwMTpcbiAgICAgICAgICAgICAgICBzbWFzaC5hamF4Lm9udW5hdXRob3JpemVkKHgucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBvbmVycm9yKHgucmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuXHRcdH1cbiAgICB9O1xuICAgIHgub3BlbihtZXRob2QsIHVybCwgYXN5bmMpO1xuICAgIGlmIChyZXNwb25zZVR5cGUgPT0gJ2pzb24nKSB7XG4gICAgICAgIHguc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PSAnUE9TVCcpIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7XG4gICAgfVxuICAgIGZvciAodmFyIG5hbWUgaW4gc21hc2guYWpheC5faGVhZGVyc18pIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHNtYXNoLmFqYXguX2hlYWRlcnNfW25hbWVdKTtcbiAgICB9XG4gICAgeC5zZW5kKGRhdGEpXG59O1xuXG5zbWFzaC5hamF4LmdldCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBkYXRhLCByZXNwb25zZVR5cGUsIG9uZXJyb3IsIGFzeW5jKSB7XG4gICAgdmFyIHF1ZXJ5ID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgICAgcXVlcnkucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW2tleV0pKTtcbiAgICB9XG4gICAgc21hc2guYWpheC5zZW5kKHVybCArIChxdWVyeS5sZW5ndGggPyAnPycgKyBxdWVyeS5qb2luKCcmJykgOiAnJyksIGNhbGxiYWNrLCAnR0VUJywgbnVsbCwgcmVzcG9uc2VUeXBlLCBvbmVycm9yLCAgYXN5bmMpXG59O1xuXG5zbWFzaC5hamF4LnBvc3QgPSBmdW5jdGlvbiAodXJsLCBjYWxsYmFjaywgZGF0YSwgcmVzcG9uc2VUeXBlLCBvbmVycm9yLCBhc3luYykge1xuICAgIHZhciBkYXRhU3RyO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICAgIGlmIChyZXNwb25zZVR5cGUgIT0gJ2pzb24nKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW2tleV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGFTdHIgPSBxdWVyeS5qb2luKCcmJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGFTdHIgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzbWFzaC5hamF4LnNlbmQodXJsLCBjYWxsYmFjaywgJ1BPU1QnLCBkYXRhU3RyLCByZXNwb25zZVR5cGUsIG9uZXJyb3IsIGFzeW5jKVxufTtcbiIsInNtYXNoLmNsYXNzID0ge307XG5cbnNtYXNoLmNsYXNzLmFkZCA9IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpIHtcbiAgICBpZiAoIXNtYXNoLmNsYXNzLmhhcyhlbCwgY2xhc3NOYW1lKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QgPyBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSkgOiBlbC5jbGFzc05hbWUgKz0gKCcgJyArIGNsYXNzTmFtZSk7XG4gICAgfVxufTtcblxuc21hc2guY2xhc3MucmVtb3ZlID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoZWwsIGNsYXNzTmFtZSkpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0ID8gZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpIDogZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UoY2xhc3NOYW1lLCAnJyk7XG4gICAgfVxufTtcblxuc21hc2guY2xhc3MuaGFzID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIHJldHVybiAoKFwiIFwiICsgZWwuY2xhc3NOYW1lICsgXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csIFwiIFwiKS5pbmRleE9mKFwiIFwiICsgY2xhc3NOYW1lICsgXCIgXCIpID4gLTEpO1xufTtcblxuc21hc2guY2xhc3MudG9nZ2xlID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIHNtYXNoLmNsYXNzLmhhcyhlbCwgY2xhc3NOYW1lKSA/IHNtYXNoLmNsYXNzLnJlbW92ZShlbCwgY2xhc3NOYW1lKSA6IHNtYXNoLmNsYXNzLmFkZChlbCwgY2xhc3NOYW1lKTtcbn07XG4iLCJzbWFzaC5jb25maWcgPSB7XG4gICAgX3ZhbHVlc186IHtcbiAgICAgICAgX3NpZGViYXJfbG9ja186IGZhbHNlXG4gICAgfVxufVxuXG5zbWFzaC5jb25maWcuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gc21hc2guc3RvcmFnZS5nZXQoJ2NvbmZpZycpO1xuICAgIGlmICh2KSB7XG4gICAgICAgIHNtYXNoLmNvbmZpZy5fdmFsdWVzXyA9IHY7XG4gICAgfVxufTtcblxuc21hc2guY29uZmlnLmdldCA9IGZ1bmN0aW9uKG9wdGlvbikge1xuICAgIHZhciBvID0gJ18nICsgb3B0aW9uICsgJ18nO1xuICAgIGlmIChvIGluIHNtYXNoLmNvbmZpZy5fdmFsdWVzXykge1xuICAgICAgICByZXR1cm4gc21hc2guY29uZmlnLl92YWx1ZXNfW29dO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgc21hc2guRXhjZXB0aW9uKCcwMDEnLCAnSW52YWxpZCBjb25maWcgb3B0aW9uIFwiJyArIG9wdGlvbiArICdcIicpO1xufTtcblxuc21hc2guY29uZmlnLnNldCA9IGZ1bmN0aW9uKG9wdGlvbiwgdmFsdWUpIHtcbiAgICB2YXIgbyA9ICdfJyArIG9wdGlvbiArICdfJztcbiAgICBpZiAoIW8gaW4gc21hc2guY29uZmlnLl92YWx1ZXNfKSB7XG4gICAgICAgIHRocm93IG5ldyBzbWFzaC5FeGNlcHRpb24oJzAwMScsICdJbnZhbGlkIGNvbmZpZyBvcHRpb24gXCInICsgb3B0aW9uICsgJ1wiJyk7XG4gICAgfVxuICAgIHNtYXNoLmNvbmZpZy5fdmFsdWVzX1tvXSA9IHZhbHVlO1xuICAgIHNtYXNoLnN0b3JhZ2Uuc2V0KCdjb25maWcnLCBzbWFzaC5jb25maWcuX3ZhbHVlc18pO1xufTtcbiIsInNtYXNoLmRpYWxvZyA9IHt9O1xuXG5zbWFzaC5kaWFsb2cubmV3ID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHZhciBiYWNrZHJvcCA9IHNtYXNoLmRpYWxvZy5jaGVja0JhY2tkcm9wKCk7XG5cbiAgICB2YXIgZGlhbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGlhbG9nLmNsYXNzTmFtZSA9ICdzbWFzaC1kaWFsb2cnO1xuICAgIGRpYWxvZy5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgIGJhY2tkcm9wLmFwcGVuZENoaWxkKGRpYWxvZyk7XG59O1xuXG5zbWFzaC5kaWFsb2cuY2hlY2tCYWNrZHJvcCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChiYWNrZHJvcCA9IHNtYXNoLmdldChkb2N1bWVudCwgXCIuc21hc2gtZGlhbG9nLWJhY2tkcm9wXCIpKSB7XG4gICAgICAgIGlmIChkaWFsb2cgPSBzbWFzaC5nZXQoZG9jdW1lbnQsIFwiLnNtYXNoLWRpYWxvZy1iYWNrZHJvcCAuc21hc2gtZGlhbG9nXCIpKSB7XG4gICAgICAgICAgICBiYWNrZHJvcC5yZW1vdmVDaGlsZChkaWFsb2cpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYWNrZHJvcDtcbiAgICB9XG4gICAgdmFyIGJhY2tkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYmFja2Ryb3AuY2xhc3NOYW1lID0gJ3NtYXNoLWRpYWxvZy1iYWNrZHJvcCc7XG4gICAgYmFja2Ryb3AuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJzbWFzaC1kaWFsb2ctYmFja2dyb3VuZFwiPjwvZGl2Pic7XG4gICAgc21hc2guZ2V0KGJhY2tkcm9wLCAnLnNtYXNoLWRpYWxvZy1iYWNrZ3JvdW5kJykub25jbGljayA9IHNtYXNoLmRpYWxvZy5jbG9zZTtcbiAgICBzbWFzaC5nZXQoZG9jdW1lbnQsICdib2R5JykuYXBwZW5kQ2hpbGQoYmFja2Ryb3ApO1xuICAgIHJldHVybiBiYWNrZHJvcDtcbn07XG5cbnNtYXNoLmRpYWxvZy5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChkaWFsb2cgPSBzbWFzaC5nZXQoZG9jdW1lbnQsIFwiLnNtYXNoLWRpYWxvZy1iYWNrZHJvcFwiKSkge1xuICAgICAgICBzbWFzaC5nZXQoZG9jdW1lbnQsICdib2R5JykucmVtb3ZlQ2hpbGQoZGlhbG9nKTtcbiAgICB9XG59O1xuIiwic21hc2guRXhjZXB0aW9uID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJ1NtYXNoRXhjZXB0aW9uICcgKyB0aGlzLnZhbHVlICsgJzogJyArIHRoaXMubWVzc2FnZTtcbiAgICB9O1xufTtcbiIsInNtYXNoLmlucHV0ID0ge307XG5cbnNtYXNoLmlucHV0LmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbWFzaC1pbnB1dCBpbnB1dCwgLnNtYXNoLXRleHRhcmVhIHRleHRhcmVhXCIpO1xuICAgIHZhciBpbnB1dDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpbnB1dCA9IGlucHV0c1tpXTtcbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhpbnB1dC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnNldFZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBpbnB1dC5vbmtleXVwKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIikpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dC52YWx1ZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInRleHRhcmVhXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKGlucHV0LnBhcmVudEVsZW1lbnQsICdoYXMtZmxvYXRpbmctbGFiZWwnKSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGlucHV0LnBhcmVudEVsZW1lbnQsICdoYXMtZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChpbnB1dC5wYXJlbnRFbGVtZW50LCAnZmxvYXRpbmctbGFiZWwnKTtcblxuICAgICAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IGlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICBpbnB1dC5vbmtleXVwID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHZhciBsID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgICAgICBpZiAobCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnB1dC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkge1xuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5zZXRWYWx1ZShpbnB1dC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoaW5wdXQucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJyk7XG4gICAgfVxuICAgIHZhciBzZWxlY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbWFzaC1zZWxlY3Qgc2VsZWN0XCIpO1xuICAgIHZhciBzZWxlY3Q7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNlbGVjdCA9IHNlbGVjdHNbaV07XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnaGFzLWZsb2F0aW5nLWxhYmVsJykpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShzZWxlY3QucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSBzZWxlY3QuZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHRoaXMsICdpcy1mb2N1c3NlZCcpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICAgICAgdmFyIG9sZCA9IHNlbGVjdC52YWx1ZTtcbiAgICAgICAgICAgIHNlbGVjdC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKHNlbGVjdC5zZWxlY3RlZEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHNlbGVjdC5vcHRpb25zW3NlbGVjdC5zZWxlY3RlZEluZGV4XS50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgIGlucHV0Lm9uZm9jdXMoKTtcbiAgICAgICAgICAgIGlmIChvbGQgIT0gdmFsdWUgJiYgc2VsZWN0Lm9uY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0Lm9uY2hhbmdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3QgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XG4gICAgICAgICAgICBpZiAoc2VsZWN0LnNlbGVjdGVkSW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Qub3B0aW9uc1tzZWxlY3Quc2VsZWN0ZWRJbmRleF0udmFsdWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGlucHV0KTtcblxuICAgICAgICB2YXIgb3B0aW9ucyA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKFwib3B0aW9uXCIpO1xuICAgICAgICB2YXIgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9wdGlvbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zW2pdO1xuICAgICAgICAgICAgaWYgKCFvcHRpb24uZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgb3B0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgIGxpLmlubmVySFRNTCA9IG9wdGlvbi5pbm5lckhUTUw7XG4gICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgICAgICBsaS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5zZXRWYWx1ZSh0aGlzLmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cub25tb3VzZWRvd24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh1bCk7XG4gICAgICAgIGlucHV0Lm9uZm9jdXMgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgbCA9IHRoaXMucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwibGFiZWxcIik7XG4gICAgICAgICAgICBpZiAobCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKGwsICdzaG93Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGwsICdzaG93Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQodGhpcywgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBxID0gJyc7XG4gICAgICAgICAgICB3aW5kb3cub25tb3VzZWRvd24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cub25tb3VzZWRvd24gPSBudWxsO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vbmtleXVwID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbXMgPSBzbWFzaC5nZXRBbGwoc2VsZWN0LCAndWwgbGknKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8aXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2ldLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNtYXNoLnNob3coc2VsZWN0LCAndWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHNlbGVjdCwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd2luZG93Lm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIGlmIChxLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLnN1YnN0cmluZygwLCBxLmxlbmd0aC0xKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICAgICAgICBxID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtcyA9IHNtYXNoLmdldEFsbChzZWxlY3QsICd1bCBsaScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNtYXNoLnNob3coc2VsZWN0LCAndWwnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW07XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW1zW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNtYXNoLmZ1enp5Q29tcGFyZShxLCBpdGVtLmlubmVySFRNTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmhpZGUoc2VsZWN0LCAndWwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3aW5kb3cuZm9jdXMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoc2VsZWN0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5zZXRWYWx1ZShzZWxlY3QucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChzZWxlY3QucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJyk7XG4gICAgfVxuICAgIHNtYXNoLmlucHV0LmNoZWNrYm94SW5pdCgpO1xufTtcblxuc21hc2guaW5wdXQuY2hlY2tib3hJbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtYXNoLWNoZWNrYm94IGlucHV0XCIpO1xuICAgIHZhciBjaGVja2JveDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZWNrYm94ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2hlY2tib3ggPSBjaGVja2JveGVzW2ldO1xuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKGNoZWNrYm94LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjID0gIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgYy5jbGFzc05hbWUgPSAnY2hlY2tzJztcbiAgICAgICAgYy5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPmNoZWNrX2JveF9vdXRsaW5lX2JsYW5rPC9pPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2hlY2tlZFwiPmNoZWNrX2JveDwvaT4nO1xuICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGMpO1xuXG4gICAgICAgIGlmIChsYWJlbCA9IGNoZWNrYm94LmdldEF0dHJpYnV0ZSgnbGFiZWwnKSkge1xuICAgICAgICAgICAgdmFyIGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBsLmNsYXNzTmFtZSA9ICdsYWJlbCc7XG4gICAgICAgICAgICBsLmlubmVySFRNTCA9IGxhYmVsO1xuICAgICAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChsKTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoY2hlY2tib3gucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJyk7XG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBzbWFzaC5jbGFzcy5oYXMoY2hlY2tib3gucGFyZW50RWxlbWVudCwgJ2NoZWNrZWQnKTtcblxuICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLnRvZ2dsZSh0aGlzLCAnY2hlY2tlZCcpO1xuICAgICAgICAgICAgc21hc2guZ2V0KHRoaXMsICdpbnB1dCcpLmNoZWNrZWQgPSBzbWFzaC5jbGFzcy5oYXModGhpcywgJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgIGlmIChjaGVja2JveC5wYXJlbnRFbGVtZW50Lm9uY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5vbmNoYW5nZShzbWFzaC5jbGFzcy5oYXModGhpcywgJ2NoZWNrZWQnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5nZXRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNtYXNoLmNsYXNzLmhhcyh0aGlzLCAnY2hlY2tlZCcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyh0aGlzLCAnY2hlY2tlZCcpID09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbmNsaWNrKCk7XG4gICAgICAgIH07XG4gICAgfVxufTtcbiIsInNtYXNoLnJvdXRlciA9IHtcbiAgICBfX3BhcnNlUm91dGVSZWdleDogL3soLio/KX0vaWcsXG4gICAgX19keW5hbWljUGFydHM6IFtdLFxuICAgIF9fcm91dGVzOiB7XG4gICAgICAgIHN0YXRpYzogW10sXG4gICAgICAgIGR5bmFtaWM6IFtdXG4gICAgfVxufTtcblxuc21hc2gucm91dGVyLmFkZCA9IGZ1bmN0aW9uKHBhdGgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHJvdXRlID0gc21hc2gucm91dGVyLnBhcnNlUm91dGUocGF0aCk7XG4gICAgaWYgKHJvdXRlLnJlZ2V4KSB7XG4gICAgICAgIHJvdXRlLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIGlmICghc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdKSB7XG4gICAgICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXVtyb3V0ZS5udW1WYXJzXSkge1xuICAgICAgICAgICAgc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdLnB1c2gocm91dGUpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5zdGF0aWNbcGF0aF0gPSBjYWxsYmFjaztcbn07XG5cbnNtYXNoLnJvdXRlci5zZXQgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIHNtYXNoLnJvdXRlci5kaXNwbGF5VVJMKHJvdXRlKTtcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3BvcHN0YXRlJykpO1xufTtcblxuc21hc2gucm91dGVyLmRpc3BsYXlVUkwgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShcIlwiLCBcIlwiLCByb3V0ZSk7XG59O1xuXG5zbWFzaC5yb3V0ZXIucmVkaXJlY3QgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIHdpbmRvdy5sb2NhdGlvbiA9IHJvdXRlO1xufTtcblxuc21hc2gucm91dGVyLmhhbmRsZU5vdEZvdW5kID0gZnVuY3Rpb24ocm91dGUpIHtcbiAgICBjb25zb2xlLmxvZyhcInJvdXRlOiBcIiArIEpTT04uc3RyaW5naWZ5KHJvdXRlKSArIFwiIGRvZXMgbm90IGV4aXN0XCIpO1xufTtcblxuc21hc2gucm91dGVyLnJ1biA9IGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5vbnBvcHN0YXRlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgc21hc2gucm91dGVyLmV4ZWN1dGUoKTtcbiAgICB9O1xuICAgIHNtYXNoLnJvdXRlci5leGVjdXRlKCk7XG59XG5cbnNtYXNoLnJvdXRlci5leGVjdXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBhdGggPSB0aGlzLmdldFBhdGgoKTtcbiAgICBpZiAodGhpcy5fX3JvdXRlcy5zdGF0aWNbcGF0aC5wYXRoXSkge1xuICAgICAgICB0aGlzLl9fcm91dGVzLnN0YXRpY1twYXRoLnBhdGhdKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGRlcHRoID0gcGF0aC5wYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGgtMTtcbiAgICBpZiAodGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXSkge1xuICAgICAgICB2YXIgcm91dGU7XG4gICAgICAgIHZhciBtYXRjaGVzO1xuICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICBmb3IgKHZhciB2YXJOdW0gaW4gdGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdW3Zhck51bV0pIHtcbiAgICAgICAgICAgICAgICB2YXIgcm91dGUgPSB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdW3Zhck51bV1baXRlbV07XG4gICAgICAgICAgICAgICAgbWF0Y2hlcyA9IHBhdGgucGF0aC5tYXRjaChyb3V0ZS5yZWdleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8cm91dGUubnVtVmFyczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbcm91dGUudmFyc1tpXV0gPSBtYXRjaGVzW2krMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJvdXRlLmNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzbWFzaC5yb3V0ZXIuaGFuZGxlTm90Rm91bmQocGF0aCk7XG59O1xuXG5zbWFzaC5yb3V0ZXIuZ2V0UGF0aCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgbC5ocmVmID0gd2luZG93LmxvY2F0aW9uO1xuICAgIHJldHVybiB7aG9zdDogbC5ob3N0bmFtZSwgcGF0aDogbC5wYXRobmFtZX07XG59O1xuXG5zbWFzaC5yb3V0ZXIucGFyc2VSb3V0ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBpZiAocGF0aC5zdWJzdHJpbmcoMCwxKSAhPSBcIi9cIikge1xuICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoO1xuICAgIH1cbiAgICBpZiAocGF0aC5zdWJzdHJpbmcocGF0aC5sZW5ndGgtMikgPT0gXCIvXCIpIHtcbiAgICAgICAgcGF0aCA9IFwiL1wiICsgcGF0aDtcbiAgICB9XG4gICAgdmFyIHJvdXRlID0ge1xuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICBkZXB0aDogKHBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aCAtIDEpLFxuICAgICAgICB2YXJzOiBbXSxcbiAgICAgICAgbnVtVmFyczogMFxuICAgIH07XG4gICAgc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzID0gcGF0aC5tYXRjaChzbWFzaC5yb3V0ZXIuX19wYXJzZVJvdXRlUmVnZXgpO1xuICAgIGlmIChzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMgIT0gdW5kZWZpbmVkICYmIHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cyAhPSBudWxsKSB7XG4gICAgICAgIHZhciByZWdleCA9IFwiXlwiICsgcGF0aC5yZXBsYWNlKC9cXC8vaWcsIFwiXFxcXC9cIikgKyBcIiRcIjtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcm91dGUubnVtVmFycysrO1xuICAgICAgICAgICAgcm91dGUudmFycy5wdXNoKHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0c1tpXS5zdWJzdHJpbmcoMSwgc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzW2ldLmxlbmd0aC0xKSk7XG4gICAgICAgICAgICByZWdleCA9IHJlZ2V4LnJlcGxhY2Uoc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzW2ldLCBcIiguKj8pXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJvdXRlLnJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleCwgJ2knKTtcbiAgICB9XG4gICAgcmV0dXJuIHJvdXRlO1xufTtcblxuc21hc2gucm91dGVyLnF1ZXJ5UGFyYW0gPSBmdW5jdGlvbihwYXJhbSkge1xuICAgIHZhciByZWdleFMgPSBcIltcXFxcPyZdXCIrcGFyYW0rXCI9KFteJiNdKilcIixcbiAgICByZWdleCA9IG5ldyBSZWdFeHAoIHJlZ2V4UyApLFxuICAgIHJlc3VsdHMgPSByZWdleC5leGVjKCB3aW5kb3cubG9jYXRpb24uc2VhcmNoICk7XG4gICAgaWYoIHJlc3VsdHMgPT0gbnVsbCApe1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0c1sxXTsvL2RlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzFdLnJlcGxhY2UoL1xcKy9nLCBcIiBcIikpO1xufTtcbiIsInNtYXNoLnNlYXJjaGJveCA9IHtcbiAgICBpXzogZmFsc2UsXG4gICAgbWluQXV0b0NvbXBsZXRlTGVuZ3RoOiAzLFxuICAgIG9uZm9jdXM6IHVuZGVmaW5lZCxcbiAgICBvbmJsdXI6IHVuZGVmaW5lZCxcbiAgICBvbnZhbHVlOiB1bmRlZmluZWQsXG59O1xuXG5zbWFzaC5zZWFyY2hib3guaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChzbWFzaC5zZWFyY2hib3guaV8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc3NiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggaW5wdXRcIik7XG4gICAgaWYgKCFzc2IpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzc2Iub25mb2N1cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94LnJlc3VsdHMoJzxkaXYgY2xhc3M9XCJzbWFzaC1pbnN0cnVjdGlvblwiPlN0YXJ0IHR5cGluZyB0byBmaW5kIHJlc3VsdHM8L2Rpdj4nKTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1oZWFkZXJcIiksICdpcy1mb2N1c3NlZCcpO1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpLCAnc2hvdycpO1xuICAgICAgICBpZiAoc21hc2guc2VhcmNoYm94Lm9uZm9jdXMpIHtcbiAgICAgICAgICAgIHNtYXNoLnNlYXJjaGJveC5vbmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNzYi5vbmJsdXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtaGVhZGVyXCIpLCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2VhcmNoYm94IC5zbWFzaC1zZWFyY2hib3gtcmVzdWx0c1wiKSwgJ3Nob3cnKTtcbiAgICAgICAgaWYgKHNtYXNoLnNlYXJjaGJveC5vbmJsdXIpIHtcbiAgICAgICAgICAgIHNtYXNoLnNlYXJjaGJveC5vbmJsdXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc3NiLm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA8IHNtYXNoLnNlYXJjaGJveC5taW5BdXRvQ29tcGxldGVMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc21hc2guc2VhcmNoYm94Lm9uY2hhbmdlKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gub25jaGFuZ2UodGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNtYXNoLnNlYXJjaGJveC5pXyA9IHRydWU7XG59O1xuXG5zbWFzaC5zZWFyY2hib3gucmVzdWx0cyA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2VhcmNoYm94IC5zbWFzaC1zZWFyY2hib3gtcmVzdWx0c1wiKTtcbiAgICByZXN1bHRzLmlubmVySFRNTCA9IGNvbnRlbnQ7XG59O1xuIiwic21hc2guc2lkZWJhciA9IHtcbiAgICBpXzogZmFsc2Vcbn07XG5cbnNtYXNoLnNpZGViYXIuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChzbWFzaC5zaWRlYmFyLmlfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHNpYmwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXIgLmxvY2tcIik7XG4gICAgaWYgKCFzaWJsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2libC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNtYXNoLnNpZGViYXIudG9nZ2xlTG9jaygpO1xuICAgIH07XG5cbiAgICB2YXIgc2liID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyXCIpO1xuICAgIHNtYXNoLmNsYXNzLmFkZChzaWIsICdpcy11bmxvY2tlZCcpO1xuICAgIHNtYXNoLnNpZGViYXIuaV8gPSB0cnVlO1xuICAgIGlmIChzbWFzaC5jb25maWcuZ2V0KCdzaWRlYmFyX2xvY2snKSkge1xuICAgICAgICBzbWFzaC5zaWRlYmFyLnRvZ2dsZUxvY2soKTtcbiAgICB9XG59O1xuXG5zbWFzaC5zaWRlYmFyLnRvZ2dsZUxvY2sgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXNtYXNoLnNpZGViYXIuaV8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzbWFzaC5jbGFzcy50b2dnbGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyIC5sb2NrXCIpLCAndW5sb2NrJyk7XG4gICAgc21hc2guY2xhc3MudG9nZ2xlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhclwiKSwgJ2lzLXVubG9ja2VkJyk7XG4gICAgc21hc2guY29uZmlnLnNldCgnc2lkZWJhcl9sb2NrJywgIXNtYXNoLmNsYXNzLmhhcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXJcIiksICdpcy11bmxvY2tlZCcpKTtcbn07XG4iLCJzbWFzaC5zdG9yYWdlID0ge307XG5cbnNtYXNoLnN0b3JhZ2Uuc2V0ID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbn07XG5cbnNtYXNoLnN0b3JhZ2UudW5zZXQgPSBmdW5jdGlvbihrZXkpIHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xufTtcblxuc21hc2guc3RvcmFnZS5nZXQgPSBmdW5jdGlvbihrZXkpIHtcbiAgICB2YXIgaSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgaWYgKCFpKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnBhcnNlKGkpO1xufTtcblxuc21hc2guc3RvcmFnZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xufTtcbiIsInNtYXNoLndvcmtzcGFjZSA9IHtcbiAgICBiYXNlVGl0bGU6IHVuZGVmaW5lZCxcbiAgICBfd3NfOiB1bmRlZmluZWQsXG4gICAgX2hkcl86IHVuZGVmaW5lZCxcbiAgICBfc2JfOiB1bmRlZmluZWQsXG4gICAgX3RhYnNfOiBbXVxufTtcblxuc21hc2gud29ya3NwYWNlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBzbWFzaC53b3Jrc3BhY2UuX3dzXyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtd29ya3NwYWNlXCIpO1xuICAgIGlmICghc21hc2gud29ya3NwYWNlLl93c18pIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHNtYXNoLndvcmtzcGFjZS5faGRyXyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtaGVhZGVyXCIpO1xuICAgIGlmIChzbWFzaC53b3Jrc3BhY2UuX2hkcl8pIHtcbiAgICAgICAgc21hc2guY2xhc3MuYWRkKHNtYXNoLndvcmtzcGFjZS5fd3NfLCAnaGFzLWhlYWRlcicpO1xuICAgIH1cbiAgICBzbWFzaC53b3Jrc3BhY2UuX3NiXyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtd29ya3NwYWNlIC5zbWFzaC1zaWRlYmFyXCIpO1xuICAgIGlmIChzbWFzaC53b3Jrc3BhY2UuX3NiXykge1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc21hc2gud29ya3NwYWNlLl93c18sICdoYXMtc2lkZWJhcicpO1xuICAgIH1cbn07XG5cbnNtYXNoLndvcmtzcGFjZS5hZGRUYWIgPSBmdW5jdGlvbihpZCwgdGl0bGUsIGNvbnRlbnQsIHVybCkge1xuICAgIGlmICghc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXRhYi1wYW5lJykpIHtcbiAgICAgICAgdmFyIHBhbmVsID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVsJyk7XG4gICAgICAgIGlmICghcGFuZWwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUbyBhZGQgYSB0YWIgdGhlcmUgbmVlZHMgdG8gYmUgYSBwYW5lbCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHBhbmVsLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwic21hc2gtdGFiLXBhbmVcIj48ZGl2IGNsYXNzPVwic21hc2gtdGFic1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJzbWFzaC1wYW5lc1wiPjwvZGl2PjwvZGl2Pic7XG4gICAgfVxuICAgIHZhciB0YWJzID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXRhYi1wYW5lIC5zbWFzaC10YWJzJyk7XG4gICAgdmFyIHBhbmVzQ29udGFpbmVyID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXRhYi1wYW5lIC5zbWFzaC1wYW5lcycpO1xuXG4gICAgZG9jdW1lbnQudGl0bGUgPSBzbWFzaC53b3Jrc3BhY2UuY3JlYXRlVGl0bGUodGl0bGUpO1xuXG4gICAgaWYgKHRhYiA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYltkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpKSB7XG4gICAgICAgIHZhciBwYW5lID0gc21hc2guZ2V0KHBhbmVzQ29udGFpbmVyLCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyBpZCArICdcIl0nKTtcbiAgICAgICAgcGFuZS5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgICAgICB0YWIuZGF0YXNldC51cmwgPSB1cmw7XG4gICAgICAgIHRhYi5vbmNsaWNrKCk7XG4gICAgICAgIHJldHVybiB7dGFiOiB0YWIsIHBhbmU6IHBhbmV9O1xuICAgIH1cblxuICAgIHNtYXNoLmhpZGUocGFuZXNDb250YWluZXIsIFwiLnNtYXNoLXBhbmVcIik7XG4gICAgaWYgKGFjdGl2ZSA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYi5hY3RpdmUnKSkge1xuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoYWN0aXZlLCAnYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHRhYlxuICAgIHZhciB0YWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRhYi5jbGFzc05hbWUgPSAnc21hc2gtdGFiIGFjdGl2ZSc7XG4gICAgdGFiLmRhdGFzZXQuaWQgPSBpZDtcbiAgICB0YWIuZGF0YXNldC51cmwgPSB1cmw7XG4gICAgdGFiLmlubmVySFRNTCA9IHRpdGxlICsgJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2xvc2VcIj5jbG9zZTwvaT4nO1xuICAgIHRhYi5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoYWN0aXZlID0gc21hc2guZ2V0KHRhYnMsICcuc21hc2gtdGFiLmFjdGl2ZScpKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoYWN0aXZlLCAnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgc21hc2guY2xhc3MuYWRkKHRoaXMsICdhY3RpdmUnKTtcbiAgICAgICAgc21hc2guaGlkZShkb2N1bWVudCwgJy5zbWFzaC1wYW5lJyk7XG4gICAgICAgIHNtYXNoLnNob3coZG9jdW1lbnQsICcuc21hc2gtcGFuZVtkYXRhLWlkPVwiJyArIHRoaXMuZGF0YXNldC5pZCArICdcIl0nKTtcbiAgICAgICAgaWYgKHRoaXMuZGF0YXNldC51cmwgJiYgdGhpcy5kYXRhc2V0LnVybCAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBzbWFzaC5yb3V0ZXIuZGlzcGxheVVSTCh0aGlzLmRhdGFzZXQudXJsKTtcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudC50aXRsZSA9IHNtYXNoLndvcmtzcGFjZS5jcmVhdGVUaXRsZSh0aGlzLmlubmVySFRNTCk7XG4gICAgfTtcbiAgICBzbWFzaC5vbih0YWIsICcuY2xvc2UnLCAnb25jbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50RWxlbWVudC5vbmNsb3NlICYmICF0aGlzLnBhcmVudEVsZW1lbnQub25jbG9zZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyh0aGlzLnBhcmVudEVsZW1lbnQsICdhY3RpdmUnKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50RWxlbWVudC5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQucHJldmlvdXNTaWJsaW5nLm9uY2xpY2soKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wYXJlbnRFbGVtZW50Lm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm5leHRTaWJsaW5nLm9uY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFuZSA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC1wYW5lW2RhdGEtaWQ9XCInICsgdGhpcy5wYXJlbnRFbGVtZW50LmRhdGFzZXQuaWQgKyAnXCJdJykpIHtcbiAgICAgICAgICAgIHBhbmUucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChwYW5lKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLnBhcmVudEVsZW1lbnQpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICAgIHRhYnMuYXBwZW5kQ2hpbGQodGFiKTtcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBwYW5lIHdpdGggdGhlIHByb3ZpZGVkIGNvbnRlbnRcbiAgICB2YXIgcGFuZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcGFuZS5jbGFzc05hbWUgPSAnc21hc2gtcGFuZSc7XG4gICAgcGFuZS5kYXRhc2V0LmlkID0gaWQ7XG4gICAgcGFuZS5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgIHBhbmVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHBhbmUpO1xuICAgIHJldHVybiB7dGFiOiB0YWIsIHBhbmU6IHBhbmV9O1xufTtcblxuc21hc2gud29ya3NwYWNlLmFjdGl2ZVRhYiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0YWIgPSBzbWFzaC5nZXQodGFicywgJy5zbWFzaC10YWIuYWN0aXZlJylcbiAgICBpZiAoIXRhYikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIHBhbmUgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtcGFuZVtkYXRhLWlkPVwiJyArIHRhYi5kYXRhc2V0LmlkICsgJ1wiXScpO1xuICAgIGlmICghcGFuZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHt0YWI6IHRhYiwgcGFuZTogcGFuZX07XG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuY3JlYXRlVGl0bGUgPSBmdW5jdGlvbih0aXRsZSkge1xuICAgIHJldHVybiB0aXRsZS5yZXBsYWNlKC88KFtePl0rPykoW14+XSo/KT4oLio/KTxcXC9cXDE+L2lnLCBcIlwiKSArIChzbWFzaC53b3Jrc3BhY2UuYmFzZVRpdGxlID8gJyB8ICcgKyBzbWFzaC53b3Jrc3BhY2UuYmFzZVRpdGxlIDogXCJcIilcbn07XG4iXX0=
