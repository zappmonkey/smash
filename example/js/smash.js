window.addEventListener("load",function(e){smash.init()},!1);var smash={};smash.init=function(){smash.config.init(),smash.sidebar.init(),smash.searchbox.init(),smash.workspace.init(),smash.input.init()},smash.get=function(e,s){try{return e.querySelector(s)}catch(e){console.log(e)}},smash.getAll=function(e,s){try{return e.querySelectorAll(s)}catch(e){console.log(e)}},smash.hide=function(e,s){var a;a=s&&"string"==typeof s?smash.getAll(e,s):[e];for(var t=0;t<a.length;t++)a[t].style.display="none"},smash.show=function(e,s){var a;a=s&&"string"==typeof s?smash.getAll(e,s):[e];for(var t=0;t<a.length;t++)a[t].style.display=""},smash.on=function(e,s,a,t){for(var n=smash.getAll(e,s),r=0;r<n.length;r++)n[r][a]=t},smash.fuzzyCompare=function(e,s){if(void 0==s||void 0==e)return!1;var a=".*?"+e.toLowerCase().replace(/-/g,"\\-").split("").join(".*?")+".*?";return s.toLowerCase().match(a)},smash.ajax={_headers_:[]},smash.ajax.addHeader=function(e,s){smash.ajax._headers_[e]=s},smash.ajax.removeHeader=function(e){delete smash.ajax._headers_[e]},smash.ajax.onerror=function(e){console.log(e)},smash.ajax.onunauthorized=function(e){smash.ajax.onerror(e)},smash.ajax._xhr_=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,s=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],a=0;a<s.length;a++)try{e=new ActiveXObject(s[a]);break}catch(e){}return e},smash.ajax.send=function(e,s,a,t,n,r,o){void 0===o&&(o=!0),void 0===r&&(r=smash.ajax.onerror);var i=smash.ajax._xhr_();i.responseType=n,i.onreadystatechange=function(){if(4==i.readyState)switch(i.status){case 200:case 201:s&&s(i.response);break;case 401:smash.ajax.onunauthorized(i.response);break;default:r(i.response)}},i.open(a,e,o),"json"==n?i.setRequestHeader("Content-type","application/json"):"POST"==a&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var c in smash.ajax._headers_)i.setRequestHeader(c,smash.ajax._headers_[c]);i.send(t)},smash.ajax.get=function(e,s,a,t,n,r){var o=[];for(var i in a)o.push(encodeURIComponent(i)+"="+encodeURIComponent(a[i]));smash.ajax.send(e+(o.length?"?"+o.join("&"):""),s,"GET",null,t,n,r)},smash.ajax.post=function(e,s,a,t,n,r){var o;if(a)if("json"!=t){var i=[];for(var c in a)i.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));o=i.join("&")}else o=JSON.stringify(a);smash.ajax.send(e,s,"POST",o,t,n,r)},smash.class={},smash.class.add=function(e,s){smash.class.has(e,s)||(e.classList?e.classList.add(s):e.className+=" "+s)},smash.class.remove=function(e,s){smash.class.has(e,s)&&(e.classList?e.classList.remove(s):e.className=e.className.replace(s,""))},smash.class.has=function(e,s){return(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(" "+s+" ")>-1},smash.class.toggle=function(e,s){smash.class.has(e,s)?smash.class.remove(e,s):smash.class.add(e,s)},smash.config={_values_:{_sidebar_lock_:!1}},smash.config.init=function(){var e=smash.storage.get("config");e&&(smash.config._values_=e)},smash.config.get=function(e){var s="_"+e+"_";if(s in smash.config._values_)return smash.config._values_[s];throw new smash.Exception("001",'Invalid config option "'+e+'"')},smash.config.set=function(e,s){var a="_"+e+"_";if(!a in smash.config._values_)throw new smash.Exception("001",'Invalid config option "'+e+'"');smash.config._values_[a]=s,smash.storage.set("config",smash.config._values_)},smash.cookie={},smash.cookie.set=function(e,s,a){var t=new Date;t.setTime(t.getTime()+24*a*60*60*1e3);var n="expires="+t.toUTCString();document.cookie=e+"="+s+";"+n+";path=/"},smash.cookie.get=function(e){for(var e=e+"=",s=decodeURIComponent(document.cookie),a=s.split(";"),t=0;t<a.length;t++){for(var n=a[t];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""},smash.dialog={},smash.dialog.new=function(e){var s=smash.dialog.checkBackdrop(),a=document.createElement("div");a.className="smash-dialog",a.innerHTML=e,s.appendChild(a)},smash.dialog.checkBackdrop=function(){if(e=smash.get(document,".smash-dialog-backdrop"))return(dialog=smash.get(document,".smash-dialog-backdrop .smash-dialog"))&&e.removeChild(dialog),e;var e=document.createElement("div");return e.className="smash-dialog-backdrop",e.innerHTML='<div class="smash-dialog-background"></div>',smash.get(e,".smash-dialog-background").onclick=smash.dialog.close,smash.get(document,"body").appendChild(e),e},smash.dialog.close=function(){(dialog=smash.get(document,".smash-dialog-backdrop"))&&smash.get(document,"body").removeChild(dialog)},smash.Exception=function(e,s){this.value=e,this.message=s,this.toString=function(){return"SmashException "+this.value+": "+this.message}},smash.input={},smash.input.init=function(){for(var e,s=document.querySelectorAll(".smash-input input, .smash-textarea textarea"),a=0;a<s.length;a++)if(e=s[a],!smash.class.has(e.parentElement,"smash-initialised")){if(e.parentElement.setValue=function(s){(e=this.querySelector("input"))?(e.value=s,e.onkeyup()):(e=this.querySelector("textarea"))&&(e.value=s,e.onkeyup())},e.parentElement.getValue=function(){if(e=this.querySelector("input")){var e=this.querySelector("input");return e.value}if(e=this.querySelector("textarea")){var e=this.querySelector("textarea");return e.value}return null},smash.class.has(e.parentElement,"has-floating-label")){smash.class.remove(e.parentElement,"has-floating-label"),smash.class.add(e.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=e.placeholder,e.parentElement.appendChild(t),e.onkeyup=function(e){var s=this.parentElement.querySelector("label");s&&(""!=this.value?smash.class.add(s,"show"):smash.class.remove(s,"show"))}}e.parentElement.getAttribute("value")&&e.parentElement.setValue(e.parentElement.getAttribute("value")),smash.class.add(e.parentElement,"smash-initialised")}for(var n,r=document.querySelectorAll(".smash-select select"),a=0;a<r.length;a++)if(n=r[a],!smash.class.has(n.parentElement,"smash-initialised")){if(smash.class.has(n.parentElement,"has-floating-label")){smash.class.remove(n.parentElement,"has-floating-label"),smash.class.add(n.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=n.getAttribute("placeholder"),n.parentElement.appendChild(t)}n.parentElement.setValue=function(e){smash.class.remove(this,"is-focussed");var s=this.querySelector("select"),a=this.querySelector("input"),t=s.value;s.value=e,s.selectedIndex>-1?a.value=s.options[s.selectedIndex].text:a.value="",a.focus(),a.onfocus(),t!=e&&s.onchange&&s.onchange()},n.parentElement.getValue=function(){var e=this.querySelector("select");return e.selectedIndex==-1?null:e.options[e.selectedIndex].value},n.parentElement.reset=function(){smash.get(this,"input").value=this.getText()},n.parentElement.getText=function(){var e=this.querySelector("select");return e.selectedIndex==-1?null:e.options[e.selectedIndex].innerHTML};var e=document.createElement("input");e.type="text",e.placeholder=n.getAttribute("placeholder"),e.setAttribute("readonly","readonly"),n.parentElement.appendChild(e);var o=n.querySelectorAll("option"),i=document.createElement("ul");i.onmouseup=function(e){e.stopPropagation()};for(var c=0;c<o.length;c++){var h=o[c];if(h.getAttribute("value")){var l=document.createElement("li");l.setAttribute("value",h.value),l.innerHTML=h.innerHTML,i.appendChild(l),l.onmousedown=function(e){this.parentElement.parentElement.setValue(this.getAttribute("value")),e.stopPropagation(),window.onmouseup()}}}n.parentElement.appendChild(i),e.onfocus=function(e){var s=this.parentElement.querySelector("label");s&&(""!=this.value?smash.class.add(s,"show"):smash.class.remove(s,"show"))},n.parentElement.onclick=function(){var e=smash.get(this,"input"),s=this;smash.class.add(this,"is-focussed");var a="";window.onmouseup=function(){if(window.onmouseup=null,window.onkeyup=null,s.reset(),items=smash.getAll(s,"ul li")){for(var e=0;e<items.length;e++)items[e].style.display="";smash.show(s,"ul")}smash.class.remove(s,"is-focussed")},window.onkeyup=function(t){switch(t.keyCode){case 8:a.length>0&&(a=a.substring(0,a.length-1));break;case 27:a="";break;case 189:a+="-";break;case 190:a+=".";break;case 191:a+="/";break;case 220:a+="\\";break;default:a+=String.fromCharCode(t.keyCode)}if(""!=a?e.value=a.toLowerCase():s.reset(),items=smash.getAll(s,"ul li")){smash.show(s,"ul");for(var n,r=!1,o=0;o<items.length;o++)n=items[o],""==a||smash.fuzzyCompare(a,n.innerHTML)?(n.style.display="",r=!0):n.style.display="none";r||smash.hide(s,"ul")}},window.focus()},n.parentElement.getAttribute("value")&&n.parentElement.setValue(n.parentElement.getAttribute("value")),smash.class.add(n.parentElement,"smash-initialised")}smash.input.checkboxInit()},smash.input.checkboxInit=function(){for(var e,s=document.querySelectorAll(".smash-checkbox input"),a=0;a<s.length;a++)if(e=s[a],!smash.class.has(e.parentElement,"smash-initialised")){var t=document.createElement("span");if(t.className="checks",t.innerHTML='<i class="material-icons">check_box_outline_blank</i><i class="material-icons checked">check_box</i>',e.parentElement.appendChild(t),label=e.getAttribute("label")){var n=document.createElement("span");n.className="label",n.innerHTML=label,e.parentElement.appendChild(n)}smash.class.add(e.parentElement,"smash-initialised"),e.checked=smash.class.has(e.parentElement,"checked"),e.parentElement.onclick=function(){smash.class.toggle(this,"checked"),smash.get(this,"input").checked=smash.class.has(this,"checked"),e.parentElement.onchange&&e.parentElement.onchange(smash.class.has(this,"checked"))},e.parentElement.getValue=function(){return smash.class.has(this,"checked")},e.parentElement.setValue=function(e){smash.class.has(this,"checked")!=e&&this.onclick()}}},smash.router={__parseRouteRegex:/{(.*?)}/gi,__dynamicParts:[],__baseDirectory:null,__routes:{static:[],dynamic:[]}},smash.router.add=function(e,s){var a=smash.router.parseRoute(e);return a.regex?(a.callback=s,smash.router.__routes.dynamic[a.depth]||(smash.router.__routes.dynamic[a.depth]=[]),smash.router.__routes.dynamic[a.depth][a.numVars]||(smash.router.__routes.dynamic[a.depth][a.numVars]=[]),void smash.router.__routes.dynamic[a.depth][a.numVars].push(a)):void(smash.router.__routes.static[e]=s)},smash.router.set=function(e){smash.router.displayURL(e),window.dispatchEvent(new Event("popstate"))},smash.router.displayURL=function(e){e=smash.router.addBaseDirectory(e),window.history.pushState("","",e)},smash.router.redirect=function(e){e.search(/^http[s]?:\/\//)||(e=smash.router.addBaseDirectory(e)),window.location=e},smash.router.handleNotFound=function(e){console.log("route: "+JSON.stringify(e)+" does not exist")},smash.router.run=function(){window.onpopstate=function(e){smash.router.execute()},smash.router.execute()},smash.router.execute=function(){var e=this.getPath();if(this.__routes.static[e.path])return void this.__routes.static[e.path]();var s=e.path.split("/").length-1;if(this.__routes.dynamic[s]){var a,t,n={};for(var r in this.__routes.dynamic[s])for(var o in this.__routes.dynamic[s][r]){var a=this.__routes.dynamic[s][r][o];if(t=e.path.match(a.regex)){for(var i=0;i<a.numVars;i++)n[a.vars[i]]=t[i+1];return void a.callback(n)}}}smash.router.handleNotFound(e)},smash.router.getPath=function(){var e=document.createElement("a");return e.href=window.location,{host:e.hostname,path:smash.router.checkPath(e.pathname)}},smash.router.parseRoute=function(e){e=smash.router.cleanPath(e);var s={path:e,depth:e.split("/").length-1,vars:[],numVars:0};if(smash.router.__dynamicParts=e.match(smash.router.__parseRouteRegex),void 0!=smash.router.__dynamicParts&&null!=smash.router.__dynamicParts){for(var a="^"+e.replace(/\//gi,"\\/")+"$",t=0;t<smash.router.__dynamicParts.length;t++)s.numVars++,s.vars.push(smash.router.__dynamicParts[t].substring(1,smash.router.__dynamicParts[t].length-1)),a=a.replace(smash.router.__dynamicParts[t],"(.*?)");s.regex=new RegExp(a,"i")}return s},smash.router.setBaseDirectory=function(e){return e?void(smash.router.__baseDirectory=smash.router.cleanPath(e)):void(smash.router.__baseDirectory=void 0)},smash.router.addBaseDirectory=function(e){return smash.router.__baseDirectory?(e.indexOf(smash.router.__baseDirectory)===-1&&(e=smash.router.__baseDirectory+e),e):e},smash.router.cleanPath=function(e){return e.length>0&&"/"!=e.substring(0,1)&&(e="/"+e),e.length>2&&"/"==e.substring(e.length-2)&&(e=e.substring(0,e.length-2)),e},smash.router.checkPath=function(e){return e=smash.router.cleanPath(e),smash.router.__baseDirectory&&e.indexOf(smash.router.__baseDirectory)!==-1&&(e=e.replace(smash.router.__baseDirectory,"")),e},smash.router.queryParam=function(e){var s="[\\?&]"+e+"=([^&#]*)",a=new RegExp(s),t=a.exec(window.location.search);if(null!=t)return t[1]},smash.searchbox={i_:!1,minAutoCompleteLength:3,onfocus:void 0,onblur:void 0,onchange:void 0},smash.searchbox.init=function(){if(!smash.searchbox.i_){var e=document.querySelector(".smash-searchbox input");e&&(e.onfocus=function(){0==this.value.length&&smash.searchbox.results('<div class="smash-instruction">Start typing to find results</div>'),smash.class.add(document.querySelector(".smash-header"),"is-focussed"),smash.class.add(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onfocus&&smash.searchbox.onfocus()},e.onblur=function(){smash.class.remove(document.querySelector(".smash-header"),"is-focussed"),smash.class.remove(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onblur&&smash.searchbox.onblur()},e.onkeyup=function(e){if(!(this.value.length<smash.searchbox.minAutoCompleteLength)){switch(e.keyCode){case 27:this.value=""}smash.searchbox.onchange&&smash.searchbox.onchange(this.value)}},smash.searchbox.i_=!0)}},smash.searchbox.empty=function(){return!(i=smash.get(document,".smash-searchbox input"))||0==i.value.length},smash.searchbox.appendTo=function(e){var s=document.createElement("div");s.innerHTML=e;var a=document.querySelector(".smash-searchbox .smash-searchbox-results");a.appendChild(s)},smash.searchbox.results=function(e){var s=document.querySelector(".smash-searchbox .smash-searchbox-results");s.innerHTML=e},smash.sidebar={i_:!1},smash.sidebar.init=function(){if(!smash.sidebar.i_){var e=document.querySelector(".smash-sidebar .lock");if(e){e.onclick=function(){smash.sidebar.toggleLock()};var s=document.querySelector(".smash-sidebar");smash.class.add(s,"is-unlocked"),smash.sidebar.i_=!0,smash.config.get("sidebar_lock")&&smash.sidebar.toggleLock()}}},smash.sidebar.toggleLock=function(){smash.sidebar.i_&&(smash.class.toggle(document.querySelector(".smash-sidebar .lock"),"unlock"),smash.class.toggle(document.querySelector(".smash-sidebar"),"is-unlocked"),smash.config.set("sidebar_lock",!smash.class.has(document.querySelector(".smash-sidebar"),"is-unlocked")))},smash.storage={},smash.storage.set=function(e,s){localStorage.setItem(e,JSON.stringify(s))},smash.storage.unset=function(e){localStorage.removeItem(e)},smash.storage.get=function(e){var s=localStorage.getItem(e);if(s)return JSON.parse(s)},smash.storage.clear=function(){localStorage.clear()},smash.workspace={baseTitle:void 0,_ws_:void 0,_hdr_:void 0,_sb_:void 0,_tabs_:[]},smash.workspace.init=function(){smash.workspace._ws_=document.querySelector(".smash-workspace"),smash.workspace._ws_&&(smash.workspace._hdr_=document.querySelector(".smash-header"),smash.workspace._hdr_&&smash.class.add(smash.workspace._ws_,"has-header"),smash.workspace._sb_=document.querySelector(".smash-workspace .smash-sidebar"),smash.workspace._sb_&&smash.class.add(smash.workspace._ws_,"has-sidebar"))},smash.workspace.addTab=function(e,s,a,t){if(!smash.get(document,".smash-tab-pane")){var n=smash.get(document,".smash-panel");if(!n)return void console.log("To add a tab there needs to be a panel");n.innerHTML='<div class="smash-tab-pane"><div class="smash-tabs"></div><div class="smash-panes"></div></div>'}var r=smash.get(document,".smash-tab-pane .smash-tabs"),o=smash.get(document,".smash-tab-pane .smash-panes");if(document.title=smash.workspace.createTitle(s),c=smash.get(r,'.smash-tab[data-id="'+e+'"]')){var i=smash.get(o,'.smash-pane[data-id="'+e+'"]');return i.innerHTML=a,c.dataset.url=t,c.onclick(),{tab:c,pane:i}}smash.hide(o,".smash-pane"),(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active");var c=document.createElement("div");c.className="smash-tab active",c.dataset.id=e,c.dataset.url=t,c.innerHTML=s+'<i class="material-icons close">close</i>',c.onclick=function(e){(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active"),smash.class.add(this,"active"),smash.hide(document,".smash-pane"),smash.show(document,'.smash-pane[data-id="'+this.dataset.id+'"]'),this.dataset.url&&"undefined"!=this.dataset.url&&smash.router.displayURL(this.dataset.url),document.title=smash.workspace.createTitle(this.innerHTML)},smash.on(c,".close","onclick",function(e){this.parentElement.onclose&&!this.parentElement.onclose()||(smash.class.has(this.parentElement,"active")&&(this.parentElement.previousSibling?this.parentElement.previousSibling.onclick():this.parentElement.nextSibling&&this.parentElement.nextSibling.onclick()),(i=smash.get(document,'.smash-pane[data-id="'+this.parentElement.dataset.id+'"]'))&&i.parentElement.removeChild(i),this.parentElement.parentElement.removeChild(this.parentElement),e.stopPropagation())}),r.appendChild(c);var i=document.createElement("div");return i.className="smash-pane",i.dataset.id=e,i.innerHTML=a,o.appendChild(i),{tab:c,pane:i}},smash.workspace.activeTab=function(){var e=smash.get(tabs,".smash-tab.active");if(!e)return null;var s=smash.get(document,'.smash-pane[data-id="'+e.dataset.id+'"]');return s?{tab:e,pane:s}:null},smash.workspace.createTitle=function(e){var s=e.replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/gi,"");if(""==s){var a=document.createElement("div");a.innerHTML=e,(ts=smash.get(a,".title"))&&(s=ts.innerHTML),""==s&&(s="unknown")}return s+(smash.workspace.baseTitle?" | "+smash.workspace.baseTitle:"")};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNtYXNoLmpzIiwiYWpheC5qcyIsImNsYXNzLmpzIiwiY29uZmlnLmpzIiwiY29va2llLmpzIiwiZGlhbG9nLmpzIiwiZXhjZXB0aW9uLmpzIiwiaW5wdXQuanMiLCJyb3V0ZXIuanMiLCJzZWFyY2hib3guanMiLCJzaWRlYmFyLmpzIiwic3RvcmFnZS5qcyIsIndvcmtzcGFjZS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInNtYXNoIiwiaW5pdCIsImNvbmZpZyIsInNpZGViYXIiLCJzZWFyY2hib3giLCJ3b3Jrc3BhY2UiLCJpbnB1dCIsImdldCIsInBhcmVudCIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImNvbnNvbGUiLCJsb2ciLCJnZXRBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGlkZSIsImVsIiwiaSIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsInNob3ciLCJvbiIsImV2ZW50IiwiY2FsbGJhY2siLCJlbGVtZW50cyIsImZ1enp5Q29tcGFyZSIsInNlYXJjaCIsImNvbXBhcmUiLCJ1bmRlZmluZWQiLCJyZWdleCIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsInNwbGl0Iiwiam9pbiIsIm1hdGNoIiwiYWpheCIsIl9oZWFkZXJzXyIsImFkZEhlYWRlciIsIm5hbWUiLCJ2YWx1ZSIsInJlbW92ZUhlYWRlciIsIm9uZXJyb3IiLCJtZXNzYWdlIiwib251bmF1dGhvcml6ZWQiLCJfeGhyXyIsIlhNTEh0dHBSZXF1ZXN0IiwieGhyIiwidmVyc2lvbnMiLCJBY3RpdmVYT2JqZWN0Iiwic2VuZCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJyZXNwb25zZVR5cGUiLCJhc3luYyIsIngiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInF1ZXJ5Iiwia2V5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsInBvc3QiLCJkYXRhU3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsImNsYXNzIiwiYWRkIiwiY2xhc3NOYW1lIiwiaGFzIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiaW5kZXhPZiIsInRvZ2dsZSIsIl92YWx1ZXNfIiwiX3NpZGViYXJfbG9ja18iLCJ2Iiwic3RvcmFnZSIsIm9wdGlvbiIsIm8iLCJFeGNlcHRpb24iLCJzZXQiLCJjb29raWUiLCJleHBpcnlEYXlzIiwiZCIsIkRhdGUiLCJzZXRUaW1lIiwiZ2V0VGltZSIsImV4cGlyZXMiLCJ0b1VUQ1N0cmluZyIsImRvY3VtZW50IiwiZGVjb2RlZENvb2tpZSIsImRlY29kZVVSSUNvbXBvbmVudCIsImNhIiwiYyIsImNoYXJBdCIsInN1YnN0cmluZyIsImRpYWxvZyIsIm5ldyIsImNvbnRlbnQiLCJiYWNrZHJvcCIsImNoZWNrQmFja2Ryb3AiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaGlsZCIsIm9uY2xpY2siLCJjbG9zZSIsInRoaXMiLCJ0b1N0cmluZyIsImlucHV0cyIsInBhcmVudEVsZW1lbnQiLCJzZXRWYWx1ZSIsIm9ua2V5dXAiLCJnZXRWYWx1ZSIsImxhYmVsIiwicGxhY2Vob2xkZXIiLCJsIiwiZ2V0QXR0cmlidXRlIiwic2VsZWN0Iiwic2VsZWN0cyIsIm9sZCIsInNlbGVjdGVkSW5kZXgiLCJvcHRpb25zIiwidGV4dCIsImZvY3VzIiwib25mb2N1cyIsIm9uY2hhbmdlIiwicmVzZXQiLCJnZXRUZXh0IiwidHlwZSIsInNldEF0dHJpYnV0ZSIsInVsIiwib25tb3VzZXVwIiwic3RvcFByb3BhZ2F0aW9uIiwiaiIsImxpIiwib25tb3VzZWRvd24iLCJxIiwiaXRlbXMiLCJrZXlDb2RlIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiaXRlbSIsInJlc3VsdHMiLCJjaGVja2JveEluaXQiLCJjaGVja2JveCIsImNoZWNrYm94ZXMiLCJjaGVja2VkIiwicm91dGVyIiwiX19wYXJzZVJvdXRlUmVnZXgiLCJfX2R5bmFtaWNQYXJ0cyIsIl9fYmFzZURpcmVjdG9yeSIsIl9fcm91dGVzIiwic3RhdGljIiwiZHluYW1pYyIsInBhdGgiLCJyb3V0ZSIsInBhcnNlUm91dGUiLCJkZXB0aCIsIm51bVZhcnMiLCJkaXNwbGF5VVJMIiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiYWRkQmFzZURpcmVjdG9yeSIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJyZWRpcmVjdCIsImxvY2F0aW9uIiwiaGFuZGxlTm90Rm91bmQiLCJydW4iLCJvbnBvcHN0YXRlIiwiZXhlY3V0ZSIsImdldFBhdGgiLCJtYXRjaGVzIiwidmFyTnVtIiwidmFycyIsImhyZWYiLCJob3N0IiwiaG9zdG5hbWUiLCJjaGVja1BhdGgiLCJwYXRobmFtZSIsImNsZWFuUGF0aCIsIlJlZ0V4cCIsInNldEJhc2VEaXJlY3RvcnkiLCJkaXJlY3RvcnkiLCJxdWVyeVBhcmFtIiwicGFyYW0iLCJyZWdleFMiLCJleGVjIiwiaV8iLCJtaW5BdXRvQ29tcGxldGVMZW5ndGgiLCJvbmJsdXIiLCJzc2IiLCJlbXB0eSIsImFwcGVuZFRvIiwibm9kZSIsInNpYmwiLCJ0b2dnbGVMb2NrIiwic2liIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInVuc2V0IiwicmVtb3ZlSXRlbSIsImdldEl0ZW0iLCJwYXJzZSIsImNsZWFyIiwiYmFzZVRpdGxlIiwiX3dzXyIsIl9oZHJfIiwiX3NiXyIsIl90YWJzXyIsImFkZFRhYiIsImlkIiwidGl0bGUiLCJwYW5lbCIsInRhYnMiLCJwYW5lc0NvbnRhaW5lciIsImNyZWF0ZVRpdGxlIiwidGFiIiwicGFuZSIsImRhdGFzZXQiLCJhY3RpdmUiLCJvbmNsb3NlIiwicHJldmlvdXNTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJhY3RpdmVUYWIiLCJ0IiwiZGl2IiwidHMiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFBQyxpQkFBQSxPQUFBLFNBQUFDLEdBQ0FDLE1BQUFDLFNBQ0EsRUFFQSxJQUFBRCxTQUVBQSxPQUFBQyxLQUFB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QyxLQUFBQSxJQUdBak8sTUFBQUssVUFBQWtPLFVBQUEsV0FDQSxHQUFBUCxHQUFBaE8sTUFBQU8sSUFBQXNOLEtBQUEsb0JBQ0EsS0FBQUcsRUFDQSxNQUFBLEtBRUEsSUFBQUMsR0FBQWpPLE1BQUFPLElBQUF3RixTQUFBLHdCQUFBaUksRUFBQUUsUUFBQVIsR0FBQSxLQUNBLE9BQUFPLElBR0FELElBQUFBLEVBQUFDLEtBQUFBLEdBRkEsTUFLQWpPLE1BQUFLLFVBQUEwTixZQUFBLFNBQUFKLEdBQ0EsR0FBQWEsR0FBQWIsRUFBQTNMLFFBQUEsa0NBQUEsR0FDQSxJQUFBLElBQUF3TSxFQUFBLENBQ0EsR0FBQUMsR0FBQTFJLFNBQUFZLGNBQUEsTUFDQThILEdBQUE3SCxVQUFBK0csR0FDQWUsR0FBQTFPLE1BQUFPLElBQUFrTyxFQUFBLGFBQ0FELEVBQUFFLEdBQUE5SCxXQUVBLElBQUE0SCxJQUNBQSxFQUFBLFdBR0EsTUFBQUEsSUFBQXhPLE1BQUFLLFVBQUErTSxVQUFBLE1BQUFwTixNQUFBSyxVQUFBK00sVUFBQSIsImZpbGUiOiJzbWFzaC5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbihlKXtcbiAgICBzbWFzaC5pbml0KCk7XG59LCBmYWxzZSk7XG5cbnZhciBzbWFzaCA9IHt9O1xuXG5zbWFzaC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgc21hc2guY29uZmlnLmluaXQoKTtcbiAgICBzbWFzaC5zaWRlYmFyLmluaXQoKTtcbiAgICBzbWFzaC5zZWFyY2hib3guaW5pdCgpO1xuICAgIHNtYXNoLndvcmtzcGFjZS5pbml0KCk7XG4gICAgc21hc2guaW5wdXQuaW5pdCgpO1xufTtcblxuc21hc2guZ2V0ID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuc21hc2guZ2V0QWxsID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuc21hc2guaGlkZSA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgICB2YXIgZWw7XG4gICAgaWYgKHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZWwgPSBzbWFzaC5nZXRBbGwocGFyZW50LCBzZWxlY3Rvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWwgPSBbcGFyZW50XTtcbiAgICB9XG4gICAgZm9yICh2YXIgaT0wOyBpPGVsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVsW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxufTtcblxuc21hc2guc2hvdyA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgICB2YXIgZWw7XG4gICAgaWYgKHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZWwgPSBzbWFzaC5nZXRBbGwocGFyZW50LCBzZWxlY3Rvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWwgPSBbcGFyZW50XTtcbiAgICB9XG4gICAgZm9yICh2YXIgaT0wOyBpPGVsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVsW2ldLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICB9XG59O1xuXG5zbWFzaC5vbiA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IsIGV2ZW50LCBjYWxsYmFjaykge1xuICAgIHZhciBlbGVtZW50cyA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8ZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxlbWVudHNbaV1bZXZlbnRdID0gY2FsbGJhY2s7XG4gICAgfVxufTtcblxuc21hc2guZnV6enlDb21wYXJlID0gZnVuY3Rpb24oc2VhcmNoLCBjb21wYXJlKSB7XG4gICAgaWYgKGNvbXBhcmUgPT0gdW5kZWZpbmVkIHx8IHNlYXJjaCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgcmVnZXggPSBcIi4qP1wiICsgc2VhcmNoLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvLS9nLCBcIlxcXFwtXCIpLnNwbGl0KFwiXCIpLmpvaW4oXCIuKj9cIikgKyBcIi4qP1wiO1xuICAgIHJldHVybiBjb21wYXJlLnRvTG93ZXJDYXNlKCkubWF0Y2gocmVnZXgpO1xufTtcbiIsInNtYXNoLmFqYXggPSB7XG4gICAgX2hlYWRlcnNfOiBbXVxufTtcblxuc21hc2guYWpheC5hZGRIZWFkZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHNtYXNoLmFqYXguX2hlYWRlcnNfW25hbWVdID0gdmFsdWU7XG59O1xuXG5zbWFzaC5hamF4LnJlbW92ZUhlYWRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgc21hc2guYWpheC5faGVhZGVyc19bbmFtZV07XG59O1xuXG5zbWFzaC5hamF4Lm9uZXJyb3IgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG59O1xuXG5zbWFzaC5hamF4Lm9udW5hdXRob3JpemVkID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgIHNtYXNoLmFqYXgub25lcnJvcihtZXNzYWdlKTtcbn07XG5cbnNtYXNoLmFqYXguX3hocl8gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIH1cbiAgICB2YXIgdmVyc2lvbnMgPSBbXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuNi4wXCIsXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuNS4wXCIsXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuNC4wXCIsXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuMy4wXCIsXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuMi4wXCIsXG4gICAgICAgIFwiTWljcm9zb2Z0LlhtbEh0dHBcIlxuICAgIF07XG4gICAgdmFyIHhocjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnNpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB4aHIgPSBuZXcgQWN0aXZlWE9iamVjdCh2ZXJzaW9uc1tpXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB4aHI7XG59O1xuXG5zbWFzaC5hamF4LnNlbmQgPSBmdW5jdGlvbiAodXJsLCBjYWxsYmFjaywgbWV0aG9kLCBkYXRhLCByZXNwb25zZVR5cGUsIG9uZXJyb3IsIGFzeW5jKSB7XG4gICAgaWYgKGFzeW5jID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXN5bmMgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAob25lcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9uZXJyb3IgPSBzbWFzaC5hamF4Lm9uZXJyb3I7XG4gICAgfVxuICAgIHZhciB4ID0gc21hc2guYWpheC5feGhyXygpO1xuICAgIHgucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xuICAgIHgub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHRcdGlmICh4LnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgc3dpdGNoICh4LnN0YXR1cykge1xuICAgICAgICAgICAgY2FzZSAyMDA6XG4gICAgICAgICAgICBjYXNlIDIwMTpcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soeC5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0MDE6XG4gICAgICAgICAgICAgICAgc21hc2guYWpheC5vbnVuYXV0aG9yaXplZCh4LnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgb25lcnJvcih4LnJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cblx0XHR9XG4gICAgfTtcbiAgICB4Lm9wZW4obWV0aG9kLCB1cmwsIGFzeW5jKTtcbiAgICBpZiAocmVzcG9uc2VUeXBlID09ICdqc29uJykge1xuICAgICAgICB4LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgfSBlbHNlIGlmIChtZXRob2QgPT0gJ1BPU1QnKSB7XG4gICAgICAgIHguc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpO1xuICAgIH1cbiAgICBmb3IgKHZhciBuYW1lIGluIHNtYXNoLmFqYXguX2hlYWRlcnNfKSB7XG4gICAgICAgIHguc2V0UmVxdWVzdEhlYWRlcihuYW1lLCBzbWFzaC5hamF4Ll9oZWFkZXJzX1tuYW1lXSk7XG4gICAgfVxuICAgIHguc2VuZChkYXRhKVxufTtcblxuc21hc2guYWpheC5nZXQgPSBmdW5jdGlvbiAodXJsLCBjYWxsYmFjaywgZGF0YSwgcmVzcG9uc2VUeXBlLCBvbmVycm9yLCBhc3luYykge1xuICAgIHZhciBxdWVyeSA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgIHF1ZXJ5LnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YVtrZXldKSk7XG4gICAgfVxuICAgIHNtYXNoLmFqYXguc2VuZCh1cmwgKyAocXVlcnkubGVuZ3RoID8gJz8nICsgcXVlcnkuam9pbignJicpIDogJycpLCBjYWxsYmFjaywgJ0dFVCcsIG51bGwsIHJlc3BvbnNlVHlwZSwgb25lcnJvciwgIGFzeW5jKVxufTtcblxuc21hc2guYWpheC5wb3N0ID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2ssIGRhdGEsIHJlc3BvbnNlVHlwZSwgb25lcnJvciwgYXN5bmMpIHtcbiAgICB2YXIgZGF0YVN0cjtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgICBpZiAocmVzcG9uc2VUeXBlICE9ICdqc29uJykge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YVtrZXldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhU3RyID0gcXVlcnkuam9pbignJicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhU3RyID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc21hc2guYWpheC5zZW5kKHVybCwgY2FsbGJhY2ssICdQT1NUJywgZGF0YVN0ciwgcmVzcG9uc2VUeXBlLCBvbmVycm9yLCBhc3luYylcbn07XG4iLCJzbWFzaC5jbGFzcyA9IHt9O1xuXG5zbWFzaC5jbGFzcy5hZGQgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKCFzbWFzaC5jbGFzcy5oYXMoZWwsIGNsYXNzTmFtZSkpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0ID8gZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpIDogZWwuY2xhc3NOYW1lICs9ICgnICcgKyBjbGFzc05hbWUpO1xuICAgIH1cbn07XG5cbnNtYXNoLmNsYXNzLnJlbW92ZSA9IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpIHtcbiAgICBpZiAoc21hc2guY2xhc3MuaGFzKGVsLCBjbGFzc05hbWUpKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdCA/IGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKSA6IGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKGNsYXNzTmFtZSwgJycpO1xuICAgIH1cbn07XG5cbnNtYXNoLmNsYXNzLmhhcyA9IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpIHtcbiAgICByZXR1cm4gKChcIiBcIiArIGVsLmNsYXNzTmFtZSArIFwiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLCBcIiBcIikuaW5kZXhPZihcIiBcIiArIGNsYXNzTmFtZSArIFwiIFwiKSA+IC0xKTtcbn07XG5cbnNtYXNoLmNsYXNzLnRvZ2dsZSA9IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpIHtcbiAgICBzbWFzaC5jbGFzcy5oYXMoZWwsIGNsYXNzTmFtZSkgPyBzbWFzaC5jbGFzcy5yZW1vdmUoZWwsIGNsYXNzTmFtZSkgOiBzbWFzaC5jbGFzcy5hZGQoZWwsIGNsYXNzTmFtZSk7XG59O1xuIiwic21hc2guY29uZmlnID0ge1xuICAgIF92YWx1ZXNfOiB7XG4gICAgICAgIF9zaWRlYmFyX2xvY2tfOiBmYWxzZVxuICAgIH1cbn1cblxuc21hc2guY29uZmlnLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHNtYXNoLnN0b3JhZ2UuZ2V0KCdjb25maWcnKTtcbiAgICBpZiAodikge1xuICAgICAgICBzbWFzaC5jb25maWcuX3ZhbHVlc18gPSB2O1xuICAgIH1cbn07XG5cbnNtYXNoLmNvbmZpZy5nZXQgPSBmdW5jdGlvbihvcHRpb24pIHtcbiAgICB2YXIgbyA9ICdfJyArIG9wdGlvbiArICdfJztcbiAgICBpZiAobyBpbiBzbWFzaC5jb25maWcuX3ZhbHVlc18pIHtcbiAgICAgICAgcmV0dXJuIHNtYXNoLmNvbmZpZy5fdmFsdWVzX1tvXTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IHNtYXNoLkV4Y2VwdGlvbignMDAxJywgJ0ludmFsaWQgY29uZmlnIG9wdGlvbiBcIicgKyBvcHRpb24gKyAnXCInKTtcbn07XG5cbnNtYXNoLmNvbmZpZy5zZXQgPSBmdW5jdGlvbihvcHRpb24sIHZhbHVlKSB7XG4gICAgdmFyIG8gPSAnXycgKyBvcHRpb24gKyAnXyc7XG4gICAgaWYgKCFvIGluIHNtYXNoLmNvbmZpZy5fdmFsdWVzXykge1xuICAgICAgICB0aHJvdyBuZXcgc21hc2guRXhjZXB0aW9uKCcwMDEnLCAnSW52YWxpZCBjb25maWcgb3B0aW9uIFwiJyArIG9wdGlvbiArICdcIicpO1xuICAgIH1cbiAgICBzbWFzaC5jb25maWcuX3ZhbHVlc19bb10gPSB2YWx1ZTtcbiAgICBzbWFzaC5zdG9yYWdlLnNldCgnY29uZmlnJywgc21hc2guY29uZmlnLl92YWx1ZXNfKTtcbn07XG4iLCJzbWFzaC5jb29raWUgPSB7fTtcblxuc21hc2guY29va2llLnNldCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBleHBpcnlEYXlzKSB7XG4gICAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuICAgIGQuc2V0VGltZShkLmdldFRpbWUoKSArIChleHBpcnlEYXlzKjI0KjYwKjYwKjEwMDApKTtcbiAgICB2YXIgZXhwaXJlcyA9IFwiZXhwaXJlcz1cIisgZC50b1VUQ1N0cmluZygpO1xuICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyBcIj1cIiArIHZhbHVlICsgXCI7XCIgKyBleHBpcmVzICsgXCI7cGF0aD0vXCI7XG59O1xuXG5zbWFzaC5jb29raWUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBuYW1lID0gbmFtZSArIFwiPVwiO1xuICAgIHZhciBkZWNvZGVkQ29va2llID0gZGVjb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmNvb2tpZSk7XG4gICAgdmFyIGNhID0gZGVjb2RlZENvb2tpZS5zcGxpdCgnOycpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPGNhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjID0gY2FbaV07XG4gICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PSAnICcpIHtcbiAgICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWUpID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcIlwiO1xufTtcbiIsInNtYXNoLmRpYWxvZyA9IHt9O1xuXG5zbWFzaC5kaWFsb2cubmV3ID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHZhciBiYWNrZHJvcCA9IHNtYXNoLmRpYWxvZy5jaGVja0JhY2tkcm9wKCk7XG5cbiAgICB2YXIgZGlhbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGlhbG9nLmNsYXNzTmFtZSA9ICdzbWFzaC1kaWFsb2cnO1xuICAgIGRpYWxvZy5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgIGJhY2tkcm9wLmFwcGVuZENoaWxkKGRpYWxvZyk7XG59O1xuXG5zbWFzaC5kaWFsb2cuY2hlY2tCYWNrZHJvcCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChiYWNrZHJvcCA9IHNtYXNoLmdldChkb2N1bWVudCwgXCIuc21hc2gtZGlhbG9nLWJhY2tkcm9wXCIpKSB7XG4gICAgICAgIGlmIChkaWFsb2cgPSBzbWFzaC5nZXQoZG9jdW1lbnQsIFwiLnNtYXNoLWRpYWxvZy1iYWNrZHJvcCAuc21hc2gtZGlhbG9nXCIpKSB7XG4gICAgICAgICAgICBiYWNrZHJvcC5yZW1vdmVDaGlsZChkaWFsb2cpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYWNrZHJvcDtcbiAgICB9XG4gICAgdmFyIGJhY2tkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYmFja2Ryb3AuY2xhc3NOYW1lID0gJ3NtYXNoLWRpYWxvZy1iYWNrZHJvcCc7XG4gICAgYmFja2Ryb3AuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJzbWFzaC1kaWFsb2ctYmFja2dyb3VuZFwiPjwvZGl2Pic7XG4gICAgc21hc2guZ2V0KGJhY2tkcm9wLCAnLnNtYXNoLWRpYWxvZy1iYWNrZ3JvdW5kJykub25jbGljayA9IHNtYXNoLmRpYWxvZy5jbG9zZTtcbiAgICBzbWFzaC5nZXQoZG9jdW1lbnQsICdib2R5JykuYXBwZW5kQ2hpbGQoYmFja2Ryb3ApO1xuICAgIHJldHVybiBiYWNrZHJvcDtcbn07XG5cbnNtYXNoLmRpYWxvZy5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChkaWFsb2cgPSBzbWFzaC5nZXQoZG9jdW1lbnQsIFwiLnNtYXNoLWRpYWxvZy1iYWNrZHJvcFwiKSkge1xuICAgICAgICBzbWFzaC5nZXQoZG9jdW1lbnQsICdib2R5JykucmVtb3ZlQ2hpbGQoZGlhbG9nKTtcbiAgICB9XG59O1xuIiwic21hc2guRXhjZXB0aW9uID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJ1NtYXNoRXhjZXB0aW9uICcgKyB0aGlzLnZhbHVlICsgJzogJyArIHRoaXMubWVzc2FnZTtcbiAgICB9O1xufTtcbiIsInNtYXNoLmlucHV0ID0ge307XG5cbnNtYXNoLmlucHV0LmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbWFzaC1pbnB1dCBpbnB1dCwgLnNtYXNoLXRleHRhcmVhIHRleHRhcmVhXCIpO1xuICAgIHZhciBpbnB1dDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpbnB1dCA9IGlucHV0c1tpXTtcbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhpbnB1dC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnNldFZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBpbnB1dC5vbmtleXVwKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIikpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dC52YWx1ZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInRleHRhcmVhXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKGlucHV0LnBhcmVudEVsZW1lbnQsICdoYXMtZmxvYXRpbmctbGFiZWwnKSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGlucHV0LnBhcmVudEVsZW1lbnQsICdoYXMtZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChpbnB1dC5wYXJlbnRFbGVtZW50LCAnZmxvYXRpbmctbGFiZWwnKTtcblxuICAgICAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IGlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICBpbnB1dC5vbmtleXVwID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHZhciBsID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgICAgICBpZiAobCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnB1dC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkge1xuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5zZXRWYWx1ZShpbnB1dC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoaW5wdXQucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJyk7XG4gICAgfVxuICAgIHZhciBzZWxlY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbWFzaC1zZWxlY3Qgc2VsZWN0XCIpO1xuICAgIHZhciBzZWxlY3Q7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNlbGVjdCA9IHNlbGVjdHNbaV07XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnaGFzLWZsb2F0aW5nLWxhYmVsJykpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShzZWxlY3QucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSBzZWxlY3QuZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHRoaXMsICdpcy1mb2N1c3NlZCcpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICAgICAgdmFyIG9sZCA9IHNlbGVjdC52YWx1ZTtcbiAgICAgICAgICAgIHNlbGVjdC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKHNlbGVjdC5zZWxlY3RlZEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHNlbGVjdC5vcHRpb25zW3NlbGVjdC5zZWxlY3RlZEluZGV4XS50ZXh0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgaW5wdXQub25mb2N1cygpO1xuICAgICAgICAgICAgaWYgKG9sZCAhPSB2YWx1ZSAmJiBzZWxlY3Qub25jaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Qub25jaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5nZXRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3Quc2VsZWN0ZWRJbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdC5vcHRpb25zW3NlbGVjdC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc21hc2guZ2V0KHRoaXMsICdpbnB1dCcpLnZhbHVlID0gdGhpcy5nZXRUZXh0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuZ2V0VGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3Quc2VsZWN0ZWRJbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdC5vcHRpb25zW3NlbGVjdC5zZWxlY3RlZEluZGV4XS5pbm5lckhUTUw7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGlucHV0KTtcblxuICAgICAgICB2YXIgb3B0aW9ucyA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKFwib3B0aW9uXCIpO1xuICAgICAgICB2YXIgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICB1bC5vbm1vdXNldXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9wdGlvbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zW2pdO1xuICAgICAgICAgICAgaWYgKCFvcHRpb24uZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgb3B0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgIGxpLmlubmVySFRNTCA9IG9wdGlvbi5pbm5lckhUTUw7XG4gICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgICAgICBsaS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5zZXRWYWx1ZSh0aGlzLmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cub25tb3VzZXVwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodWwpO1xuICAgICAgICBpbnB1dC5vbmZvY3VzID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIGwgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsXCIpO1xuICAgICAgICAgICAgaWYgKGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gc21hc2guZ2V0KHRoaXMsICdpbnB1dCcpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXM7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQodGhpcywgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB2YXIgcSA9ICcnO1xuICAgICAgICAgICAgd2luZG93Lm9ubW91c2V1cCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBudWxsO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vbmtleXVwID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzZWxlY3QucmVzZXQoKTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbXMgPSBzbWFzaC5nZXRBbGwoc2VsZWN0LCAndWwgbGknKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8aXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2ldLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNtYXNoLnNob3coc2VsZWN0LCAndWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHNlbGVjdCwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd2luZG93Lm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5rZXlDb2RlLCBTdHJpbmcuZnJvbUNoYXJDb2RlKGUud2hpY2gpKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEuc3Vic3RyaW5nKDAsIHEubGVuZ3RoLTEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgICAgIHEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE4OTpcbiAgICAgICAgICAgICAgICAgICAgcSArPSBcIi1cIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxOTA6XG4gICAgICAgICAgICAgICAgICAgIHEgKz0gXCIuXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTkxOlxuICAgICAgICAgICAgICAgICAgICBxICs9IFwiL1wiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDIyMDpcbiAgICAgICAgICAgICAgICAgICAgcSArPSBcIlxcXFxcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChxICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBxLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0LnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtcyA9IHNtYXNoLmdldEFsbChzZWxlY3QsICd1bCBsaScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNtYXNoLnNob3coc2VsZWN0LCAndWwnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW07XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW1zW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEgPT0gXCJcIiB8fCBzbWFzaC5mdXp6eUNvbXBhcmUocSwgaXRlbS5pbm5lckhUTUwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5oaWRlKHNlbGVjdCwgJ3VsJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd2luZG93LmZvY3VzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHNlbGVjdC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkge1xuICAgICAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUoc2VsZWN0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpO1xuICAgIH1cbiAgICBzbWFzaC5pbnB1dC5jaGVja2JveEluaXQoKTtcbn07XG5cbnNtYXNoLmlucHV0LmNoZWNrYm94SW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbWFzaC1jaGVja2JveCBpbnB1dFwiKTtcbiAgICB2YXIgY2hlY2tib3g7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGVja2JveGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNoZWNrYm94ID0gY2hlY2tib3hlc1tpXTtcbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhjaGVja2JveC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYyA9ICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIGMuY2xhc3NOYW1lID0gJ2NoZWNrcyc7XG4gICAgICAgIGMuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5jaGVja19ib3hfb3V0bGluZV9ibGFuazwvaT48aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNoZWNrZWRcIj5jaGVja19ib3g8L2k+JztcbiAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChjKTtcblxuICAgICAgICBpZiAobGFiZWwgPSBjaGVja2JveC5nZXRBdHRyaWJ1dGUoJ2xhYmVsJykpIHtcbiAgICAgICAgICAgIHZhciBsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgbC5jbGFzc05hbWUgPSAnbGFiZWwnO1xuICAgICAgICAgICAgbC5pbm5lckhUTUwgPSBsYWJlbDtcbiAgICAgICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobCk7XG4gICAgICAgIH1cbiAgICAgICAgc21hc2guY2xhc3MuYWRkKGNoZWNrYm94LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpO1xuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gc21hc2guY2xhc3MuaGFzKGNoZWNrYm94LnBhcmVudEVsZW1lbnQsICdjaGVja2VkJyk7XG5cbiAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy50b2dnbGUodGhpcywgJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgIHNtYXNoLmdldCh0aGlzLCAnaW5wdXQnKS5jaGVja2VkID0gc21hc2guY2xhc3MuaGFzKHRoaXMsICdjaGVja2VkJyk7XG4gICAgICAgICAgICBpZiAoY2hlY2tib3gucGFyZW50RWxlbWVudC5vbmNoYW5nZSkge1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQub25jaGFuZ2Uoc21hc2guY2xhc3MuaGFzKHRoaXMsICdjaGVja2VkJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQuZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBzbWFzaC5jbGFzcy5oYXModGhpcywgJ2NoZWNrZWQnKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50LnNldFZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXModGhpcywgJ2NoZWNrZWQnKSA9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub25jbGljaygpO1xuICAgICAgICB9O1xuICAgIH1cbn07XG4iLCJzbWFzaC5yb3V0ZXIgPSB7XG4gICAgX19wYXJzZVJvdXRlUmVnZXg6IC97KC4qPyl9L2lnLFxuICAgIF9fZHluYW1pY1BhcnRzOiBbXSxcbiAgICBfX2Jhc2VEaXJlY3Rvcnk6IG51bGwsXG4gICAgX19yb3V0ZXM6IHtcbiAgICAgICAgc3RhdGljOiBbXSxcbiAgICAgICAgZHluYW1pYzogW11cbiAgICB9XG59O1xuXG4vKipcbiAqIEFkZCBhIHJvdXRlIGhhbmRsZXIgdG8gdGhlIHJvdXRlclxuICogQHBhcmFtIHN0cmluZyAgIHBhdGhcbiAqIEBwYXJhbSBGdW5jdGlvbiBjYWxsYmFja1xuICovXG5zbWFzaC5yb3V0ZXIuYWRkID0gZnVuY3Rpb24ocGF0aCwgY2FsbGJhY2spIHtcbiAgICB2YXIgcm91dGUgPSBzbWFzaC5yb3V0ZXIucGFyc2VSb3V0ZShwYXRoKTtcbiAgICBpZiAocm91dGUucmVnZXgpIHtcbiAgICAgICAgcm91dGUuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgaWYgKCFzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF0pIHtcbiAgICAgICAgICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdKSB7XG4gICAgICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10ucHVzaChyb3V0ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc21hc2gucm91dGVyLl9fcm91dGVzLnN0YXRpY1twYXRoXSA9IGNhbGxiYWNrO1xufTtcblxuLyoqXG4gKiBTZXQgYW5kIGV4ZWN1dGUgdGhlIGdpdmVuIHBhdGhcbiAqIEBwYXJhbSBzdHJpbmcgcGF0aFxuICovXG5zbWFzaC5yb3V0ZXIuc2V0ID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIHNtYXNoLnJvdXRlci5kaXNwbGF5VVJMKHBhdGgpO1xuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncG9wc3RhdGUnKSk7XG59O1xuXG4vKipcbiAqIERpc3BsYXkgdGhlIHVybCBpbiB0aGUgYnJvd3NlclxuICogQHBhcmFtICBzdHJpbmcgcGF0aFxuICogQHJldHVybiB2b2lkXG4gKi9cbnNtYXNoLnJvdXRlci5kaXNwbGF5VVJMID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIHBhdGggPSBzbWFzaC5yb3V0ZXIuYWRkQmFzZURpcmVjdG9yeShwYXRoKTtcbiAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoXCJcIiwgXCJcIiwgcGF0aCk7XG59O1xuXG4vKipcbiAqIFJlZGlyZWN0IHRvIHRoZSBjb3JyZWN0IHVybFxuICogQHBhcmFtICBzdHJpbmcgcGF0aFxuICogQHJldHVybiB2b2lkXG4gKi9cbnNtYXNoLnJvdXRlci5yZWRpcmVjdCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBpZiAoIXBhdGguc2VhcmNoKC9eaHR0cFtzXT86XFwvXFwvLykpIHtcbiAgICAgICAgcGF0aCA9IHNtYXNoLnJvdXRlci5hZGRCYXNlRGlyZWN0b3J5KHBhdGgpO1xuICAgIH1cbiAgICB3aW5kb3cubG9jYXRpb24gPSBwYXRoO1xufTtcblxuLyoqXG4gKiBFeGVjdXRlIHdoZW4gYSBwYXRoIGlzIG5vdCBmb3VuZC5cbiAqIEBwYXJhbSAgUm91dGUgcm91dGVcbiAqIEByZXR1cm4gdm9pZFxuICovXG5zbWFzaC5yb3V0ZXIuaGFuZGxlTm90Rm91bmQgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIGNvbnNvbGUubG9nKFwicm91dGU6IFwiICsgSlNPTi5zdHJpbmdpZnkocm91dGUpICsgXCIgZG9lcyBub3QgZXhpc3RcIik7XG59O1xuXG4vKipcbiAqIFJ1biB0aGUgcm91dGVyIGFuZCBjaGVjayB0aGUgZ2l2ZW4gcGF0aFxuICogQHJldHVybiB2b2lkXG4gKi9cbnNtYXNoLnJvdXRlci5ydW4gPSBmdW5jdGlvbigpIHtcbiAgICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHNtYXNoLnJvdXRlci5leGVjdXRlKCk7XG4gICAgfTtcbiAgICBzbWFzaC5yb3V0ZXIuZXhlY3V0ZSgpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGUgdGhlIHJvdXRlciBhbmQgY2hlY2sgZ2l2ZW4gcGF0aFxuICogQHJldHVybiB2b2lkXG4gKi9cbnNtYXNoLnJvdXRlci5leGVjdXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBhdGggPSB0aGlzLmdldFBhdGgoKTtcbiAgICBpZiAodGhpcy5fX3JvdXRlcy5zdGF0aWNbcGF0aC5wYXRoXSkge1xuICAgICAgICB0aGlzLl9fcm91dGVzLnN0YXRpY1twYXRoLnBhdGhdKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGRlcHRoID0gcGF0aC5wYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGgtMTtcbiAgICBpZiAodGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXSkge1xuICAgICAgICB2YXIgcm91dGU7XG4gICAgICAgIHZhciBtYXRjaGVzO1xuICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICBmb3IgKHZhciB2YXJOdW0gaW4gdGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdW3Zhck51bV0pIHtcbiAgICAgICAgICAgICAgICB2YXIgcm91dGUgPSB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdW3Zhck51bV1baXRlbV07XG4gICAgICAgICAgICAgICAgbWF0Y2hlcyA9IHBhdGgucGF0aC5tYXRjaChyb3V0ZS5yZWdleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8cm91dGUubnVtVmFyczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbcm91dGUudmFyc1tpXV0gPSBtYXRjaGVzW2krMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJvdXRlLmNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzbWFzaC5yb3V0ZXIuaGFuZGxlTm90Rm91bmQocGF0aCk7XG59O1xuXG4vKipcbiAqIEdldCBwYXRoIHdpdGhvdXQgYmFzZSBkaXJlY3RvcnkgaWYgYXZhaWxhYmxlXG4gKiBAcmV0dXJuIFBhdGhcbiAqL1xuc21hc2gucm91dGVyLmdldFBhdGggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgIGwuaHJlZiA9IHdpbmRvdy5sb2NhdGlvbjtcbiAgICByZXR1cm4ge2hvc3Q6IGwuaG9zdG5hbWUsIHBhdGg6IHNtYXNoLnJvdXRlci5jaGVja1BhdGgobC5wYXRobmFtZSl9O1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gcm91dGUgZ2l2ZW4gYnkgYWRkXG4gKiBAcGFyYW0gIHN0cmluZyBwYXRoXG4gKiBAcmV0dXJuIFJvdXRlXG4gKi9cbnNtYXNoLnJvdXRlci5wYXJzZVJvdXRlID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIHBhdGggPSBzbWFzaC5yb3V0ZXIuY2xlYW5QYXRoKHBhdGgpO1xuICAgIHZhciByb3V0ZSA9IHtcbiAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgZGVwdGg6IChwYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGggLSAxKSxcbiAgICAgICAgdmFyczogW10sXG4gICAgICAgIG51bVZhcnM6IDBcbiAgICB9O1xuICAgIHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cyA9IHBhdGgubWF0Y2goc21hc2gucm91dGVyLl9fcGFyc2VSb3V0ZVJlZ2V4KTtcbiAgICBpZiAoc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzICE9IHVuZGVmaW5lZCAmJiBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMgIT0gbnVsbCkge1xuICAgICAgICB2YXIgcmVnZXggPSBcIl5cIiArIHBhdGgucmVwbGFjZSgvXFwvL2lnLCBcIlxcXFwvXCIpICsgXCIkXCI7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJvdXRlLm51bVZhcnMrKztcbiAgICAgICAgICAgIHJvdXRlLnZhcnMucHVzaChzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0uc3Vic3RyaW5nKDEsIHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0c1tpXS5sZW5ndGgtMSkpO1xuICAgICAgICAgICAgcmVnZXggPSByZWdleC5yZXBsYWNlKHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0c1tpXSwgXCIoLio/KVwiKTtcbiAgICAgICAgfVxuICAgICAgICByb3V0ZS5yZWdleCA9IG5ldyBSZWdFeHAocmVnZXgsICdpJyk7XG4gICAgfVxuICAgIHJldHVybiByb3V0ZTtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBiYXNlIGRpcmVjdG9yeSB0byBiZSB1c2VkIGJ5IGFsbCByb3V0ZXNcbiAqIEBwYXJhbSBzdHJpbmcgZGlyZWN0b3J5XG4gKi9cbnNtYXNoLnJvdXRlci5zZXRCYXNlRGlyZWN0b3J5ID0gZnVuY3Rpb24oZGlyZWN0b3J5KSB7XG4gICAgaWYgKCFkaXJlY3RvcnkpIHtcbiAgICAgICAgc21hc2gucm91dGVyLl9fYmFzZURpcmVjdG9yeSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5ID0gc21hc2gucm91dGVyLmNsZWFuUGF0aChkaXJlY3RvcnkpO1xufTtcblxuLyoqXG4gKiBBZGQgdGhlIGJhc2UgZGlyZWN0b3J5IGlmIGl0IGlzIGF2YWlsYWJsZVxuICogQHBhcmFtIHN0cmluZyBwYXRoXG4gKiBAcmV0dXJuIHN0cmluZ1xuICovXG5zbWFzaC5yb3V0ZXIuYWRkQmFzZURpcmVjdG9yeSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBpZiAoIXNtYXNoLnJvdXRlci5fX2Jhc2VEaXJlY3RvcnkpIHtcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgfVxuICAgIGlmIChwYXRoLmluZGV4T2Yoc21hc2gucm91dGVyLl9fYmFzZURpcmVjdG9yeSkgPT09IC0xKSB7XG4gICAgICAgIHBhdGggPSBzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5ICsgcGF0aDtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG59O1xuXG4vKipcbiAqIENsZWFuIHRoZSBnaXZlbiBwYXRoIHRvIHRoZSBwcm9wZXIgcGF0aCB0byBiZSB1c2VkIGJ5IHRoZSByb3V0ZXJcbiAqIEBwYXJhbSAgc3RyaW5nIHBhdGhcbiAqIEByZXR1cm4gc3RyaW5nXG4gKi9cbnNtYXNoLnJvdXRlci5jbGVhblBhdGggPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgaWYgKHBhdGgubGVuZ3RoID4gMCAmJiBwYXRoLnN1YnN0cmluZygwLCAxKSAhPSBcIi9cIikge1xuICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoO1xuICAgIH1cbiAgICBpZiAocGF0aC5sZW5ndGggPiAyICYmIHBhdGguc3Vic3RyaW5nKHBhdGgubGVuZ3RoLTIpID09IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxlbmd0aC0yKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG59O1xuXG4vKipcbiAqIENoZWNrIHRoZSBwYXRoIGlmIHRoZXJlIGlzIGEgYmFzZSBkaXJlY3RvcnkgYXZhaWxhYmxlXG4gKiBAcGFyYW0gIHN0cmluZyBwYXRoIFRoZSBwYXRoIHRvIGNoZWNrXG4gKiBAcmV0dXJuIHN0cmluZyAgICAgIFRoZSBwYXRoIHdpdGhvdXQgYSBiYXNlIGRpcmVjdG9yeSBmb3IgdXNlIG9mIGNoZWNraW5nIHJvdXRlc1xuICovXG5zbWFzaC5yb3V0ZXIuY2hlY2tQYXRoID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIHBhdGggPSBzbWFzaC5yb3V0ZXIuY2xlYW5QYXRoKHBhdGgpO1xuICAgIGlmIChzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5ICYmIHBhdGguaW5kZXhPZihzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5KSAhPT0gLTEpIHtcbiAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZShzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5LCAnJyk7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIHF1ZXJ5IHBhcmFtIGluIHRoZSB1cmxcbiAqIEBwYXJhbSAgc3RyaW5nIHBhcmFtIFRoZSBwYXJhbSB5b3Ugd2FudCB0byBoYXZlXG4gKiBAcmV0dXJuIHN0cmluZyAgICAgICBUaGUgdmFsdWUgb2YgdGhlIHBhcmFtIG9yIHVuZGVmaW5lZCBpZiBpdCBpcyBub3QgYXZhaWxhYmxlXG4gKi9cbnNtYXNoLnJvdXRlci5xdWVyeVBhcmFtID0gZnVuY3Rpb24ocGFyYW0pIHtcbiAgICB2YXIgcmVnZXhTID0gXCJbXFxcXD8mXVwiK3BhcmFtK1wiPShbXiYjXSopXCIsXG4gICAgcmVnZXggPSBuZXcgUmVnRXhwKCByZWdleFMgKSxcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyggd2luZG93LmxvY2F0aW9uLnNlYXJjaCApO1xuICAgIGlmKCByZXN1bHRzID09IG51bGwgKXtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHNbMV07Ly9kZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1sxXS5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcbn07XG4iLCJzbWFzaC5zZWFyY2hib3ggPSB7XG4gICAgaV86IGZhbHNlLFxuICAgIG1pbkF1dG9Db21wbGV0ZUxlbmd0aDogMyxcbiAgICBvbmZvY3VzOiB1bmRlZmluZWQsXG4gICAgb25ibHVyOiB1bmRlZmluZWQsXG4gICAgb25jaGFuZ2U6IHVuZGVmaW5lZCxcbn07XG5cbnNtYXNoLnNlYXJjaGJveC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNtYXNoLnNlYXJjaGJveC5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzc2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCBpbnB1dFwiKTtcbiAgICBpZiAoIXNzYikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNzYi5vbmZvY3VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gucmVzdWx0cygnPGRpdiBjbGFzcz1cInNtYXNoLWluc3RydWN0aW9uXCI+U3RhcnQgdHlwaW5nIHRvIGZpbmQgcmVzdWx0czwvZGl2PicpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLWhlYWRlclwiKSwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCAuc21hc2gtc2VhcmNoYm94LXJlc3VsdHNcIiksICdzaG93Jyk7XG4gICAgICAgIGlmIChzbWFzaC5zZWFyY2hib3gub25mb2N1cykge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc3NiLm9uYmx1ciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1oZWFkZXJcIiksICdpcy1mb2N1c3NlZCcpO1xuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpLCAnc2hvdycpO1xuICAgICAgICBpZiAoc21hc2guc2VhcmNoYm94Lm9uYmx1cikge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uYmx1cigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzc2Iub25rZXl1cCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoIDwgc21hc2guc2VhcmNoYm94Lm1pbkF1dG9Db21wbGV0ZUxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc21hc2guc2VhcmNoYm94Lm9uY2hhbmdlKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gub25jaGFuZ2UodGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNtYXNoLnNlYXJjaGJveC5pXyA9IHRydWU7XG59O1xuXG5zbWFzaC5zZWFyY2hib3guZW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoaSA9IHNtYXNoLmdldChkb2N1bWVudCwgXCIuc21hc2gtc2VhcmNoYm94IGlucHV0XCIpKSB7XG4gICAgICAgIHJldHVybiAoaS52YWx1ZS5sZW5ndGggPT0gMCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5zbWFzaC5zZWFyY2hib3guYXBwZW5kVG8gPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5vZGUuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICB2YXIgcmVzdWx0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2VhcmNoYm94IC5zbWFzaC1zZWFyY2hib3gtcmVzdWx0c1wiKTtcbiAgICByZXN1bHRzLmFwcGVuZENoaWxkKG5vZGUpO1xufTtcblxuc21hc2guc2VhcmNoYm94LnJlc3VsdHMgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgdmFyIHJlc3VsdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCAuc21hc2gtc2VhcmNoYm94LXJlc3VsdHNcIik7XG4gICAgcmVzdWx0cy5pbm5lckhUTUwgPSBjb250ZW50O1xufTtcbiIsInNtYXNoLnNpZGViYXIgPSB7XG4gICAgaV86IGZhbHNlXG59O1xuXG5zbWFzaC5zaWRlYmFyLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc21hc2guc2lkZWJhci5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzaWJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyIC5sb2NrXCIpO1xuICAgIGlmICghc2libCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNpYmwub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzbWFzaC5zaWRlYmFyLnRvZ2dsZUxvY2soKTtcbiAgICB9O1xuXG4gICAgdmFyIHNpYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhclwiKTtcbiAgICBzbWFzaC5jbGFzcy5hZGQoc2liLCAnaXMtdW5sb2NrZWQnKTtcbiAgICBzbWFzaC5zaWRlYmFyLmlfID0gdHJ1ZTtcbiAgICBpZiAoc21hc2guY29uZmlnLmdldCgnc2lkZWJhcl9sb2NrJykpIHtcbiAgICAgICAgc21hc2guc2lkZWJhci50b2dnbGVMb2NrKCk7XG4gICAgfVxufTtcblxuc21hc2guc2lkZWJhci50b2dnbGVMb2NrID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFzbWFzaC5zaWRlYmFyLmlfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc21hc2guY2xhc3MudG9nZ2xlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhciAubG9ja1wiKSwgJ3VubG9jaycpO1xuICAgIHNtYXNoLmNsYXNzLnRvZ2dsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXJcIiksICdpcy11bmxvY2tlZCcpO1xuICAgIHNtYXNoLmNvbmZpZy5zZXQoJ3NpZGViYXJfbG9jaycsICFzbWFzaC5jbGFzcy5oYXMoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyXCIpLCAnaXMtdW5sb2NrZWQnKSk7XG59O1xuIiwic21hc2guc3RvcmFnZSA9IHt9O1xuXG5zbWFzaC5zdG9yYWdlLnNldCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG59O1xuXG5zbWFzaC5zdG9yYWdlLnVuc2V0ID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbn07XG5cbnNtYXNoLnN0b3JhZ2UuZ2V0ID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgdmFyIGkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgIGlmICghaSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5wYXJzZShpKTtcbn07XG5cbnNtYXNoLnN0b3JhZ2UuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbn07XG4iLCJzbWFzaC53b3Jrc3BhY2UgPSB7XG4gICAgYmFzZVRpdGxlOiB1bmRlZmluZWQsXG4gICAgX3dzXzogdW5kZWZpbmVkLFxuICAgIF9oZHJfOiB1bmRlZmluZWQsXG4gICAgX3NiXzogdW5kZWZpbmVkLFxuICAgIF90YWJzXzogW11cbn07XG5cbnNtYXNoLndvcmtzcGFjZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgc21hc2gud29ya3NwYWNlLl93c18gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXdvcmtzcGFjZVwiKTtcbiAgICBpZiAoIXNtYXNoLndvcmtzcGFjZS5fd3NfKSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBzbWFzaC53b3Jrc3BhY2UuX2hkcl8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLWhlYWRlclwiKTtcbiAgICBpZiAoc21hc2gud29ya3NwYWNlLl9oZHJfKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChzbWFzaC53b3Jrc3BhY2UuX3dzXywgJ2hhcy1oZWFkZXInKTtcbiAgICB9XG4gICAgc21hc2gud29ya3NwYWNlLl9zYl8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXdvcmtzcGFjZSAuc21hc2gtc2lkZWJhclwiKTtcbiAgICBpZiAoc21hc2gud29ya3NwYWNlLl9zYl8pIHtcbiAgICAgICAgc21hc2guY2xhc3MuYWRkKHNtYXNoLndvcmtzcGFjZS5fd3NfLCAnaGFzLXNpZGViYXInKTtcbiAgICB9XG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuYWRkVGFiID0gZnVuY3Rpb24oaWQsIHRpdGxlLCBjb250ZW50LCB1cmwpIHtcbiAgICBpZiAoIXNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC10YWItcGFuZScpKSB7XG4gICAgICAgIHZhciBwYW5lbCA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC1wYW5lbCcpO1xuICAgICAgICBpZiAoIXBhbmVsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVG8gYWRkIGEgdGFiIHRoZXJlIG5lZWRzIHRvIGJlIGEgcGFuZWwnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwYW5lbC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cInNtYXNoLXRhYi1wYW5lXCI+PGRpdiBjbGFzcz1cInNtYXNoLXRhYnNcIj48L2Rpdj48ZGl2IGNsYXNzPVwic21hc2gtcGFuZXNcIj48L2Rpdj48L2Rpdj4nO1xuICAgIH1cbiAgICB2YXIgdGFicyA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC10YWItcGFuZSAuc21hc2gtdGFicycpO1xuICAgIHZhciBwYW5lc0NvbnRhaW5lciA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC10YWItcGFuZSAuc21hc2gtcGFuZXMnKTtcblxuICAgIGRvY3VtZW50LnRpdGxlID0gc21hc2gud29ya3NwYWNlLmNyZWF0ZVRpdGxlKHRpdGxlKTtcblxuICAgIGlmICh0YWIgPSBzbWFzaC5nZXQodGFicywgJy5zbWFzaC10YWJbZGF0YS1pZD1cIicgKyBpZCArICdcIl0nKSkge1xuICAgICAgICB2YXIgcGFuZSA9IHNtYXNoLmdldChwYW5lc0NvbnRhaW5lciwgJy5zbWFzaC1wYW5lW2RhdGEtaWQ9XCInICsgaWQgKyAnXCJdJyk7XG4gICAgICAgIHBhbmUuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICAgICAgdGFiLmRhdGFzZXQudXJsID0gdXJsO1xuICAgICAgICB0YWIub25jbGljaygpO1xuICAgICAgICByZXR1cm4ge3RhYjogdGFiLCBwYW5lOiBwYW5lfTtcbiAgICB9XG5cbiAgICBzbWFzaC5oaWRlKHBhbmVzQ29udGFpbmVyLCBcIi5zbWFzaC1wYW5lXCIpO1xuICAgIGlmIChhY3RpdmUgPSBzbWFzaC5nZXQodGFicywgJy5zbWFzaC10YWIuYWN0aXZlJykpIHtcbiAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGFjdGl2ZSwgJ2FjdGl2ZScpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIG5ldyB0YWJcbiAgICB2YXIgdGFiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0YWIuY2xhc3NOYW1lID0gJ3NtYXNoLXRhYiBhY3RpdmUnO1xuICAgIHRhYi5kYXRhc2V0LmlkID0gaWQ7XG4gICAgdGFiLmRhdGFzZXQudXJsID0gdXJsO1xuICAgIHRhYi5pbm5lckhUTUwgPSB0aXRsZSArICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNsb3NlXCI+Y2xvc2U8L2k+JztcbiAgICB0YWIub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGFjdGl2ZSA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYi5hY3RpdmUnKSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGFjdGl2ZSwgJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZCh0aGlzLCAnYWN0aXZlJyk7XG4gICAgICAgIHNtYXNoLmhpZGUoZG9jdW1lbnQsICcuc21hc2gtcGFuZScpO1xuICAgICAgICBzbWFzaC5zaG93KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyB0aGlzLmRhdGFzZXQuaWQgKyAnXCJdJyk7XG4gICAgICAgIGlmICh0aGlzLmRhdGFzZXQudXJsICYmIHRoaXMuZGF0YXNldC51cmwgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgc21hc2gucm91dGVyLmRpc3BsYXlVUkwodGhpcy5kYXRhc2V0LnVybCk7XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBzbWFzaC53b3Jrc3BhY2UuY3JlYXRlVGl0bGUodGhpcy5pbm5lckhUTUwpO1xuICAgIH07XG4gICAgc21hc2gub24odGFiLCAnLmNsb3NlJywgJ29uY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudEVsZW1lbnQub25jbG9zZSAmJiAhdGhpcy5wYXJlbnRFbGVtZW50Lm9uY2xvc2UoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXModGhpcy5wYXJlbnRFbGVtZW50LCAnYWN0aXZlJykpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudEVsZW1lbnQucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LnByZXZpb3VzU2libGluZy5vbmNsaWNrKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGFyZW50RWxlbWVudC5uZXh0U2libGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5uZXh0U2libGluZy5vbmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhbmUgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtcGFuZVtkYXRhLWlkPVwiJyArIHRoaXMucGFyZW50RWxlbWVudC5kYXRhc2V0LmlkICsgJ1wiXScpKSB7XG4gICAgICAgICAgICBwYW5lLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQocGFuZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5wYXJlbnRFbGVtZW50KTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9KTtcbiAgICB0YWJzLmFwcGVuZENoaWxkKHRhYik7XG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgcGFuZSB3aXRoIHRoZSBwcm92aWRlZCBjb250ZW50XG4gICAgdmFyIHBhbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHBhbmUuY2xhc3NOYW1lID0gJ3NtYXNoLXBhbmUnO1xuICAgIHBhbmUuZGF0YXNldC5pZCA9IGlkO1xuICAgIHBhbmUuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICBwYW5lc0NvbnRhaW5lci5hcHBlbmRDaGlsZChwYW5lKTtcbiAgICByZXR1cm4ge3RhYjogdGFiLCBwYW5lOiBwYW5lfTtcbn07XG5cbnNtYXNoLndvcmtzcGFjZS5hY3RpdmVUYWIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGFiID0gc21hc2guZ2V0KHRhYnMsICcuc21hc2gtdGFiLmFjdGl2ZScpXG4gICAgaWYgKCF0YWIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciBwYW5lID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyB0YWIuZGF0YXNldC5pZCArICdcIl0nKTtcbiAgICBpZiAoIXBhbmUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB7dGFiOiB0YWIsIHBhbmU6IHBhbmV9O1xufTtcblxuc21hc2gud29ya3NwYWNlLmNyZWF0ZVRpdGxlID0gZnVuY3Rpb24odGl0bGUpIHtcbiAgICB2YXIgdCA9IHRpdGxlLnJlcGxhY2UoLzwoW14+XSs/KShbXj5dKj8pPiguKj8pPFxcL1xcMT4vaWcsIFwiXCIpO1xuICAgIGlmICh0ID09ICcnKSB7XG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gdGl0bGU7XG4gICAgICAgIGlmICh0cyA9IHNtYXNoLmdldChkaXYsICcudGl0bGUnKSkge1xuICAgICAgICAgICAgdCA9IHRzLmlubmVySFRNTDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCA9PSAnJykge1xuICAgICAgICAgICAgdCA9ICd1bmtub3duJztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdCArIChzbWFzaC53b3Jrc3BhY2UuYmFzZVRpdGxlID8gJyB8ICcgKyBzbWFzaC53b3Jrc3BhY2UuYmFzZVRpdGxlIDogXCJcIik7XG59O1xuIl19
