window.addEventListener("load",function(e){smash.init()},!1),NodeList.prototype.forEach=Array.prototype.forEach;var smash={init:function(){smash.config.init(),smash.sidebar.init(),smash.searchbox.init(),smash.workspace.init(),smash.input.init()},get:function(e,s){try{return e.querySelector(s)}catch(e){console.log(e)}},getAll:function(e,s){try{return e.querySelectorAll(s)}catch(e){console.log(e)}},hide:function(e,s){var t;t=s&&"string"==typeof s?smash.getAll(e,s):[e];for(var a=0;a<t.length;a++)t[a].style.display="none"},nextVisible:function(e){for(;e=e.nextSibling;)if("none"!=e.style.display)return e},firstVisible:function(e){if("none"!=(e=e.parentElement.firstChild).style.display)return e;for(;e=e.nextSibling;)if("none"!=e.style.display)return e},previousVisible:function(e){for(;e=e.previousSibling;)if("none"!=e.style.display)return e},lastVisible:function(e){if("none"!=(e=e.parentElement.lastChild).style.display)return e;for(;e=e.previousSibling;)if("none"!=e.style.display)return e},show:function(e,s){var t;t=s&&"string"==typeof s?smash.getAll(e,s):[e];for(var a=0;a<t.length;a++)t[a].style.display=""},remove:function(e){e.parentNode.removeChild(e)},on:function(e,s,t,a){for(var n=smash.getAll(e,s),r=0;r<n.length;r++)n[r][t]=a},fuzzyCompare:function(e,s){if(null==s||null==e)return!1;var t=".*?"+e.toLowerCase().replace(/-/g,"\\-").split("").join(".*?")+".*?";return s.toLowerCase().match(t)},findNextTabStop:function(e,s){var t=smash.getAll(e,".smash-input, .smash-button, .smash-select, .smash-select-multiple, .smash-textarea, .smash-checkbox"),a=Array.prototype.filter.call(t,function(e){return"0"<=e.tabIndex}),n=a.indexOf(s);return a[n+1]||a[0]},isEmpty:function(e){switch(e){case void 0:case null:case"":return!0}return!1},ajax:{_headers_:[]}};smash.ajax.addHeader=function(e,s){smash.ajax._headers_[e]=s},smash.ajax.removeHeader=function(e){delete smash.ajax._headers_[e]},smash.ajax.onerror=function(e){console.log(e)},smash.ajax.onunauthorized=function(e){smash.ajax.onerror(e)},smash.ajax._xhr_=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,s=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],t=0;t<s.length;t++)try{e=new ActiveXObject(s[t]);break}catch(e){}return e},smash.ajax.send=function(e,s,t,a,n,r,o){void 0===o&&(o=!0),void 0===r&&(r=smash.ajax.onerror);var i=smash.ajax._xhr_();for(var l in i.responseType=n,i.onreadystatechange=function(){if(4==i.readyState)switch(i.status){case 200:case 201:s&&s(i.response);break;case 401:smash.ajax.onunauthorized(i.response);break;default:r(i.response)}},i.open(t,e,o),"json"==n?i.setRequestHeader("Content-type","application/json"):"POST"==t&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),smash.ajax._headers_)i.setRequestHeader(l,smash.ajax._headers_[l]);i.send(a)},smash.ajax.get=function(e,s,t,a,n,r){var o=[];for(var i in t)o.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));smash.ajax.send(e+(o.length?"?"+o.join("&"):""),s,"GET",null,a,n,r)},smash.ajax.post=function(e,s,t,a,n,r){var o;if(t)if("json"!=a){var i=[];for(var l in t)i.push(encodeURIComponent(l)+"="+encodeURIComponent(t[l]));o=i.join("&")}else o=JSON.stringify(t);smash.ajax.send(e,s,"POST",o,a,n,r)},smash.class={},smash.class.add=function(e,s){smash.class.has(e,s)||(e.classList?e.classList.add(s):e.className+=" "+s)},smash.class.remove=function(e,s){smash.class.has(e,s)&&(e.classList?e.classList.remove(s):e.className=e.className.replace(s,""))},smash.class.has=function(e,s){return-1<(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(" "+s+" ")},smash.class.toggle=function(e,s){smash.class.has(e,s)?smash.class.remove(e,s):smash.class.add(e,s)},smash.class.toggleAll=function(e,s,t){if(el=smash.getAll(e,s))for(var a in el)smash.class.toggle(el[a],t)},smash.config={_values_:{_sidebar_lock_:!1}},smash.config.init=function(){var e=smash.storage.get("config");e&&(smash.config._values_=e)},smash.config.get=function(e){var s="_"+e+"_";if(s in smash.config._values_)return smash.config._values_[s];throw new smash.Exception("001",'Invalid config option "'+e+'"')},smash.config.set=function(e,s){var t="_"+e+"_";if(!t in smash.config._values_)throw new smash.Exception("001",'Invalid config option "'+e+'"');smash.config._values_[t]=s,smash.storage.set("config",smash.config._values_)},smash.contextmenu={},smash.contextmenu.new=function(e,s){(t=smash.get(document,"#smash-context-menu"))&&smash.remove(t);var t=document.createElement("div");t.id="smash-context-menu";var a,n="<ul class='clickable'>";for(i=0;i<s.length;i++)"seperator"!=s[i]?n+='<li class="ctx_item_'+i+'">'+s[i].label+"</li>":n+='<li class="seperator"></li>';for(n+="</ul>",t.innerHTML=n,document.body.appendChild(t),i=0;i<s.length;i++)"seperator"!=s[i]&&((a=smash.get(t,"li.ctx_item_"+i)).callback=s[i].callback,a.onmousedown=function(e){this.callback(e),smash.contextmenu.close(e)});var r=e.pageY;return r+t.offsetHeight>window.innerHeight&&(r=window.innerHeight-t.offsetHeight-20),t.style.top=r,t.style.left=e.pageX,e.preventDefault(),document.onclick=smash.contextmenu.close,!1},smash.contextmenu.close=function(e){e.preventDefault(),(ctx=smash.get(document,"#smash-context-menu"))&&smash.remove(ctx),document.onclick=void 0},smash.cookie={},smash.cookie.set=function(e,s,t){var a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3);var n="expires="+a.toUTCString();document.cookie=e+"="+s+";"+n+";path=/"},smash.cookie.get=function(e){e+="=";for(var s=decodeURIComponent(document.cookie).split(";"),t=0;t<s.length;t++){for(var a=s[t];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return""},smash.dialog={},smash.dialog.new=function(e){var s=smash.dialog.checkBackdrop(),t=document.createElement("div");t.className="smash-dialog",t.innerHTML=e,s.appendChild(t)},smash.dialog.checkBackdrop=function(){if(e=smash.get(document,".smash-dialog-backdrop"))return(dialog=smash.get(document,".smash-dialog-backdrop .smash-dialog"))&&e.removeChild(dialog),e;var e=document.createElement("div");return e.className="smash-dialog-backdrop",e.innerHTML='<div class="smash-dialog-background"></div>',smash.get(e,".smash-dialog-background").onclick=smash.dialog.close,smash.get(document,"body").appendChild(e),e},smash.dialog.close=function(){(dialog=smash.get(document,".smash-dialog-backdrop"))&&smash.get(document,"body").removeChild(dialog)},smash.Exception=function(e,s){this.value=e,this.message=s,this.toString=function(){return"SmashException "+this.value+": "+this.message}},smash.input={},smash.input.init=function(){for(var e=document.querySelectorAll(".smash-input input, .smash-textarea textarea"),s=0;s<e.length;s++)if(r=e[s],!smash.class.has(r.parentElement,"smash-initialised")){if(r.parentElement.getName=function(){return this.querySelector("input").getAttribute("name")},r.parentElement.setValue=function(e){(r=this.querySelector("input"))?(r.value=e,r.onkeyup&&r.onkeyup()):(r=this.querySelector("textarea"))&&(r.value=e,r.onkeyup&&r.onkeyup())},r.parentElement.getValue=function(){return this.querySelector("input")?this.querySelector("input").value:this.querySelector("textarea")?this.querySelector("textarea").value:null},r.parentElement.onfocus=function(e){(r=this.querySelector("input"))?r.focus():(r=this.querySelector("textarea"))&&r.focus()},smash.class.has(r.parentElement,"has-floating-label"))smash.class.remove(r.parentElement,"has-floating-label"),smash.class.add(r.parentElement,"floating-label"),(n=document.createElement("label")).innerHTML=r.placeholder,r.parentElement.appendChild(n),r.onkeyup=function(e){var s=this.parentElement.querySelector("label");s&&(""!=this.value?smash.class.add(s,"show"):smash.class.remove(s,"show"))};r.parentElement.getAttribute("value")&&r.parentElement.setValue(r.parentElement.getAttribute("value")),smash.class.add(r.parentElement,"smash-initialised")}var t,a=document.querySelectorAll(".smash-select select, .smash-select-multiple select");for(s=0;s<a.length;s++)if(t=a[s],!smash.class.has(t.parentElement,"smash-initialised")){var n,r;if(t.parentElement.multiple=smash.class.has(t.parentElement,"smash-select-multiple"),smash.class.has(t.parentElement,"has-floating-label"))smash.class.remove(t.parentElement,"has-floating-label"),smash.class.add(t.parentElement,"floating-label"),(n=document.createElement("label")).innerHTML=t.getAttribute("placeholder"),t.parentElement.appendChild(n);t.parentElement.getName=function(){return this.querySelector("select").getAttribute("name")},t.parentElement.setValue=function(e){smash.class.remove(this,"is-focussed");var s,t=this.querySelector("select"),a=this.querySelector("input");this.multiple&&!smash.isEmpty(e)&&(s=JSON.stringify(e));var n=this.value;if(this.value=this.multiple?s:e,this.multiple||(t.value=e),""!=this.value&&(!this.multiple&&-1<t.selectedIndex||this.multiple))if(this.multiple){var r=[];this.querySelectorAll("li.selected").forEach(function(e){r.push(e.textContent)}),a.value=r.join(" + "),a.placeholder=t.getAttribute("placeholder")}else{var o=t.options[t.selectedIndex].text;o&&""!=o&&"&nbsp;"!=o?a.value=o:(a.value="",a.placeholder=t.getAttribute("placeholder"))}else a.value="",a.placeholder=t.getAttribute("placeholder");this.multiple&&(e=s),a.focus(),a.blur(),n!=e&&(this.multiple||((selected=smash.get(this.parentElement,".selected"))&&smash.class.remove(selected,"selected"),""!=e&&(selected=smash.get(this,'li[value="'+e+'"]'))&&smash.class.add(selected,"selected")),t.onchange&&t.onchange(),this.onchange&&this.onchange()),this.checkLabel()},t.parentElement.onfocus=function(e){this.querySelector("input").focus(e)},t.parentElement.getValue=function(){if(!this.multiple){var e=this.querySelector("select");return-1==e.selectedIndex?null:e.options[e.selectedIndex].value}if(!smash.isEmpty(this.value))return JSON.parse(this.value)},t.parentElement.reset=function(){smash.get(this,"input").value=this.getText(),this.checkLabel(),smash.get(this,"input").blur(),(hover=smash.get(this,"ul li.hover"))&&smash.class.remove(hover,"hover")},t.parentElement.checkLabel=function(){var e=this.querySelector("label");e&&(this.getValue()&&""!=this.getValue()?smash.class.add(e,"show"):smash.class.remove(e,"show"))},t.parentElement.getText=function(){if(!this.multiple){var e=this.querySelector("select");return-1==e.selectedIndex?null:e.options[e.selectedIndex].innerHTML}var s=[];return this.querySelectorAll("li.selected").forEach(function(e){s.push(e.textContent)}),s.join(" + ")},(r=document.createElement("input")).type="text",r.placeholder=t.getAttribute("placeholder"),r.setAttribute("readonly","readonly"),t.parentElement.appendChild(r);var o=t.querySelectorAll("option"),i=document.createElement("ul");i.onmouseup=function(e){e.stopPropagation()};for(var l=0;l<o.length;l++){var c=o[l];if((m=c.getAttribute("value"))||""===m){var h=document.createElement("li");h.setAttribute("value",c.value),h.innerHTML=""==c.innerHTML?"&nbsp;":c.innerHTML,t.parentElement.multiple?h.innerHTML=""==c.innerHTML?"&nbsp;":'<input type="checkbox">'+c.innerHTML:h.innerHTML=""==c.innerHTML?"&nbsp;":c.innerHTML,i.appendChild(h),h.onmousedown=function(e){if(this.parentElement.parentElement.multiple){(checkbox=this.querySelector("input"))&&(smash.isEmpty(checkbox.getAttribute("checked"))?(smash.class.add(checkbox.parentElement,"selected"),checkbox.setAttribute("checked","checked")):(smash.class.remove(checkbox.parentElement,"selected"),checkbox.removeAttribute("checked")));var s=[];(selected=this.parentElement.querySelectorAll(".selected"))&&selected.forEach(function(e){s.push(e.value)}),this.parentElement.parentElement.setValue(s)}else this.parentElement.parentElement.setValue(this.getAttribute("value"));return(next=smash.findNextTabStop(this.parentElement.parentElement.parentElement,this.parentElement.parentElement))&&next.focus(),e.stopPropagation(),e.preventDefault(),window.onmouseup&&window.onmouseup(),!1}}}if(t.parentElement.appendChild(i),r.onfocus=function(e){smash.class.has(this.parentElement,"is-focussed")||(this.parentElement.checkLabel(),this.parentElement.click())},r.onblur=function(e){window.onmouseup&&window.onmouseup()},t.parentElement.onclick=function(){smash.class.add(this,"is-focussed");var s=smash.get(this,"input"),e=smash.get(this,"select"),o=this;s.value&&""!=s.value?s.setAttribute("placeholder",s.value):s.setAttribute("placeholder",e.getAttribute("placeholder")),s.removeAttribute("readonly"),s.blur(),s.value="",window.onmouseup=function(){if(window.onmouseup=null,s.onkeyup=null,s.setAttribute("readonly","readonly"),o.reset(),items=smash.getAll(o,"ul li")){for(var e=0;e<items.length;e++)items[e].style.display="";smash.show(o,"ul")}return smash.class.remove(o,"is-focussed"),!1},s.onkeyup=function(e){switch(e.keyCode){case 9:return!0;case 13:case 39:return(hover=smash.get(o,"ul li.hover"))&&hover.onmousedown(e),!1;case 38:if(hover=smash.get(o,"ul li.hover"))smash.class.remove(hover,"hover"),(previous=smash.previousVisible(hover))?(smash.class.add(previous,"hover"),previous.parentElement.scrollTop=previous.offsetTop):(last=smash.lastVisible(hover))&&(smash.class.add(last,"hover"),last.parentElement.scrollTop=last.parentElement.scrollHeight);else{var s=smash.get(o,"ul li");(last=smash.lastVisible(s))&&(smash.class.add(last,"hover"),last.parentElement.scrollTop=last.parentElement.scrollHeight)}return!1;case 40:if(hover=smash.get(o,"ul li.hover"))smash.class.remove(hover,"hover"),(next=smash.nextVisible(hover))?(smash.class.add(next,"hover"),next.parentElement.scrollTop=next.offsetTop):(next=smash.firstVisible(hover))&&(smash.class.add(next,"hover"),next.parentElement.scrollTop=0);else{s=smash.get(o,"ul li");(next=smash.firstVisible(s))&&(smash.class.add(next,"hover"),next.parentElement.scrollTop=0)}return!1;case 27:this.value="",this.blur(),this.focus()}var t=this.value.replace(/[^a-zA-Z0-9_ ]/g,"");if(items=smash.getAll(o,"ul li")){var a;smash.show(o,"ul");for(var n=!1,r=0;r<items.length;r++)a=items[r],""==t||smash.fuzzyCompare(t,a.innerHTML)?n=!(a.style.display=""):a.style.display="none";n||smash.hide(o,"ul")}return!0},s.focus()},t.parentElement.getAttribute("value")){var m=t.parentElement.getAttribute("value");if(t.parentElement.multiple)for(var u in m=JSON.parse(m))(selected=t.parentElement.querySelector("li[value='"+m[u]+"']"))&&smash.class.add(selected,"selected"),(r=t.parentElement.querySelector("li[value='"+m[u]+"'] input"))&&r.setAttribute("checked","checked");t.parentElement.setValue(m)}t.parentElement.checkLabel(),smash.class.add(t.parentElement,"smash-initialised")}smash.input.checkboxInit()},smash.input.checkboxInit=function(){for(var e,s=document.querySelectorAll(".smash-checkbox input"),t=0;t<s.length;t++)if(e=s[t],!smash.class.has(e.parentElement,"smash-initialised")){var a=document.createElement("span");if(a.className="checks",a.innerHTML='<i class="material-icons">check_box_outline_blank</i><i class="material-icons checked">check_box</i>',e.parentElement.appendChild(a),label=e.getAttribute("label")){var n=document.createElement("span");n.className="label",n.innerHTML=label,e.parentElement.appendChild(n)}smash.class.add(e.parentElement,"smash-initialised"),e.checked=smash.class.has(e.parentElement,"checked"),e.parentElement.onclick=function(){smash.class.toggle(this,"checked"),smash.get(this,"input").checked=smash.class.has(this,"checked"),this.onchange&&this.onchange(smash.class.has(this,"checked"))},e.parentElement.getName=function(){return this.querySelector("input").getAttribute("name")},e.parentElement.getValue=function(){return smash.class.has(this,"checked")},e.parentElement.setValue=function(e){smash.class.has(this,"checked")!=e&&this.onclick()}}},smash.router={__parseRouteRegex:/{(.*?)}/gi,__dynamicParts:[],__baseDirectory:null,__routes:{static:[],dynamic:[]}},smash.router.add=function(e,s){var t=smash.router.parseRoute(e);if(t.regex)return t.callback=s,smash.router.__routes.dynamic[t.depth]||(smash.router.__routes.dynamic[t.depth]=[]),smash.router.__routes.dynamic[t.depth][t.numVars]||(smash.router.__routes.dynamic[t.depth][t.numVars]=[]),void smash.router.__routes.dynamic[t.depth][t.numVars].push(t);smash.router.__routes.static[e]=s},smash.router.set=function(e){smash.router.displayURL(e),window.dispatchEvent(new Event("popstate"))},smash.router.displayURL=function(e){e=smash.router.addBaseDirectory(e),window.history.pushState("","",e)},smash.router.redirect=function(e){e.search(/^http[s]?:\/\//)||(e=smash.router.addBaseDirectory(e)),window.location=e},smash.router.handleNotFound=function(e){console.log("route: "+JSON.stringify(e)+" does not exist")},smash.router.run=function(){window.onpopstate=function(e){smash.router.execute()},smash.router.execute()},smash.router.execute=function(){var e=this.getPath();if(this.__routes.static[e.path])this.__routes.static[e.path]();else{var s=e.path.split("/").length-1;if(this.__routes.dynamic[s]){var t,a={};for(var n in this.__routes.dynamic[s])for(var r in this.__routes.dynamic[s][n]){var o=this.__routes.dynamic[s][n][r];if(t=e.path.match(o.regex)){for(var i=0;i<o.numVars;i++)a[o.vars[i]]=t[i+1];return void o.callback(a)}}}smash.router.handleNotFound(e)}},smash.router.getPath=function(){var e=document.createElement("a");return e.href=window.location,{host:e.hostname,path:smash.router.checkPath(e.pathname)}},smash.router.parseRoute=function(e){var s={path:e=smash.router.cleanPath(e),depth:e.split("/").length-1,vars:[],numVars:0};if(smash.router.__dynamicParts=e.match(smash.router.__parseRouteRegex),null!=smash.router.__dynamicParts&&null!=smash.router.__dynamicParts){for(var t="^"+e.replace(/\//gi,"\\/")+"$",a=0;a<smash.router.__dynamicParts.length;a++)s.numVars++,s.vars.push(smash.router.__dynamicParts[a].substring(1,smash.router.__dynamicParts[a].length-1)),t=t.replace(smash.router.__dynamicParts[a],"(.*?)");s.regex=new RegExp(t,"i")}return s},smash.router.setBaseDirectory=function(e){smash.router.__baseDirectory=e?smash.router.cleanPath(e):void 0},smash.router.addBaseDirectory=function(e){return smash.router.__baseDirectory&&-1===e.indexOf(smash.router.__baseDirectory)&&(e=smash.router.__baseDirectory+e),e},smash.router.cleanPath=function(e){return 0<e.length&&"/"!=e.substring(0,1)&&(e="/"+e),2<e.length&&"/"==e.substring(e.length-2)&&(e=e.substring(0,e.length-2)),e},smash.router.checkPath=function(e){return e=smash.router.cleanPath(e),smash.router.__baseDirectory&&-1!==e.indexOf(smash.router.__baseDirectory)&&(e=e.replace(smash.router.__baseDirectory,"")),e},smash.router.queryParam=function(e){var s=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);if(null!=s)return s[1]},smash.router.queryParams=function(e){var s=e?e.split("?")[1]:window.location.search.slice(1),t={};if(s)for(var a=(s=s.split("#")[0]).split("&"),n=0;n<a.length;n++){var r=a[n].split("="),o=void 0,i=r[0].replace(/\[\d*\]/,function(e){return o=e.slice(1,-1),""}),l=void 0===r[1]||r[1];i=i.toLowerCase(),l=l.toLowerCase(),t[i]?("string"==typeof t[i]&&(t[i]=[t[i]]),void 0===o?t[i].push(l):t[i][o]=l):t[i]=l}return t},smash.searchbox={i_:!1,minAutoCompleteLength:3,onfocus:void 0,onblur:void 0,onchange:void 0},smash.searchbox.init=function(){if(!smash.searchbox.i_){var e=document.querySelector(".smash-searchbox input");e&&(e.onfocus=function(){0==this.value.length&&smash.searchbox.results('<div class="smash-instruction">Start typing to find results</div>'),smash.class.add(document.querySelector(".smash-header"),"is-focussed"),smash.class.add(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onfocus&&smash.searchbox.onfocus()},e.onblur=function(){smash.class.remove(document.querySelector(".smash-header"),"is-focussed"),smash.class.remove(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onblur&&smash.searchbox.onblur()},e.onkeyup=function(e){switch(e.keyCode){case 27:return this.value="",void this.blur()}this.value.length<smash.searchbox.minAutoCompleteLength||smash.searchbox.onchange&&smash.searchbox.onchange(this.value)},smash.searchbox.i_=!0)}},smash.searchbox.empty=function(){return!(i=smash.get(document,".smash-searchbox input"))||0==i.value.length},smash.searchbox.appendTo=function(e){var s=document.createElement("div");s.innerHTML=e,document.querySelector(".smash-searchbox .smash-searchbox-results").appendChild(s)},smash.searchbox.results=function(e){document.querySelector(".smash-searchbox .smash-searchbox-results").innerHTML=e},smash.sidebar={i_:!1},smash.sidebar.init=function(){if(!smash.sidebar.i_){var e=document.querySelector(".smash-sidebar .lock");if(e){e.onclick=function(){smash.sidebar.toggleLock()};var s=document.querySelector(".smash-sidebar");smash.class.add(s,"is-unlocked"),smash.sidebar.i_=!0,smash.config.get("sidebar_lock")&&smash.sidebar.toggleLock()}}},smash.sidebar.toggleLock=function(){smash.sidebar.i_&&(smash.class.toggle(document.querySelector(".smash-sidebar .lock"),"unlock"),smash.class.toggle(document.querySelector(".smash-sidebar"),"is-unlocked"),smash.config.set("sidebar_lock",!smash.class.has(document.querySelector(".smash-sidebar"),"is-unlocked")))},smash.storage={},smash.storage.set=function(e,s){localStorage.setItem(e,JSON.stringify(s))},smash.storage.unset=function(e){localStorage.removeItem(e)},smash.storage.get=function(e){var s=localStorage.getItem(e);if(s)return JSON.parse(s)},smash.storage.clear=function(){localStorage.clear()},smash.workspace={baseTitle:void 0,onlasttabclosed:void 0,_ws_:void 0,_hdr_:void 0,_sb_:void 0,_tabs_:[]},smash.workspace.init=function(){smash.workspace._ws_=document.querySelector(".smash-workspace"),smash.workspace._ws_&&(smash.workspace._hdr_=document.querySelector(".smash-header"),smash.workspace._hdr_&&smash.class.add(smash.workspace._ws_,"has-header"),smash.workspace._sb_=document.querySelector(".smash-workspace .smash-sidebar"),smash.workspace._sb_&&smash.class.add(smash.workspace._ws_,"has-sidebar"))},smash.workspace.addTab=function(e,s,t,a){if(!smash.get(document,".smash-tab-pane")){var n=smash.get(document,".smash-panel");if(!n)return void console.log("To add a tab there needs to be a panel");n.innerHTML='<div class="smash-tab-pane"><div class="smash-tabs"></div><div class="smash-panes"></div></div>'}var r=smash.get(document,".smash-tab-pane .smash-tabs"),o=smash.get(document,".smash-tab-pane .smash-panes");if(document.title=smash.workspace.createTitle(s),l=smash.get(r,'.smash-tab[data-id="'+e+'"]'))return(i=smash.get(o,'.smash-pane[data-id="'+e+'"]')).innerHTML=t,l.dataset.url=a,l.onclick(),{tab:l,pane:i};smash.hide(o,".smash-pane"),(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active");var i,l=document.createElement("div");return l.className="smash-tab active",l.dataset.id=e,l.dataset.url=a,l.innerHTML=s+'<i class="material-icons close">close</i>',l.onclick=function(e){(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active"),smash.class.add(this,"active"),smash.hide(document,".smash-pane"),smash.show(document,'.smash-pane[data-id="'+this.dataset.id+'"]'),this.dataset.url&&"undefined"!=this.dataset.url&&smash.router.displayURL(this.dataset.url),document.title=smash.workspace.createTitle(this.innerHTML)},smash.on(l,".close","onclick",function(e){this.parentElement.onclose&&!this.parentElement.onclose()||(smash.class.has(this.parentElement,"active")&&(this.parentElement.previousSibling?this.parentElement.previousSibling.onclick():this.parentElement.nextSibling&&this.parentElement.nextSibling.onclick()),(i=smash.get(document,'.smash-pane[data-id="'+this.parentElement.dataset.id+'"]'))&&i.parentElement.removeChild(i),this.parentElement.parentElement.removeChild(this.parentElement),this.parentElement.onclosed&&this.parentElement.onclosed(),!smash.workspace.activeTab()&&smash.workspace.onlasttabclosed&&smash.workspace.onlasttabclosed(),e.stopPropagation())}),r.appendChild(l),(i=document.createElement("div")).className="smash-pane",i.dataset.id=e,i.innerHTML=t,o.appendChild(i),{tab:l,pane:i}},smash.workspace.activeTab=function(){var e=smash.get(document,".smash-tab.active");if(!e)return null;var s=smash.get(document,'.smash-pane[data-id="'+e.dataset.id+'"]');return s?{tab:e,pane:s}:null},smash.workspace.createTitle=function(e){var s=e.replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/gi,"");if(""==s){var t=document.createElement("div");t.innerHTML=e,(ts=smash.get(t,".title"))&&(s=ts.innerHTML),""==s&&(s="unknown")}return s+(smash.workspace.baseTitle?" | "+smash.workspace.baseTitle:"")};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNtYXNoLmpzIiwiYWpheC5qcyIsImNsYXNzLmpzIiwiY29uZmlnLmpzIiwiY29udGV4dG1lbnUuanMiLCJjb29raWUuanMiLCJkaWFsb2cuanMiLCJleGNlcHRpb24uanMiLCJpbnB1dC5qcyIsInJvdXRlci5qcyIsInNlYXJjaGJveC5qcyIsInNpZGViYXIuanMiLCJzdG9yYWdlLmpzIiwid29ya3NwYWNlLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwic21hc2giLCJpbml0IiwiTm9kZUxpc3QiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwiQXJyYXkiLCJjb25maWciLCJzaWRlYmFyIiwic2VhcmNoYm94Iiwid29ya3NwYWNlIiwiaW5wdXQiLCJnZXQiLCJwYXJlbnQiLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3IiLCJjb25zb2xlIiwibG9nIiwiZ2V0QWxsIiwicXVlcnlTZWxlY3RvckFsbCIsImhpZGUiLCJlbCIsImkiLCJsZW5ndGgiLCJzdHlsZSIsImRpc3BsYXkiLCJuZXh0VmlzaWJsZSIsIm5leHRTaWJsaW5nIiwiZmlyc3RWaXNpYmxlIiwicGFyZW50RWxlbWVudCIsImZpcnN0Q2hpbGQiLCJwcmV2aW91c1Zpc2libGUiLCJwcmV2aW91c1NpYmxpbmciLCJsYXN0VmlzaWJsZSIsImxhc3RDaGlsZCIsInNob3ciLCJyZW1vdmUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJvbiIsImV2ZW50IiwiY2FsbGJhY2siLCJlbGVtZW50cyIsImZ1enp5Q29tcGFyZSIsInNlYXJjaCIsImNvbXBhcmUiLCJ1bmRlZmluZWQiLCJyZWdleCIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsInNwbGl0Iiwiam9pbiIsIm1hdGNoIiwiZmluZE5leHRUYWJTdG9wIiwiZm9ybSIsInVuaXZlcnNlIiwibGlzdCIsImZpbHRlciIsImNhbGwiLCJpdGVtIiwidGFiSW5kZXgiLCJpbmRleCIsImluZGV4T2YiLCJpc0VtcHR5IiwidmFsdWUiLCJhamF4IiwiX2hlYWRlcnNfIiwiYWRkSGVhZGVyIiwibmFtZSIsInJlbW92ZUhlYWRlciIsIm9uZXJyb3IiLCJtZXNzYWdlIiwib251bmF1dGhvcml6ZWQiLCJfeGhyXyIsIlhNTEh0dHBSZXF1ZXN0IiwieGhyIiwidmVyc2lvbnMiLCJBY3RpdmVYT2JqZWN0Iiwic2VuZCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJyZXNwb25zZVR5cGUiLCJhc3luYyIsIngiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInF1ZXJ5Iiwia2V5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsInBvc3QiLCJkYXRhU3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsImNsYXNzIiwiYWRkIiwiY2xhc3NOYW1lIiwiaGFzIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwidG9nZ2xlQWxsIiwiX3ZhbHVlc18iLCJfc2lkZWJhcl9sb2NrXyIsInYiLCJzdG9yYWdlIiwib3B0aW9uIiwibyIsIkV4Y2VwdGlvbiIsInNldCIsImNvbnRleHRtZW51IiwibmV3IiwiaXRlbXMiLCJjdHgiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImxhYmVsIiwiaW5uZXJIVE1MIiwiYm9keSIsImFwcGVuZENoaWxkIiwib25tb3VzZWRvd24iLCJ0aGlzIiwiY2xvc2UiLCJ5IiwicGFnZVkiLCJvZmZzZXRIZWlnaHQiLCJpbm5lckhlaWdodCIsInRvcCIsImxlZnQiLCJwYWdlWCIsInByZXZlbnREZWZhdWx0Iiwib25jbGljayIsImNvb2tpZSIsImV4cGlyeURheXMiLCJkIiwiRGF0ZSIsInNldFRpbWUiLCJnZXRUaW1lIiwiZXhwaXJlcyIsInRvVVRDU3RyaW5nIiwiY2EiLCJkZWNvZGVVUklDb21wb25lbnQiLCJjIiwiY2hhckF0Iiwic3Vic3RyaW5nIiwiZGlhbG9nIiwiY29udGVudCIsImJhY2tkcm9wIiwiY2hlY2tCYWNrZHJvcCIsInRvU3RyaW5nIiwiaW5wdXRzIiwiZ2V0TmFtZSIsImdldEF0dHJpYnV0ZSIsInNldFZhbHVlIiwib25rZXl1cCIsImdldFZhbHVlIiwib25mb2N1cyIsImZvY3VzIiwicGxhY2Vob2xkZXIiLCJsIiwic2VsZWN0Iiwic2VsZWN0cyIsIm11bHRpcGxlIiwibXVsdGl2YWx1ZSIsIm9sZCIsInNlbGVjdGVkSW5kZXgiLCJsYWJlbHMiLCJ0ZXh0Q29udGVudCIsInRleHQiLCJvcHRpb25zIiwiYmx1ciIsInNlbGVjdGVkIiwib25jaGFuZ2UiLCJjaGVja0xhYmVsIiwicGFyc2UiLCJyZXNldCIsImdldFRleHQiLCJob3ZlciIsInR5cGUiLCJzZXRBdHRyaWJ1dGUiLCJ1bCIsIm9ubW91c2V1cCIsInN0b3BQcm9wYWdhdGlvbiIsImoiLCJ2YWwiLCJsaSIsImNoZWNrYm94IiwicmVtb3ZlQXR0cmlidXRlIiwidmFsdWVzIiwibmV4dCIsImNsaWNrIiwib25ibHVyIiwic21hc2hfc2VsZWN0Iiwia2V5Q29kZSIsInByZXZpb3VzIiwic2Nyb2xsVG9wIiwib2Zmc2V0VG9wIiwibGFzdCIsInNjcm9sbEhlaWdodCIsInEiLCJyZXN1bHRzIiwiY2hlY2tib3hJbml0IiwiY2hlY2tib3hlcyIsImNoZWNrZWQiLCJyb3V0ZXIiLCJfX3BhcnNlUm91dGVSZWdleCIsIl9fZHluYW1pY1BhcnRzIiwiX19iYXNlRGlyZWN0b3J5IiwiX19yb3V0ZXMiLCJzdGF0aWMiLCJkeW5hbWljIiwicGF0aCIsInJvdXRlIiwicGFyc2VSb3V0ZSIsImRlcHRoIiwibnVtVmFycyIsImRpc3BsYXlVUkwiLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJhZGRCYXNlRGlyZWN0b3J5IiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInJlZGlyZWN0IiwibG9jYXRpb24iLCJoYW5kbGVOb3RGb3VuZCIsInJ1biIsIm9ucG9wc3RhdGUiLCJleGVjdXRlIiwiZ2V0UGF0aCIsIm1hdGNoZXMiLCJ2YXJOdW0iLCJ2YXJzIiwiaHJlZiIsImhvc3QiLCJob3N0bmFtZSIsImNoZWNrUGF0aCIsInBhdGhuYW1lIiwiY2xlYW5QYXRoIiwiUmVnRXhwIiwic2V0QmFzZURpcmVjdG9yeSIsImRpcmVjdG9yeSIsInF1ZXJ5UGFyYW0iLCJwYXJhbSIsImV4ZWMiLCJxdWVyeVBhcmFtcyIsInF1ZXJ5U3RyaW5nIiwic2xpY2UiLCJvYmoiLCJhcnIiLCJhIiwicGFyYW1OdW0iLCJwYXJhbU5hbWUiLCJwYXJhbVZhbHVlIiwiaV8iLCJtaW5BdXRvQ29tcGxldGVMZW5ndGgiLCJzc2IiLCJlbXB0eSIsImFwcGVuZFRvIiwibm9kZSIsInNpYmwiLCJ0b2dnbGVMb2NrIiwic2liIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInVuc2V0IiwicmVtb3ZlSXRlbSIsImdldEl0ZW0iLCJjbGVhciIsImJhc2VUaXRsZSIsIm9ubGFzdHRhYmNsb3NlZCIsIl93c18iLCJfaGRyXyIsIl9zYl8iLCJfdGFic18iLCJhZGRUYWIiLCJ0aXRsZSIsInBhbmVsIiwidGFicyIsInBhbmVzQ29udGFpbmVyIiwiY3JlYXRlVGl0bGUiLCJ0YWIiLCJwYW5lIiwiZGF0YXNldCIsImFjdGl2ZSIsIm9uY2xvc2UiLCJvbmNsb3NlZCIsImFjdGl2ZVRhYiIsInQiLCJkaXYiLCJ0cyJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQUFDLGlCQUFBLE9BQUEsU0FBQUMsR0FDQUMsTUFBQUMsU0FDQSxHQUVBQyxTQUFBQyxVQUFBQyxRQUFBQyxNQUFBRixVQUFBQyxRQUVBLElBQUFKLE1BQUEsQ0FFQUMsS0FBQSxXQUNBRCxNQUFBTSxPQUFBTCxPQUNBRCxNQUFBTyxRQUFBTixPQUNBRCxNQUFBUSxVQUFBUCxPQUNBRCxNQUFBUyxVQUFBUixPQUNBRCxNQUFBVSxNQUFBVCxRQUdBVSxJQUFBLFNBQUFDLEVBQUFDLEdBQ0EsSUFDQSxPQUFBRCxFQUFBRSxjQUFBRCxHQUNBLE1BQUFkLEdBQ0FnQixRQUFBQyxJQUFBakIsS0FLQWtCLE9BQUEsU0FBQUwsRUFBQUMsR0FDQSxJQUNBLE9BQUFELEVBQUFN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Iiwic291cmNlc0NvbnRlbnQiOlsid2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKGUpe1xuICAgIHNtYXNoLmluaXQoKTtcbn0sIGZhbHNlKTtcblxuTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2ggPSBBcnJheS5wcm90b3R5cGUuZm9yRWFjaDtcblxudmFyIHNtYXNoID0ge307XG5cbnNtYXNoLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBzbWFzaC5jb25maWcuaW5pdCgpO1xuICAgIHNtYXNoLnNpZGViYXIuaW5pdCgpO1xuICAgIHNtYXNoLnNlYXJjaGJveC5pbml0KCk7XG4gICAgc21hc2gud29ya3NwYWNlLmluaXQoKTtcbiAgICBzbWFzaC5pbnB1dC5pbml0KCk7XG59O1xuXG5zbWFzaC5nZXQgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5nZXRBbGwgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5oaWRlID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHZhciBlbDtcbiAgICBpZiAoc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICBlbCA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBlbCA9IFtwYXJlbnRdO1xuICAgIH1cbiAgICBmb3IgKHZhciBpPTA7IGk8ZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG59O1xuXG5zbWFzaC5uZXh0VmlzaWJsZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgd2hpbGUgKGVsID0gZWwubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgaWYgKGVsLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5maXJzdFZpc2libGUgPSBmdW5jdGlvbihlbCkge1xuICAgIGVsID0gZWwucGFyZW50RWxlbWVudC5maXJzdENoaWxkO1xuICAgIGlmIChlbC5zdHlsZS5kaXNwbGF5ICE9ICdub25lJykge1xuICAgICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIHdoaWxlIChlbCA9IGVsLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIGlmIChlbC5zdHlsZS5kaXNwbGF5ID09ICdub25lJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuc21hc2gucHJldmlvdXNWaXNpYmxlID0gZnVuY3Rpb24oZWwpIHtcbiAgICB3aGlsZSAoZWwgPSBlbC5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgICAgaWYgKGVsLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5sYXN0VmlzaWJsZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50Lmxhc3RDaGlsZDtcbiAgICBpZiAoZWwuc3R5bGUuZGlzcGxheSAhPSAnbm9uZScpIHtcbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgICB3aGlsZSAoZWwgPSBlbC5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgICAgaWYgKGVsLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5zaG93ID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHZhciBlbDtcbiAgICBpZiAoc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICBlbCA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBlbCA9IFtwYXJlbnRdO1xuICAgIH1cbiAgICBmb3IgKHZhciBpPTA7IGk8ZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgIH1cbn07XG5cbnNtYXNoLnJlbW92ZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG59O1xuXG5zbWFzaC5vbiA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IsIGV2ZW50LCBjYWxsYmFjaykge1xuICAgIHZhciBlbGVtZW50cyA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8ZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxlbWVudHNbaV1bZXZlbnRdID0gY2FsbGJhY2s7XG4gICAgfVxufTtcblxuc21hc2guZnV6enlDb21wYXJlID0gZnVuY3Rpb24oc2VhcmNoLCBjb21wYXJlKSB7XG4gICAgaWYgKGNvbXBhcmUgPT0gdW5kZWZpbmVkIHx8IHNlYXJjaCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgcmVnZXggPSBcIi4qP1wiICsgc2VhcmNoLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvLS9nLCBcIlxcXFwtXCIpLnNwbGl0KFwiXCIpLmpvaW4oXCIuKj9cIikgKyBcIi4qP1wiO1xuICAgIHJldHVybiBjb21wYXJlLnRvTG93ZXJDYXNlKCkubWF0Y2gocmVnZXgpO1xufTtcblxuc21hc2guZmluZE5leHRUYWJTdG9wID0gZnVuY3Rpb24oZm9ybSwgZWwpIHtcbiAgICB2YXIgdW5pdmVyc2UgPSBzbWFzaC5nZXRBbGwoZm9ybSwgJy5zbWFzaC1pbnB1dCwgLnNtYXNoLWJ1dHRvbiwgLnNtYXNoLXNlbGVjdCwgLnNtYXNoLXNlbGVjdC1tdWx0aXBsZSwgLnNtYXNoLXRleHRhcmVhLCAuc21hc2gtY2hlY2tib3gnKTtcbiAgICB2YXIgbGlzdCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh1bml2ZXJzZSwgZnVuY3Rpb24oaXRlbSkge3JldHVybiBpdGVtLnRhYkluZGV4ID49IFwiMFwifSk7XG4gICAgdmFyIGluZGV4ID0gbGlzdC5pbmRleE9mKGVsKTtcbiAgICByZXR1cm4gbGlzdFtpbmRleCArIDFdIHx8IGxpc3RbMF07XG59O1xuXG5zbWFzaC5pc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgY2FzZSBudWxsOlxuICAgIGNhc2UgXCJcIjpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG4iLCJzbWFzaC5hamF4ID0ge1xuICAgIF9oZWFkZXJzXzogW11cbn07XG5cbnNtYXNoLmFqYXguYWRkSGVhZGVyID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBzbWFzaC5hamF4Ll9oZWFkZXJzX1tuYW1lXSA9IHZhbHVlO1xufTtcblxuc21hc2guYWpheC5yZW1vdmVIZWFkZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHNtYXNoLmFqYXguX2hlYWRlcnNfW25hbWVdO1xufTtcblxuc21hc2guYWpheC5vbmVycm9yID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xufTtcblxuc21hc2guYWpheC5vbnVuYXV0aG9yaXplZCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICBzbWFzaC5hamF4Lm9uZXJyb3IobWVzc2FnZSk7XG59O1xuXG5zbWFzaC5hamF4Ll94aHJfID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB9XG4gICAgdmFyIHZlcnNpb25zID0gW1xuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjYuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjUuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjQuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjMuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjIuMFwiLFxuICAgICAgICBcIk1pY3Jvc29mdC5YbWxIdHRwXCJcbiAgICBdO1xuICAgIHZhciB4aHI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJzaW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgeGhyID0gbmV3IEFjdGl2ZVhPYmplY3QodmVyc2lvbnNbaV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geGhyO1xufTtcblxuc21hc2guYWpheC5zZW5kID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2ssIG1ldGhvZCwgZGF0YSwgcmVzcG9uc2VUeXBlLCBvbmVycm9yLCBhc3luYykge1xuICAgIGlmIChhc3luYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFzeW5jID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9uZXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvbmVycm9yID0gc21hc2guYWpheC5vbmVycm9yO1xuICAgIH1cbiAgICB2YXIgeCA9IHNtYXNoLmFqYXguX3hocl8oKTtcbiAgICB4LnJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZTtcbiAgICB4Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoeC5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoeC5zdGF0dXMpIHtcbiAgICAgICAgICAgIGNhc2UgMjAwOlxuICAgICAgICAgICAgY2FzZSAyMDE6XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHgucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDAxOlxuICAgICAgICAgICAgICAgIHNtYXNoLmFqYXgub251bmF1dGhvcml6ZWQoeC5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIG9uZXJyb3IoeC5yZXNwb25zZSk7XG4gICAgICAgICAgICB9XG5cdFx0fVxuICAgIH07XG4gICAgeC5vcGVuKG1ldGhvZCwgdXJsLCBhc3luYyk7XG4gICAgaWYgKHJlc3BvbnNlVHlwZSA9PSAnanNvbicpIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIH0gZWxzZSBpZiAobWV0aG9kID09ICdQT1NUJykge1xuICAgICAgICB4LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKTtcbiAgICB9XG4gICAgZm9yICh2YXIgbmFtZSBpbiBzbWFzaC5hamF4Ll9oZWFkZXJzXykge1xuICAgICAgICB4LnNldFJlcXVlc3RIZWFkZXIobmFtZSwgc21hc2guYWpheC5faGVhZGVyc19bbmFtZV0pO1xuICAgIH1cbiAgICB4LnNlbmQoZGF0YSlcbn07XG5cbnNtYXNoLmFqYXguZ2V0ID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2ssIGRhdGEsIHJlc3BvbnNlVHlwZSwgb25lcnJvciwgYXN5bmMpIHtcbiAgICB2YXIgcXVlcnkgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICBxdWVyeS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba2V5XSkpO1xuICAgIH1cbiAgICBzbWFzaC5hamF4LnNlbmQodXJsICsgKHF1ZXJ5Lmxlbmd0aCA/ICc/JyArIHF1ZXJ5LmpvaW4oJyYnKSA6ICcnKSwgY2FsbGJhY2ssICdHRVQnLCBudWxsLCByZXNwb25zZVR5cGUsIG9uZXJyb3IsICBhc3luYylcbn07XG5cbnNtYXNoLmFqYXgucG9zdCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBkYXRhLCByZXNwb25zZVR5cGUsIG9uZXJyb3IsIGFzeW5jKSB7XG4gICAgdmFyIGRhdGFTdHI7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlVHlwZSAhPSAnanNvbicpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba2V5XSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YVN0ciA9IHF1ZXJ5LmpvaW4oJyYnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YVN0ciA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNtYXNoLmFqYXguc2VuZCh1cmwsIGNhbGxiYWNrLCAnUE9TVCcsIGRhdGFTdHIsIHJlc3BvbnNlVHlwZSwgb25lcnJvciwgYXN5bmMpXG59O1xuIiwic21hc2guY2xhc3MgPSB7fTtcblxuc21hc2guY2xhc3MuYWRkID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIGlmICghc21hc2guY2xhc3MuaGFzKGVsLCBjbGFzc05hbWUpKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdCA/IGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKSA6IGVsLmNsYXNzTmFtZSArPSAoJyAnICsgY2xhc3NOYW1lKTtcbiAgICB9XG59O1xuXG5zbWFzaC5jbGFzcy5yZW1vdmUgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhlbCwgY2xhc3NOYW1lKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QgPyBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSkgOiBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShjbGFzc05hbWUsICcnKTtcbiAgICB9XG59O1xuXG5zbWFzaC5jbGFzcy5oYXMgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuICgoXCIgXCIgKyBlbC5jbGFzc05hbWUgKyBcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZywgXCIgXCIpLmluZGV4T2YoXCIgXCIgKyBjbGFzc05hbWUgKyBcIiBcIikgPiAtMSk7XG59O1xuXG5zbWFzaC5jbGFzcy50b2dnbGUgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgc21hc2guY2xhc3MuaGFzKGVsLCBjbGFzc05hbWUpID8gc21hc2guY2xhc3MucmVtb3ZlKGVsLCBjbGFzc05hbWUpIDogc21hc2guY2xhc3MuYWRkKGVsLCBjbGFzc05hbWUpO1xufTtcblxuc21hc2guY2xhc3MudG9nZ2xlQWxsID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3RvciwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKGVsID0gc21hc2guZ2V0QWxsKHBhcmVudCwgc2VsZWN0b3IpKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBlbCkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MudG9nZ2xlKGVsW2tleV0sIGNsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuIiwic21hc2guY29uZmlnID0ge1xuICAgIF92YWx1ZXNfOiB7XG4gICAgICAgIF9zaWRlYmFyX2xvY2tfOiBmYWxzZVxuICAgIH1cbn1cblxuc21hc2guY29uZmlnLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHNtYXNoLnN0b3JhZ2UuZ2V0KCdjb25maWcnKTtcbiAgICBpZiAodikge1xuICAgICAgICBzbWFzaC5jb25maWcuX3ZhbHVlc18gPSB2O1xuICAgIH1cbn07XG5cbnNtYXNoLmNvbmZpZy5nZXQgPSBmdW5jdGlvbihvcHRpb24pIHtcbiAgICB2YXIgbyA9ICdfJyArIG9wdGlvbiArICdfJztcbiAgICBpZiAobyBpbiBzbWFzaC5jb25maWcuX3ZhbHVlc18pIHtcbiAgICAgICAgcmV0dXJuIHNtYXNoLmNvbmZpZy5fdmFsdWVzX1tvXTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IHNtYXNoLkV4Y2VwdGlvbignMDAxJywgJ0ludmFsaWQgY29uZmlnIG9wdGlvbiBcIicgKyBvcHRpb24gKyAnXCInKTtcbn07XG5cbnNtYXNoLmNvbmZpZy5zZXQgPSBmdW5jdGlvbihvcHRpb24sIHZhbHVlKSB7XG4gICAgdmFyIG8gPSAnXycgKyBvcHRpb24gKyAnXyc7XG4gICAgaWYgKCFvIGluIHNtYXNoLmNvbmZpZy5fdmFsdWVzXykge1xuICAgICAgICB0aHJvdyBuZXcgc21hc2guRXhjZXB0aW9uKCcwMDEnLCAnSW52YWxpZCBjb25maWcgb3B0aW9uIFwiJyArIG9wdGlvbiArICdcIicpO1xuICAgIH1cbiAgICBzbWFzaC5jb25maWcuX3ZhbHVlc19bb10gPSB2YWx1ZTtcbiAgICBzbWFzaC5zdG9yYWdlLnNldCgnY29uZmlnJywgc21hc2guY29uZmlnLl92YWx1ZXNfKTtcbn07XG4iLCJzbWFzaC5jb250ZXh0bWVudSA9IHt9O1xuXG5zbWFzaC5jb250ZXh0bWVudS5uZXcgPSBmdW5jdGlvbihlLCBpdGVtcykge1xuICAgIGlmIChjdHggPSBzbWFzaC5nZXQoZG9jdW1lbnQsIFwiI3NtYXNoLWNvbnRleHQtbWVudVwiKSkge1xuICAgICAgICBzbWFzaC5yZW1vdmUoY3R4KTtcbiAgICB9XG4gICAgdmFyIGN0eCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY3R4LmlkID0gIFwic21hc2gtY29udGV4dC1tZW51XCI7XG4gICAgdmFyIGxpc3QgPSBcIjx1bCBjbGFzcz0nY2xpY2thYmxlJz5cIjtcbiAgICBmb3IgKGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGl0ZW1zW2ldID09IFwic2VwZXJhdG9yXCIpIHtcbiAgICAgICAgICAgIGxpc3QgKz0gJzxsaSBjbGFzcz1cInNlcGVyYXRvclwiPjwvbGk+JztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGxpc3QgKz0gJzxsaSBjbGFzcz1cImN0eF9pdGVtXycgKyBpICsgJ1wiPicgKyBpdGVtc1tpXS5sYWJlbCArIFwiPC9saT5cIjtcbiAgICB9XG4gICAgbGlzdCArPSAnPC91bD4nO1xuICAgIGN0eC5pbm5lckhUTUwgPSBsaXN0O1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY3R4KTtcbiAgICB2YXIgaXRlbTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGl0ZW1zW2ldID09IFwic2VwZXJhdG9yXCIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGl0ZW0gPSBzbWFzaC5nZXQoY3R4LCBcImxpLmN0eF9pdGVtX1wiICsgaSk7XG4gICAgICAgIGl0ZW0uY2FsbGJhY2sgPSBpdGVtc1tpXS5jYWxsYmFjaztcbiAgICAgICAgaXRlbS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2soZSk7XG4gICAgICAgICAgICBzbWFzaC5jb250ZXh0bWVudS5jbG9zZShlKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdmFyIHkgPSBlLnBhZ2VZXG4gICAgaWYgKHkgKyBjdHgub2Zmc2V0SGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICAgIHkgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBjdHgub2Zmc2V0SGVpZ2h0IC0gMjA7XG4gICAgfVxuICAgIGN0eC5zdHlsZS50b3AgPSB5O1xuICAgIGN0eC5zdHlsZS5sZWZ0ID0gZS5wYWdlWDtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZG9jdW1lbnQub25jbGljayA9IHNtYXNoLmNvbnRleHRtZW51LmNsb3NlO1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbnNtYXNoLmNvbnRleHRtZW51LmNsb3NlID0gZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoY3R4ID0gc21hc2guZ2V0KGRvY3VtZW50LCBcIiNzbWFzaC1jb250ZXh0LW1lbnVcIikpIHtcbiAgICAgICAgc21hc2gucmVtb3ZlKGN0eCk7XG4gICAgfVxuICAgIGRvY3VtZW50Lm9uY2xpY2sgPSB1bmRlZmluZWQ7XG59O1xuIiwic21hc2guY29va2llID0ge307XG5cbnNtYXNoLmNvb2tpZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgZXhwaXJ5RGF5cykge1xuICAgIHZhciBkID0gbmV3IERhdGUoKTtcbiAgICBkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyAoZXhwaXJ5RGF5cyoyNCo2MCo2MCoxMDAwKSk7XG4gICAgdmFyIGV4cGlyZXMgPSBcImV4cGlyZXM9XCIrIGQudG9VVENTdHJpbmcoKTtcbiAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgXCI9XCIgKyB2YWx1ZSArIFwiO1wiICsgZXhwaXJlcyArIFwiO3BhdGg9L1wiO1xufTtcblxuc21hc2guY29va2llLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbmFtZSA9IG5hbWUgKyBcIj1cIjtcbiAgICB2YXIgZGVjb2RlZENvb2tpZSA9IGRlY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5jb29raWUpO1xuICAgIHZhciBjYSA9IGRlY29kZWRDb29raWUuc3BsaXQoJzsnKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDxjYS5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYyA9IGNhW2ldO1xuICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT0gJyAnKSB7XG4gICAgICAgICAgICBjID0gYy5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYy5zdWJzdHJpbmcobmFtZS5sZW5ndGgsIGMubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbn07XG4iLCJzbWFzaC5kaWFsb2cgPSB7fTtcblxuc21hc2guZGlhbG9nLm5ldyA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICB2YXIgYmFja2Ryb3AgPSBzbWFzaC5kaWFsb2cuY2hlY2tCYWNrZHJvcCgpO1xuXG4gICAgdmFyIGRpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpYWxvZy5jbGFzc05hbWUgPSAnc21hc2gtZGlhbG9nJztcbiAgICBkaWFsb2cuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICBiYWNrZHJvcC5hcHBlbmRDaGlsZChkaWFsb2cpO1xufTtcblxuc21hc2guZGlhbG9nLmNoZWNrQmFja2Ryb3AgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoYmFja2Ryb3AgPSBzbWFzaC5nZXQoZG9jdW1lbnQsIFwiLnNtYXNoLWRpYWxvZy1iYWNrZHJvcFwiKSkge1xuICAgICAgICBpZiAoZGlhbG9nID0gc21hc2guZ2V0KGRvY3VtZW50LCBcIi5zbWFzaC1kaWFsb2ctYmFja2Ryb3AgLnNtYXNoLWRpYWxvZ1wiKSkge1xuICAgICAgICAgICAgYmFja2Ryb3AucmVtb3ZlQ2hpbGQoZGlhbG9nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFja2Ryb3A7XG4gICAgfVxuICAgIHZhciBiYWNrZHJvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJhY2tkcm9wLmNsYXNzTmFtZSA9ICdzbWFzaC1kaWFsb2ctYmFja2Ryb3AnO1xuICAgIGJhY2tkcm9wLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwic21hc2gtZGlhbG9nLWJhY2tncm91bmRcIj48L2Rpdj4nO1xuICAgIHNtYXNoLmdldChiYWNrZHJvcCwgJy5zbWFzaC1kaWFsb2ctYmFja2dyb3VuZCcpLm9uY2xpY2sgPSBzbWFzaC5kaWFsb2cuY2xvc2U7XG4gICAgc21hc2guZ2V0KGRvY3VtZW50LCAnYm9keScpLmFwcGVuZENoaWxkKGJhY2tkcm9wKTtcbiAgICByZXR1cm4gYmFja2Ryb3A7XG59O1xuXG5zbWFzaC5kaWFsb2cuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoZGlhbG9nID0gc21hc2guZ2V0KGRvY3VtZW50LCBcIi5zbWFzaC1kaWFsb2ctYmFja2Ryb3BcIikpIHtcbiAgICAgICAgc21hc2guZ2V0KGRvY3VtZW50LCAnYm9keScpLnJlbW92ZUNoaWxkKGRpYWxvZyk7XG4gICAgfVxufTtcbiIsInNtYXNoLkV4Y2VwdGlvbiA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIHRoaXMudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICdTbWFzaEV4Y2VwdGlvbiAnICsgdGhpcy52YWx1ZSArICc6ICcgKyB0aGlzLm1lc3NhZ2U7XG4gICAgfTtcbn07XG4iLCJzbWFzaC5pbnB1dCA9IHt9O1xuXG5zbWFzaC5pbnB1dC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc21hc2gtaW5wdXQgaW5wdXQsIC5zbWFzaC10ZXh0YXJlYSB0ZXh0YXJlYVwiKTtcbiAgICB2YXIgaW5wdXQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaW5wdXQgPSBpbnB1dHNbaV07XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoaW5wdXQucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5nZXROYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikuZ2V0QXR0cmlidXRlKCduYW1lJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0Lm9ua2V5dXApIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQub25rZXl1cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0Lm9ua2V5dXApIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQub25rZXl1cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dC52YWx1ZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInRleHRhcmVhXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50Lm9uZm9jdXMgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSkge1xuICAgICAgICAgICAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIikpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKGlucHV0LnBhcmVudEVsZW1lbnQsICdmbG9hdGluZy1sYWJlbCcpO1xuXG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gaW5wdXQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGwsICdzaG93Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChpbnB1dC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKTtcbiAgICB9XG4gICAgdmFyIHNlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtYXNoLXNlbGVjdCBzZWxlY3QsIC5zbWFzaC1zZWxlY3QtbXVsdGlwbGUgc2VsZWN0XCIpO1xuICAgIHZhciBzZWxlY3Q7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNlbGVjdCA9IHNlbGVjdHNbaV07XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5tdWx0aXBsZSA9IHNtYXNoLmNsYXNzLmhhcyhzZWxlY3QucGFyZW50RWxlbWVudCwgJ3NtYXNoLXNlbGVjdC1tdWx0aXBsZScpO1xuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnaGFzLWZsb2F0aW5nLWxhYmVsJykpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShzZWxlY3QucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSBzZWxlY3QuZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuZ2V0TmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKS5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUodGhpcywgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgICAgICB2YXIgbXVsdGl2YWx1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLm11bHRpcGxlICYmICFzbWFzaC5pc0VtcHR5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG11bHRpdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb2xkID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLm11bHRpcGxlID8gbXVsdGl2YWx1ZSA6IHZhbHVlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBcIlwiICYmICgoIXRoaXMubXVsdGlwbGUgJiYgc2VsZWN0LnNlbGVjdGVkSW5kZXggPiAtMSkgfHwgdGhpcy5tdWx0aXBsZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRleHQgPSBzZWxlY3Qub3B0aW9uc1tzZWxlY3Quc2VsZWN0ZWRJbmRleF0udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQgJiYgdGV4dCAhPSBcIlwiICYmIHRleHQgIT0gJyZuYnNwOycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdGV4dDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gc2VsZWN0LmdldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbHMgPSBbXVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaS5zZWxlY3RlZFwiKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHMucHVzaChlbC50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGxhYmVscy5qb2luKFwiICsgXCIpO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWxlY3QuZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG11bHRpdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgaW5wdXQuYmx1cigpO1xuICAgICAgICAgICAgaWYgKG9sZCAhPSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQgPSBzbWFzaC5nZXQodGhpcy5wYXJlbnRFbGVtZW50LCAnLnNlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShzZWxlY3RlZCwgJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQgPSBzbWFzaC5nZXQodGhpcywgJ2xpW3ZhbHVlPVwiJyArIHZhbHVlICsgJ1wiXScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKHNlbGVjdGVkLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0Lm9uY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdC5vbmNoYW5nZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vbmNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uY2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jaGVja0xhYmVsKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQub25mb2N1cyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICAgICAgaW5wdXQuZm9jdXMoZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3QgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdC5zZWxlY3RlZEluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzbWFzaC5pc0VtcHR5KHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzbWFzaC5nZXQodGhpcywgJ2lucHV0JykudmFsdWUgPSB0aGlzLmdldFRleHQoKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tMYWJlbCgpO1xuICAgICAgICAgICAgc21hc2guZ2V0KHRoaXMsICdpbnB1dCcpLmJsdXIoKTtcbiAgICAgICAgICAgIGlmIChob3ZlciA9IHNtYXNoLmdldCh0aGlzLCAndWwgbGkuaG92ZXInKSkge1xuICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShob3ZlciwgJ2hvdmVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuY2hlY2tMYWJlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGwgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VmFsdWUoKSAmJiB0aGlzLmdldFZhbHVlKCkgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuZ2V0VGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0LnNlbGVjdGVkSW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3Qub3B0aW9uc1tzZWxlY3Quc2VsZWN0ZWRJbmRleF0uaW5uZXJIVE1MO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxhYmVscyA9IFtdXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaS5zZWxlY3RlZFwiKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgbGFiZWxzLnB1c2goZWwudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gbGFiZWxzLmpvaW4oXCIgKyBcIik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGlucHV0KTtcblxuICAgICAgICB2YXIgb3B0aW9ucyA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKFwib3B0aW9uXCIpO1xuICAgICAgICB2YXIgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICB2YXIgdmFsO1xuICAgICAgICB1bC5vbm1vdXNldXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9wdGlvbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zW2pdO1xuICAgICAgICAgICAgdmFsID0gb3B0aW9uLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICAgICAgICAgIGlmICghdmFsICYmIHZhbCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBvcHRpb24udmFsdWUpO1xuICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gb3B0aW9uLmlubmVySFRNTCA9PSBcIlwiID8gJyZuYnNwOycgOiBvcHRpb24uaW5uZXJIVE1MO1xuICAgICAgICAgICAgaWYgKHNlbGVjdC5wYXJlbnRFbGVtZW50Lm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gb3B0aW9uLmlubmVySFRNTCA9PSBcIlwiID8gJyZuYnNwOycgOiAnPGlucHV0IHR5cGU9XCJjaGVja2JveFwiPicgKyBvcHRpb24uaW5uZXJIVE1MO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsaS5pbm5lckhUTUwgPSBvcHRpb24uaW5uZXJIVE1MID09IFwiXCIgPyAnJm5ic3A7JyA6IG9wdGlvbi5pbm5lckhUTUw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgICAgICBsaS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrYm94ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc21hc2guaXNFbXB0eShjaGVja2JveC5nZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoY2hlY2tib3gucGFyZW50RWxlbWVudCwgXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5yZW1vdmVBdHRyaWJ1dGUoJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKGNoZWNrYm94LnBhcmVudEVsZW1lbnQsIFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tib3guc2V0QXR0cmlidXRlKCdjaGVja2VkJywgJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZCA9IHRoaXMucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNlbGVjdGVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2goZWwudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUodmFsdWVzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5zZXRWYWx1ZSh0aGlzLmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuZXh0ID0gc21hc2guZmluZE5leHRUYWJTdG9wKHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQsIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cub25tb3VzZXVwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNldXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHVsKTtcbiAgICAgICAgaW5wdXQub25mb2N1cyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXModGhpcy5wYXJlbnRFbGVtZW50LCAnaXMtZm9jdXNzZWQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5jaGVja0xhYmVsKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuY2xpY2soKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpbnB1dC5vbmJsdXIgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAod2luZG93Lm9ubW91c2V1cCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNldXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQodGhpcywgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBzbWFzaC5nZXQodGhpcywgJ2lucHV0Jyk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gc21hc2guZ2V0KHRoaXMsICdzZWxlY3QnKTtcbiAgICAgICAgICAgIHZhciBzbWFzaF9zZWxlY3QgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGlucHV0LnZhbHVlICYmIGlucHV0LnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBpbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIHNlbGVjdC5nZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtcbiAgICAgICAgICAgIGlucHV0LmJsdXIoKTtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cub25tb3VzZXVwID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpbnB1dC5vbmtleXVwID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCBcInJlYWRvbmx5XCIpO1xuICAgICAgICAgICAgICAgIHNtYXNoX3NlbGVjdC5yZXNldCgpO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtcyA9IHNtYXNoLmdldEFsbChzbWFzaF9zZWxlY3QsICd1bCBsaScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNbaV0uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc21hc2guc2hvdyhzbWFzaF9zZWxlY3QsICd1bCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoc21hc2hfc2VsZWN0LCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaW5wdXQub25rZXl1cCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgICAgICAgICBpZiAoaG92ZXIgPSBzbWFzaC5nZXQoc21hc2hfc2VsZWN0LCAndWwgbGkuaG92ZXInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXIub25tb3VzZWRvd24oZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgIGlmIChob3ZlciA9IHNtYXNoLmdldChzbWFzaF9zZWxlY3QsICd1bCBsaS5ob3ZlcicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoaG92ZXIsIFwiaG92ZXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXMgPSBzbWFzaC5wcmV2aW91c1Zpc2libGUoaG92ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKHByZXZpb3VzLCBcImhvdmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzLnBhcmVudEVsZW1lbnQuc2Nyb2xsVG9wID0gcHJldmlvdXMub2Zmc2V0VG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdCA9IHNtYXNoLmxhc3RWaXNpYmxlKGhvdmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobGFzdCwgXCJob3ZlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdC5wYXJlbnRFbGVtZW50LnNjcm9sbFRvcCA9IGxhc3QucGFyZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpID0gc21hc2guZ2V0KHNtYXNoX3NlbGVjdCwgJ3VsIGxpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdCA9IHNtYXNoLmxhc3RWaXNpYmxlKGxpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChsYXN0LCBcImhvdmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QucGFyZW50RWxlbWVudC5zY3JvbGxUb3AgPSBsYXN0LnBhcmVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICAgICAgICBpZiAoaG92ZXIgPSBzbWFzaC5nZXQoc21hc2hfc2VsZWN0LCAndWwgbGkuaG92ZXInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGhvdmVyLCBcImhvdmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgPSBzbWFzaC5uZXh0VmlzaWJsZShob3ZlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobmV4dCwgXCJob3ZlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0LnBhcmVudEVsZW1lbnQuc2Nyb2xsVG9wID0gbmV4dC5vZmZzZXRUb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ID0gc21hc2guZmlyc3RWaXNpYmxlKGhvdmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobmV4dCwgXCJob3ZlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5wYXJlbnRFbGVtZW50LnNjcm9sbFRvcCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpID0gc21hc2guZ2V0KHNtYXNoX3NlbGVjdCwgJ3VsIGxpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCA9IHNtYXNoLmZpcnN0VmlzaWJsZShsaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobmV4dCwgXCJob3ZlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0LnBhcmVudEVsZW1lbnQuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgLy8gZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB2YXIgcSA9IHRoaXMudmFsdWUucmVwbGFjZSgvW15hLXpBLVowLTlfIF0vZywgXCJcIik7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1zID0gc21hc2guZ2V0QWxsKHNtYXNoX3NlbGVjdCwgJ3VsIGxpJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc21hc2guc2hvdyhzbWFzaF9zZWxlY3QsICd1bCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocSA9PSBcIlwiIHx8IHNtYXNoLmZ1enp5Q29tcGFyZShxLCBpdGVtLmlubmVySFRNTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmhpZGUoc21hc2hfc2VsZWN0LCAndWwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzZWxlY3QucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgIHZhciB2YWwgPSBzZWxlY3QucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0LnBhcmVudEVsZW1lbnQubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICB2YWwgPSBKU09OLnBhcnNlKHZhbCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQgPSBzZWxlY3QucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwibGlbdmFsdWU9J1wiICsgdmFsW2tleV0gKyBcIiddXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc2VsZWN0ZWQsIFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0ID0gc2VsZWN0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImxpW3ZhbHVlPSdcIiArIHZhbFtrZXldICsgXCInXSBpbnB1dFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBcImNoZWNrZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5zZXRWYWx1ZSh2YWwpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmNoZWNrTGFiZWwoKTtcbiAgICAgICAgc21hc2guY2xhc3MuYWRkKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKTtcbiAgICB9XG4gICAgc21hc2guaW5wdXQuY2hlY2tib3hJbml0KCk7XG59O1xuXG5zbWFzaC5pbnB1dC5jaGVja2JveEluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2hlY2tib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc21hc2gtY2hlY2tib3ggaW5wdXRcIik7XG4gICAgdmFyIGNoZWNrYm94O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hlY2tib3hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjaGVja2JveCA9IGNoZWNrYm94ZXNbaV07XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoY2hlY2tib3gucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGMgPSAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBjLmNsYXNzTmFtZSA9ICdjaGVja3MnO1xuICAgICAgICBjLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+Y2hlY2tfYm94X291dGxpbmVfYmxhbms8L2k+PGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyBjaGVja2VkXCI+Y2hlY2tfYm94PC9pPic7XG4gICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoYyk7XG5cbiAgICAgICAgaWYgKGxhYmVsID0gY2hlY2tib3guZ2V0QXR0cmlidXRlKCdsYWJlbCcpKSB7XG4gICAgICAgICAgICB2YXIgbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIGwuY2xhc3NOYW1lID0gJ2xhYmVsJztcbiAgICAgICAgICAgIGwuaW5uZXJIVE1MID0gbGFiZWw7XG4gICAgICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGwpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChjaGVja2JveC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKTtcbiAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHNtYXNoLmNsYXNzLmhhcyhjaGVja2JveC5wYXJlbnRFbGVtZW50LCAnY2hlY2tlZCcpO1xuXG4gICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MudG9nZ2xlKHRoaXMsICdjaGVja2VkJyk7XG4gICAgICAgICAgICBzbWFzaC5nZXQodGhpcywgJ2lucHV0JykuY2hlY2tlZCA9IHNtYXNoLmNsYXNzLmhhcyh0aGlzLCAnY2hlY2tlZCcpO1xuICAgICAgICAgICAgaWYgKHRoaXMub25jaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uY2hhbmdlKHNtYXNoLmNsYXNzLmhhcyh0aGlzLCAnY2hlY2tlZCcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50LmdldE5hbWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKS5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50LmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gc21hc2guY2xhc3MuaGFzKHRoaXMsICdjaGVja2VkJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHRoaXMsICdjaGVja2VkJykgPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uY2xpY2soKTtcbiAgICAgICAgfTtcbiAgICB9XG59O1xuIiwic21hc2gucm91dGVyID0ge1xuICAgIF9fcGFyc2VSb3V0ZVJlZ2V4OiAveyguKj8pfS9pZyxcbiAgICBfX2R5bmFtaWNQYXJ0czogW10sXG4gICAgX19iYXNlRGlyZWN0b3J5OiBudWxsLFxuICAgIF9fcm91dGVzOiB7XG4gICAgICAgIHN0YXRpYzogW10sXG4gICAgICAgIGR5bmFtaWM6IFtdXG4gICAgfVxufTtcblxuLyoqXG4gKiBBZGQgYSByb3V0ZSBoYW5kbGVyIHRvIHRoZSByb3V0ZXJcbiAqIEBwYXJhbSBzdHJpbmcgICBwYXRoXG4gKiBAcGFyYW0gRnVuY3Rpb24gY2FsbGJhY2tcbiAqL1xuc21hc2gucm91dGVyLmFkZCA9IGZ1bmN0aW9uKHBhdGgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHJvdXRlID0gc21hc2gucm91dGVyLnBhcnNlUm91dGUocGF0aCk7XG4gICAgaWYgKHJvdXRlLnJlZ2V4KSB7XG4gICAgICAgIHJvdXRlLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIGlmICghc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdKSB7XG4gICAgICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXVtyb3V0ZS5udW1WYXJzXSkge1xuICAgICAgICAgICAgc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdLnB1c2gocm91dGUpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5zdGF0aWNbcGF0aF0gPSBjYWxsYmFjaztcbn07XG5cbi8qKlxuICogU2V0IGFuZCBleGVjdXRlIHRoZSBnaXZlbiBwYXRoXG4gKiBAcGFyYW0gc3RyaW5nIHBhdGhcbiAqL1xuc21hc2gucm91dGVyLnNldCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBzbWFzaC5yb3V0ZXIuZGlzcGxheVVSTChwYXRoKTtcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3BvcHN0YXRlJykpO1xufTtcblxuLyoqXG4gKiBEaXNwbGF5IHRoZSB1cmwgaW4gdGhlIGJyb3dzZXJcbiAqIEBwYXJhbSAgc3RyaW5nIHBhdGhcbiAqIEByZXR1cm4gdm9pZFxuICovXG5zbWFzaC5yb3V0ZXIuZGlzcGxheVVSTCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBwYXRoID0gc21hc2gucm91dGVyLmFkZEJhc2VEaXJlY3RvcnkocGF0aCk7XG4gICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKFwiXCIsIFwiXCIsIHBhdGgpO1xufTtcblxuLyoqXG4gKiBSZWRpcmVjdCB0byB0aGUgY29ycmVjdCB1cmxcbiAqIEBwYXJhbSAgc3RyaW5nIHBhdGhcbiAqIEByZXR1cm4gdm9pZFxuICovXG5zbWFzaC5yb3V0ZXIucmVkaXJlY3QgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgaWYgKCFwYXRoLnNlYXJjaCgvXmh0dHBbc10/OlxcL1xcLy8pKSB7XG4gICAgICAgIHBhdGggPSBzbWFzaC5yb3V0ZXIuYWRkQmFzZURpcmVjdG9yeShwYXRoKTtcbiAgICB9XG4gICAgd2luZG93LmxvY2F0aW9uID0gcGF0aDtcbn07XG5cbi8qKlxuICogRXhlY3V0ZSB3aGVuIGEgcGF0aCBpcyBub3QgZm91bmQuXG4gKiBAcGFyYW0gIFJvdXRlIHJvdXRlXG4gKiBAcmV0dXJuIHZvaWRcbiAqL1xuc21hc2gucm91dGVyLmhhbmRsZU5vdEZvdW5kID0gZnVuY3Rpb24ocm91dGUpIHtcbiAgICBjb25zb2xlLmxvZyhcInJvdXRlOiBcIiArIEpTT04uc3RyaW5naWZ5KHJvdXRlKSArIFwiIGRvZXMgbm90IGV4aXN0XCIpO1xufTtcblxuLyoqXG4gKiBSdW4gdGhlIHJvdXRlciBhbmQgY2hlY2sgdGhlIGdpdmVuIHBhdGhcbiAqIEByZXR1cm4gdm9pZFxuICovXG5zbWFzaC5yb3V0ZXIucnVuID0gZnVuY3Rpb24oKSB7XG4gICAgd2luZG93Lm9ucG9wc3RhdGUgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBzbWFzaC5yb3V0ZXIuZXhlY3V0ZSgpO1xuICAgIH07XG4gICAgc21hc2gucm91dGVyLmV4ZWN1dGUoKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlIHRoZSByb3V0ZXIgYW5kIGNoZWNrIGdpdmVuIHBhdGhcbiAqIEByZXR1cm4gdm9pZFxuICovXG5zbWFzaC5yb3V0ZXIuZXhlY3V0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwYXRoID0gdGhpcy5nZXRQYXRoKCk7XG4gICAgaWYgKHRoaXMuX19yb3V0ZXMuc3RhdGljW3BhdGgucGF0aF0pIHtcbiAgICAgICAgdGhpcy5fX3JvdXRlcy5zdGF0aWNbcGF0aC5wYXRoXSgpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBkZXB0aCA9IHBhdGgucGF0aC5zcGxpdChcIi9cIikubGVuZ3RoLTE7XG4gICAgaWYgKHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF0pIHtcbiAgICAgICAgdmFyIHJvdXRlO1xuICAgICAgICB2YXIgbWF0Y2hlcztcbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgdmFyTnVtIGluIHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF0pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gdGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXVt2YXJOdW1dKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdXRlID0gdGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXVt2YXJOdW1dW2l0ZW1dO1xuICAgICAgICAgICAgICAgIG1hdGNoZXMgPSBwYXRoLnBhdGgubWF0Y2gocm91dGUucmVnZXgpO1xuICAgICAgICAgICAgICAgIGlmICghbWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHJvdXRlLm51bVZhcnM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhW3JvdXRlLnZhcnNbaV1dID0gbWF0Y2hlc1tpKzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByb3V0ZS5jYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc21hc2gucm91dGVyLmhhbmRsZU5vdEZvdW5kKHBhdGgpO1xufTtcblxuLyoqXG4gKiBHZXQgcGF0aCB3aXRob3V0IGJhc2UgZGlyZWN0b3J5IGlmIGF2YWlsYWJsZVxuICogQHJldHVybiBQYXRoXG4gKi9cbnNtYXNoLnJvdXRlci5nZXRQYXRoID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBsLmhyZWYgPSB3aW5kb3cubG9jYXRpb247XG4gICAgcmV0dXJuIHtob3N0OiBsLmhvc3RuYW1lLCBwYXRoOiBzbWFzaC5yb3V0ZXIuY2hlY2tQYXRoKGwucGF0aG5hbWUpfTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIHJvdXRlIGdpdmVuIGJ5IGFkZFxuICogQHBhcmFtICBzdHJpbmcgcGF0aFxuICogQHJldHVybiBSb3V0ZVxuICovXG5zbWFzaC5yb3V0ZXIucGFyc2VSb3V0ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBwYXRoID0gc21hc2gucm91dGVyLmNsZWFuUGF0aChwYXRoKTtcbiAgICB2YXIgcm91dGUgPSB7XG4gICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgIGRlcHRoOiAocGF0aC5zcGxpdChcIi9cIikubGVuZ3RoIC0gMSksXG4gICAgICAgIHZhcnM6IFtdLFxuICAgICAgICBudW1WYXJzOiAwXG4gICAgfTtcbiAgICBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMgPSBwYXRoLm1hdGNoKHNtYXNoLnJvdXRlci5fX3BhcnNlUm91dGVSZWdleCk7XG4gICAgaWYgKHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cyAhPSB1bmRlZmluZWQgJiYgc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzICE9IG51bGwpIHtcbiAgICAgICAgdmFyIHJlZ2V4ID0gXCJeXCIgKyBwYXRoLnJlcGxhY2UoL1xcLy9pZywgXCJcXFxcL1wiKSArIFwiJFwiO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByb3V0ZS5udW1WYXJzKys7XG4gICAgICAgICAgICByb3V0ZS52YXJzLnB1c2goc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzW2ldLnN1YnN0cmluZygxLCBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0ubGVuZ3RoLTEpKTtcbiAgICAgICAgICAgIHJlZ2V4ID0gcmVnZXgucmVwbGFjZShzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0sIFwiKC4qPylcIik7XG4gICAgICAgIH1cbiAgICAgICAgcm91dGUucmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4LCAnaScpO1xuICAgIH1cbiAgICByZXR1cm4gcm91dGU7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgYmFzZSBkaXJlY3RvcnkgdG8gYmUgdXNlZCBieSBhbGwgcm91dGVzXG4gKiBAcGFyYW0gc3RyaW5nIGRpcmVjdG9yeVxuICovXG5zbWFzaC5yb3V0ZXIuc2V0QmFzZURpcmVjdG9yeSA9IGZ1bmN0aW9uKGRpcmVjdG9yeSkge1xuICAgIGlmICghZGlyZWN0b3J5KSB7XG4gICAgICAgIHNtYXNoLnJvdXRlci5fX2Jhc2VEaXJlY3RvcnkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc21hc2gucm91dGVyLl9fYmFzZURpcmVjdG9yeSA9IHNtYXNoLnJvdXRlci5jbGVhblBhdGgoZGlyZWN0b3J5KTtcbn07XG5cbi8qKlxuICogQWRkIHRoZSBiYXNlIGRpcmVjdG9yeSBpZiBpdCBpcyBhdmFpbGFibGVcbiAqIEBwYXJhbSBzdHJpbmcgcGF0aFxuICogQHJldHVybiBzdHJpbmdcbiAqL1xuc21hc2gucm91dGVyLmFkZEJhc2VEaXJlY3RvcnkgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgaWYgKCFzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5KSB7XG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cbiAgICBpZiAocGF0aC5pbmRleE9mKHNtYXNoLnJvdXRlci5fX2Jhc2VEaXJlY3RvcnkpID09PSAtMSkge1xuICAgICAgICBwYXRoID0gc21hc2gucm91dGVyLl9fYmFzZURpcmVjdG9yeSArIHBhdGg7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xufTtcblxuLyoqXG4gKiBDbGVhbiB0aGUgZ2l2ZW4gcGF0aCB0byB0aGUgcHJvcGVyIHBhdGggdG8gYmUgdXNlZCBieSB0aGUgcm91dGVyXG4gKiBAcGFyYW0gIHN0cmluZyBwYXRoXG4gKiBAcmV0dXJuIHN0cmluZ1xuICovXG5zbWFzaC5yb3V0ZXIuY2xlYW5QYXRoID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIGlmIChwYXRoLmxlbmd0aCA+IDAgJiYgcGF0aC5zdWJzdHJpbmcoMCwgMSkgIT0gXCIvXCIpIHtcbiAgICAgICAgcGF0aCA9IFwiL1wiICsgcGF0aDtcbiAgICB9XG4gICAgaWYgKHBhdGgubGVuZ3RoID4gMiAmJiBwYXRoLnN1YnN0cmluZyhwYXRoLmxlbmd0aC0yKSA9PSBcIi9cIikge1xuICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sZW5ndGgtMik7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xufTtcblxuLyoqXG4gKiBDaGVjayB0aGUgcGF0aCBpZiB0aGVyZSBpcyBhIGJhc2UgZGlyZWN0b3J5IGF2YWlsYWJsZVxuICogQHBhcmFtICBzdHJpbmcgcGF0aCBUaGUgcGF0aCB0byBjaGVja1xuICogQHJldHVybiBzdHJpbmcgICAgICBUaGUgcGF0aCB3aXRob3V0IGEgYmFzZSBkaXJlY3RvcnkgZm9yIHVzZSBvZiBjaGVja2luZyByb3V0ZXNcbiAqL1xuc21hc2gucm91dGVyLmNoZWNrUGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBwYXRoID0gc21hc2gucm91dGVyLmNsZWFuUGF0aChwYXRoKTtcbiAgICBpZiAoc21hc2gucm91dGVyLl9fYmFzZURpcmVjdG9yeSAmJiBwYXRoLmluZGV4T2Yoc21hc2gucm91dGVyLl9fYmFzZURpcmVjdG9yeSkgIT09IC0xKSB7XG4gICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2Uoc21hc2gucm91dGVyLl9fYmFzZURpcmVjdG9yeSwgJycpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aDtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBxdWVyeSBwYXJhbSBpbiB0aGUgdXJsXG4gKiBAcGFyYW0gIHN0cmluZyBwYXJhbSBUaGUgcGFyYW0geW91IHdhbnQgdG8gaGF2ZVxuICogQHJldHVybiBzdHJpbmcgICAgICAgVGhlIHZhbHVlIG9mIHRoZSBwYXJhbSBvciB1bmRlZmluZWQgaWYgaXQgaXMgbm90IGF2YWlsYWJsZVxuICovXG5zbWFzaC5yb3V0ZXIucXVlcnlQYXJhbSA9IGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgdmFyIHJlZ2V4UyA9IFwiW1xcXFw/Jl1cIitwYXJhbStcIj0oW14mI10qKVwiLFxuICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cCggcmVnZXhTICksXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWMoIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKTtcbiAgICBpZiggcmVzdWx0cyA9PSBudWxsICl7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzWzFdOy8vZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMV0ucmVwbGFjZSgvXFwrL2csIFwiIFwiKSk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgcXVlcnkgcGFyYW0gaW4gdGhlIHVybFxuICogQHBhcmFtICBzdHJpbmcgcGFyYW0gVGhlIHBhcmFtIHlvdSB3YW50IHRvIGhhdmVcbiAqIEByZXR1cm4gc3RyaW5nICAgICAgIFRoZSB2YWx1ZSBvZiB0aGUgcGFyYW0gb3IgdW5kZWZpbmVkIGlmIGl0IGlzIG5vdCBhdmFpbGFibGVcbiAqL1xuc21hc2gucm91dGVyLnF1ZXJ5UGFyYW1zID0gZnVuY3Rpb24odXJsKSB7XG5cbiAgICAvLyBnZXQgcXVlcnkgc3RyaW5nIGZyb20gdXJsIChvcHRpb25hbCkgb3Igd2luZG93XG4gICAgdmFyIHF1ZXJ5U3RyaW5nID0gdXJsID8gdXJsLnNwbGl0KCc/JylbMV0gOiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpO1xuXG4gICAgLy8gd2UnbGwgc3RvcmUgdGhlIHBhcmFtZXRlcnMgaGVyZVxuICAgIHZhciBvYmogPSB7fTtcblxuICAgIC8vIGlmIHF1ZXJ5IHN0cmluZyBleGlzdHNcbiAgICBpZiAocXVlcnlTdHJpbmcpIHtcblxuICAgICAgICAvLyBzdHVmZiBhZnRlciAjIGlzIG5vdCBwYXJ0IG9mIHF1ZXJ5IHN0cmluZywgc28gZ2V0IHJpZCBvZiBpdFxuICAgICAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnNwbGl0KCcjJylbMF07XG5cbiAgICAgICAgLy8gc3BsaXQgb3VyIHF1ZXJ5IHN0cmluZyBpbnRvIGl0cyBjb21wb25lbnQgcGFydHNcbiAgICAgICAgdmFyIGFyciA9IHF1ZXJ5U3RyaW5nLnNwbGl0KCcmJyk7XG5cbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gc2VwYXJhdGUgdGhlIGtleXMgYW5kIHRoZSB2YWx1ZXNcbiAgICAgICAgICAgIHZhciBhID0gYXJyW2ldLnNwbGl0KCc9Jyk7XG5cbiAgICAgICAgICAgIC8vIGluIGNhc2UgcGFyYW1zIGxvb2sgbGlrZTogbGlzdFtdPXRoaW5nMSZsaXN0W109dGhpbmcyXG4gICAgICAgICAgICB2YXIgcGFyYW1OdW0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB2YXIgcGFyYW1OYW1lID0gYVswXS5yZXBsYWNlKC9cXFtcXGQqXFxdLywgZnVuY3Rpb24odikge1xuICAgICAgICAgICAgICAgIHBhcmFtTnVtID0gdi5zbGljZSgxLC0xKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gc2V0IHBhcmFtZXRlciB2YWx1ZSAodXNlICd0cnVlJyBpZiBlbXB0eSlcbiAgICAgICAgICAgIHZhciBwYXJhbVZhbHVlID0gdHlwZW9mKGFbMV0pPT09J3VuZGVmaW5lZCcgPyB0cnVlIDogYVsxXTtcblxuICAgICAgICAgICAgLy8gKG9wdGlvbmFsKSBrZWVwIGNhc2UgY29uc2lzdGVudFxuICAgICAgICAgICAgcGFyYW1OYW1lID0gcGFyYW1OYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBwYXJhbVZhbHVlID0gcGFyYW1WYWx1ZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICAvLyBpZiBwYXJhbWV0ZXIgbmFtZSBhbHJlYWR5IGV4aXN0c1xuICAgICAgICAgICAgaWYgKG9ialtwYXJhbU5hbWVdKSB7XG4gICAgICAgICAgICAgICAgLy8gY29udmVydCB2YWx1ZSB0byBhcnJheSAoaWYgc3RpbGwgc3RyaW5nKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW3BhcmFtTmFtZV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIG9ialtwYXJhbU5hbWVdID0gW29ialtwYXJhbU5hbWVdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaWYgbm8gYXJyYXkgaW5kZXggbnVtYmVyIHNwZWNpZmllZC4uLlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1OdW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHB1dCB0aGUgdmFsdWUgb24gdGhlIGVuZCBvZiB0aGUgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgb2JqW3BhcmFtTmFtZV0ucHVzaChwYXJhbVZhbHVlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiBhcnJheSBpbmRleCBudW1iZXIgc3BlY2lmaWVkLi4uXG4gICAgICAgICAgICAgICAgICAgIC8vIHB1dCB0aGUgdmFsdWUgYXQgdGhhdCBpbmRleCBudW1iZXJcbiAgICAgICAgICAgICAgICAgICAgb2JqW3BhcmFtTmFtZV1bcGFyYW1OdW1dID0gcGFyYW1WYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiBwYXJhbSBuYW1lIGRvZXNuJ3QgZXhpc3QgeWV0LCBzZXQgaXRcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2JqW3BhcmFtTmFtZV0gPSBwYXJhbVZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59O1xuIiwic21hc2guc2VhcmNoYm94ID0ge1xuICAgIGlfOiBmYWxzZSxcbiAgICBtaW5BdXRvQ29tcGxldGVMZW5ndGg6IDMsXG4gICAgb25mb2N1czogdW5kZWZpbmVkLFxuICAgIG9uYmx1cjogdW5kZWZpbmVkLFxuICAgIG9uY2hhbmdlOiB1bmRlZmluZWQsXG59O1xuXG5zbWFzaC5zZWFyY2hib3guaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChzbWFzaC5zZWFyY2hib3guaV8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc3NiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggaW5wdXRcIik7XG4gICAgaWYgKCFzc2IpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzc2Iub25mb2N1cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94LnJlc3VsdHMoJzxkaXYgY2xhc3M9XCJzbWFzaC1pbnN0cnVjdGlvblwiPlN0YXJ0IHR5cGluZyB0byBmaW5kIHJlc3VsdHM8L2Rpdj4nKTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1oZWFkZXJcIiksICdpcy1mb2N1c3NlZCcpO1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpLCAnc2hvdycpO1xuICAgICAgICBpZiAoc21hc2guc2VhcmNoYm94Lm9uZm9jdXMpIHtcbiAgICAgICAgICAgIHNtYXNoLnNlYXJjaGJveC5vbmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNzYi5vbmJsdXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtaGVhZGVyXCIpLCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2VhcmNoYm94IC5zbWFzaC1zZWFyY2hib3gtcmVzdWx0c1wiKSwgJ3Nob3cnKTtcbiAgICAgICAgaWYgKHNtYXNoLnNlYXJjaGJveC5vbmJsdXIpIHtcbiAgICAgICAgICAgIHNtYXNoLnNlYXJjaGJveC5vbmJsdXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc3NiLm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gJyc7XG4gICAgICAgICAgICB0aGlzLmJsdXIoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPCBzbWFzaC5zZWFyY2hib3gubWluQXV0b0NvbXBsZXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNtYXNoLnNlYXJjaGJveC5vbmNoYW5nZSkge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uY2hhbmdlKHRoaXMudmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzbWFzaC5zZWFyY2hib3guaV8gPSB0cnVlO1xufTtcblxuc21hc2guc2VhcmNoYm94LmVtcHR5ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGkgPSBzbWFzaC5nZXQoZG9jdW1lbnQsIFwiLnNtYXNoLXNlYXJjaGJveCBpbnB1dFwiKSkge1xuICAgICAgICByZXR1cm4gKGkudmFsdWUubGVuZ3RoID09IDApO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuc21hc2guc2VhcmNoYm94LmFwcGVuZFRvID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBub2RlLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgdmFyIHJlc3VsdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCAuc21hc2gtc2VhcmNoYm94LXJlc3VsdHNcIik7XG4gICAgcmVzdWx0cy5hcHBlbmRDaGlsZChub2RlKTtcbn07XG5cbnNtYXNoLnNlYXJjaGJveC5yZXN1bHRzID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHZhciByZXN1bHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpO1xuICAgIHJlc3VsdHMuaW5uZXJIVE1MID0gY29udGVudDtcbn07XG4iLCJzbWFzaC5zaWRlYmFyID0ge1xuICAgIGlfOiBmYWxzZVxufTtcblxuc21hc2guc2lkZWJhci5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNtYXNoLnNpZGViYXIuaV8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc2libCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhciAubG9ja1wiKTtcbiAgICBpZiAoIXNpYmwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzaWJsLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc21hc2guc2lkZWJhci50b2dnbGVMb2NrKCk7XG4gICAgfTtcblxuICAgIHZhciBzaWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXJcIik7XG4gICAgc21hc2guY2xhc3MuYWRkKHNpYiwgJ2lzLXVubG9ja2VkJyk7XG4gICAgc21hc2guc2lkZWJhci5pXyA9IHRydWU7XG4gICAgaWYgKHNtYXNoLmNvbmZpZy5nZXQoJ3NpZGViYXJfbG9jaycpKSB7XG4gICAgICAgIHNtYXNoLnNpZGViYXIudG9nZ2xlTG9jaygpO1xuICAgIH1cbn07XG5cbnNtYXNoLnNpZGViYXIudG9nZ2xlTG9jayA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghc21hc2guc2lkZWJhci5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNtYXNoLmNsYXNzLnRvZ2dsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXIgLmxvY2tcIiksICd1bmxvY2snKTtcbiAgICBzbWFzaC5jbGFzcy50b2dnbGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyXCIpLCAnaXMtdW5sb2NrZWQnKTtcbiAgICBzbWFzaC5jb25maWcuc2V0KCdzaWRlYmFyX2xvY2snLCAhc21hc2guY2xhc3MuaGFzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhclwiKSwgJ2lzLXVubG9ja2VkJykpO1xufTtcbiIsInNtYXNoLnN0b3JhZ2UgPSB7fTtcblxuc21hc2guc3RvcmFnZS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xufTtcblxuc21hc2guc3RvcmFnZS51bnNldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG59O1xuXG5zbWFzaC5zdG9yYWdlLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHZhciBpID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICBpZiAoIWkpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoaSk7XG59O1xuXG5zbWFzaC5zdG9yYWdlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG59O1xuIiwic21hc2gud29ya3NwYWNlID0ge1xuICAgIGJhc2VUaXRsZTogdW5kZWZpbmVkLFxuICAgIG9ubGFzdHRhYmNsb3NlZDogdW5kZWZpbmVkLFxuICAgIF93c186IHVuZGVmaW5lZCxcbiAgICBfaGRyXzogdW5kZWZpbmVkLFxuICAgIF9zYl86IHVuZGVmaW5lZCxcbiAgICBfdGFic186IFtdXG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHNtYXNoLndvcmtzcGFjZS5fd3NfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC13b3Jrc3BhY2VcIik7XG4gICAgaWYgKCFzbWFzaC53b3Jrc3BhY2UuX3dzXykge1xuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgc21hc2gud29ya3NwYWNlLl9oZHJfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1oZWFkZXJcIik7XG4gICAgaWYgKHNtYXNoLndvcmtzcGFjZS5faGRyXykge1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc21hc2gud29ya3NwYWNlLl93c18sICdoYXMtaGVhZGVyJyk7XG4gICAgfVxuICAgIHNtYXNoLndvcmtzcGFjZS5fc2JfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC13b3Jrc3BhY2UgLnNtYXNoLXNpZGViYXJcIik7XG4gICAgaWYgKHNtYXNoLndvcmtzcGFjZS5fc2JfKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChzbWFzaC53b3Jrc3BhY2UuX3dzXywgJ2hhcy1zaWRlYmFyJyk7XG4gICAgfVxufTtcblxuc21hc2gud29ya3NwYWNlLmFkZFRhYiA9IGZ1bmN0aW9uKGlkLCB0aXRsZSwgY29udGVudCwgdXJsKSB7XG4gICAgaWYgKCFzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLXBhbmUnKSkge1xuICAgICAgICB2YXIgcGFuZWwgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtcGFuZWwnKTtcbiAgICAgICAgaWYgKCFwYW5lbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1RvIGFkZCBhIHRhYiB0aGVyZSBuZWVkcyB0byBiZSBhIHBhbmVsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcGFuZWwuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJzbWFzaC10YWItcGFuZVwiPjxkaXYgY2xhc3M9XCJzbWFzaC10YWJzXCI+PC9kaXY+PGRpdiBjbGFzcz1cInNtYXNoLXBhbmVzXCI+PC9kaXY+PC9kaXY+JztcbiAgICB9XG4gICAgdmFyIHRhYnMgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLXBhbmUgLnNtYXNoLXRhYnMnKTtcbiAgICB2YXIgcGFuZXNDb250YWluZXIgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLXBhbmUgLnNtYXNoLXBhbmVzJyk7XG5cbiAgICBkb2N1bWVudC50aXRsZSA9IHNtYXNoLndvcmtzcGFjZS5jcmVhdGVUaXRsZSh0aXRsZSk7XG5cbiAgICBpZiAodGFiID0gc21hc2guZ2V0KHRhYnMsICcuc21hc2gtdGFiW2RhdGEtaWQ9XCInICsgaWQgKyAnXCJdJykpIHtcbiAgICAgICAgdmFyIHBhbmUgPSBzbWFzaC5nZXQocGFuZXNDb250YWluZXIsICcuc21hc2gtcGFuZVtkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpO1xuICAgICAgICBwYW5lLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgICAgIHRhYi5kYXRhc2V0LnVybCA9IHVybDtcbiAgICAgICAgdGFiLm9uY2xpY2soKTtcbiAgICAgICAgcmV0dXJuIHt0YWI6IHRhYiwgcGFuZTogcGFuZX07XG4gICAgfVxuXG4gICAgc21hc2guaGlkZShwYW5lc0NvbnRhaW5lciwgXCIuc21hc2gtcGFuZVwiKTtcbiAgICBpZiAoYWN0aXZlID0gc21hc2guZ2V0KHRhYnMsICcuc21hc2gtdGFiLmFjdGl2ZScpKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShhY3RpdmUsICdhY3RpdmUnKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgdGFiXG4gICAgdmFyIHRhYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFiLmNsYXNzTmFtZSA9ICdzbWFzaC10YWIgYWN0aXZlJztcbiAgICB0YWIuZGF0YXNldC5pZCA9IGlkO1xuICAgIHRhYi5kYXRhc2V0LnVybCA9IHVybDtcbiAgICB0YWIuaW5uZXJIVE1MID0gdGl0bGUgKyAnPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyBjbG9zZVwiPmNsb3NlPC9pPic7XG4gICAgdGFiLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChhY3RpdmUgPSBzbWFzaC5nZXQodGFicywgJy5zbWFzaC10YWIuYWN0aXZlJykpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShhY3RpdmUsICdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQodGhpcywgJ2FjdGl2ZScpO1xuICAgICAgICBzbWFzaC5oaWRlKGRvY3VtZW50LCAnLnNtYXNoLXBhbmUnKTtcbiAgICAgICAgc21hc2guc2hvdyhkb2N1bWVudCwgJy5zbWFzaC1wYW5lW2RhdGEtaWQ9XCInICsgdGhpcy5kYXRhc2V0LmlkICsgJ1wiXScpO1xuICAgICAgICBpZiAodGhpcy5kYXRhc2V0LnVybCAmJiB0aGlzLmRhdGFzZXQudXJsICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHNtYXNoLnJvdXRlci5kaXNwbGF5VVJMKHRoaXMuZGF0YXNldC51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gc21hc2gud29ya3NwYWNlLmNyZWF0ZVRpdGxlKHRoaXMuaW5uZXJIVE1MKTtcbiAgICB9O1xuICAgIHNtYXNoLm9uKHRhYiwgJy5jbG9zZScsICdvbmNsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50Lm9uY2xvc2UgJiYgIXRoaXMucGFyZW50RWxlbWVudC5vbmNsb3NlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHRoaXMucGFyZW50RWxlbWVudCwgJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50LnByZXZpb3VzU2libGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wcmV2aW91c1NpYmxpbmcub25jbGljaygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBhcmVudEVsZW1lbnQubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQubmV4dFNpYmxpbmcub25jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYW5lID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyB0aGlzLnBhcmVudEVsZW1lbnQuZGF0YXNldC5pZCArICdcIl0nKSkge1xuICAgICAgICAgICAgcGFuZS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHBhbmUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMucGFyZW50RWxlbWVudCk7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudEVsZW1lbnQub25jbG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5vbmNsb3NlZCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc21hc2gud29ya3NwYWNlLmFjdGl2ZVRhYigpICYmIHNtYXNoLndvcmtzcGFjZS5vbmxhc3R0YWJjbG9zZWQpIHtcbiAgICAgICAgICAgIHNtYXNoLndvcmtzcGFjZS5vbmxhc3R0YWJjbG9zZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICAgIHRhYnMuYXBwZW5kQ2hpbGQodGFiKTtcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBwYW5lIHdpdGggdGhlIHByb3ZpZGVkIGNvbnRlbnRcbiAgICB2YXIgcGFuZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcGFuZS5jbGFzc05hbWUgPSAnc21hc2gtcGFuZSc7XG4gICAgcGFuZS5kYXRhc2V0LmlkID0gaWQ7XG4gICAgcGFuZS5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgIHBhbmVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHBhbmUpO1xuICAgIHJldHVybiB7dGFiOiB0YWIsIHBhbmU6IHBhbmV9O1xufTtcblxuc21hc2gud29ya3NwYWNlLmFjdGl2ZVRhYiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0YWIgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLmFjdGl2ZScpXG4gICAgaWYgKCF0YWIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciBwYW5lID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyB0YWIuZGF0YXNldC5pZCArICdcIl0nKTtcbiAgICBpZiAoIXBhbmUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB7dGFiOiB0YWIsIHBhbmU6IHBhbmV9O1xufTtcblxuc21hc2gud29ya3NwYWNlLmNyZWF0ZVRpdGxlID0gZnVuY3Rpb24odGl0bGUpIHtcbiAgICB2YXIgdCA9IHRpdGxlLnJlcGxhY2UoLzwoW14+XSs/KShbXj5dKj8pPiguKj8pPFxcL1xcMT4vaWcsIFwiXCIpO1xuICAgIGlmICh0ID09ICcnKSB7XG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gdGl0bGU7XG4gICAgICAgIGlmICh0cyA9IHNtYXNoLmdldChkaXYsICcudGl0bGUnKSkge1xuICAgICAgICAgICAgdCA9IHRzLmlubmVySFRNTDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCA9PSAnJykge1xuICAgICAgICAgICAgdCA9ICd1bmtub3duJztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdCArIChzbWFzaC53b3Jrc3BhY2UuYmFzZVRpdGxlID8gJyB8ICcgKyBzbWFzaC53b3Jrc3BhY2UuYmFzZVRpdGxlIDogXCJcIik7XG59O1xuIl19
