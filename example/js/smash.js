window.addEventListener("load",function(s){smash.init()},!1);var smash={};smash.init=function(){smash.config.init(),smash.sidebar.init(),smash.searchbox.init(),smash.workspace.init(),smash.input.init()},smash.get=function(s,e){try{return s.querySelector(e)}catch(s){console.log(s)}},smash.getAll=function(s,e){try{return s.querySelectorAll(e)}catch(s){console.log(s)}},smash.hide=function(s,e){for(var a=smash.getAll(s,e),t=0;t<a.length;t++)a[t].style.display="none"},smash.show=function(s,e){for(var a=smash.getAll(s,e),t=0;t<a.length;t++)a[t].style.display=""},smash.on=function(s,e,a,t){for(var n=smash.getAll(s,e),o=0;o<n.length;o++)n[o][a]=t},smash.ajax={_headers_:[]},smash.ajax.addHeader=function(s,e){smash.ajax._headers_[s]=e},smash.ajax._xhr_=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var s,e=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],a=0;a<e.length;a++)try{s=new ActiveXObject(e[a]);break}catch(s){}return s},smash.ajax.send=function(s,e,a,t,n,o){void 0===o&&(o=!0);var r=smash.ajax._xhr_();r.responseType=n,r.onreadystatechange=function(){4==r.readyState&&(200==r.status||201==r.status?e&&e(r.response):console.log(r.status,r.response))},r.open(a,s,o),"json"==n?r.setRequestHeader("Content-type","application/json"):"POST"==a&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var i in smash.ajax._headers_)r.setRequestHeader(i,smash.ajax._headers_[i]);r.send(t)},smash.ajax.get=function(s,e,a,t,n){var o=[];for(var r in a)o.push(encodeURIComponent(r)+"="+encodeURIComponent(a[r]));smash.ajax.send(s+(o.length?"?"+o.join("&"):""),e,"GET",null,t,n)},smash.ajax.post=function(s,e,a,t,n){var o;if(a)if("json"!=t){var r=[];for(var i in a)r.push(encodeURIComponent(i)+"="+encodeURIComponent(a[i]));o=r.join("&")}else o=JSON.stringify(a);smash.ajax.send(s,e,"POST",o,t,n)},smash.class={},smash.class.add=function(s,e){smash.class.has(s,e)||(s.classList?s.classList.add(e):s.className+=" "+e)},smash.class.remove=function(s,e){smash.class.has(s,e)&&(s.classList?s.classList.remove(e):s.className=s.className.replace(e,""))},smash.class.has=function(s,e){return(" "+s.className+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1},smash.class.toggle=function(s,e){smash.class.has(s,e)?smash.class.remove(s,e):smash.class.add(s,e)},smash.config={_values_:{_sidebar_lock_:!1}},smash.config.init=function(){var s=smash.storage.get("config");s&&(smash.config._values_=s)},smash.config.get=function(s){var e="_"+s+"_";if(e in smash.config._values_)return smash.config._values_[e];throw new smash.Exception("001",'Invalid config option "'+s+'"')},smash.config.set=function(s,e){var a="_"+s+"_";if(!a in smash.config._values_)throw new smash.Exception("001",'Invalid config option "'+s+'"');smash.config._values_[a]=e,smash.storage.set("config",smash.config._values_)},smash.Exception=function(s,e){this.value=s,this.message=e,this.toString=function(){return"SmashException "+this.value+": "+this.message}},smash.input={},smash.input.init=function(){for(var s,e=document.querySelectorAll(".smash-input.has-floating-label input"),a=0;a<e.length;a++)if(s=e[a],!smash.class.has(s.parentElement,"smash-initialised")){smash.class.remove(s.parentElement,"has-floating-label"),smash.class.add(s.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=s.placeholder,s.parentElement.appendChild(t),s.onkeyup=function(s){var e=this.parentElement.querySelector("label");e&&(""!=this.value?smash.class.add(e,"show"):smash.class.remove(e,"show"))},s.onkeyup(),smash.class.add(s.parentElement,"smash-initialised")}for(var n,o=document.querySelectorAll(".smash-select select"),a=0;a<o.length;a++)if(n=o[a],!smash.class.has(n.parentElement,"smash-initialised")){if(smash.class.has(n.parentElement,"has-floating-label")){smash.class.remove(n.parentElement,"has-floating-label"),smash.class.add(n.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=n.getAttribute("placeholder"),n.parentElement.appendChild(t)}var s=document.createElement("input");s.type="text",s.placeholder=n.getAttribute("placeholder"),s.setAttribute("readonly","readonly"),n.parentElement.appendChild(s);for(var r=n.querySelectorAll("option"),i=document.createElement("ul"),h=0;h<r.length;h++){var c=r[h];if(c.getAttribute("value")){var m=document.createElement("li");m.setAttribute("value",c.value),m.innerHTML=c.innerHTML,i.appendChild(m),m.onmousedown=function(s){var e=this.getAttribute("value"),a=this.parentElement.parentElement;smash.class.remove(a,"is-focussed"),window.onmousedown=null,a.querySelector("select").value=e,a.querySelector("input").value=this.innerHTML,a.querySelector("input").focus(),a.querySelector("input").onfocus(),s.stopPropagation()}}}n.parentElement.appendChild(i),s.onfocus=function(s){var e=this.parentElement.querySelector("label");e&&(""!=this.value?smash.class.add(e,"show"):smash.class.remove(e,"show"))},n.parentElement.onclick=function(){smash.class.add(this,"is-focussed");var s=this;window.onmousedown=function(){console.log("click outside"),window.onmousedown=null,smash.class.remove(s,"is-focussed")}},smash.class.add(n.parentElement,"smash-initialised")}},smash.router={__parseRouteRegex:/{(.*?)}/gi,__dynamicParts:[],__routes:{static:[],dynamic:[]}},smash.router.add=function(s,e){var a=smash.router.parseRoute(s);return a.regex?(a.callback=e,smash.router.__routes.dynamic[a.depth]||(smash.router.__routes.dynamic[a.depth]=[]),smash.router.__routes.dynamic[a.depth][a.numVars]||(smash.router.__routes.dynamic[a.depth][a.numVars]=[]),void smash.router.__routes.dynamic[a.depth][a.numVars].push(a)):void(smash.router.__routes.static[s]=e)},smash.router.set=function(s){smash.router.displayURL(s),window.dispatchEvent(new Event("popstate"))},smash.router.displayURL=function(s){window.history.pushState("","",s)},smash.router.redirect=function(s){window.location=s},smash.router.handleNotFound=function(s){console.log("route: "+JSON.stringify(s)+" does not exist")},smash.router.run=function(){window.onpopstate=function(s){smash.router.execute()},smash.router.execute()},smash.router.execute=function(){var s=this.getPath();if(this.__routes.static[s.path])return void this.__routes.static[s.path]();var e=s.path.split("/").length-1;if(this.__routes.dynamic[e]){var a,t,n={};for(var o in this.__routes.dynamic[e])for(var r in this.__routes.dynamic[e][o]){var a=this.__routes.dynamic[e][o][r];if(t=s.path.match(a.regex)){for(var i=0;i<a.numVars;i++)n[a.vars[i]]=t[i+1];return void a.callback(n)}}}smash.router.handleNotFound(s)},smash.router.getPath=function(){var s=document.createElement("a");return s.href=window.location,{host:s.hostname,path:s.pathname}},smash.router.parseRoute=function(s){"/"!=s.substring(0,1)&&(s="/"+s),"/"==s.substring(s.length-2)&&(s="/"+s);var e={path:s,depth:s.split("/").length-1,vars:[],numVars:0};if(smash.router.__dynamicParts=s.match(smash.router.__parseRouteRegex),void 0!=smash.router.__dynamicParts&&null!=smash.router.__dynamicParts){for(var a="^"+s.replace(/\//gi,"\\/")+"$",t=0;t<smash.router.__dynamicParts.length;t++)e.numVars++,e.vars.push(smash.router.__dynamicParts[t].substring(1,smash.router.__dynamicParts[t].length-1)),a=a.replace(smash.router.__dynamicParts[t],"(.*?)");e.regex=new RegExp(a,"i")}return e},smash.router.queryParam=function(s){var e="[\\?&]"+s+"=([^&#]*)",a=new RegExp(e),t=a.exec(window.location.search);if(null!=t)return t[1]},smash.searchbox={i_:!1,minAutoCompleteLength:3,onfocus:void 0,onblur:void 0,onvalue:void 0},smash.searchbox.init=function(){if(!smash.searchbox.i_){var s=document.querySelector(".smash-searchbox input");s&&(s.onfocus=function(){0==this.value.length&&smash.searchbox.results('<div class="smash-instruction">Start typing to find results</div>'),smash.class.add(document.querySelector(".smash-header"),"is-focussed"),smash.class.add(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onfocus&&smash.searchbox.onfocus()},s.onblur=function(){smash.class.remove(document.querySelector(".smash-header"),"is-focussed"),smash.class.remove(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onblur&&smash.searchbox.onblur()},s.onkeyup=function(s){this.value.length<smash.searchbox.minAutoCompleteLength||smash.searchbox.onchange&&smash.searchbox.onchange(this.value)},smash.searchbox.i_=!0)}},smash.searchbox.results=function(s){var e=document.querySelector(".smash-searchbox .smash-searchbox-results");e.innerHTML=s},smash.sidebar={i_:!1},smash.sidebar.init=function(){if(!smash.sidebar.i_){var s=document.querySelector(".smash-sidebar .lock");if(s){s.onclick=function(){smash.sidebar.toggleLock()};var e=document.querySelector(".smash-sidebar");smash.class.add(e,"is-unlocked"),smash.sidebar.i_=!0,smash.config.get("sidebar_lock")&&smash.sidebar.toggleLock()}}},smash.sidebar.toggleLock=function(){smash.sidebar.i_&&(smash.class.toggle(document.querySelector(".smash-sidebar .lock"),"unlock"),smash.class.toggle(document.querySelector(".smash-sidebar"),"is-unlocked"),smash.config.set("sidebar_lock",!smash.class.has(document.querySelector(".smash-sidebar"),"is-unlocked")))},smash.storage={},smash.storage.set=function(s,e){localStorage.setItem(s,JSON.stringify(e))},smash.storage.get=function(s){var e=localStorage.getItem(s);if(e)return JSON.parse(e)},smash.storage.clear=function(){localStorage.clear()},smash.workspace={_ws_:void 0,_hdr_:void 0,_sb_:void 0,_tabs_:[]},smash.workspace.init=function(){smash.workspace._ws_=document.querySelector(".smash-workspace"),smash.workspace._ws_&&(smash.workspace._hdr_=document.querySelector(".smash-header"),smash.workspace._hdr_&&smash.class.add(smash.workspace._ws_,"has-header"),smash.workspace._sb_=document.querySelector(".smash-workspace .smash-sidebar"),smash.workspace._sb_&&smash.class.add(smash.workspace._ws_,"has-sidebar"))},smash.workspace.addTab=function(s,e,a,t){if(!smash.get(document,".smash-tab-pane")){var n=smash.get(document,".smash-panel");if(!n)return void console.log("To add a tab there needs to be a panel");n.innerHTML='<div class="smash-tab-pane"><div class="smash-tabs"></div><div class="smash-panes"></div></div>'}var o=smash.get(document,".smash-tab-pane .smash-tabs"),r=smash.get(document,".smash-tab-pane .smash-panes");if(h=smash.get(o,'.smash-tab[data-id="'+s+'"]')){var i=smash.get(r,'.smash-pane[data-id="'+s+'"]').innerHTML=a;return h.dataset.url=t,void h.onclick()}smash.hide(r,".smash-pane"),(active=smash.get(o,".smash-tab.active"))&&smash.class.remove(active,"active");var h=document.createElement("div");h.className="smash-tab active",h.dataset.id=s,h.dataset.url=t,h.innerHTML=e+'<i class="material-icons close">close</i>',h.onclick=function(s){(active=smash.get(o,".smash-tab.active"))&&smash.class.remove(active,"active"),smash.class.add(this,"active"),smash.hide(document,".smash-pane"),smash.show(document,'.smash-pane[data-id="'+this.dataset.id+'"]'),this.dataset.url&&"undefined"!=this.dataset.url&&smash.router.displayURL(this.dataset.url)},smash.on(h,".close","onclick",function(s){smash.class.has(this.parentElement,"active")&&(this.parentElement.previousSibling?this.parentElement.previousSibling.onclick():this.parentElement.nextSibling&&this.parentElement.nextSibling.onclick()),(i=smash.get(document,'.smash-pane[data-id="'+this.parentElement.dataset.id+'"]'))&&i.parentElement.removeChild(i),this.parentElement.parentElement.removeChild(this.parentElement),s.stopPropagation()}),o.appendChild(h);var i=document.createElement("div");i.className="smash-pane",i.dataset.id=s,i.innerHTML=a,r.appendChild(i)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNtYXNoLmpzIiwiYWpheC5qcyIsImNsYXNzLmpzIiwiY29uZmlnLmpzIiwiZXhjZXB0aW9uLmpzIiwiaW5wdXQuanMiLCJyb3V0ZXIuanMiLCJzZWFyY2hib3guanMiLCJzaWRlYmFyLmpzIiwic3RvcmFnZS5qcyIsIndvcmtzcGFjZS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInNtYXNoIiwiaW5pdCIsImNvbmZpZyIsInNpZGViYXIiLCJzZWFyY2hib3giLCJ3b3Jrc3BhY2UiLCJpbnB1dCIsImdldCIsInBhcmVudCIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImNvbnNvbGUiLCJsb2ciLCJnZXRBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGlkZSIsImVsIiwiaSIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsInNob3ciLCJvbiIsImV2ZW50IiwiY2FsbGJhY2siLCJlbGVtZW50cyIsImFqYXgiLCJfaGVhZGVyc18iLCJhZGRIZWFkZXIiLCJuYW1lIiwidmFsdWUiLCJfeGhyXyIsIlhNTEh0dHBSZXF1ZXN0IiwieGhyIiwidmVyc2lvbnMiLCJBY3RpdmVYT2JqZWN0Iiwic2VuZCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJyZXNwb25zZVR5cGUiLCJhc3luYyIsInVuZGVmaW5lZCIsIngiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInF1ZXJ5Iiwia2V5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJwb3N0IiwiZGF0YVN0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJjbGFzcyIsImFkZCIsImNsYXNzTmFtZSIsImhhcyIsImNsYXNzTGlzdCIsInJlbW92ZSIsInJlcGxhY2UiLCJpbmRleE9mIiwidG9nZ2xlIiwiX3ZhbHVlc18iLCJfc2lkZWJhcl9sb2NrXyIsInYiLCJzdG9yYWdlIiwib3B0aW9uIiwibyIsIkV4Y2VwdGlvbiIsInNldCIsIm1lc3NhZ2UiLCJ0aGlzIiwidG9TdHJpbmciLCJpbnB1dHMiLCJkb2N1bWVudCIsInBhcmVudEVsZW1lbnQiLCJsYWJlbCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJwbGFjZWhvbGRlciIsImFwcGVuZENoaWxkIiwib25rZXl1cCIsImwiLCJzZWxlY3QiLCJzZWxlY3RzIiwiZ2V0QXR0cmlidXRlIiwidHlwZSIsInNldEF0dHJpYnV0ZSIsIm9wdGlvbnMiLCJ1bCIsImoiLCJsaSIsIm9ubW91c2Vkb3duIiwidmFsIiwiZm9jdXMiLCJvbmZvY3VzIiwic3RvcFByb3BhZ2F0aW9uIiwib25jbGljayIsInJvdXRlciIsIl9fcGFyc2VSb3V0ZVJlZ2V4IiwiX19keW5hbWljUGFydHMiLCJfX3JvdXRlcyIsInN0YXRpYyIsImR5bmFtaWMiLCJwYXRoIiwicm91dGUiLCJwYXJzZVJvdXRlIiwicmVnZXgiLCJkZXB0aCIsIm51bVZhcnMiLCJkaXNwbGF5VVJMIiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInJlZGlyZWN0IiwibG9jYXRpb24iLCJoYW5kbGVOb3RGb3VuZCIsInJ1biIsIm9ucG9wc3RhdGUiLCJleGVjdXRlIiwiZ2V0UGF0aCIsInNwbGl0IiwibWF0Y2hlcyIsInZhck51bSIsIml0ZW0iLCJtYXRjaCIsInZhcnMiLCJocmVmIiwiaG9zdCIsImhvc3RuYW1lIiwicGF0aG5hbWUiLCJzdWJzdHJpbmciLCJSZWdFeHAiLCJxdWVyeVBhcmFtIiwicGFyYW0iLCJyZWdleFMiLCJyZXN1bHRzIiwiZXhlYyIsInNlYXJjaCIsImlfIiwibWluQXV0b0NvbXBsZXRlTGVuZ3RoIiwib25ibHVyIiwib252YWx1ZSIsInNzYiIsIm9uY2hhbmdlIiwiY29udGVudCIsInNpYmwiLCJ0b2dnbGVMb2NrIiwic2liIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldEl0ZW0iLCJwYXJzZSIsImNsZWFyIiwiX3dzXyIsIl9oZHJfIiwiX3NiXyIsIl90YWJzXyIsImFkZFRhYiIsImlkIiwidGl0bGUiLCJwYW5lbCIsInRhYnMiLCJwYW5lc0NvbnRhaW5lciIsInRhYiIsInBhbmUiLCJkYXRhc2V0IiwiYWN0aXZlIiwicHJldmlvdXNTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJyZW1vdmVDaGlsZCJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQUFDLGlCQUFBLE9BQUEsU0FBQUMsR0FDQUMsTUFBQUMsU0FDQSxFQUVBLElBQUFELFNBRUFBLE9BQUFDLEtBQUEsV0FDQUQsTUFBQUUsT0FBQUQsT0FDQUQsTUFBQUcsUUFBQUYsT0FDQUQsTUFBQUksVUFBQUgsT0FDQUQsTUFBQUssVUFBQUosT0FDQUQsTUFBQU0sTUFBQUwsUUFHQUQsTUFBQU8sSUFBQSxTQUFBQyxFQUFBQyxHQUNBLElBQ0EsTUFBQUQsR0FBQUUsY0FBQUQsR0FDQSxNQUFBVixHQUNBWSxRQUFBQyxJQUFBYixLQUtBQyxNQUFBYSxPQUFBLFNBQUFMLEVBQUFDLEdBQ0EsSUFDQSxNQUFBRCxHQUFBTSxpQkFBQUwsR0FDQSxNQUFBVixHQUNBWSxRQUFBQyxJQUFBYixLQUtBQyxNQUFBZSxLQUFBLFNBQUFQLEVBQUFDLEdBRUEsSUFBQSxHQURBTyxHQUFBaEIsTUFBQWEsT0FBQUwsRUFBQUMsR0FDQVEsRUFBQSxFQUFBQSxFQUFBRCxFQUFBRSxPQUFBRCxJQUNBRCxFQUFBQyxHQUFBRSxNQUFBQyxRQUFBLFFBSUFwQixNQUFBcUIsS0FBQSxTQUFBYixFQUFBQyxHQUVBLElBQUEsR0FEQU8sR0FBQWhCLE1BQUFhLE9BQUFMLEVBQUFDLEdBQ0FRLEVBQUEsRUFBQUEsRUFBQUQsRUFBQUUsT0FBQUQsSUFDQUQsRUFBQUMsR0FBQUUsTUFBQUMsUUFBQSxJQUlBcEIsTUFBQXNCLEdBQUEsU0FBQWQsRUFBQUMsRUFBQWMsRUFBQUMsR0FFQSxJQUFBLEdBREFDLEdBQUF6QixNQUFBYSxPQUFBTCxFQUFBQyxHQUNBUSxFQUFBLEVBQUFBLEVBQUFRLEVBQUFQLE9B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LGNBQUEsTUFDQXlGLEdBQUEvRyxVQUFBLGFBQ0ErRyxFQUFBQyxRQUFBUCxHQUFBQSxFQUNBTSxFQUFBeEYsVUFBQW9FLEVBQ0FrQixFQUFBcEYsWUFBQXNGIiwiZmlsZSI6InNtYXNoLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKGUpe1xuICAgIHNtYXNoLmluaXQoKTtcbn0sIGZhbHNlKTtcblxudmFyIHNtYXNoID0ge307XG5cbnNtYXNoLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBzbWFzaC5jb25maWcuaW5pdCgpO1xuICAgIHNtYXNoLnNpZGViYXIuaW5pdCgpO1xuICAgIHNtYXNoLnNlYXJjaGJveC5pbml0KCk7XG4gICAgc21hc2gud29ya3NwYWNlLmluaXQoKTtcbiAgICBzbWFzaC5pbnB1dC5pbml0KCk7XG59O1xuXG5zbWFzaC5nZXQgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5nZXRBbGwgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5oaWRlID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHZhciBlbCA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8ZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG59O1xuXG5zbWFzaC5zaG93ID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHZhciBlbCA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8ZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgIH1cbn07XG5cbnNtYXNoLm9uID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3RvciwgZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGVsZW1lbnRzID0gc21hc2guZ2V0QWxsKHBhcmVudCwgc2VsZWN0b3IpO1xuICAgIGZvciAodmFyIGk9MDsgaTxlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbGVtZW50c1tpXVtldmVudF0gPSBjYWxsYmFjaztcbiAgICB9XG59O1xuIiwic21hc2guYWpheCA9IHtcbiAgICBfaGVhZGVyc186IFtdXG59O1xuXG5zbWFzaC5hamF4LmFkZEhlYWRlciA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgc21hc2guYWpheC5faGVhZGVyc19bbmFtZV0gPSB2YWx1ZTtcbn07XG5cbnNtYXNoLmFqYXguX3hocl8gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIH1cbiAgICB2YXIgdmVyc2lvbnMgPSBbXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuNi4wXCIsXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuNS4wXCIsXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuNC4wXCIsXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuMy4wXCIsXG4gICAgICAgIFwiTVNYTUwyLlhtbEh0dHAuMi4wXCIsXG4gICAgICAgIFwiTWljcm9zb2Z0LlhtbEh0dHBcIlxuICAgIF07XG4gICAgdmFyIHhocjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnNpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB4aHIgPSBuZXcgQWN0aXZlWE9iamVjdCh2ZXJzaW9uc1tpXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB4aHI7XG59O1xuXG5zbWFzaC5hamF4LnNlbmQgPSBmdW5jdGlvbiAodXJsLCBjYWxsYmFjaywgbWV0aG9kLCBkYXRhLCByZXNwb25zZVR5cGUsIGFzeW5jKSB7XG4gICAgaWYgKGFzeW5jID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXN5bmMgPSB0cnVlO1xuICAgIH1cbiAgICB2YXIgeCA9IHNtYXNoLmFqYXguX3hocl8oKTtcbiAgICB4LnJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZTtcbiAgICB4Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoeC5yZWFkeVN0YXRlID09IDQpIHtcblx0XHRcdGlmICh4LnN0YXR1cyA9PSAyMDAgfHwgeC5zdGF0dXMgPT0gMjAxKSB7XG5cdFx0XHRcdGNhbGxiYWNrICYmIGNhbGxiYWNrKHgucmVzcG9uc2UpO1xuXHRcdFx0fSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh4LnN0YXR1cywgeC5yZXNwb25zZSk7XG5cdFx0XHR9XG5cdFx0fVxuICAgIH07XG4gICAgeC5vcGVuKG1ldGhvZCwgdXJsLCBhc3luYyk7XG4gICAgaWYgKHJlc3BvbnNlVHlwZSA9PSAnanNvbicpIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIH0gZWxzZSBpZiAobWV0aG9kID09ICdQT1NUJykge1xuICAgICAgICB4LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKTtcbiAgICB9XG4gICAgZm9yICh2YXIgbmFtZSBpbiBzbWFzaC5hamF4Ll9oZWFkZXJzXykge1xuICAgICAgICB4LnNldFJlcXVlc3RIZWFkZXIobmFtZSwgc21hc2guYWpheC5faGVhZGVyc19bbmFtZV0pO1xuICAgIH1cbiAgICB4LnNlbmQoZGF0YSlcbn07XG5cbnNtYXNoLmFqYXguZ2V0ID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2ssIGRhdGEsIHJlc3BvbnNlVHlwZSwgYXN5bmMpIHtcbiAgICB2YXIgcXVlcnkgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICBxdWVyeS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba2V5XSkpO1xuICAgIH1cbiAgICBzbWFzaC5hamF4LnNlbmQodXJsICsgKHF1ZXJ5Lmxlbmd0aCA/ICc/JyArIHF1ZXJ5LmpvaW4oJyYnKSA6ICcnKSwgY2FsbGJhY2ssICdHRVQnLCBudWxsLCByZXNwb25zZVR5cGUsICBhc3luYylcbn07XG5cbnNtYXNoLmFqYXgucG9zdCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBkYXRhLCByZXNwb25zZVR5cGUsIGFzeW5jKSB7XG4gICAgdmFyIGRhdGFTdHI7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlVHlwZSAhPSAnanNvbicpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba2V5XSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YVN0ciA9IHF1ZXJ5LmpvaW4oJyYnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YVN0ciA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNtYXNoLmFqYXguc2VuZCh1cmwsIGNhbGxiYWNrLCAnUE9TVCcsIGRhdGFTdHIsIHJlc3BvbnNlVHlwZSwgYXN5bmMpXG59O1xuIiwic21hc2guY2xhc3MgPSB7fTtcblxuc21hc2guY2xhc3MuYWRkID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIGlmICghc21hc2guY2xhc3MuaGFzKGVsLCBjbGFzc05hbWUpKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdCA/IGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKSA6IGVsLmNsYXNzTmFtZSArPSAoJyAnICsgY2xhc3NOYW1lKTtcbiAgICB9XG59O1xuXG5zbWFzaC5jbGFzcy5yZW1vdmUgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhlbCwgY2xhc3NOYW1lKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QgPyBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSkgOiBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShjbGFzc05hbWUsICcnKTtcbiAgICB9XG59O1xuXG5zbWFzaC5jbGFzcy5oYXMgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuICgoXCIgXCIgKyBlbC5jbGFzc05hbWUgKyBcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZywgXCIgXCIpLmluZGV4T2YoXCIgXCIgKyBjbGFzc05hbWUgKyBcIiBcIikgPiAtMSk7XG59O1xuXG5zbWFzaC5jbGFzcy50b2dnbGUgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgc21hc2guY2xhc3MuaGFzKGVsLCBjbGFzc05hbWUpID8gc21hc2guY2xhc3MucmVtb3ZlKGVsLCBjbGFzc05hbWUpIDogc21hc2guY2xhc3MuYWRkKGVsLCBjbGFzc05hbWUpO1xufTtcbiIsInNtYXNoLmNvbmZpZyA9IHtcbiAgICBfdmFsdWVzXzoge1xuICAgICAgICBfc2lkZWJhcl9sb2NrXzogZmFsc2VcbiAgICB9XG59XG5cbnNtYXNoLmNvbmZpZy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSBzbWFzaC5zdG9yYWdlLmdldCgnY29uZmlnJyk7XG4gICAgaWYgKHYpIHtcbiAgICAgICAgc21hc2guY29uZmlnLl92YWx1ZXNfID0gdjtcbiAgICB9XG59O1xuXG5zbWFzaC5jb25maWcuZ2V0ID0gZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgdmFyIG8gPSAnXycgKyBvcHRpb24gKyAnXyc7XG4gICAgaWYgKG8gaW4gc21hc2guY29uZmlnLl92YWx1ZXNfKSB7XG4gICAgICAgIHJldHVybiBzbWFzaC5jb25maWcuX3ZhbHVlc19bb107XG4gICAgfVxuICAgIHRocm93IG5ldyBzbWFzaC5FeGNlcHRpb24oJzAwMScsICdJbnZhbGlkIGNvbmZpZyBvcHRpb24gXCInICsgb3B0aW9uICsgJ1wiJyk7XG59O1xuXG5zbWFzaC5jb25maWcuc2V0ID0gZnVuY3Rpb24ob3B0aW9uLCB2YWx1ZSkge1xuICAgIHZhciBvID0gJ18nICsgb3B0aW9uICsgJ18nO1xuICAgIGlmICghbyBpbiBzbWFzaC5jb25maWcuX3ZhbHVlc18pIHtcbiAgICAgICAgdGhyb3cgbmV3IHNtYXNoLkV4Y2VwdGlvbignMDAxJywgJ0ludmFsaWQgY29uZmlnIG9wdGlvbiBcIicgKyBvcHRpb24gKyAnXCInKTtcbiAgICB9XG4gICAgc21hc2guY29uZmlnLl92YWx1ZXNfW29dID0gdmFsdWU7XG4gICAgc21hc2guc3RvcmFnZS5zZXQoJ2NvbmZpZycsIHNtYXNoLmNvbmZpZy5fdmFsdWVzXyk7XG59O1xuIiwic21hc2guRXhjZXB0aW9uID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJ1NtYXNoRXhjZXB0aW9uICcgKyB0aGlzLnZhbHVlICsgJzogJyArIHRoaXMubWVzc2FnZTtcbiAgICB9O1xufTtcbiIsInNtYXNoLmlucHV0ID0ge307XG5cbnNtYXNoLmlucHV0LmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbWFzaC1pbnB1dC5oYXMtZmxvYXRpbmctbGFiZWwgaW5wdXRcIik7XG4gICAgdmFyIGlucHV0O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlucHV0ID0gaW5wdXRzW2ldO1xuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKGlucHV0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoaW5wdXQucGFyZW50RWxlbWVudCwgJ2Zsb2F0aW5nLWxhYmVsJyk7XG5cbiAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gaW5wdXQucGxhY2Vob2xkZXI7XG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICBpbnB1dC5vbmtleXVwID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIGwgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsXCIpO1xuICAgICAgICAgICAgaWYgKGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaW5wdXQub25rZXl1cCgpO1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoaW5wdXQucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJyk7XG4gICAgfVxuICAgIHZhciBzZWxlY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbWFzaC1zZWxlY3Qgc2VsZWN0XCIpO1xuICAgIHZhciBzZWxlY3Q7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNlbGVjdCA9IHNlbGVjdHNbaV07XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnaGFzLWZsb2F0aW5nLWxhYmVsJykpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShzZWxlY3QucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSBzZWxlY3QuZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWxlY3QuZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpO1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCBcInJlYWRvbmx5XCIpO1xuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChpbnB1dCk7XG5cbiAgICAgICAgdmFyIG9wdGlvbnMgPSBzZWxlY3QucXVlcnlTZWxlY3RvckFsbChcIm9wdGlvblwiKTtcbiAgICAgICAgdmFyIHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvcHRpb25zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uID0gb3B0aW9uc1tqXTtcbiAgICAgICAgICAgIGlmIChvcHRpb24uZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBvcHRpb24udmFsdWUpO1xuICAgICAgICAgICAgICAgIGxpLmlubmVySFRNTCA9IG9wdGlvbi5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICAgICAgICAgIGxpLm9ubW91c2Vkb3duID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHBhcmVudCwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNlZG93biA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpLnZhbHVlID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQucXVlcnlTZWxlY3RvcihcImlucHV0XCIpLnZhbHVlID0gdGhpcy5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKS5vbmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHVsKTtcbiAgICAgICAgaW5wdXQub25mb2N1cyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBsID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZCh0aGlzLCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3QgPSB0aGlzO1xuICAgICAgICAgICAgd2luZG93Lm9ubW91c2Vkb3duID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjbGljayBvdXRzaWRlXCIpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNlZG93biA9IG51bGw7XG4gICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHNlbGVjdCwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpO1xuICAgIH1cbn07XG4iLCJzbWFzaC5yb3V0ZXIgPSB7XG4gICAgX19wYXJzZVJvdXRlUmVnZXg6IC97KC4qPyl9L2lnLFxuICAgIF9fZHluYW1pY1BhcnRzOiBbXSxcbiAgICBfX3JvdXRlczoge1xuICAgICAgICBzdGF0aWM6IFtdLFxuICAgICAgICBkeW5hbWljOiBbXVxuICAgIH1cbn07XG5cbnNtYXNoLnJvdXRlci5hZGQgPSBmdW5jdGlvbihwYXRoLCBjYWxsYmFjaykge1xuICAgIHZhciByb3V0ZSA9IHNtYXNoLnJvdXRlci5wYXJzZVJvdXRlKHBhdGgpO1xuICAgIGlmIChyb3V0ZS5yZWdleCkge1xuICAgICAgICByb3V0ZS5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICBpZiAoIXNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXSkge1xuICAgICAgICAgICAgc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10pIHtcbiAgICAgICAgICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXVtyb3V0ZS5udW1WYXJzXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXVtyb3V0ZS5udW1WYXJzXS5wdXNoKHJvdXRlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuc3RhdGljW3BhdGhdID0gY2FsbGJhY2s7XG59O1xuXG5zbWFzaC5yb3V0ZXIuc2V0ID0gZnVuY3Rpb24ocm91dGUpIHtcbiAgICBzbWFzaC5yb3V0ZXIuZGlzcGxheVVSTChyb3V0ZSk7XG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdwb3BzdGF0ZScpKTtcbn07XG5cbnNtYXNoLnJvdXRlci5kaXNwbGF5VVJMID0gZnVuY3Rpb24ocm91dGUpIHtcbiAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoXCJcIiwgXCJcIiwgcm91dGUpO1xufTtcblxuc21hc2gucm91dGVyLnJlZGlyZWN0ID0gZnVuY3Rpb24ocm91dGUpIHtcbiAgICB3aW5kb3cubG9jYXRpb24gPSByb3V0ZTtcbn07XG5cbnNtYXNoLnJvdXRlci5oYW5kbGVOb3RGb3VuZCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgY29uc29sZS5sb2coXCJyb3V0ZTogXCIgKyBKU09OLnN0cmluZ2lmeShyb3V0ZSkgKyBcIiBkb2VzIG5vdCBleGlzdFwiKTtcbn07XG5cbnNtYXNoLnJvdXRlci5ydW4gPSBmdW5jdGlvbigpIHtcbiAgICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHNtYXNoLnJvdXRlci5leGVjdXRlKCk7XG4gICAgfTtcbiAgICBzbWFzaC5yb3V0ZXIuZXhlY3V0ZSgpO1xufVxuXG5zbWFzaC5yb3V0ZXIuZXhlY3V0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwYXRoID0gdGhpcy5nZXRQYXRoKCk7XG4gICAgaWYgKHRoaXMuX19yb3V0ZXMuc3RhdGljW3BhdGgucGF0aF0pIHtcbiAgICAgICAgdGhpcy5fX3JvdXRlcy5zdGF0aWNbcGF0aC5wYXRoXSgpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBkZXB0aCA9IHBhdGgucGF0aC5zcGxpdChcIi9cIikubGVuZ3RoLTE7XG4gICAgaWYgKHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF0pIHtcbiAgICAgICAgdmFyIHJvdXRlO1xuICAgICAgICB2YXIgbWF0Y2hlcztcbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgdmFyTnVtIGluIHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF0pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gdGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXVt2YXJOdW1dKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdXRlID0gdGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXVt2YXJOdW1dW2l0ZW1dO1xuICAgICAgICAgICAgICAgIG1hdGNoZXMgPSBwYXRoLnBhdGgubWF0Y2gocm91dGUucmVnZXgpO1xuICAgICAgICAgICAgICAgIGlmICghbWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHJvdXRlLm51bVZhcnM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhW3JvdXRlLnZhcnNbaV1dID0gbWF0Y2hlc1tpKzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByb3V0ZS5jYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc21hc2gucm91dGVyLmhhbmRsZU5vdEZvdW5kKHBhdGgpO1xufTtcblxuc21hc2gucm91dGVyLmdldFBhdGggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgIGwuaHJlZiA9IHdpbmRvdy5sb2NhdGlvbjtcbiAgICByZXR1cm4ge2hvc3Q6IGwuaG9zdG5hbWUsIHBhdGg6IGwucGF0aG5hbWV9O1xufTtcblxuc21hc2gucm91dGVyLnBhcnNlUm91dGUgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgaWYgKHBhdGguc3Vic3RyaW5nKDAsMSkgIT0gXCIvXCIpIHtcbiAgICAgICAgcGF0aCA9IFwiL1wiICsgcGF0aDtcbiAgICB9XG4gICAgaWYgKHBhdGguc3Vic3RyaW5nKHBhdGgubGVuZ3RoLTIpID09IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG4gICAgfVxuICAgIHZhciByb3V0ZSA9IHtcbiAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgZGVwdGg6IChwYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGggLSAxKSxcbiAgICAgICAgdmFyczogW10sXG4gICAgICAgIG51bVZhcnM6IDBcbiAgICB9O1xuICAgIHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cyA9IHBhdGgubWF0Y2goc21hc2gucm91dGVyLl9fcGFyc2VSb3V0ZVJlZ2V4KTtcbiAgICBpZiAoc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzICE9IHVuZGVmaW5lZCAmJiBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMgIT0gbnVsbCkge1xuICAgICAgICB2YXIgcmVnZXggPSBcIl5cIiArIHBhdGgucmVwbGFjZSgvXFwvL2lnLCBcIlxcXFwvXCIpICsgXCIkXCI7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJvdXRlLm51bVZhcnMrKztcbiAgICAgICAgICAgIHJvdXRlLnZhcnMucHVzaChzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0uc3Vic3RyaW5nKDEsIHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0c1tpXS5sZW5ndGgtMSkpO1xuICAgICAgICAgICAgcmVnZXggPSByZWdleC5yZXBsYWNlKHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0c1tpXSwgXCIoLio/KVwiKTtcbiAgICAgICAgfVxuICAgICAgICByb3V0ZS5yZWdleCA9IG5ldyBSZWdFeHAocmVnZXgsICdpJyk7XG4gICAgfVxuICAgIHJldHVybiByb3V0ZTtcbn07XG5cbnNtYXNoLnJvdXRlci5xdWVyeVBhcmFtID0gZnVuY3Rpb24ocGFyYW0pIHtcbiAgICB2YXIgcmVnZXhTID0gXCJbXFxcXD8mXVwiK3BhcmFtK1wiPShbXiYjXSopXCIsXG4gICAgcmVnZXggPSBuZXcgUmVnRXhwKCByZWdleFMgKSxcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyggd2luZG93LmxvY2F0aW9uLnNlYXJjaCApO1xuICAgIGlmKCByZXN1bHRzID09IG51bGwgKXtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHNbMV07Ly9kZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1sxXS5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcbn07XG4iLCJzbWFzaC5zZWFyY2hib3ggPSB7XG4gICAgaV86IGZhbHNlLFxuICAgIG1pbkF1dG9Db21wbGV0ZUxlbmd0aDogMyxcbiAgICBvbmZvY3VzOiB1bmRlZmluZWQsXG4gICAgb25ibHVyOiB1bmRlZmluZWQsXG4gICAgb252YWx1ZTogdW5kZWZpbmVkLFxufTtcblxuc21hc2guc2VhcmNoYm94LmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc21hc2guc2VhcmNoYm94LmlfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHNzYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2VhcmNoYm94IGlucHV0XCIpO1xuICAgIGlmICghc3NiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3NiLm9uZm9jdXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHNtYXNoLnNlYXJjaGJveC5yZXN1bHRzKCc8ZGl2IGNsYXNzPVwic21hc2gtaW5zdHJ1Y3Rpb25cIj5TdGFydCB0eXBpbmcgdG8gZmluZCByZXN1bHRzPC9kaXY+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgc21hc2guY2xhc3MuYWRkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtaGVhZGVyXCIpLCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgc21hc2guY2xhc3MuYWRkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2VhcmNoYm94IC5zbWFzaC1zZWFyY2hib3gtcmVzdWx0c1wiKSwgJ3Nob3cnKTtcbiAgICAgICAgaWYgKHNtYXNoLnNlYXJjaGJveC5vbmZvY3VzKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gub25mb2N1cygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzc2Iub25ibHVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLWhlYWRlclwiKSwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCAuc21hc2gtc2VhcmNoYm94LXJlc3VsdHNcIiksICdzaG93Jyk7XG4gICAgICAgIGlmIChzbWFzaC5zZWFyY2hib3gub25ibHVyKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gub25ibHVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNzYi5vbmtleXVwID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPCBzbWFzaC5zZWFyY2hib3gubWluQXV0b0NvbXBsZXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNtYXNoLnNlYXJjaGJveC5vbmNoYW5nZSkge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uY2hhbmdlKHRoaXMudmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzbWFzaC5zZWFyY2hib3guaV8gPSB0cnVlO1xufTtcblxuc21hc2guc2VhcmNoYm94LnJlc3VsdHMgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgdmFyIHJlc3VsdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCAuc21hc2gtc2VhcmNoYm94LXJlc3VsdHNcIik7XG4gICAgcmVzdWx0cy5pbm5lckhUTUwgPSBjb250ZW50O1xufTtcbiIsInNtYXNoLnNpZGViYXIgPSB7XG4gICAgaV86IGZhbHNlXG59O1xuXG5zbWFzaC5zaWRlYmFyLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc21hc2guc2lkZWJhci5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzaWJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyIC5sb2NrXCIpO1xuICAgIGlmICghc2libCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNpYmwub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzbWFzaC5zaWRlYmFyLnRvZ2dsZUxvY2soKTtcbiAgICB9O1xuXG4gICAgdmFyIHNpYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhclwiKTtcbiAgICBzbWFzaC5jbGFzcy5hZGQoc2liLCAnaXMtdW5sb2NrZWQnKTtcbiAgICBzbWFzaC5zaWRlYmFyLmlfID0gdHJ1ZTtcbiAgICBpZiAoc21hc2guY29uZmlnLmdldCgnc2lkZWJhcl9sb2NrJykpIHtcbiAgICAgICAgc21hc2guc2lkZWJhci50b2dnbGVMb2NrKCk7XG4gICAgfVxufTtcblxuc21hc2guc2lkZWJhci50b2dnbGVMb2NrID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFzbWFzaC5zaWRlYmFyLmlfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc21hc2guY2xhc3MudG9nZ2xlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhciAubG9ja1wiKSwgJ3VubG9jaycpO1xuICAgIHNtYXNoLmNsYXNzLnRvZ2dsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXJcIiksICdpcy11bmxvY2tlZCcpO1xuICAgIHNtYXNoLmNvbmZpZy5zZXQoJ3NpZGViYXJfbG9jaycsICFzbWFzaC5jbGFzcy5oYXMoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyXCIpLCAnaXMtdW5sb2NrZWQnKSk7XG59O1xuIiwic21hc2guc3RvcmFnZSA9IHt9O1xuXG5zbWFzaC5zdG9yYWdlLnNldCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obmFtZSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbn07XG5cbnNtYXNoLnN0b3JhZ2UuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obmFtZSk7XG4gICAgaWYgKCFpKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnBhcnNlKGkpO1xufTtcblxuc21hc2guc3RvcmFnZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xufTtcbiIsInNtYXNoLndvcmtzcGFjZSA9IHtcbiAgICBfd3NfOiB1bmRlZmluZWQsXG4gICAgX2hkcl86IHVuZGVmaW5lZCxcbiAgICBfc2JfOiB1bmRlZmluZWQsXG4gICAgX3RhYnNfOiBbXVxufTtcblxuc21hc2gud29ya3NwYWNlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBzbWFzaC53b3Jrc3BhY2UuX3dzXyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtd29ya3NwYWNlXCIpO1xuICAgIGlmICghc21hc2gud29ya3NwYWNlLl93c18pIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHNtYXNoLndvcmtzcGFjZS5faGRyXyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtaGVhZGVyXCIpO1xuICAgIGlmIChzbWFzaC53b3Jrc3BhY2UuX2hkcl8pIHtcbiAgICAgICAgc21hc2guY2xhc3MuYWRkKHNtYXNoLndvcmtzcGFjZS5fd3NfLCAnaGFzLWhlYWRlcicpO1xuICAgIH1cbiAgICBzbWFzaC53b3Jrc3BhY2UuX3NiXyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtd29ya3NwYWNlIC5zbWFzaC1zaWRlYmFyXCIpO1xuICAgIGlmIChzbWFzaC53b3Jrc3BhY2UuX3NiXykge1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc21hc2gud29ya3NwYWNlLl93c18sICdoYXMtc2lkZWJhcicpO1xuICAgIH1cbn07XG5cbnNtYXNoLndvcmtzcGFjZS5hZGRUYWIgPSBmdW5jdGlvbihpZCwgdGl0bGUsIGNvbnRlbnQsIHVybCkge1xuICAgIGlmICghc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXRhYi1wYW5lJykpIHtcbiAgICAgICAgdmFyIHBhbmVsID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVsJyk7XG4gICAgICAgIGlmICghcGFuZWwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUbyBhZGQgYSB0YWIgdGhlcmUgbmVlZHMgdG8gYmUgYSBwYW5lbCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHBhbmVsLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwic21hc2gtdGFiLXBhbmVcIj48ZGl2IGNsYXNzPVwic21hc2gtdGFic1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJzbWFzaC1wYW5lc1wiPjwvZGl2PjwvZGl2Pic7XG4gICAgfVxuICAgIHZhciB0YWJzID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXRhYi1wYW5lIC5zbWFzaC10YWJzJyk7XG4gICAgdmFyIHBhbmVzQ29udGFpbmVyID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXRhYi1wYW5lIC5zbWFzaC1wYW5lcycpO1xuXG4gICAgaWYgKHRhYiA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYltkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpKSB7XG4gICAgICAgIHZhciBwYW5lID0gc21hc2guZ2V0KHBhbmVzQ29udGFpbmVyLCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyBpZCArICdcIl0nKS5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgICAgICB0YWIuZGF0YXNldC51cmwgPSB1cmw7XG4gICAgICAgIHRhYi5vbmNsaWNrKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzbWFzaC5oaWRlKHBhbmVzQ29udGFpbmVyLCBcIi5zbWFzaC1wYW5lXCIpO1xuICAgIGlmIChhY3RpdmUgPSBzbWFzaC5nZXQodGFicywgJy5zbWFzaC10YWIuYWN0aXZlJykpIHtcbiAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGFjdGl2ZSwgJ2FjdGl2ZScpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIG5ldyB0YWJcbiAgICB2YXIgdGFiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0YWIuY2xhc3NOYW1lID0gJ3NtYXNoLXRhYiBhY3RpdmUnO1xuICAgIHRhYi5kYXRhc2V0LmlkID0gaWQ7XG4gICAgdGFiLmRhdGFzZXQudXJsID0gdXJsO1xuICAgIHRhYi5pbm5lckhUTUwgPSB0aXRsZSArICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNsb3NlXCI+Y2xvc2U8L2k+JztcbiAgICB0YWIub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGFjdGl2ZSA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYi5hY3RpdmUnKSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGFjdGl2ZSwgJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZCh0aGlzLCAnYWN0aXZlJyk7XG4gICAgICAgIHNtYXNoLmhpZGUoZG9jdW1lbnQsICcuc21hc2gtcGFuZScpO1xuICAgICAgICBzbWFzaC5zaG93KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyB0aGlzLmRhdGFzZXQuaWQgKyAnXCJdJyk7XG4gICAgICAgIGlmICh0aGlzLmRhdGFzZXQudXJsICYmIHRoaXMuZGF0YXNldC51cmwgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgc21hc2gucm91dGVyLmRpc3BsYXlVUkwodGhpcy5kYXRhc2V0LnVybCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNtYXNoLm9uKHRhYiwgJy5jbG9zZScsICdvbmNsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHRoaXMucGFyZW50RWxlbWVudCwgJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50LnByZXZpb3VzU2libGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wcmV2aW91c1NpYmxpbmcub25jbGljaygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBhcmVudEVsZW1lbnQubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQubmV4dFNpYmxpbmcub25jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYW5lID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyB0aGlzLnBhcmVudEVsZW1lbnQuZGF0YXNldC5pZCArICdcIl0nKSkge1xuICAgICAgICAgICAgcGFuZS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHBhbmUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMucGFyZW50RWxlbWVudCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG4gICAgdGFicy5hcHBlbmRDaGlsZCh0YWIpO1xuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHBhbmUgd2l0aCB0aGUgcHJvdmlkZWQgY29udGVudFxuICAgIHZhciBwYW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwYW5lLmNsYXNzTmFtZSA9ICdzbWFzaC1wYW5lJztcbiAgICBwYW5lLmRhdGFzZXQuaWQgPSBpZDtcbiAgICBwYW5lLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgcGFuZXNDb250YWluZXIuYXBwZW5kQ2hpbGQocGFuZSk7XG59O1xuIl19
