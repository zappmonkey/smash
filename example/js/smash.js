window.onload=function(s){smash.init()};var smash={init:function(){var s=document.querySelector(".smash-searchbox input");s&&(s.onfocus=function(){smash.class.add(document.querySelector(".smash-header"),"is-focussed")},s.onblur=function(){smash.class.remove(document.querySelector(".smash-header"),"is-focussed")});var a=document.querySelector(".smash-icon-bar .lock");a&&(a.onclick=function(){smash.class.toggle(this,"unlock"),smash.class.toggle(document.querySelector(".smash-icon-bar"),"is-unlocked")});var t=document.querySelector(".smash-icon-bar");t&&smash.class.add(t,"is-unlocked")}};smash.class={},smash.class.add=function(s,a){s.classList?s.classList.add(a):s.className+=" "+a},smash.class.remove=function(s,a){s.classList?s.classList.remove(a):s.className=s.className.replace(a,"")},smash.class.has=function(s,a){return(" "+s.className+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" ")>-1},smash.class.toggle=function(s,a){smash.class.has(s,a)?smash.class.remove(s,a):smash.class.add(s,a)},smash.router={__parseRouteRegex:/{(.*?)}/gi,__dynamicParts:[],__routes:{static:[],dynamic:[]}},smash.router.add=function(s,a){var t=smash.router.parseRoute(s);return t.regex?(t.callback=a,smash.router.__routes.dynamic[t.depth]||(smash.router.__routes.dynamic[t.depth]=[]),smash.router.__routes.dynamic[t.depth][t.numVars]||(smash.router.__routes.dynamic[t.depth][t.numVars]=[]),void smash.router.__routes.dynamic[t.depth][t.numVars].push(t)):void(smash.router.__routes.static[s]=a)},smash.router.set=function(s){window.history.pushState("","",s),window.dispatchEvent(new Event("popstate"))},smash.router.redirect=function(s){window.location=s},smash.router.handleNotFound=function(s){console.log("route: "+JSON.stringify(s)+" does not exist")},smash.router.run=function(){window.onpopstate=function(s){smash.router.execute()},smash.router.execute()},smash.router.execute=function(){var s=this.getPath();if(this.__routes.static[s.path])return void this.__routes.static[s.path]();var a=s.path.split("/").length-1;if(this.__routes.dynamic[a]){var t,e,r={};for(var o in this.__routes.dynamic[a])for(var n in this.__routes.dynamic[a][o]){var t=this.__routes.dynamic[a][o][n];if(e=s.path.match(t.regex)){for(var u=0;u<t.numVars;u++)r[t.vars[u]]=e[u+1];return void t.callback(r)}}}smash.router.handleNotFound(s)},smash.router.getPath=function(){var s=document.createElement("a");return s.href=window.location,{host:s.hostname,path:s.pathname}},smash.router.parseRoute=function(s){"/"!=s.substring(0,1)&&(s="/"+s),"/"==s.substring(s.length-2)&&(s="/"+s);var a={path:s,depth:s.split("/").length-1,vars:[],numVars:0};if(smash.router.__dynamicParts=s.match(smash.router.__parseRouteRegex),void 0!=smash.router.__dynamicParts&&null!=smash.router.__dynamicParts){for(var t="^"+s.replace(/\//gi,"\\/")+"$",e=0;e<smash.router.__dynamicParts.length;e++)a.numVars++,a.vars.push(smash.router.__dynamicParts[e].substring(1,smash.router.__dynamicParts[e].length-1)),t=t.replace(smash.router.__dynamicParts[e],"(.*?)");a.regex=new RegExp(t,"i")}return a};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNtYXNoLmpzIiwiY2xhc3MuanMiLCJyb3V0ZXIuanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwiZSIsInNtYXNoIiwiaW5pdCIsInNzYiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm9uZm9jdXMiLCJjbGFzcyIsImFkZCIsIm9uYmx1ciIsInJlbW92ZSIsInNpYmwiLCJvbmNsaWNrIiwidG9nZ2xlIiwidGhpcyIsInNpYiIsImVsIiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwicmVwbGFjZSIsImhhcyIsImluZGV4T2YiLCJyb3V0ZXIiLCJfX3BhcnNlUm91dGVSZWdleCIsIl9fZHluYW1pY1BhcnRzIiwiX19yb3V0ZXMiLCJzdGF0aWMiLCJkeW5hbWljIiwicGF0aCIsImNhbGxiYWNrIiwicm91dGUiLCJwYXJzZVJvdXRlIiwicmVnZXgiLCJkZXB0aCIsIm51bVZhcnMiLCJwdXNoIiwic2V0IiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsInJlZGlyZWN0IiwibG9jYXRpb24iLCJoYW5kbGVOb3RGb3VuZCIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwicnVuIiwib25wb3BzdGF0ZSIsImV2ZW50IiwiZXhlY3V0ZSIsImdldFBhdGgiLCJzcGxpdCIsImxlbmd0aCIsIm1hdGNoZXMiLCJkYXRhIiwidmFyTnVtIiwiaXRlbSIsIm1hdGNoIiwiaSIsInZhcnMiLCJsIiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJob3N0IiwiaG9zdG5hbWUiLCJwYXRobmFtZSIsInN1YnN0cmluZyIsInVuZGVmaW5lZCIsIlJlZ0V4cCJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQUFDLE9BQUEsU0FBQUMsR0FDQUMsTUFBQUMsT0FHQSxJQUFBRCxRQUNBQyxLQUFBLFdBQ0EsR0FBQUMsR0FBQUMsU0FBQUMsY0FBQSx5QkFDQUYsS0FDQUEsRUFBQUcsUUFBQSxXQUNBTCxNQUFBTSxNQUFBQyxJQUFBSixT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dEIsRUFBQUEsRUFBQWIsUUFBQWxCLE1BQUFxQixPQUFBRSxlQUFBb0MsR0FBQSxRQUVBOUIsR0FBQUUsTUFBQSxHQUFBc0MsUUFBQXRDLEVBQUEsS0FFQSxNQUFBRiIsImZpbGUiOiJzbWFzaC5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbihlKXtcbiAgICBzbWFzaC5pbml0KCk7XG59XG5cbnZhciBzbWFzaCA9IHtcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNzYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2VhcmNoYm94IGlucHV0XCIpO1xuICAgICAgICBpZiAoc3NiKSB7XG4gICAgICAgICAgICBzc2Iub25mb2N1cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLWhlYWRlclwiKSwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc3NiLm9uYmx1ciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLWhlYWRlclwiKSwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBzaWJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1pY29uLWJhciAubG9ja1wiKTtcbiAgICAgICAgaWYgKHNpYmwpIHtcbiAgICAgICAgICAgIHNpYmwub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLnRvZ2dsZSh0aGlzLCAndW5sb2NrJyk7XG4gICAgICAgICAgICAgICAgc21hc2guY2xhc3MudG9nZ2xlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtaWNvbi1iYXJcIiksICdpcy11bmxvY2tlZCcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2liID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1pY29uLWJhclwiKTtcbiAgICAgICAgaWYgKHNpYikge1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKHNpYiwgJ2lzLXVubG9ja2VkJyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuIiwic21hc2guY2xhc3MgPSB7fTtcblxuc21hc2guY2xhc3MuYWRkID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIGVsLmNsYXNzTGlzdCA/IGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKSA6IGVsLmNsYXNzTmFtZSArPSAoJyAnICsgY2xhc3NOYW1lKTtcbn07XG5cbnNtYXNoLmNsYXNzLnJlbW92ZSA9IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpIHtcbiAgICBlbC5jbGFzc0xpc3QgPyBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSkgOiBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShjbGFzc05hbWUsICcnKTtcbn07XG5cbnNtYXNoLmNsYXNzLmhhcyA9IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpIHtcbiAgICByZXR1cm4gKChcIiBcIiArIGVsLmNsYXNzTmFtZSArIFwiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLCBcIiBcIikuaW5kZXhPZihcIiBcIiArIGNsYXNzTmFtZSArIFwiIFwiKSA+IC0xKTtcbn07XG5cbnNtYXNoLmNsYXNzLnRvZ2dsZSA9IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpIHtcbiAgICBzbWFzaC5jbGFzcy5oYXMoZWwsIGNsYXNzTmFtZSkgPyBzbWFzaC5jbGFzcy5yZW1vdmUoZWwsIGNsYXNzTmFtZSkgOiBzbWFzaC5jbGFzcy5hZGQoZWwsIGNsYXNzTmFtZSk7XG59O1xuIiwic21hc2gucm91dGVyID0ge1xuICAgIF9fcGFyc2VSb3V0ZVJlZ2V4OiAveyguKj8pfS9pZyxcbiAgICBfX2R5bmFtaWNQYXJ0czogW10sXG4gICAgX19yb3V0ZXM6IHtcbiAgICAgICAgc3RhdGljOiBbXSxcbiAgICAgICAgZHluYW1pYzogW11cbiAgICB9XG59O1xuXG5zbWFzaC5yb3V0ZXIuYWRkID0gZnVuY3Rpb24ocGF0aCwgY2FsbGJhY2spIHtcbiAgICB2YXIgcm91dGUgPSBzbWFzaC5yb3V0ZXIucGFyc2VSb3V0ZShwYXRoKTtcbiAgICBpZiAocm91dGUucmVnZXgpIHtcbiAgICAgICAgcm91dGUuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgaWYgKCFzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF0pIHtcbiAgICAgICAgICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdKSB7XG4gICAgICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10ucHVzaChyb3V0ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc21hc2gucm91dGVyLl9fcm91dGVzLnN0YXRpY1twYXRoXSA9IGNhbGxiYWNrO1xufTtcblxuc21hc2gucm91dGVyLnNldCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKFwiXCIsIFwiXCIsIHJvdXRlKTtcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3BvcHN0YXRlJykpO1xufTtcblxuc21hc2gucm91dGVyLnJlZGlyZWN0ID0gZnVuY3Rpb24ocm91dGUpIHtcbiAgICB3aW5kb3cubG9jYXRpb24gPSByb3V0ZTtcbn07XG5cbnNtYXNoLnJvdXRlci5oYW5kbGVOb3RGb3VuZCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgY29uc29sZS5sb2coXCJyb3V0ZTogXCIgKyBKU09OLnN0cmluZ2lmeShyb3V0ZSkgKyBcIiBkb2VzIG5vdCBleGlzdFwiKTtcbn07XG5cbnNtYXNoLnJvdXRlci5ydW4gPSBmdW5jdGlvbigpIHtcbiAgICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHNtYXNoLnJvdXRlci5leGVjdXRlKCk7XG4gICAgfTtcbiAgICBzbWFzaC5yb3V0ZXIuZXhlY3V0ZSgpO1xufVxuXG5zbWFzaC5yb3V0ZXIuZXhlY3V0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwYXRoID0gdGhpcy5nZXRQYXRoKCk7XG4gICAgaWYgKHRoaXMuX19yb3V0ZXMuc3RhdGljW3BhdGgucGF0aF0pIHtcbiAgICAgICAgdGhpcy5fX3JvdXRlcy5zdGF0aWNbcGF0aC5wYXRoXSgpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBkZXB0aCA9IHBhdGgucGF0aC5zcGxpdChcIi9cIikubGVuZ3RoLTE7XG4gICAgaWYgKHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF0pIHtcbiAgICAgICAgdmFyIHJvdXRlO1xuICAgICAgICB2YXIgbWF0Y2hlcztcbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgdmFyTnVtIGluIHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF0pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gdGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXVt2YXJOdW1dKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdXRlID0gdGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXVt2YXJOdW1dW2l0ZW1dO1xuICAgICAgICAgICAgICAgIG1hdGNoZXMgPSBwYXRoLnBhdGgubWF0Y2gocm91dGUucmVnZXgpO1xuICAgICAgICAgICAgICAgIGlmICghbWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHJvdXRlLm51bVZhcnM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhW3JvdXRlLnZhcnNbaV1dID0gbWF0Y2hlc1tpKzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByb3V0ZS5jYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc21hc2gucm91dGVyLmhhbmRsZU5vdEZvdW5kKHBhdGgpO1xufTtcblxuc21hc2gucm91dGVyLmdldFBhdGggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgIGwuaHJlZiA9IHdpbmRvdy5sb2NhdGlvbjtcbiAgICByZXR1cm4ge2hvc3Q6IGwuaG9zdG5hbWUsIHBhdGg6IGwucGF0aG5hbWV9O1xufTtcblxuc21hc2gucm91dGVyLnBhcnNlUm91dGUgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgaWYgKHBhdGguc3Vic3RyaW5nKDAsMSkgIT0gXCIvXCIpIHtcbiAgICAgICAgcGF0aCA9IFwiL1wiICsgcGF0aDtcbiAgICB9XG4gICAgaWYgKHBhdGguc3Vic3RyaW5nKHBhdGgubGVuZ3RoLTIpID09IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG4gICAgfVxuICAgIHZhciByb3V0ZSA9IHtcbiAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgZGVwdGg6IChwYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGggLSAxKSxcbiAgICAgICAgdmFyczogW10sXG4gICAgICAgIG51bVZhcnM6IDBcbiAgICB9O1xuICAgIHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cyA9IHBhdGgubWF0Y2goc21hc2gucm91dGVyLl9fcGFyc2VSb3V0ZVJlZ2V4KTtcbiAgICBpZiAoc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzICE9IHVuZGVmaW5lZCAmJiBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMgIT0gbnVsbCkge1xuICAgICAgICB2YXIgcmVnZXggPSBcIl5cIiArIHBhdGgucmVwbGFjZSgvXFwvL2lnLCBcIlxcXFwvXCIpICsgXCIkXCI7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJvdXRlLm51bVZhcnMrKztcbiAgICAgICAgICAgIHJvdXRlLnZhcnMucHVzaChzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0uc3Vic3RyaW5nKDEsIHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0c1tpXS5sZW5ndGgtMSkpO1xuICAgICAgICAgICAgcmVnZXggPSByZWdleC5yZXBsYWNlKHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0c1tpXSwgXCIoLio/KVwiKTtcbiAgICAgICAgfVxuICAgICAgICByb3V0ZS5yZWdleCA9IG5ldyBSZWdFeHAocmVnZXgsICdpJyk7XG4gICAgfVxuICAgIHJldHVybiByb3V0ZTtcbn07XG4iXX0=
