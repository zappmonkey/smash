window.addEventListener("load",function(e){smash.init()},!1);var smash={};smash.init=function(){smash.config.init(),smash.sidebar.init(),smash.searchbox.init(),smash.workspace.init(),smash.input.init()},smash.get=function(e,s){try{return e.querySelector(s)}catch(e){console.log(e)}},smash.getAll=function(e,s){try{return e.querySelectorAll(s)}catch(e){console.log(e)}},smash.hide=function(e,s){var t;t=s&&"string"==typeof s?smash.getAll(e,s):[e];for(var a=0;a<t.length;a++)t[a].style.display="none"},smash.nextVisible=function(e){for(;e=e.nextSibling;)if("none"!=e.style.display)return e},smash.firstVisible=function(e){if("none"!=(e=e.parentElement.firstChild).style.display)return e;for(;e=e.nextSibling;)if("none"!=e.style.display)return e},smash.previousVisible=function(e){for(;e=e.previousSibling;)if("none"!=e.style.display)return e},smash.lastVisible=function(e){if("none"!=(e=e.parentElement.lastChild).style.display)return e;for(;e=e.previousSibling;)if("none"!=e.style.display)return e},smash.show=function(e,s){var t;t=s&&"string"==typeof s?smash.getAll(e,s):[e];for(var a=0;a<t.length;a++)t[a].style.display=""},smash.remove=function(e){e.parentNode.removeChild(e)},smash.on=function(e,s,t,a){for(var n=smash.getAll(e,s),r=0;r<n.length;r++)n[r][t]=a},smash.fuzzyCompare=function(e,s){if(void 0==s||void 0==e)return!1;var t=".*?"+e.toLowerCase().replace(/-/g,"\\-").split("").join(".*?")+".*?";return s.toLowerCase().match(t)},smash.findNextTabStop=function(e,s){var t=smash.getAll(e,".smash-input, .smash-button, .smash-select, .smash-textarea, .smash-checkbox"),a=Array.prototype.filter.call(t,function(e){return e.tabIndex>="0"});return a[a.indexOf(s)+1]||a[0]},smash.isEmpty=function(e){switch(e){case void 0:case null:case"":return!0}return!1},smash.ajax={_headers_:[]},smash.ajax.addHeader=function(e,s){smash.ajax._headers_[e]=s},smash.ajax.removeHeader=function(e){delete smash.ajax._headers_[e]},smash.ajax.onerror=function(e){console.log(e)},smash.ajax.onunauthorized=function(e){smash.ajax.onerror(e)},smash.ajax._xhr_=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,s=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],t=0;t<s.length;t++)try{e=new ActiveXObject(s[t]);break}catch(e){}return e},smash.ajax.send=function(e,s,t,a,n,r,o){void 0===o&&(o=!0),void 0===r&&(r=smash.ajax.onerror);var i=smash.ajax._xhr_();i.responseType=n,i.onreadystatechange=function(){if(4==i.readyState)switch(i.status){case 200:case 201:s&&s(i.response);break;case 401:smash.ajax.onunauthorized(i.response);break;default:r(i.response)}},i.open(t,e,o),"json"==n?i.setRequestHeader("Content-type","application/json"):"POST"==t&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var l in smash.ajax._headers_)i.setRequestHeader(l,smash.ajax._headers_[l]);i.send(a)},smash.ajax.get=function(e,s,t,a,n,r){var o=[];for(var i in t)o.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));smash.ajax.send(e+(o.length?"?"+o.join("&"):""),s,"GET",null,a,n,r)},smash.ajax.post=function(e,s,t,a,n,r){var o;if(t)if("json"!=a){var i=[];for(var l in t)i.push(encodeURIComponent(l)+"="+encodeURIComponent(t[l]));o=i.join("&")}else o=JSON.stringify(t);smash.ajax.send(e,s,"POST",o,a,n,r)},smash.class={},smash.class.add=function(e,s){smash.class.has(e,s)||(e.classList?e.classList.add(s):e.className+=" "+s)},smash.class.remove=function(e,s){smash.class.has(e,s)&&(e.classList?e.classList.remove(s):e.className=e.className.replace(s,""))},smash.class.has=function(e,s){return(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(" "+s+" ")>-1},smash.class.toggle=function(e,s){smash.class.has(e,s)?smash.class.remove(e,s):smash.class.add(e,s)},smash.class.toggleAll=function(e,s,t){if(el=smash.getAll(e,s))for(var a in el)smash.class.toggle(el[a],t)},smash.config={_values_:{_sidebar_lock_:!1}},smash.config.init=function(){var e=smash.storage.get("config");e&&(smash.config._values_=e)},smash.config.get=function(e){var s="_"+e+"_";if(s in smash.config._values_)return smash.config._values_[s];throw new smash.Exception("001",'Invalid config option "'+e+'"')},smash.config.set=function(e,s){var t="_"+e+"_";if(!t in smash.config._values_)throw new smash.Exception("001",'Invalid config option "'+e+'"');smash.config._values_[t]=s,smash.storage.set("config",smash.config._values_)},smash.contextmenu={},smash.contextmenu.new=function(e,s){(t=smash.get(document,"#smash-context-menu"))&&smash.remove(t);var t=document.createElement("div");t.id="smash-context-menu";var a="<ul class='clickable'>";for(i=0;i<s.length;i++)"seperator"!=s[i]?a+='<li class="ctx_item_'+i+'">'+s[i].label+"</li>":a+='<li class="seperator"></li>';a+="</ul>",t.innerHTML=a,document.body.appendChild(t);var n;for(i=0;i<s.length;i++)"seperator"!=s[i]&&((n=smash.get(t,"li.ctx_item_"+i)).callback=s[i].callback,n.onmousedown=function(e){this.callback(e),smash.contextmenu.close(e)});var r=e.pageY;return r+t.offsetHeight>window.innerHeight&&(r=window.innerHeight-t.offsetHeight-20),t.style.top=r,t.style.left=e.pageX,e.preventDefault(),document.onclick=smash.contextmenu.close,!1},smash.contextmenu.close=function(e){e.preventDefault(),(ctx=smash.get(document,"#smash-context-menu"))&&smash.remove(ctx),document.onclick=void 0},smash.cookie={},smash.cookie.set=function(e,s,t){var a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3);var n="expires="+a.toUTCString();document.cookie=e+"="+s+";"+n+";path=/"},smash.cookie.get=function(e){for(var e=e+"=",s=decodeURIComponent(document.cookie).split(";"),t=0;t<s.length;t++){for(var a=s[t];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return""},smash.dialog={},smash.dialog.new=function(e){var s=smash.dialog.checkBackdrop(),t=document.createElement("div");t.className="smash-dialog",t.innerHTML=e,s.appendChild(t)},smash.dialog.checkBackdrop=function(){if(e=smash.get(document,".smash-dialog-backdrop"))return(dialog=smash.get(document,".smash-dialog-backdrop .smash-dialog"))&&e.removeChild(dialog),e;var e=document.createElement("div");return e.className="smash-dialog-backdrop",e.innerHTML='<div class="smash-dialog-background"></div>',smash.get(e,".smash-dialog-background").onclick=smash.dialog.close,smash.get(document,"body").appendChild(e),e},smash.dialog.close=function(){(dialog=smash.get(document,".smash-dialog-backdrop"))&&smash.get(document,"body").removeChild(dialog)},smash.Exception=function(e,s){this.value=e,this.message=s,this.toString=function(){return"SmashException "+this.value+": "+this.message}},smash.input={},smash.input.init=function(){for(var e,s=document.querySelectorAll(".smash-input input, .smash-textarea textarea"),t=0;t<s.length;t++)e=s[t],smash.class.has(e.parentElement,"smash-initialised")||(e.parentElement.getName=function(){return this.querySelector("input").getAttribute("name")},e.parentElement.setValue=function(s){(e=this.querySelector("input"))?(e.value=s,e.onkeyup&&e.onkeyup()):(e=this.querySelector("textarea"))&&(e.value=s,e.onkeyup&&e.onkeyup())},e.parentElement.getValue=function(){if(e=this.querySelector("input"))return(e=this.querySelector("input")).value;if(e=this.querySelector("textarea")){var e=this.querySelector("textarea");return e.value}return null},e.parentElement.onfocus=function(s){(e=this.querySelector("input"))?e.focus():(e=this.querySelector("textarea"))&&e.focus()},smash.class.has(e.parentElement,"has-floating-label")&&(smash.class.remove(e.parentElement,"has-floating-label"),smash.class.add(e.parentElement,"floating-label"),(r=document.createElement("label")).innerHTML=e.placeholder,e.parentElement.appendChild(r),e.onkeyup=function(e){var s=this.parentElement.querySelector("label");s&&(""!=this.value?smash.class.add(s,"show"):smash.class.remove(s,"show"))}),e.parentElement.getAttribute("value")&&e.parentElement.setValue(e.parentElement.getAttribute("value")),smash.class.add(e.parentElement,"smash-initialised"));for(var a,n=document.querySelectorAll(".smash-select select"),t=0;t<n.length;t++)if(a=n[t],!smash.class.has(a.parentElement,"smash-initialised")){if(smash.class.has(a.parentElement,"has-floating-label")){smash.class.remove(a.parentElement,"has-floating-label"),smash.class.add(a.parentElement,"floating-label");var r=document.createElement("label");r.innerHTML=a.getAttribute("placeholder"),a.parentElement.appendChild(r)}a.parentElement.getName=function(){return this.querySelector("select").getAttribute("name")},a.parentElement.setValue=function(e){smash.class.remove(this,"is-focussed");var s=this.querySelector("select"),t=this.querySelector("input"),a=s.value;if(s.value=e,""!=s.value&&s.selectedIndex>-1){var n=s.options[s.selectedIndex].text;n&&""!=n&&"&nbsp;"!=n?t.value=n:(t.value="",t.placeholder=s.getAttribute("placeholder"))}else t.value="",t.placeholder=s.getAttribute("placeholder");t.focus(),t.blur(),a!=e&&((selected=smash.get(this.parentElement,".selected"))&&smash.class.remove(selected,"selected"),""!=e&&(selected=smash.get(this,'li[value="'+e+'"]'))&&smash.class.add(selected,"selected"),s.onchange&&s.onchange(),this.onchange&&this.onchange()),this.checkLabel()},a.parentElement.onfocus=function(e){this.querySelector("input").focus(e)},a.parentElement.getValue=function(){var e=this.querySelector("select");return-1==e.selectedIndex?null:e.options[e.selectedIndex].value},a.parentElement.reset=function(){smash.get(this,"input").value=this.getText(),this.checkLabel(),smash.get(this,"input").blur(),(hover=smash.get(this,"ul li.hover"))&&smash.class.remove(hover,"hover")},a.parentElement.checkLabel=function(){var e=this.querySelector("label");e&&(this.getValue()&&""!=this.getValue()?smash.class.add(e,"show"):smash.class.remove(e,"show"))},a.parentElement.getText=function(){var e=this.querySelector("select");return-1==e.selectedIndex?null:e.options[e.selectedIndex].innerHTML},(e=document.createElement("input")).type="text",e.placeholder=a.getAttribute("placeholder"),e.setAttribute("readonly","readonly"),a.parentElement.appendChild(e);var o,i=a.querySelectorAll("option"),l=document.createElement("ul");l.onmouseup=function(e){e.stopPropagation()};for(var c=0;c<i.length;c++){var h=i[c];if((o=h.getAttribute("value"))||""===o){var m=document.createElement("li");m.setAttribute("value",h.value),m.innerHTML=""==h.innerHTML?"&nbsp;":h.innerHTML,l.appendChild(m),m.onmousedown=function(e){return this.parentElement.parentElement.setValue(this.getAttribute("value")),(next=smash.findNextTabStop(this.parentElement.parentElement.parentElement,this.parentElement.parentElement))&&next.focus(),e.stopPropagation(),e.preventDefault(),window.onmouseup&&window.onmouseup(),!1}}}a.parentElement.appendChild(l),e.onfocus=function(e){smash.class.has(this.parentElement,"is-focussed")||(this.parentElement.checkLabel(),this.parentElement.click())},e.onblur=function(e){window.onmouseup&&window.onmouseup()},a.parentElement.onclick=function(){smash.class.add(this,"is-focussed");var e=smash.get(this,"input"),s=smash.get(this,"select"),t=this;e.value&&""!=e.value?e.setAttribute("placeholder",e.value):e.setAttribute("placeholder",s.getAttribute("placeholder")),e.removeAttribute("readonly"),e.blur(),e.value="",window.onmouseup=function(){if(window.onmouseup=null,e.onkeyup=null,e.setAttribute("readonly","readonly"),t.reset(),items=smash.getAll(t,"ul li")){for(var s=0;s<items.length;s++)items[s].style.display="";smash.show(t,"ul")}return smash.class.remove(t,"is-focussed"),!1},e.onkeyup=function(e){switch(e.keyCode){case 9:return!0;case 13:case 39:return(hover=smash.get(t,"ul li.hover"))&&hover.onmousedown(e),!1;case 38:if(hover=smash.get(t,"ul li.hover"))smash.class.remove(hover,"hover"),(previous=smash.previousVisible(hover))?(smash.class.add(previous,"hover"),previous.parentElement.scrollTop=previous.offsetTop):(last=smash.lastVisible(hover))&&(smash.class.add(last,"hover"),last.parentElement.scrollTop=last.parentElement.scrollHeight);else{s=smash.get(t,"ul li");(last=smash.lastVisible(s))&&(smash.class.add(last,"hover"),last.parentElement.scrollTop=last.parentElement.scrollHeight)}return!1;case 40:if(hover=smash.get(t,"ul li.hover"))smash.class.remove(hover,"hover"),(next=smash.nextVisible(hover))?(smash.class.add(next,"hover"),next.parentElement.scrollTop=next.offsetTop):(next=smash.firstVisible(hover))&&(smash.class.add(next,"hover"),next.parentElement.scrollTop=0);else{var s=smash.get(t,"ul li");(next=smash.firstVisible(s))&&(smash.class.add(next,"hover"),next.parentElement.scrollTop=0)}return!1;case 27:this.value="",this.blur(),this.focus()}var a=this.value.replace(/[^a-zA-Z0-9_ ]/g,"");if(items=smash.getAll(t,"ul li")){smash.show(t,"ul");for(var n,r=!1,o=0;o<items.length;o++)n=items[o],""==a||smash.fuzzyCompare(a,n.innerHTML)?(n.style.display="",r=!0):n.style.display="none";r||smash.hide(t,"ul")}return!0},e.focus()},a.parentElement.getAttribute("value")&&a.parentElement.setValue(a.parentElement.getAttribute("value")),a.parentElement.checkLabel(),smash.class.add(a.parentElement,"smash-initialised")}smash.input.checkboxInit()},smash.input.checkboxInit=function(){for(var e,s=document.querySelectorAll(".smash-checkbox input"),t=0;t<s.length;t++)if(e=s[t],!smash.class.has(e.parentElement,"smash-initialised")){var a=document.createElement("span");if(a.className="checks",a.innerHTML='<i class="material-icons">check_box_outline_blank</i><i class="material-icons checked">check_box</i>',e.parentElement.appendChild(a),label=e.getAttribute("label")){var n=document.createElement("span");n.className="label",n.innerHTML=label,e.parentElement.appendChild(n)}smash.class.add(e.parentElement,"smash-initialised"),e.checked=smash.class.has(e.parentElement,"checked"),e.parentElement.onclick=function(){smash.class.toggle(this,"checked"),smash.get(this,"input").checked=smash.class.has(this,"checked"),this.onchange&&this.onchange(smash.class.has(this,"checked"))},e.parentElement.getName=function(){return this.querySelector("input").getAttribute("name")},e.parentElement.getValue=function(){return smash.class.has(this,"checked")},e.parentElement.setValue=function(e){smash.class.has(this,"checked")!=e&&this.onclick()}}},smash.router={__parseRouteRegex:/{(.*?)}/gi,__dynamicParts:[],__baseDirectory:null,__routes:{static:[],dynamic:[]}},smash.router.add=function(e,s){var t=smash.router.parseRoute(e);if(t.regex)return t.callback=s,smash.router.__routes.dynamic[t.depth]||(smash.router.__routes.dynamic[t.depth]=[]),smash.router.__routes.dynamic[t.depth][t.numVars]||(smash.router.__routes.dynamic[t.depth][t.numVars]=[]),void smash.router.__routes.dynamic[t.depth][t.numVars].push(t);smash.router.__routes.static[e]=s},smash.router.set=function(e){smash.router.displayURL(e),window.dispatchEvent(new Event("popstate"))},smash.router.displayURL=function(e){e=smash.router.addBaseDirectory(e),window.history.pushState("","",e)},smash.router.redirect=function(e){e.search(/^http[s]?:\/\//)||(e=smash.router.addBaseDirectory(e)),window.location=e},smash.router.handleNotFound=function(e){console.log("route: "+JSON.stringify(e)+" does not exist")},smash.router.run=function(){window.onpopstate=function(e){smash.router.execute()},smash.router.execute()},smash.router.execute=function(){var e=this.getPath();if(this.__routes.static[e.path])this.__routes.static[e.path]();else{var s=e.path.split("/").length-1;if(this.__routes.dynamic[s]){var t,a={};for(var n in this.__routes.dynamic[s])for(var r in this.__routes.dynamic[s][n]){var o=this.__routes.dynamic[s][n][r];if(t=e.path.match(o.regex)){for(var i=0;i<o.numVars;i++)a[o.vars[i]]=t[i+1];return void o.callback(a)}}}smash.router.handleNotFound(e)}},smash.router.getPath=function(){var e=document.createElement("a");return e.href=window.location,{host:e.hostname,path:smash.router.checkPath(e.pathname)}},smash.router.parseRoute=function(e){var s={path:e=smash.router.cleanPath(e),depth:e.split("/").length-1,vars:[],numVars:0};if(smash.router.__dynamicParts=e.match(smash.router.__parseRouteRegex),void 0!=smash.router.__dynamicParts&&null!=smash.router.__dynamicParts){for(var t="^"+e.replace(/\//gi,"\\/")+"$",a=0;a<smash.router.__dynamicParts.length;a++)s.numVars++,s.vars.push(smash.router.__dynamicParts[a].substring(1,smash.router.__dynamicParts[a].length-1)),t=t.replace(smash.router.__dynamicParts[a],"(.*?)");s.regex=new RegExp(t,"i")}return s},smash.router.setBaseDirectory=function(e){smash.router.__baseDirectory=e?smash.router.cleanPath(e):void 0},smash.router.addBaseDirectory=function(e){return smash.router.__baseDirectory?(-1===e.indexOf(smash.router.__baseDirectory)&&(e=smash.router.__baseDirectory+e),e):e},smash.router.cleanPath=function(e){return e.length>0&&"/"!=e.substring(0,1)&&(e="/"+e),e.length>2&&"/"==e.substring(e.length-2)&&(e=e.substring(0,e.length-2)),e},smash.router.checkPath=function(e){return e=smash.router.cleanPath(e),smash.router.__baseDirectory&&-1!==e.indexOf(smash.router.__baseDirectory)&&(e=e.replace(smash.router.__baseDirectory,"")),e},smash.router.queryParam=function(e){var s="[\\?&]"+e+"=([^&#]*)",t=new RegExp(s).exec(window.location.search);if(null!=t)return t[1]},smash.router.queryParams=function(e){var s=e?e.split("?")[1]:window.location.search.slice(1),t={};if(s)for(var a=(s=s.split("#")[0]).split("&"),n=0;n<a.length;n++){var r=a[n].split("="),o=void 0,i=r[0].replace(/\[\d*\]/,function(e){return o=e.slice(1,-1),""}),l=void 0===r[1]||r[1];i=i.toLowerCase(),l=l.toLowerCase(),t[i]?("string"==typeof t[i]&&(t[i]=[t[i]]),void 0===o?t[i].push(l):t[i][o]=l):t[i]=l}return t},smash.searchbox={i_:!1,minAutoCompleteLength:3,onfocus:void 0,onblur:void 0,onchange:void 0},smash.searchbox.init=function(){if(!smash.searchbox.i_){var e=document.querySelector(".smash-searchbox input");e&&(e.onfocus=function(){0==this.value.length&&smash.searchbox.results('<div class="smash-instruction">Start typing to find results</div>'),smash.class.add(document.querySelector(".smash-header"),"is-focussed"),smash.class.add(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onfocus&&smash.searchbox.onfocus()},e.onblur=function(){smash.class.remove(document.querySelector(".smash-header"),"is-focussed"),smash.class.remove(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onblur&&smash.searchbox.onblur()},e.onkeyup=function(e){switch(e.keyCode){case 27:return this.value="",void this.blur()}this.value.length<smash.searchbox.minAutoCompleteLength||smash.searchbox.onchange&&smash.searchbox.onchange(this.value)},smash.searchbox.i_=!0)}},smash.searchbox.empty=function(){return!(i=smash.get(document,".smash-searchbox input"))||0==i.value.length},smash.searchbox.appendTo=function(e){var s=document.createElement("div");s.innerHTML=e,document.querySelector(".smash-searchbox .smash-searchbox-results").appendChild(s)},smash.searchbox.results=function(e){document.querySelector(".smash-searchbox .smash-searchbox-results").innerHTML=e},smash.sidebar={i_:!1},smash.sidebar.init=function(){if(!smash.sidebar.i_){var e=document.querySelector(".smash-sidebar .lock");if(e){e.onclick=function(){smash.sidebar.toggleLock()};var s=document.querySelector(".smash-sidebar");smash.class.add(s,"is-unlocked"),smash.sidebar.i_=!0,smash.config.get("sidebar_lock")&&smash.sidebar.toggleLock()}}},smash.sidebar.toggleLock=function(){smash.sidebar.i_&&(smash.class.toggle(document.querySelector(".smash-sidebar .lock"),"unlock"),smash.class.toggle(document.querySelector(".smash-sidebar"),"is-unlocked"),smash.config.set("sidebar_lock",!smash.class.has(document.querySelector(".smash-sidebar"),"is-unlocked")))},smash.storage={},smash.storage.set=function(e,s){localStorage.setItem(e,JSON.stringify(s))},smash.storage.unset=function(e){localStorage.removeItem(e)},smash.storage.get=function(e){var s=localStorage.getItem(e);if(s)return JSON.parse(s)},smash.storage.clear=function(){localStorage.clear()},smash.workspace={baseTitle:void 0,onlasttabclosed:void 0,_ws_:void 0,_hdr_:void 0,_sb_:void 0,_tabs_:[]},smash.workspace.init=function(){smash.workspace._ws_=document.querySelector(".smash-workspace"),smash.workspace._ws_&&(smash.workspace._hdr_=document.querySelector(".smash-header"),smash.workspace._hdr_&&smash.class.add(smash.workspace._ws_,"has-header"),smash.workspace._sb_=document.querySelector(".smash-workspace .smash-sidebar"),smash.workspace._sb_&&smash.class.add(smash.workspace._ws_,"has-sidebar"))},smash.workspace.addTab=function(e,s,t,a){if(!smash.get(document,".smash-tab-pane")){var n=smash.get(document,".smash-panel");if(!n)return void console.log("To add a tab there needs to be a panel");n.innerHTML='<div class="smash-tab-pane"><div class="smash-tabs"></div><div class="smash-panes"></div></div>'}var r=smash.get(document,".smash-tab-pane .smash-tabs"),o=smash.get(document,".smash-tab-pane .smash-panes");if(document.title=smash.workspace.createTitle(s),i=smash.get(r,'.smash-tab[data-id="'+e+'"]'))return(l=smash.get(o,'.smash-pane[data-id="'+e+'"]')).innerHTML=t,i.dataset.url=a,i.onclick(),{tab:i,pane:l};smash.hide(o,".smash-pane"),(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active");var i=document.createElement("div");i.className="smash-tab active",i.dataset.id=e,i.dataset.url=a,i.innerHTML=s+'<i class="material-icons close">close</i>',i.onclick=function(e){(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active"),smash.class.add(this,"active"),smash.hide(document,".smash-pane"),smash.show(document,'.smash-pane[data-id="'+this.dataset.id+'"]'),this.dataset.url&&"undefined"!=this.dataset.url&&smash.router.displayURL(this.dataset.url),document.title=smash.workspace.createTitle(this.innerHTML)},smash.on(i,".close","onclick",function(e){this.parentElement.onclose&&!this.parentElement.onclose()||(smash.class.has(this.parentElement,"active")&&(this.parentElement.previousSibling?this.parentElement.previousSibling.onclick():this.parentElement.nextSibling&&this.parentElement.nextSibling.onclick()),(l=smash.get(document,'.smash-pane[data-id="'+this.parentElement.dataset.id+'"]'))&&l.parentElement.removeChild(l),this.parentElement.parentElement.removeChild(this.parentElement),this.parentElement.onclosed&&this.parentElement.onclosed(),!smash.workspace.activeTab()&&smash.workspace.onlasttabclosed&&smash.workspace.onlasttabclosed(),e.stopPropagation())}),r.appendChild(i);var l=document.createElement("div");return l.className="smash-pane",l.dataset.id=e,l.innerHTML=t,o.appendChild(l),{tab:i,pane:l}},smash.workspace.activeTab=function(){var e=smash.get(document,".smash-tab.active");if(!e)return null;var s=smash.get(document,'.smash-pane[data-id="'+e.dataset.id+'"]');return s?{tab:e,pane:s}:null},smash.workspace.createTitle=function(e){var s=e.replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/gi,"");if(""==s){var t=document.createElement("div");t.innerHTML=e,(ts=smash.get(t,".title"))&&(s=ts.innerHTML),""==s&&(s="unknown")}return s+(smash.workspace.baseTitle?" | "+smash.workspace.baseTitle:"")};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNtYXNoLmpzIiwiYWpheC5qcyIsImNsYXNzLmpzIiwiY29uZmlnLmpzIiwiY29udGV4dG1lbnUuanMiLCJjb29raWUuanMiLCJkaWFsb2cuanMiLCJleGNlcHRpb24uanMiLCJpbnB1dC5qcyIsInJvdXRlci5qcyIsInNlYXJjaGJveC5qcyIsInNpZGViYXIuanMiLCJzdG9yYWdlLmpzIiwid29ya3NwYWNlLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwic21hc2giLCJpbml0IiwiY29uZmlnIiwic2lkZWJhciIsInNlYXJjaGJveCIsIndvcmtzcGFjZSIsImlucHV0IiwiZ2V0IiwicGFyZW50Iiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwiY29uc29sZSIsImxvZyIsImdldEFsbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJoaWRlIiwiZWwiLCJpIiwibGVuZ3RoIiwic3R5bGUiLCJkaXNwbGF5IiwibmV4dFZpc2libGUiLCJuZXh0U2libGluZyIsImZpcnN0VmlzaWJsZSIsInBhcmVudEVsZW1lbnQiLCJmaXJzdENoaWxkIiwicHJldmlvdXNWaXNpYmxlIiwicHJldmlvdXNTaWJsaW5nIiwibGFzdFZpc2libGUiLCJsYXN0Q2hpbGQiLCJzaG93IiwicmVtb3ZlIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwib24iLCJldmVudCIsImNhbGxiYWNrIiwiZWxlbWVudHMiLCJmdXp6eUNvbXBhcmUiLCJzZWFyY2giLCJjb21wYXJlIiwidW5kZWZpbmVkIiwicmVnZXgiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJzcGxpdCIsImpvaW4iLCJtYXRjaCIsImZpbmROZXh0VGFiU3RvcCIsImZvcm0iLCJ1bml2ZXJzZSIsImxpc3QiLCJBcnJheSIsInByb3RvdHlwZSIsImZpbHRlciIsImNhbGwiLCJpdGVtIiwidGFiSW5kZXgiLCJpbmRleE9mIiwiaXNFbXB0eSIsInZhbHVlIiwiYWpheCIsIl9oZWFkZXJzXyIsImFkZEhlYWRlciIsIm5hbWUiLCJyZW1vdmVIZWFkZXIiLCJvbmVycm9yIiwibWVzc2FnZSIsIm9udW5hdXRob3JpemVkIiwiX3hocl8iLCJYTUxIdHRwUmVxdWVzdCIsInhociIsInZlcnNpb25zIiwiQWN0aXZlWE9iamVjdCIsInNlbmQiLCJ1cmwiLCJtZXRob2QiLCJkYXRhIiwicmVzcG9uc2VUeXBlIiwiYXN5bmMiLCJ4Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlIiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJxdWVyeSIsImtleSIsInB1c2giLCJlbmNvZGVVUklDb21wb25lbnQiLCJwb3N0IiwiZGF0YVN0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJjbGFzcyIsImFkZCIsImNsYXNzTmFtZSIsImhhcyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRvZ2dsZUFsbCIsIl92YWx1ZXNfIiwiX3NpZGViYXJfbG9ja18iLCJ2Iiwic3RvcmFnZSIsIm9wdGlvbiIsIm8iLCJFeGNlcHRpb24iLCJzZXQiLCJjb250ZXh0bWVudSIsIm5ldyIsIml0ZW1zIiwiY3R4IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJsYWJlbCIsImlubmVySFRNTCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9ubW91c2Vkb3duIiwidGhpcyIsImNsb3NlIiwieSIsInBhZ2VZIiwib2Zmc2V0SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJ0b3AiLCJsZWZ0IiwicGFnZVgiLCJwcmV2ZW50RGVmYXVsdCIsIm9uY2xpY2siLCJjb29raWUiLCJleHBpcnlEYXlzIiwiZCIsIkRhdGUiLCJzZXRUaW1lIiwiZ2V0VGltZSIsImV4cGlyZXMiLCJ0b1VUQ1N0cmluZyIsImNhIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiYyIsImNoYXJBdCIsInN1YnN0cmluZyIsImRpYWxvZyIsImNvbnRlbnQiLCJiYWNrZHJvcCIsImNoZWNrQmFja2Ryb3AiLCJ0b1N0cmluZyIsImlucHV0cyIsImdldE5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJzZXRWYWx1ZSIsIm9ua2V5dXAiLCJnZXRWYWx1ZSIsIm9uZm9jdXMiLCJmb2N1cyIsInBsYWNlaG9sZGVyIiwibCIsInNlbGVjdCIsInNlbGVjdHMiLCJvbGQiLCJzZWxlY3RlZEluZGV4IiwidGV4dCIsIm9wdGlvbnMiLCJibHVyIiwic2VsZWN0ZWQiLCJvbmNoYW5nZSIsImNoZWNrTGFiZWwiLCJyZXNldCIsImdldFRleHQiLCJob3ZlciIsInR5cGUiLCJzZXRBdHRyaWJ1dGUiLCJ2YWwiLCJ1bCIsIm9ubW91c2V1cCIsInN0b3BQcm9wYWdhdGlvbiIsImoiLCJsaSIsIm5leHQiLCJjbGljayIsIm9uYmx1ciIsInNtYXNoX3NlbGVjdCIsInJlbW92ZUF0dHJpYnV0ZSIsImtleUNvZGUiLCJwcmV2aW91cyIsInNjcm9sbFRvcCIsIm9mZnNldFRvcCIsImxhc3QiLCJzY3JvbGxIZWlnaHQiLCJxIiwicmVzdWx0cyIsImNoZWNrYm94SW5pdCIsImNoZWNrYm94IiwiY2hlY2tib3hlcyIsImNoZWNrZWQiLCJyb3V0ZXIiLCJfX3BhcnNlUm91dGVSZWdleCIsIl9fZHluYW1pY1BhcnRzIiwiX19iYXNlRGlyZWN0b3J5IiwiX19yb3V0ZXMiLCJzdGF0aWMiLCJkeW5hbWljIiwicGF0aCIsInJvdXRlIiwicGFyc2VSb3V0ZSIsImRlcHRoIiwibnVtVmFycyIsImRpc3BsYXlVUkwiLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJhZGRCYXNlRGlyZWN0b3J5IiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInJlZGlyZWN0IiwibG9jYXRpb24iLCJoYW5kbGVOb3RGb3VuZCIsInJ1biIsIm9ucG9wc3RhdGUiLCJleGVjdXRlIiwiZ2V0UGF0aCIsIm1hdGNoZXMiLCJ2YXJOdW0iLCJ2YXJzIiwiaHJlZiIsImhvc3QiLCJob3N0bmFtZSIsImNoZWNrUGF0aCIsInBhdGhuYW1lIiwiY2xlYW5QYXRoIiwiUmVnRXhwIiwic2V0QmFzZURpcmVjdG9yeSIsImRpcmVjdG9yeSIsInF1ZXJ5UGFyYW0iLCJwYXJhbSIsInJlZ2V4UyIsImV4ZWMiLCJxdWVyeVBhcmFtcyIsInF1ZXJ5U3RyaW5nIiwic2xpY2UiLCJvYmoiLCJhcnIiLCJhIiwicGFyYW1OdW0iLCJwYXJhbU5hbWUiLCJwYXJhbVZhbHVlIiwiaV8iLCJtaW5BdXRvQ29tcGxldGVMZW5ndGgiLCJzc2IiLCJlbXB0eSIsImFwcGVuZFRvIiwibm9kZSIsInNpYmwiLCJ0b2dnbGVMb2NrIiwic2liIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInVuc2V0IiwicmVtb3ZlSXRlbSIsImdldEl0ZW0iLCJwYXJzZSIsImNsZWFyIiwiYmFzZVRpdGxlIiwib25sYXN0dGFiY2xvc2VkIiwiX3dzXyIsIl9oZHJfIiwiX3NiXyIsIl90YWJzXyIsImFkZFRhYiIsInRpdGxlIiwicGFuZWwiLCJ0YWJzIiwicGFuZXNDb250YWluZXIiLCJjcmVhdGVUaXRsZSIsInRhYiIsInBhbmUiLCJkYXRhc2V0IiwiYWN0aXZlIiwib25jbG9zZSIsIm9uY2xvc2VkIiwiYWN0aXZlVGFiIiwidCIsImRpdiIsInRzIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBQUMsaUJBQUEsT0FBQSxTQUFBQyxHQUNBQyxNQUFBQyxTQUNBLEdBRUEsSUFBQUQsU0FFQUEsTUFBQUMsS0FBQSxXQUNBRCxNQUFBRSxPQUFBRCxPQUNBRCxNQUFBRyxRQUFBRixPQUNBRCxNQUFBSSxVQUFBSCxPQUNBRCxNQUFBSyxVQUFBSixPQUNBRCxNQUFBTSxNQUFBTCxRQUdBRCxNQUFBTyxJQUFBLFNBQUFDLEVBQUFDLEdBQ0EsSUFDQSxPQUFBRCxFQUFBRSxjQUFBRCxHQUNBLE1BQUFWLEdBQ0FZLFFBQUFDLElBQUFiLEtBS0FDLE1BQUFhLE9BQUEsU0FBQUwsRUFBQUMsR0FDQSxJQUNBLE9BQUFELEVBQUFNLGlCQUFBTCxHQUNBLE1BQUFWLEdBQ0FZLFFBQUFDLElBQUFiLEtBS0FDLE1BQUFlLEtBQUEsU0FBQVAsRUFBQUMsR0FDQSxJQUFBTyxFQUVBQSxFQURBUCxHQUFBLGlCQUFBQSxF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TUFBQUssVUFBQStRLFlBQUEsU0FBQUosR0FDQSxJQUFBWSxFQUFBWixFQUFBcE8sUUFBQSxrQ0FBQSxJQUNBLEdBQUEsSUFBQWdQLEVBQUEsQ0FDQSxJQUFBQyxFQUFBM0ssU0FBQUMsY0FBQSxPQUNBMEssRUFBQXZLLFVBQUEwSixHQUNBYyxHQUFBOVIsTUFBQU8sSUFBQXNSLEVBQUEsYUFDQUQsRUFBQUUsR0FBQXhLLFdBRUEsSUFBQXNLLElBQ0FBLEVBQUEsV0FHQSxPQUFBQSxHQUFBNVIsTUFBQUssVUFBQW9RLFVBQUEsTUFBQXpRLE1BQUFLLFVBQUFvUSxVQUFBIiwiZmlsZSI6InNtYXNoLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKGUpe1xuICAgIHNtYXNoLmluaXQoKTtcbn0sIGZhbHNlKTtcblxudmFyIHNtYXNoID0ge307XG5cbnNtYXNoLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBzbWFzaC5jb25maWcuaW5pdCgpO1xuICAgIHNtYXNoLnNpZGViYXIuaW5pdCgpO1xuICAgIHNtYXNoLnNlYXJjaGJveC5pbml0KCk7XG4gICAgc21hc2gud29ya3NwYWNlLmluaXQoKTtcbiAgICBzbWFzaC5pbnB1dC5pbml0KCk7XG59O1xuXG5zbWFzaC5nZXQgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5nZXRBbGwgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5oaWRlID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHZhciBlbDtcbiAgICBpZiAoc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICBlbCA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBlbCA9IFtwYXJlbnRdO1xuICAgIH1cbiAgICBmb3IgKHZhciBpPTA7IGk8ZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG59O1xuXG5zbWFzaC5uZXh0VmlzaWJsZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgd2hpbGUgKGVsID0gZWwubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgaWYgKGVsLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5maXJzdFZpc2libGUgPSBmdW5jdGlvbihlbCkge1xuICAgIGVsID0gZWwucGFyZW50RWxlbWVudC5maXJzdENoaWxkO1xuICAgIGlmIChlbC5zdHlsZS5kaXNwbGF5ICE9ICdub25lJykge1xuICAgICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIHdoaWxlIChlbCA9IGVsLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIGlmIChlbC5zdHlsZS5kaXNwbGF5ID09ICdub25lJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuc21hc2gucHJldmlvdXNWaXNpYmxlID0gZnVuY3Rpb24oZWwpIHtcbiAgICB3aGlsZSAoZWwgPSBlbC5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgICAgaWYgKGVsLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5sYXN0VmlzaWJsZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50Lmxhc3RDaGlsZDtcbiAgICBpZiAoZWwuc3R5bGUuZGlzcGxheSAhPSAnbm9uZScpIHtcbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgICB3aGlsZSAoZWwgPSBlbC5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgICAgaWYgKGVsLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5zaG93ID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHZhciBlbDtcbiAgICBpZiAoc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICBlbCA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBlbCA9IFtwYXJlbnRdO1xuICAgIH1cbiAgICBmb3IgKHZhciBpPTA7IGk8ZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgIH1cbn07XG5cbnNtYXNoLnJlbW92ZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG59O1xuXG5zbWFzaC5vbiA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IsIGV2ZW50LCBjYWxsYmFjaykge1xuICAgIHZhciBlbGVtZW50cyA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8ZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxlbWVudHNbaV1bZXZlbnRdID0gY2FsbGJhY2s7XG4gICAgfVxufTtcblxuc21hc2guZnV6enlDb21wYXJlID0gZnVuY3Rpb24oc2VhcmNoLCBjb21wYXJlKSB7XG4gICAgaWYgKGNvbXBhcmUgPT0gdW5kZWZpbmVkIHx8IHNlYXJjaCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgcmVnZXggPSBcIi4qP1wiICsgc2VhcmNoLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvLS9nLCBcIlxcXFwtXCIpLnNwbGl0KFwiXCIpLmpvaW4oXCIuKj9cIikgKyBcIi4qP1wiO1xuICAgIHJldHVybiBjb21wYXJlLnRvTG93ZXJDYXNlKCkubWF0Y2gocmVnZXgpO1xufTtcblxuc21hc2guZmluZE5leHRUYWJTdG9wID0gZnVuY3Rpb24oZm9ybSwgZWwpIHtcbiAgICB2YXIgdW5pdmVyc2UgPSBzbWFzaC5nZXRBbGwoZm9ybSwgJy5zbWFzaC1pbnB1dCwgLnNtYXNoLWJ1dHRvbiwgLnNtYXNoLXNlbGVjdCwgLnNtYXNoLXRleHRhcmVhLCAuc21hc2gtY2hlY2tib3gnKTtcbiAgICB2YXIgbGlzdCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh1bml2ZXJzZSwgZnVuY3Rpb24oaXRlbSkge3JldHVybiBpdGVtLnRhYkluZGV4ID49IFwiMFwifSk7XG4gICAgdmFyIGluZGV4ID0gbGlzdC5pbmRleE9mKGVsKTtcbiAgICByZXR1cm4gbGlzdFtpbmRleCArIDFdIHx8IGxpc3RbMF07XG59O1xuXG5zbWFzaC5pc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgY2FzZSBudWxsOlxuICAgIGNhc2UgXCJcIjpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG4iLCJzbWFzaC5hamF4ID0ge1xuICAgIF9oZWFkZXJzXzogW11cbn07XG5cbnNtYXNoLmFqYXguYWRkSGVhZGVyID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBzbWFzaC5hamF4Ll9oZWFkZXJzX1tuYW1lXSA9IHZhbHVlO1xufTtcblxuc21hc2guYWpheC5yZW1vdmVIZWFkZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHNtYXNoLmFqYXguX2hlYWRlcnNfW25hbWVdO1xufTtcblxuc21hc2guYWpheC5vbmVycm9yID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xufTtcblxuc21hc2guYWpheC5vbnVuYXV0aG9yaXplZCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICBzbWFzaC5hamF4Lm9uZXJyb3IobWVzc2FnZSk7XG59O1xuXG5zbWFzaC5hamF4Ll94aHJfID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB9XG4gICAgdmFyIHZlcnNpb25zID0gW1xuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjYuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjUuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjQuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjMuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjIuMFwiLFxuICAgICAgICBcIk1pY3Jvc29mdC5YbWxIdHRwXCJcbiAgICBdO1xuICAgIHZhciB4aHI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJzaW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgeGhyID0gbmV3IEFjdGl2ZVhPYmplY3QodmVyc2lvbnNbaV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geGhyO1xufTtcblxuc21hc2guYWpheC5zZW5kID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2ssIG1ldGhvZCwgZGF0YSwgcmVzcG9uc2VUeXBlLCBvbmVycm9yLCBhc3luYykge1xuICAgIGlmIChhc3luYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFzeW5jID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9uZXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvbmVycm9yID0gc21hc2guYWpheC5vbmVycm9yO1xuICAgIH1cbiAgICB2YXIgeCA9IHNtYXNoLmFqYXguX3hocl8oKTtcbiAgICB4LnJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZTtcbiAgICB4Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoeC5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoeC5zdGF0dXMpIHtcbiAgICAgICAgICAgIGNhc2UgMjAwOlxuICAgICAgICAgICAgY2FzZSAyMDE6XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHgucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDAxOlxuICAgICAgICAgICAgICAgIHNtYXNoLmFqYXgub251bmF1dGhvcml6ZWQoeC5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIG9uZXJyb3IoeC5yZXNwb25zZSk7XG4gICAgICAgICAgICB9XG5cdFx0fVxuICAgIH07XG4gICAgeC5vcGVuKG1ldGhvZCwgdXJsLCBhc3luYyk7XG4gICAgaWYgKHJlc3BvbnNlVHlwZSA9PSAnanNvbicpIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIH0gZWxzZSBpZiAobWV0aG9kID09ICdQT1NUJykge1xuICAgICAgICB4LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKTtcbiAgICB9XG4gICAgZm9yICh2YXIgbmFtZSBpbiBzbWFzaC5hamF4Ll9oZWFkZXJzXykge1xuICAgICAgICB4LnNldFJlcXVlc3RIZWFkZXIobmFtZSwgc21hc2guYWpheC5faGVhZGVyc19bbmFtZV0pO1xuICAgIH1cbiAgICB4LnNlbmQoZGF0YSlcbn07XG5cbnNtYXNoLmFqYXguZ2V0ID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2ssIGRhdGEsIHJlc3BvbnNlVHlwZSwgb25lcnJvciwgYXN5bmMpIHtcbiAgICB2YXIgcXVlcnkgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICBxdWVyeS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba2V5XSkpO1xuICAgIH1cbiAgICBzbWFzaC5hamF4LnNlbmQodXJsICsgKHF1ZXJ5Lmxlbmd0aCA/ICc/JyArIHF1ZXJ5LmpvaW4oJyYnKSA6ICcnKSwgY2FsbGJhY2ssICdHRVQnLCBudWxsLCByZXNwb25zZVR5cGUsIG9uZXJyb3IsICBhc3luYylcbn07XG5cbnNtYXNoLmFqYXgucG9zdCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBkYXRhLCByZXNwb25zZVR5cGUsIG9uZXJyb3IsIGFzeW5jKSB7XG4gICAgdmFyIGRhdGFTdHI7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlVHlwZSAhPSAnanNvbicpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba2V5XSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YVN0ciA9IHF1ZXJ5LmpvaW4oJyYnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YVN0ciA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNtYXNoLmFqYXguc2VuZCh1cmwsIGNhbGxiYWNrLCAnUE9TVCcsIGRhdGFTdHIsIHJlc3BvbnNlVHlwZSwgb25lcnJvciwgYXN5bmMpXG59O1xuIiwic21hc2guY2xhc3MgPSB7fTtcblxuc21hc2guY2xhc3MuYWRkID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIGlmICghc21hc2guY2xhc3MuaGFzKGVsLCBjbGFzc05hbWUpKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdCA/IGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKSA6IGVsLmNsYXNzTmFtZSArPSAoJyAnICsgY2xhc3NOYW1lKTtcbiAgICB9XG59O1xuXG5zbWFzaC5jbGFzcy5yZW1vdmUgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhlbCwgY2xhc3NOYW1lKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QgPyBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSkgOiBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShjbGFzc05hbWUsICcnKTtcbiAgICB9XG59O1xuXG5zbWFzaC5jbGFzcy5oYXMgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuICgoXCIgXCIgKyBlbC5jbGFzc05hbWUgKyBcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZywgXCIgXCIpLmluZGV4T2YoXCIgXCIgKyBjbGFzc05hbWUgKyBcIiBcIikgPiAtMSk7XG59O1xuXG5zbWFzaC5jbGFzcy50b2dnbGUgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgc21hc2guY2xhc3MuaGFzKGVsLCBjbGFzc05hbWUpID8gc21hc2guY2xhc3MucmVtb3ZlKGVsLCBjbGFzc05hbWUpIDogc21hc2guY2xhc3MuYWRkKGVsLCBjbGFzc05hbWUpO1xufTtcblxuc21hc2guY2xhc3MudG9nZ2xlQWxsID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3RvciwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKGVsID0gc21hc2guZ2V0QWxsKHBhcmVudCwgc2VsZWN0b3IpKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBlbCkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MudG9nZ2xlKGVsW2tleV0sIGNsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuIiwic21hc2guY29uZmlnID0ge1xuICAgIF92YWx1ZXNfOiB7XG4gICAgICAgIF9zaWRlYmFyX2xvY2tfOiBmYWxzZVxuICAgIH1cbn1cblxuc21hc2guY29uZmlnLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHNtYXNoLnN0b3JhZ2UuZ2V0KCdjb25maWcnKTtcbiAgICBpZiAodikge1xuICAgICAgICBzbWFzaC5jb25maWcuX3ZhbHVlc18gPSB2O1xuICAgIH1cbn07XG5cbnNtYXNoLmNvbmZpZy5nZXQgPSBmdW5jdGlvbihvcHRpb24pIHtcbiAgICB2YXIgbyA9ICdfJyArIG9wdGlvbiArICdfJztcbiAgICBpZiAobyBpbiBzbWFzaC5jb25maWcuX3ZhbHVlc18pIHtcbiAgICAgICAgcmV0dXJuIHNtYXNoLmNvbmZpZy5fdmFsdWVzX1tvXTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IHNtYXNoLkV4Y2VwdGlvbignMDAxJywgJ0ludmFsaWQgY29uZmlnIG9wdGlvbiBcIicgKyBvcHRpb24gKyAnXCInKTtcbn07XG5cbnNtYXNoLmNvbmZpZy5zZXQgPSBmdW5jdGlvbihvcHRpb24sIHZhbHVlKSB7XG4gICAgdmFyIG8gPSAnXycgKyBvcHRpb24gKyAnXyc7XG4gICAgaWYgKCFvIGluIHNtYXNoLmNvbmZpZy5fdmFsdWVzXykge1xuICAgICAgICB0aHJvdyBuZXcgc21hc2guRXhjZXB0aW9uKCcwMDEnLCAnSW52YWxpZCBjb25maWcgb3B0aW9uIFwiJyArIG9wdGlvbiArICdcIicpO1xuICAgIH1cbiAgICBzbWFzaC5jb25maWcuX3ZhbHVlc19bb10gPSB2YWx1ZTtcbiAgICBzbWFzaC5zdG9yYWdlLnNldCgnY29uZmlnJywgc21hc2guY29uZmlnLl92YWx1ZXNfKTtcbn07XG4iLCJzbWFzaC5jb250ZXh0bWVudSA9IHt9O1xuXG5zbWFzaC5jb250ZXh0bWVudS5uZXcgPSBmdW5jdGlvbihlLCBpdGVtcykge1xuICAgIGlmIChjdHggPSBzbWFzaC5nZXQoZG9jdW1lbnQsIFwiI3NtYXNoLWNvbnRleHQtbWVudVwiKSkge1xuICAgICAgICBzbWFzaC5yZW1vdmUoY3R4KTtcbiAgICB9XG4gICAgdmFyIGN0eCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY3R4LmlkID0gIFwic21hc2gtY29udGV4dC1tZW51XCI7XG4gICAgdmFyIGxpc3QgPSBcIjx1bCBjbGFzcz0nY2xpY2thYmxlJz5cIjtcbiAgICBmb3IgKGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGl0ZW1zW2ldID09IFwic2VwZXJhdG9yXCIpIHtcbiAgICAgICAgICAgIGxpc3QgKz0gJzxsaSBjbGFzcz1cInNlcGVyYXRvclwiPjwvbGk+JztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGxpc3QgKz0gJzxsaSBjbGFzcz1cImN0eF9pdGVtXycgKyBpICsgJ1wiPicgKyBpdGVtc1tpXS5sYWJlbCArIFwiPC9saT5cIjtcbiAgICB9XG4gICAgbGlzdCArPSAnPC91bD4nO1xuICAgIGN0eC5pbm5lckhUTUwgPSBsaXN0O1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY3R4KTtcbiAgICB2YXIgaXRlbTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGl0ZW1zW2ldID09IFwic2VwZXJhdG9yXCIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGl0ZW0gPSBzbWFzaC5nZXQoY3R4LCBcImxpLmN0eF9pdGVtX1wiICsgaSk7XG4gICAgICAgIGl0ZW0uY2FsbGJhY2sgPSBpdGVtc1tpXS5jYWxsYmFjaztcbiAgICAgICAgaXRlbS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2soZSk7XG4gICAgICAgICAgICBzbWFzaC5jb250ZXh0bWVudS5jbG9zZShlKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdmFyIHkgPSBlLnBhZ2VZXG4gICAgaWYgKHkgKyBjdHgub2Zmc2V0SGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICAgIHkgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBjdHgub2Zmc2V0SGVpZ2h0IC0gMjA7XG4gICAgfVxuICAgIGN0eC5zdHlsZS50b3AgPSB5O1xuICAgIGN0eC5zdHlsZS5sZWZ0ID0gZS5wYWdlWDtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZG9jdW1lbnQub25jbGljayA9IHNtYXNoLmNvbnRleHRtZW51LmNsb3NlO1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbnNtYXNoLmNvbnRleHRtZW51LmNsb3NlID0gZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoY3R4ID0gc21hc2guZ2V0KGRvY3VtZW50LCBcIiNzbWFzaC1jb250ZXh0LW1lbnVcIikpIHtcbiAgICAgICAgc21hc2gucmVtb3ZlKGN0eCk7XG4gICAgfVxuICAgIGRvY3VtZW50Lm9uY2xpY2sgPSB1bmRlZmluZWQ7XG59O1xuIiwic21hc2guY29va2llID0ge307XG5cbnNtYXNoLmNvb2tpZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgZXhwaXJ5RGF5cykge1xuICAgIHZhciBkID0gbmV3IERhdGUoKTtcbiAgICBkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyAoZXhwaXJ5RGF5cyoyNCo2MCo2MCoxMDAwKSk7XG4gICAgdmFyIGV4cGlyZXMgPSBcImV4cGlyZXM9XCIrIGQudG9VVENTdHJpbmcoKTtcbiAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgXCI9XCIgKyB2YWx1ZSArIFwiO1wiICsgZXhwaXJlcyArIFwiO3BhdGg9L1wiO1xufTtcblxuc21hc2guY29va2llLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbmFtZSA9IG5hbWUgKyBcIj1cIjtcbiAgICB2YXIgZGVjb2RlZENvb2tpZSA9IGRlY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5jb29raWUpO1xuICAgIHZhciBjYSA9IGRlY29kZWRDb29raWUuc3BsaXQoJzsnKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDxjYS5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYyA9IGNhW2ldO1xuICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT0gJyAnKSB7XG4gICAgICAgICAgICBjID0gYy5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYy5zdWJzdHJpbmcobmFtZS5sZW5ndGgsIGMubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbn07XG4iLCJzbWFzaC5kaWFsb2cgPSB7fTtcblxuc21hc2guZGlhbG9nLm5ldyA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICB2YXIgYmFja2Ryb3AgPSBzbWFzaC5kaWFsb2cuY2hlY2tCYWNrZHJvcCgpO1xuXG4gICAgdmFyIGRpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpYWxvZy5jbGFzc05hbWUgPSAnc21hc2gtZGlhbG9nJztcbiAgICBkaWFsb2cuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICBiYWNrZHJvcC5hcHBlbmRDaGlsZChkaWFsb2cpO1xufTtcblxuc21hc2guZGlhbG9nLmNoZWNrQmFja2Ryb3AgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoYmFja2Ryb3AgPSBzbWFzaC5nZXQoZG9jdW1lbnQsIFwiLnNtYXNoLWRpYWxvZy1iYWNrZHJvcFwiKSkge1xuICAgICAgICBpZiAoZGlhbG9nID0gc21hc2guZ2V0KGRvY3VtZW50LCBcIi5zbWFzaC1kaWFsb2ctYmFja2Ryb3AgLnNtYXNoLWRpYWxvZ1wiKSkge1xuICAgICAgICAgICAgYmFja2Ryb3AucmVtb3ZlQ2hpbGQoZGlhbG9nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFja2Ryb3A7XG4gICAgfVxuICAgIHZhciBiYWNrZHJvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJhY2tkcm9wLmNsYXNzTmFtZSA9ICdzbWFzaC1kaWFsb2ctYmFja2Ryb3AnO1xuICAgIGJhY2tkcm9wLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwic21hc2gtZGlhbG9nLWJhY2tncm91bmRcIj48L2Rpdj4nO1xuICAgIHNtYXNoLmdldChiYWNrZHJvcCwgJy5zbWFzaC1kaWFsb2ctYmFja2dyb3VuZCcpLm9uY2xpY2sgPSBzbWFzaC5kaWFsb2cuY2xvc2U7XG4gICAgc21hc2guZ2V0KGRvY3VtZW50LCAnYm9keScpLmFwcGVuZENoaWxkKGJhY2tkcm9wKTtcbiAgICByZXR1cm4gYmFja2Ryb3A7XG59O1xuXG5zbWFzaC5kaWFsb2cuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoZGlhbG9nID0gc21hc2guZ2V0KGRvY3VtZW50LCBcIi5zbWFzaC1kaWFsb2ctYmFja2Ryb3BcIikpIHtcbiAgICAgICAgc21hc2guZ2V0KGRvY3VtZW50LCAnYm9keScpLnJlbW92ZUNoaWxkKGRpYWxvZyk7XG4gICAgfVxufTtcbiIsInNtYXNoLkV4Y2VwdGlvbiA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIHRoaXMudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICdTbWFzaEV4Y2VwdGlvbiAnICsgdGhpcy52YWx1ZSArICc6ICcgKyB0aGlzLm1lc3NhZ2U7XG4gICAgfTtcbn07XG4iLCJzbWFzaC5pbnB1dCA9IHt9O1xuXG5zbWFzaC5pbnB1dC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc21hc2gtaW5wdXQgaW5wdXQsIC5zbWFzaC10ZXh0YXJlYSB0ZXh0YXJlYVwiKTtcbiAgICB2YXIgaW5wdXQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaW5wdXQgPSBpbnB1dHNbaV07XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoaW5wdXQucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5nZXROYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikuZ2V0QXR0cmlidXRlKCduYW1lJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0Lm9ua2V5dXApIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQub25rZXl1cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0Lm9ua2V5dXApIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQub25rZXl1cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dC52YWx1ZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInRleHRhcmVhXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50Lm9uZm9jdXMgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSkge1xuICAgICAgICAgICAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIikpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKGlucHV0LnBhcmVudEVsZW1lbnQsICdmbG9hdGluZy1sYWJlbCcpO1xuXG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gaW5wdXQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGwsICdzaG93Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChpbnB1dC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKTtcbiAgICB9XG4gICAgdmFyIHNlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtYXNoLXNlbGVjdCBzZWxlY3RcIik7XG4gICAgdmFyIHNlbGVjdDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2VsZWN0ID0gc2VsZWN0c1tpXTtcbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhzZWxlY3QucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdoYXMtZmxvYXRpbmctbGFiZWwnKSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnaGFzLWZsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5nZXROYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LnNldFZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZSh0aGlzLCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3QgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgIHZhciBvbGQgPSBzZWxlY3QudmFsdWU7XG4gICAgICAgICAgICBzZWxlY3QudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmIChzZWxlY3QudmFsdWUgIT0gXCJcIiAmJiBzZWxlY3Quc2VsZWN0ZWRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSBzZWxlY3Qub3B0aW9uc1tzZWxlY3Quc2VsZWN0ZWRJbmRleF0udGV4dDtcbiAgICAgICAgICAgICAgICBpZiAodGV4dCAmJiB0ZXh0ICE9IFwiXCIgJiYgdGV4dCAhPSAnJm5ic3A7Jykge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHRleHQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWxlY3QuZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgIGlucHV0LmJsdXIoKTtcbiAgICAgICAgICAgIGlmIChvbGQgIT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQgPSBzbWFzaC5nZXQodGhpcy5wYXJlbnRFbGVtZW50LCAnLnNlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHNlbGVjdGVkLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZCA9IHNtYXNoLmdldCh0aGlzLCAnbGlbdmFsdWU9XCInICsgdmFsdWUgKyAnXCJdJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChzZWxlY3RlZCwgJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdC5vbmNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3Qub25jaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25jaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmNoYW5nZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2hlY2tMYWJlbCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50Lm9uZm9jdXMgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgIGlucHV0LmZvY3VzKGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdC5zZWxlY3RlZEluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzbWFzaC5nZXQodGhpcywgJ2lucHV0JykudmFsdWUgPSB0aGlzLmdldFRleHQoKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tMYWJlbCgpO1xuICAgICAgICAgICAgc21hc2guZ2V0KHRoaXMsICdpbnB1dCcpLmJsdXIoKTtcbiAgICAgICAgICAgIGlmIChob3ZlciA9IHNtYXNoLmdldCh0aGlzLCAndWwgbGkuaG92ZXInKSkge1xuICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShob3ZlciwgJ2hvdmVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuY2hlY2tMYWJlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGwgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VmFsdWUoKSAmJiB0aGlzLmdldFZhbHVlKCkgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuZ2V0VGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3Quc2VsZWN0ZWRJbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdC5vcHRpb25zW3NlbGVjdC5zZWxlY3RlZEluZGV4XS5pbm5lckhUTUw7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGlucHV0KTtcblxuICAgICAgICB2YXIgb3B0aW9ucyA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKFwib3B0aW9uXCIpO1xuICAgICAgICB2YXIgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICB2YXIgdmFsO1xuICAgICAgICB1bC5vbm1vdXNldXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9wdGlvbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zW2pdO1xuICAgICAgICAgICAgdmFsID0gb3B0aW9uLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICAgICAgICAgIGlmICghdmFsICYmIHZhbCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBvcHRpb24udmFsdWUpO1xuICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gb3B0aW9uLmlubmVySFRNTCA9PSBcIlwiID8gJyZuYnNwOycgOiBvcHRpb24uaW5uZXJIVE1MO1xuICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICAgICAgbGkub25tb3VzZWRvd24gPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUodGhpcy5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0ID0gc21hc2guZmluZE5leHRUYWJTdG9wKHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQsIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cub25tb3VzZXVwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNldXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHVsKTtcbiAgICAgICAgaW5wdXQub25mb2N1cyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXModGhpcy5wYXJlbnRFbGVtZW50LCAnaXMtZm9jdXNzZWQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5jaGVja0xhYmVsKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuY2xpY2soKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpbnB1dC5vbmJsdXIgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAod2luZG93Lm9ubW91c2V1cCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNldXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQodGhpcywgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBzbWFzaC5nZXQodGhpcywgJ2lucHV0Jyk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gc21hc2guZ2V0KHRoaXMsICdzZWxlY3QnKTtcbiAgICAgICAgICAgIHZhciBzbWFzaF9zZWxlY3QgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGlucHV0LnZhbHVlICYmIGlucHV0LnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBpbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIHNlbGVjdC5nZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtcbiAgICAgICAgICAgIGlucHV0LmJsdXIoKTtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cub25tb3VzZXVwID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpbnB1dC5vbmtleXVwID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCBcInJlYWRvbmx5XCIpO1xuICAgICAgICAgICAgICAgIHNtYXNoX3NlbGVjdC5yZXNldCgpO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtcyA9IHNtYXNoLmdldEFsbChzbWFzaF9zZWxlY3QsICd1bCBsaScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNbaV0uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc21hc2guc2hvdyhzbWFzaF9zZWxlY3QsICd1bCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoc21hc2hfc2VsZWN0LCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaW5wdXQub25rZXl1cCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgICAgICAgICBpZiAoaG92ZXIgPSBzbWFzaC5nZXQoc21hc2hfc2VsZWN0LCAndWwgbGkuaG92ZXInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXIub25tb3VzZWRvd24oZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgIGlmIChob3ZlciA9IHNtYXNoLmdldChzbWFzaF9zZWxlY3QsICd1bCBsaS5ob3ZlcicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoaG92ZXIsIFwiaG92ZXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXMgPSBzbWFzaC5wcmV2aW91c1Zpc2libGUoaG92ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKHByZXZpb3VzLCBcImhvdmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzLnBhcmVudEVsZW1lbnQuc2Nyb2xsVG9wID0gcHJldmlvdXMub2Zmc2V0VG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdCA9IHNtYXNoLmxhc3RWaXNpYmxlKGhvdmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobGFzdCwgXCJob3ZlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdC5wYXJlbnRFbGVtZW50LnNjcm9sbFRvcCA9IGxhc3QucGFyZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpID0gc21hc2guZ2V0KHNtYXNoX3NlbGVjdCwgJ3VsIGxpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdCA9IHNtYXNoLmxhc3RWaXNpYmxlKGxpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChsYXN0LCBcImhvdmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QucGFyZW50RWxlbWVudC5zY3JvbGxUb3AgPSBsYXN0LnBhcmVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICAgICAgICBpZiAoaG92ZXIgPSBzbWFzaC5nZXQoc21hc2hfc2VsZWN0LCAndWwgbGkuaG92ZXInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGhvdmVyLCBcImhvdmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgPSBzbWFzaC5uZXh0VmlzaWJsZShob3ZlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobmV4dCwgXCJob3ZlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0LnBhcmVudEVsZW1lbnQuc2Nyb2xsVG9wID0gbmV4dC5vZmZzZXRUb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ID0gc21hc2guZmlyc3RWaXNpYmxlKGhvdmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobmV4dCwgXCJob3ZlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5wYXJlbnRFbGVtZW50LnNjcm9sbFRvcCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpID0gc21hc2guZ2V0KHNtYXNoX3NlbGVjdCwgJ3VsIGxpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCA9IHNtYXNoLmZpcnN0VmlzaWJsZShsaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobmV4dCwgXCJob3ZlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0LnBhcmVudEVsZW1lbnQuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgLy8gZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB2YXIgcSA9IHRoaXMudmFsdWUucmVwbGFjZSgvW15hLXpBLVowLTlfIF0vZywgXCJcIik7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1zID0gc21hc2guZ2V0QWxsKHNtYXNoX3NlbGVjdCwgJ3VsIGxpJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc21hc2guc2hvdyhzbWFzaF9zZWxlY3QsICd1bCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocSA9PSBcIlwiIHx8IHNtYXNoLmZ1enp5Q29tcGFyZShxLCBpdGVtLmlubmVySFRNTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmhpZGUoc21hc2hfc2VsZWN0LCAndWwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzZWxlY3QucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKHNlbGVjdC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuY2hlY2tMYWJlbCgpO1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpO1xuICAgIH1cbiAgICBzbWFzaC5pbnB1dC5jaGVja2JveEluaXQoKTtcbn07XG5cbnNtYXNoLmlucHV0LmNoZWNrYm94SW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbWFzaC1jaGVja2JveCBpbnB1dFwiKTtcbiAgICB2YXIgY2hlY2tib3g7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGVja2JveGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNoZWNrYm94ID0gY2hlY2tib3hlc1tpXTtcbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhjaGVja2JveC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYyA9ICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIGMuY2xhc3NOYW1lID0gJ2NoZWNrcyc7XG4gICAgICAgIGMuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5jaGVja19ib3hfb3V0bGluZV9ibGFuazwvaT48aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNoZWNrZWRcIj5jaGVja19ib3g8L2k+JztcbiAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChjKTtcblxuICAgICAgICBpZiAobGFiZWwgPSBjaGVja2JveC5nZXRBdHRyaWJ1dGUoJ2xhYmVsJykpIHtcbiAgICAgICAgICAgIHZhciBsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgbC5jbGFzc05hbWUgPSAnbGFiZWwnO1xuICAgICAgICAgICAgbC5pbm5lckhUTUwgPSBsYWJlbDtcbiAgICAgICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobCk7XG4gICAgICAgIH1cbiAgICAgICAgc21hc2guY2xhc3MuYWRkKGNoZWNrYm94LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpO1xuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gc21hc2guY2xhc3MuaGFzKGNoZWNrYm94LnBhcmVudEVsZW1lbnQsICdjaGVja2VkJyk7XG5cbiAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy50b2dnbGUodGhpcywgJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgIHNtYXNoLmdldCh0aGlzLCAnaW5wdXQnKS5jaGVja2VkID0gc21hc2guY2xhc3MuaGFzKHRoaXMsICdjaGVja2VkJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5vbmNoYW5nZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25jaGFuZ2Uoc21hc2guY2xhc3MuaGFzKHRoaXMsICdjaGVja2VkJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQuZ2V0TmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQuZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBzbWFzaC5jbGFzcy5oYXModGhpcywgJ2NoZWNrZWQnKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50LnNldFZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXModGhpcywgJ2NoZWNrZWQnKSA9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub25jbGljaygpO1xuICAgICAgICB9O1xuICAgIH1cbn07XG4iLCJzbWFzaC5yb3V0ZXIgPSB7XG4gICAgX19wYXJzZVJvdXRlUmVnZXg6IC97KC4qPyl9L2lnLFxuICAgIF9fZHluYW1pY1BhcnRzOiBbXSxcbiAgICBfX2Jhc2VEaXJlY3Rvcnk6IG51bGwsXG4gICAgX19yb3V0ZXM6IHtcbiAgICAgICAgc3RhdGljOiBbXSxcbiAgICAgICAgZHluYW1pYzogW11cbiAgICB9XG59O1xuXG4vKipcbiAqIEFkZCBhIHJvdXRlIGhhbmRsZXIgdG8gdGhlIHJvdXRlclxuICogQHBhcmFtIHN0cmluZyAgIHBhdGhcbiAqIEBwYXJhbSBGdW5jdGlvbiBjYWxsYmFja1xuICovXG5zbWFzaC5yb3V0ZXIuYWRkID0gZnVuY3Rpb24ocGF0aCwgY2FsbGJhY2spIHtcbiAgICB2YXIgcm91dGUgPSBzbWFzaC5yb3V0ZXIucGFyc2VSb3V0ZShwYXRoKTtcbiAgICBpZiAocm91dGUucmVnZXgpIHtcbiAgICAgICAgcm91dGUuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgaWYgKCFzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF0pIHtcbiAgICAgICAgICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdKSB7XG4gICAgICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10ucHVzaChyb3V0ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc21hc2gucm91dGVyLl9fcm91dGVzLnN0YXRpY1twYXRoXSA9IGNhbGxiYWNrO1xufTtcblxuLyoqXG4gKiBTZXQgYW5kIGV4ZWN1dGUgdGhlIGdpdmVuIHBhdGhcbiAqIEBwYXJhbSBzdHJpbmcgcGF0aFxuICovXG5zbWFzaC5yb3V0ZXIuc2V0ID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIHNtYXNoLnJvdXRlci5kaXNwbGF5VVJMKHBhdGgpO1xuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncG9wc3RhdGUnKSk7XG59O1xuXG4vKipcbiAqIERpc3BsYXkgdGhlIHVybCBpbiB0aGUgYnJvd3NlclxuICogQHBhcmFtICBzdHJpbmcgcGF0aFxuICogQHJldHVybiB2b2lkXG4gKi9cbnNtYXNoLnJvdXRlci5kaXNwbGF5VVJMID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIHBhdGggPSBzbWFzaC5yb3V0ZXIuYWRkQmFzZURpcmVjdG9yeShwYXRoKTtcbiAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoXCJcIiwgXCJcIiwgcGF0aCk7XG59O1xuXG4vKipcbiAqIFJlZGlyZWN0IHRvIHRoZSBjb3JyZWN0IHVybFxuICogQHBhcmFtICBzdHJpbmcgcGF0aFxuICogQHJldHVybiB2b2lkXG4gKi9cbnNtYXNoLnJvdXRlci5yZWRpcmVjdCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBpZiAoIXBhdGguc2VhcmNoKC9eaHR0cFtzXT86XFwvXFwvLykpIHtcbiAgICAgICAgcGF0aCA9IHNtYXNoLnJvdXRlci5hZGRCYXNlRGlyZWN0b3J5KHBhdGgpO1xuICAgIH1cbiAgICB3aW5kb3cubG9jYXRpb24gPSBwYXRoO1xufTtcblxuLyoqXG4gKiBFeGVjdXRlIHdoZW4gYSBwYXRoIGlzIG5vdCBmb3VuZC5cbiAqIEBwYXJhbSAgUm91dGUgcm91dGVcbiAqIEByZXR1cm4gdm9pZFxuICovXG5zbWFzaC5yb3V0ZXIuaGFuZGxlTm90Rm91bmQgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIGNvbnNvbGUubG9nKFwicm91dGU6IFwiICsgSlNPTi5zdHJpbmdpZnkocm91dGUpICsgXCIgZG9lcyBub3QgZXhpc3RcIik7XG59O1xuXG4vKipcbiAqIFJ1biB0aGUgcm91dGVyIGFuZCBjaGVjayB0aGUgZ2l2ZW4gcGF0aFxuICogQHJldHVybiB2b2lkXG4gKi9cbnNtYXNoLnJvdXRlci5ydW4gPSBmdW5jdGlvbigpIHtcbiAgICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHNtYXNoLnJvdXRlci5leGVjdXRlKCk7XG4gICAgfTtcbiAgICBzbWFzaC5yb3V0ZXIuZXhlY3V0ZSgpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGUgdGhlIHJvdXRlciBhbmQgY2hlY2sgZ2l2ZW4gcGF0aFxuICogQHJldHVybiB2b2lkXG4gKi9cbnNtYXNoLnJvdXRlci5leGVjdXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBhdGggPSB0aGlzLmdldFBhdGgoKTtcbiAgICBpZiAodGhpcy5fX3JvdXRlcy5zdGF0aWNbcGF0aC5wYXRoXSkge1xuICAgICAgICB0aGlzLl9fcm91dGVzLnN0YXRpY1twYXRoLnBhdGhdKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGRlcHRoID0gcGF0aC5wYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGgtMTtcbiAgICBpZiAodGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXSkge1xuICAgICAgICB2YXIgcm91dGU7XG4gICAgICAgIHZhciBtYXRjaGVzO1xuICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICBmb3IgKHZhciB2YXJOdW0gaW4gdGhpcy5fX3JvdXRlcy5keW5hbWljW2RlcHRoXSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdW3Zhck51bV0pIHtcbiAgICAgICAgICAgICAgICB2YXIgcm91dGUgPSB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdW3Zhck51bV1baXRlbV07XG4gICAgICAgICAgICAgICAgbWF0Y2hlcyA9IHBhdGgucGF0aC5tYXRjaChyb3V0ZS5yZWdleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8cm91dGUubnVtVmFyczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbcm91dGUudmFyc1tpXV0gPSBtYXRjaGVzW2krMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJvdXRlLmNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzbWFzaC5yb3V0ZXIuaGFuZGxlTm90Rm91bmQocGF0aCk7XG59O1xuXG4vKipcbiAqIEdldCBwYXRoIHdpdGhvdXQgYmFzZSBkaXJlY3RvcnkgaWYgYXZhaWxhYmxlXG4gKiBAcmV0dXJuIFBhdGhcbiAqL1xuc21hc2gucm91dGVyLmdldFBhdGggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgIGwuaHJlZiA9IHdpbmRvdy5sb2NhdGlvbjtcbiAgICByZXR1cm4ge2hvc3Q6IGwuaG9zdG5hbWUsIHBhdGg6IHNtYXNoLnJvdXRlci5jaGVja1BhdGgobC5wYXRobmFtZSl9O1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gcm91dGUgZ2l2ZW4gYnkgYWRkXG4gKiBAcGFyYW0gIHN0cmluZyBwYXRoXG4gKiBAcmV0dXJuIFJvdXRlXG4gKi9cbnNtYXNoLnJvdXRlci5wYXJzZVJvdXRlID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIHBhdGggPSBzbWFzaC5yb3V0ZXIuY2xlYW5QYXRoKHBhdGgpO1xuICAgIHZhciByb3V0ZSA9IHtcbiAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgZGVwdGg6IChwYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGggLSAxKSxcbiAgICAgICAgdmFyczogW10sXG4gICAgICAgIG51bVZhcnM6IDBcbiAgICB9O1xuICAgIHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cyA9IHBhdGgubWF0Y2goc21hc2gucm91dGVyLl9fcGFyc2VSb3V0ZVJlZ2V4KTtcbiAgICBpZiAoc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzICE9IHVuZGVmaW5lZCAmJiBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMgIT0gbnVsbCkge1xuICAgICAgICB2YXIgcmVnZXggPSBcIl5cIiArIHBhdGgucmVwbGFjZSgvXFwvL2lnLCBcIlxcXFwvXCIpICsgXCIkXCI7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJvdXRlLm51bVZhcnMrKztcbiAgICAgICAgICAgIHJvdXRlLnZhcnMucHVzaChzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0uc3Vic3RyaW5nKDEsIHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0c1tpXS5sZW5ndGgtMSkpO1xuICAgICAgICAgICAgcmVnZXggPSByZWdleC5yZXBsYWNlKHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0c1tpXSwgXCIoLio/KVwiKTtcbiAgICAgICAgfVxuICAgICAgICByb3V0ZS5yZWdleCA9IG5ldyBSZWdFeHAocmVnZXgsICdpJyk7XG4gICAgfVxuICAgIHJldHVybiByb3V0ZTtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBiYXNlIGRpcmVjdG9yeSB0byBiZSB1c2VkIGJ5IGFsbCByb3V0ZXNcbiAqIEBwYXJhbSBzdHJpbmcgZGlyZWN0b3J5XG4gKi9cbnNtYXNoLnJvdXRlci5zZXRCYXNlRGlyZWN0b3J5ID0gZnVuY3Rpb24oZGlyZWN0b3J5KSB7XG4gICAgaWYgKCFkaXJlY3RvcnkpIHtcbiAgICAgICAgc21hc2gucm91dGVyLl9fYmFzZURpcmVjdG9yeSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5ID0gc21hc2gucm91dGVyLmNsZWFuUGF0aChkaXJlY3RvcnkpO1xufTtcblxuLyoqXG4gKiBBZGQgdGhlIGJhc2UgZGlyZWN0b3J5IGlmIGl0IGlzIGF2YWlsYWJsZVxuICogQHBhcmFtIHN0cmluZyBwYXRoXG4gKiBAcmV0dXJuIHN0cmluZ1xuICovXG5zbWFzaC5yb3V0ZXIuYWRkQmFzZURpcmVjdG9yeSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBpZiAoIXNtYXNoLnJvdXRlci5fX2Jhc2VEaXJlY3RvcnkpIHtcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgfVxuICAgIGlmIChwYXRoLmluZGV4T2Yoc21hc2gucm91dGVyLl9fYmFzZURpcmVjdG9yeSkgPT09IC0xKSB7XG4gICAgICAgIHBhdGggPSBzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5ICsgcGF0aDtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG59O1xuXG4vKipcbiAqIENsZWFuIHRoZSBnaXZlbiBwYXRoIHRvIHRoZSBwcm9wZXIgcGF0aCB0byBiZSB1c2VkIGJ5IHRoZSByb3V0ZXJcbiAqIEBwYXJhbSAgc3RyaW5nIHBhdGhcbiAqIEByZXR1cm4gc3RyaW5nXG4gKi9cbnNtYXNoLnJvdXRlci5jbGVhblBhdGggPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgaWYgKHBhdGgubGVuZ3RoID4gMCAmJiBwYXRoLnN1YnN0cmluZygwLCAxKSAhPSBcIi9cIikge1xuICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoO1xuICAgIH1cbiAgICBpZiAocGF0aC5sZW5ndGggPiAyICYmIHBhdGguc3Vic3RyaW5nKHBhdGgubGVuZ3RoLTIpID09IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxlbmd0aC0yKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG59O1xuXG4vKipcbiAqIENoZWNrIHRoZSBwYXRoIGlmIHRoZXJlIGlzIGEgYmFzZSBkaXJlY3RvcnkgYXZhaWxhYmxlXG4gKiBAcGFyYW0gIHN0cmluZyBwYXRoIFRoZSBwYXRoIHRvIGNoZWNrXG4gKiBAcmV0dXJuIHN0cmluZyAgICAgIFRoZSBwYXRoIHdpdGhvdXQgYSBiYXNlIGRpcmVjdG9yeSBmb3IgdXNlIG9mIGNoZWNraW5nIHJvdXRlc1xuICovXG5zbWFzaC5yb3V0ZXIuY2hlY2tQYXRoID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIHBhdGggPSBzbWFzaC5yb3V0ZXIuY2xlYW5QYXRoKHBhdGgpO1xuICAgIGlmIChzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5ICYmIHBhdGguaW5kZXhPZihzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5KSAhPT0gLTEpIHtcbiAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZShzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5LCAnJyk7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIHF1ZXJ5IHBhcmFtIGluIHRoZSB1cmxcbiAqIEBwYXJhbSAgc3RyaW5nIHBhcmFtIFRoZSBwYXJhbSB5b3Ugd2FudCB0byBoYXZlXG4gKiBAcmV0dXJuIHN0cmluZyAgICAgICBUaGUgdmFsdWUgb2YgdGhlIHBhcmFtIG9yIHVuZGVmaW5lZCBpZiBpdCBpcyBub3QgYXZhaWxhYmxlXG4gKi9cbnNtYXNoLnJvdXRlci5xdWVyeVBhcmFtID0gZnVuY3Rpb24ocGFyYW0pIHtcbiAgICB2YXIgcmVnZXhTID0gXCJbXFxcXD8mXVwiK3BhcmFtK1wiPShbXiYjXSopXCIsXG4gICAgcmVnZXggPSBuZXcgUmVnRXhwKCByZWdleFMgKSxcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyggd2luZG93LmxvY2F0aW9uLnNlYXJjaCApO1xuICAgIGlmKCByZXN1bHRzID09IG51bGwgKXtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHNbMV07Ly9kZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1sxXS5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBxdWVyeSBwYXJhbSBpbiB0aGUgdXJsXG4gKiBAcGFyYW0gIHN0cmluZyBwYXJhbSBUaGUgcGFyYW0geW91IHdhbnQgdG8gaGF2ZVxuICogQHJldHVybiBzdHJpbmcgICAgICAgVGhlIHZhbHVlIG9mIHRoZSBwYXJhbSBvciB1bmRlZmluZWQgaWYgaXQgaXMgbm90IGF2YWlsYWJsZVxuICovXG5zbWFzaC5yb3V0ZXIucXVlcnlQYXJhbXMgPSBmdW5jdGlvbih1cmwpIHtcblxuICAgIC8vIGdldCBxdWVyeSBzdHJpbmcgZnJvbSB1cmwgKG9wdGlvbmFsKSBvciB3aW5kb3dcbiAgICB2YXIgcXVlcnlTdHJpbmcgPSB1cmwgPyB1cmwuc3BsaXQoJz8nKVsxXSA6IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc2xpY2UoMSk7XG5cbiAgICAvLyB3ZSdsbCBzdG9yZSB0aGUgcGFyYW1ldGVycyBoZXJlXG4gICAgdmFyIG9iaiA9IHt9O1xuXG4gICAgLy8gaWYgcXVlcnkgc3RyaW5nIGV4aXN0c1xuICAgIGlmIChxdWVyeVN0cmluZykge1xuXG4gICAgICAgIC8vIHN0dWZmIGFmdGVyICMgaXMgbm90IHBhcnQgb2YgcXVlcnkgc3RyaW5nLCBzbyBnZXQgcmlkIG9mIGl0XG4gICAgICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcuc3BsaXQoJyMnKVswXTtcblxuICAgICAgICAvLyBzcGxpdCBvdXIgcXVlcnkgc3RyaW5nIGludG8gaXRzIGNvbXBvbmVudCBwYXJ0c1xuICAgICAgICB2YXIgYXJyID0gcXVlcnlTdHJpbmcuc3BsaXQoJyYnKTtcblxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8YXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBzZXBhcmF0ZSB0aGUga2V5cyBhbmQgdGhlIHZhbHVlc1xuICAgICAgICAgICAgdmFyIGEgPSBhcnJbaV0uc3BsaXQoJz0nKTtcblxuICAgICAgICAgICAgLy8gaW4gY2FzZSBwYXJhbXMgbG9vayBsaWtlOiBsaXN0W109dGhpbmcxJmxpc3RbXT10aGluZzJcbiAgICAgICAgICAgIHZhciBwYXJhbU51bSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHZhciBwYXJhbU5hbWUgPSBhWzBdLnJlcGxhY2UoL1xcW1xcZCpcXF0vLCBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgcGFyYW1OdW0gPSB2LnNsaWNlKDEsLTEpO1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBzZXQgcGFyYW1ldGVyIHZhbHVlICh1c2UgJ3RydWUnIGlmIGVtcHR5KVxuICAgICAgICAgICAgdmFyIHBhcmFtVmFsdWUgPSB0eXBlb2YoYVsxXSk9PT0ndW5kZWZpbmVkJyA/IHRydWUgOiBhWzFdO1xuXG4gICAgICAgICAgICAvLyAob3B0aW9uYWwpIGtlZXAgY2FzZSBjb25zaXN0ZW50XG4gICAgICAgICAgICBwYXJhbU5hbWUgPSBwYXJhbU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHBhcmFtVmFsdWUgPSBwYXJhbVZhbHVlLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIC8vIGlmIHBhcmFtZXRlciBuYW1lIGFscmVhZHkgZXhpc3RzXG4gICAgICAgICAgICBpZiAob2JqW3BhcmFtTmFtZV0pIHtcbiAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IHZhbHVlIHRvIGFycmF5IChpZiBzdGlsbCBzdHJpbmcpXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmpbcGFyYW1OYW1lXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqW3BhcmFtTmFtZV0gPSBbb2JqW3BhcmFtTmFtZV1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpZiBubyBhcnJheSBpbmRleCBudW1iZXIgc3BlY2lmaWVkLi4uXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbU51bSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcHV0IHRoZSB2YWx1ZSBvbiB0aGUgZW5kIG9mIHRoZSBhcnJheVxuICAgICAgICAgICAgICAgICAgICBvYmpbcGFyYW1OYW1lXS5wdXNoKHBhcmFtVmFsdWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGFycmF5IGluZGV4IG51bWJlciBzcGVjaWZpZWQuLi5cbiAgICAgICAgICAgICAgICAgICAgLy8gcHV0IHRoZSB2YWx1ZSBhdCB0aGF0IGluZGV4IG51bWJlclxuICAgICAgICAgICAgICAgICAgICBvYmpbcGFyYW1OYW1lXVtwYXJhbU51bV0gPSBwYXJhbVZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIHBhcmFtIG5hbWUgZG9lc24ndCBleGlzdCB5ZXQsIHNldCBpdFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvYmpbcGFyYW1OYW1lXSA9IHBhcmFtVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn07XG4iLCJzbWFzaC5zZWFyY2hib3ggPSB7XG4gICAgaV86IGZhbHNlLFxuICAgIG1pbkF1dG9Db21wbGV0ZUxlbmd0aDogMyxcbiAgICBvbmZvY3VzOiB1bmRlZmluZWQsXG4gICAgb25ibHVyOiB1bmRlZmluZWQsXG4gICAgb25jaGFuZ2U6IHVuZGVmaW5lZCxcbn07XG5cbnNtYXNoLnNlYXJjaGJveC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNtYXNoLnNlYXJjaGJveC5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzc2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCBpbnB1dFwiKTtcbiAgICBpZiAoIXNzYikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNzYi5vbmZvY3VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gucmVzdWx0cygnPGRpdiBjbGFzcz1cInNtYXNoLWluc3RydWN0aW9uXCI+U3RhcnQgdHlwaW5nIHRvIGZpbmQgcmVzdWx0czwvZGl2PicpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLWhlYWRlclwiKSwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCAuc21hc2gtc2VhcmNoYm94LXJlc3VsdHNcIiksICdzaG93Jyk7XG4gICAgICAgIGlmIChzbWFzaC5zZWFyY2hib3gub25mb2N1cykge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc3NiLm9uYmx1ciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1oZWFkZXJcIiksICdpcy1mb2N1c3NlZCcpO1xuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpLCAnc2hvdycpO1xuICAgICAgICBpZiAoc21hc2guc2VhcmNoYm94Lm9uYmx1cikge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uYmx1cigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzc2Iub25rZXl1cCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcbiAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSAnJztcbiAgICAgICAgICAgIHRoaXMuYmx1cigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA8IHNtYXNoLnNlYXJjaGJveC5taW5BdXRvQ29tcGxldGVMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc21hc2guc2VhcmNoYm94Lm9uY2hhbmdlKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gub25jaGFuZ2UodGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNtYXNoLnNlYXJjaGJveC5pXyA9IHRydWU7XG59O1xuXG5zbWFzaC5zZWFyY2hib3guZW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoaSA9IHNtYXNoLmdldChkb2N1bWVudCwgXCIuc21hc2gtc2VhcmNoYm94IGlucHV0XCIpKSB7XG4gICAgICAgIHJldHVybiAoaS52YWx1ZS5sZW5ndGggPT0gMCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5zbWFzaC5zZWFyY2hib3guYXBwZW5kVG8gPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5vZGUuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICB2YXIgcmVzdWx0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2VhcmNoYm94IC5zbWFzaC1zZWFyY2hib3gtcmVzdWx0c1wiKTtcbiAgICByZXN1bHRzLmFwcGVuZENoaWxkKG5vZGUpO1xufTtcblxuc21hc2guc2VhcmNoYm94LnJlc3VsdHMgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgdmFyIHJlc3VsdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCAuc21hc2gtc2VhcmNoYm94LXJlc3VsdHNcIik7XG4gICAgcmVzdWx0cy5pbm5lckhUTUwgPSBjb250ZW50O1xufTtcbiIsInNtYXNoLnNpZGViYXIgPSB7XG4gICAgaV86IGZhbHNlXG59O1xuXG5zbWFzaC5zaWRlYmFyLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc21hc2guc2lkZWJhci5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzaWJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyIC5sb2NrXCIpO1xuICAgIGlmICghc2libCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNpYmwub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzbWFzaC5zaWRlYmFyLnRvZ2dsZUxvY2soKTtcbiAgICB9O1xuXG4gICAgdmFyIHNpYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhclwiKTtcbiAgICBzbWFzaC5jbGFzcy5hZGQoc2liLCAnaXMtdW5sb2NrZWQnKTtcbiAgICBzbWFzaC5zaWRlYmFyLmlfID0gdHJ1ZTtcbiAgICBpZiAoc21hc2guY29uZmlnLmdldCgnc2lkZWJhcl9sb2NrJykpIHtcbiAgICAgICAgc21hc2guc2lkZWJhci50b2dnbGVMb2NrKCk7XG4gICAgfVxufTtcblxuc21hc2guc2lkZWJhci50b2dnbGVMb2NrID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFzbWFzaC5zaWRlYmFyLmlfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc21hc2guY2xhc3MudG9nZ2xlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhciAubG9ja1wiKSwgJ3VubG9jaycpO1xuICAgIHNtYXNoLmNsYXNzLnRvZ2dsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXJcIiksICdpcy11bmxvY2tlZCcpO1xuICAgIHNtYXNoLmNvbmZpZy5zZXQoJ3NpZGViYXJfbG9jaycsICFzbWFzaC5jbGFzcy5oYXMoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyXCIpLCAnaXMtdW5sb2NrZWQnKSk7XG59O1xuIiwic21hc2guc3RvcmFnZSA9IHt9O1xuXG5zbWFzaC5zdG9yYWdlLnNldCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG59O1xuXG5zbWFzaC5zdG9yYWdlLnVuc2V0ID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbn07XG5cbnNtYXNoLnN0b3JhZ2UuZ2V0ID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgdmFyIGkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgIGlmICghaSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5wYXJzZShpKTtcbn07XG5cbnNtYXNoLnN0b3JhZ2UuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbn07XG4iLCJzbWFzaC53b3Jrc3BhY2UgPSB7XG4gICAgYmFzZVRpdGxlOiB1bmRlZmluZWQsXG4gICAgb25sYXN0dGFiY2xvc2VkOiB1bmRlZmluZWQsXG4gICAgX3dzXzogdW5kZWZpbmVkLFxuICAgIF9oZHJfOiB1bmRlZmluZWQsXG4gICAgX3NiXzogdW5kZWZpbmVkLFxuICAgIF90YWJzXzogW11cbn07XG5cbnNtYXNoLndvcmtzcGFjZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgc21hc2gud29ya3NwYWNlLl93c18gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXdvcmtzcGFjZVwiKTtcbiAgICBpZiAoIXNtYXNoLndvcmtzcGFjZS5fd3NfKSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBzbWFzaC53b3Jrc3BhY2UuX2hkcl8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLWhlYWRlclwiKTtcbiAgICBpZiAoc21hc2gud29ya3NwYWNlLl9oZHJfKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChzbWFzaC53b3Jrc3BhY2UuX3dzXywgJ2hhcy1oZWFkZXInKTtcbiAgICB9XG4gICAgc21hc2gud29ya3NwYWNlLl9zYl8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXdvcmtzcGFjZSAuc21hc2gtc2lkZWJhclwiKTtcbiAgICBpZiAoc21hc2gud29ya3NwYWNlLl9zYl8pIHtcbiAgICAgICAgc21hc2guY2xhc3MuYWRkKHNtYXNoLndvcmtzcGFjZS5fd3NfLCAnaGFzLXNpZGViYXInKTtcbiAgICB9XG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuYWRkVGFiID0gZnVuY3Rpb24oaWQsIHRpdGxlLCBjb250ZW50LCB1cmwpIHtcbiAgICBpZiAoIXNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC10YWItcGFuZScpKSB7XG4gICAgICAgIHZhciBwYW5lbCA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC1wYW5lbCcpO1xuICAgICAgICBpZiAoIXBhbmVsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVG8gYWRkIGEgdGFiIHRoZXJlIG5lZWRzIHRvIGJlIGEgcGFuZWwnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwYW5lbC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cInNtYXNoLXRhYi1wYW5lXCI+PGRpdiBjbGFzcz1cInNtYXNoLXRhYnNcIj48L2Rpdj48ZGl2IGNsYXNzPVwic21hc2gtcGFuZXNcIj48L2Rpdj48L2Rpdj4nO1xuICAgIH1cbiAgICB2YXIgdGFicyA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC10YWItcGFuZSAuc21hc2gtdGFicycpO1xuICAgIHZhciBwYW5lc0NvbnRhaW5lciA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC10YWItcGFuZSAuc21hc2gtcGFuZXMnKTtcblxuICAgIGRvY3VtZW50LnRpdGxlID0gc21hc2gud29ya3NwYWNlLmNyZWF0ZVRpdGxlKHRpdGxlKTtcblxuICAgIGlmICh0YWIgPSBzbWFzaC5nZXQodGFicywgJy5zbWFzaC10YWJbZGF0YS1pZD1cIicgKyBpZCArICdcIl0nKSkge1xuICAgICAgICB2YXIgcGFuZSA9IHNtYXNoLmdldChwYW5lc0NvbnRhaW5lciwgJy5zbWFzaC1wYW5lW2RhdGEtaWQ9XCInICsgaWQgKyAnXCJdJyk7XG4gICAgICAgIHBhbmUuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICAgICAgdGFiLmRhdGFzZXQudXJsID0gdXJsO1xuICAgICAgICB0YWIub25jbGljaygpO1xuICAgICAgICByZXR1cm4ge3RhYjogdGFiLCBwYW5lOiBwYW5lfTtcbiAgICB9XG5cbiAgICBzbWFzaC5oaWRlKHBhbmVzQ29udGFpbmVyLCBcIi5zbWFzaC1wYW5lXCIpO1xuICAgIGlmIChhY3RpdmUgPSBzbWFzaC5nZXQodGFicywgJy5zbWFzaC10YWIuYWN0aXZlJykpIHtcbiAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGFjdGl2ZSwgJ2FjdGl2ZScpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIG5ldyB0YWJcbiAgICB2YXIgdGFiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0YWIuY2xhc3NOYW1lID0gJ3NtYXNoLXRhYiBhY3RpdmUnO1xuICAgIHRhYi5kYXRhc2V0LmlkID0gaWQ7XG4gICAgdGFiLmRhdGFzZXQudXJsID0gdXJsO1xuICAgIHRhYi5pbm5lckhUTUwgPSB0aXRsZSArICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNsb3NlXCI+Y2xvc2U8L2k+JztcbiAgICB0YWIub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGFjdGl2ZSA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYi5hY3RpdmUnKSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGFjdGl2ZSwgJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZCh0aGlzLCAnYWN0aXZlJyk7XG4gICAgICAgIHNtYXNoLmhpZGUoZG9jdW1lbnQsICcuc21hc2gtcGFuZScpO1xuICAgICAgICBzbWFzaC5zaG93KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyB0aGlzLmRhdGFzZXQuaWQgKyAnXCJdJyk7XG4gICAgICAgIGlmICh0aGlzLmRhdGFzZXQudXJsICYmIHRoaXMuZGF0YXNldC51cmwgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgc21hc2gucm91dGVyLmRpc3BsYXlVUkwodGhpcy5kYXRhc2V0LnVybCk7XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBzbWFzaC53b3Jrc3BhY2UuY3JlYXRlVGl0bGUodGhpcy5pbm5lckhUTUwpO1xuICAgIH07XG4gICAgc21hc2gub24odGFiLCAnLmNsb3NlJywgJ29uY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudEVsZW1lbnQub25jbG9zZSAmJiAhdGhpcy5wYXJlbnRFbGVtZW50Lm9uY2xvc2UoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXModGhpcy5wYXJlbnRFbGVtZW50LCAnYWN0aXZlJykpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudEVsZW1lbnQucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LnByZXZpb3VzU2libGluZy5vbmNsaWNrKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGFyZW50RWxlbWVudC5uZXh0U2libGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5uZXh0U2libGluZy5vbmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhbmUgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtcGFuZVtkYXRhLWlkPVwiJyArIHRoaXMucGFyZW50RWxlbWVudC5kYXRhc2V0LmlkICsgJ1wiXScpKSB7XG4gICAgICAgICAgICBwYW5lLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQocGFuZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5wYXJlbnRFbGVtZW50KTtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50RWxlbWVudC5vbmNsb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uY2xvc2VkKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzbWFzaC53b3Jrc3BhY2UuYWN0aXZlVGFiKCkgJiYgc21hc2gud29ya3NwYWNlLm9ubGFzdHRhYmNsb3NlZCkge1xuICAgICAgICAgICAgc21hc2gud29ya3NwYWNlLm9ubGFzdHRhYmNsb3NlZCgpO1xuICAgICAgICB9XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG4gICAgdGFicy5hcHBlbmRDaGlsZCh0YWIpO1xuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHBhbmUgd2l0aCB0aGUgcHJvdmlkZWQgY29udGVudFxuICAgIHZhciBwYW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwYW5lLmNsYXNzTmFtZSA9ICdzbWFzaC1wYW5lJztcbiAgICBwYW5lLmRhdGFzZXQuaWQgPSBpZDtcbiAgICBwYW5lLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgcGFuZXNDb250YWluZXIuYXBwZW5kQ2hpbGQocGFuZSk7XG4gICAgcmV0dXJuIHt0YWI6IHRhYiwgcGFuZTogcGFuZX07XG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuYWN0aXZlVGFiID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRhYiA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC10YWIuYWN0aXZlJylcbiAgICBpZiAoIXRhYikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIHBhbmUgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtcGFuZVtkYXRhLWlkPVwiJyArIHRhYi5kYXRhc2V0LmlkICsgJ1wiXScpO1xuICAgIGlmICghcGFuZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHt0YWI6IHRhYiwgcGFuZTogcGFuZX07XG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuY3JlYXRlVGl0bGUgPSBmdW5jdGlvbih0aXRsZSkge1xuICAgIHZhciB0ID0gdGl0bGUucmVwbGFjZSgvPChbXj5dKz8pKFtePl0qPyk+KC4qPyk8XFwvXFwxPi9pZywgXCJcIik7XG4gICAgaWYgKHQgPT0gJycpIHtcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSB0aXRsZTtcbiAgICAgICAgaWYgKHRzID0gc21hc2guZ2V0KGRpdiwgJy50aXRsZScpKSB7XG4gICAgICAgICAgICB0ID0gdHMuaW5uZXJIVE1MO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ID09ICcnKSB7XG4gICAgICAgICAgICB0ID0gJ3Vua25vd24nO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ICsgKHNtYXNoLndvcmtzcGFjZS5iYXNlVGl0bGUgPyAnIHwgJyArIHNtYXNoLndvcmtzcGFjZS5iYXNlVGl0bGUgOiBcIlwiKTtcbn07XG4iXX0=
