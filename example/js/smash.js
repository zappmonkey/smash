window.addEventListener("load",function(s){smash.init()},!1);var smash={};smash.init=function(){smash.config.init(),smash.sidebar.init(),smash.searchbox.init(),smash.workspace.init(),smash.input.init()},smash.get=function(s,e){try{return s.querySelector(e)}catch(s){console.log(s)}},smash.getAll=function(s,e){try{return s.querySelectorAll(e)}catch(s){console.log(s)}},smash.hide=function(s,e){for(var a=smash.getAll(s,e),t=0;t<a.length;t++)a[t].style.display="none"},smash.show=function(s,e){for(var a=smash.getAll(s,e),t=0;t<a.length;t++)a[t].style.display=""},smash.on=function(s,e,a,t){for(var n=smash.getAll(s,e),r=0;r<n.length;r++)n[r][a]=t},smash.ajax={_headers_:[]},smash.ajax.addHeader=function(s,e){smash.ajax._headers_[s]=e},smash.ajax._xhr_=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var s,e=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],a=0;a<e.length;a++)try{s=new ActiveXObject(e[a]);break}catch(s){}return s},smash.ajax.send=function(s,e,a,t,n,r){void 0===r&&(r=!0);var o=smash.ajax._xhr_();o.responseType=n,o.onreadystatechange=function(){4==o.readyState&&(200==o.status||201==o.status?e&&e(o.response):console.log(o.status,o.response))},o.open(a,s,r),"json"==n?o.setRequestHeader("Content-type","application/json"):"POST"==a&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var i in smash.ajax._headers_)o.setRequestHeader(i,smash.ajax._headers_[i]);o.send(t)},smash.ajax.get=function(s,e,a,t,n){var r=[];for(var o in a)r.push(encodeURIComponent(o)+"="+encodeURIComponent(a[o]));smash.ajax.send(s+(r.length?"?"+r.join("&"):""),e,"GET",null,t,n)},smash.ajax.post=function(s,e,a,t,n){var r;if(a)if("json"!=t){var o=[];for(var i in a)o.push(encodeURIComponent(i)+"="+encodeURIComponent(a[i]));r=o.join("&")}else r=JSON.stringify(a);smash.ajax.send(s,e,"POST",r,t,n)},smash.class={},smash.class.add=function(s,e){smash.class.has(s,e)||(s.classList?s.classList.add(e):s.className+=" "+e)},smash.class.remove=function(s,e){smash.class.has(s,e)&&(s.classList?s.classList.remove(e):s.className=s.className.replace(e,""))},smash.class.has=function(s,e){return(" "+s.className+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1},smash.class.toggle=function(s,e){smash.class.has(s,e)?smash.class.remove(s,e):smash.class.add(s,e)},smash.config={_values_:{_sidebar_lock_:!1}},smash.config.init=function(){var s=smash.storage.get("config");s&&(smash.config._values_=s)},smash.config.get=function(s){var e="_"+s+"_";if(e in smash.config._values_)return smash.config._values_[e];throw new smash.Exception("001",'Invalid config option "'+s+'"')},smash.config.set=function(s,e){var a="_"+s+"_";if(!a in smash.config._values_)throw new smash.Exception("001",'Invalid config option "'+s+'"');smash.config._values_[a]=e,smash.storage.set("config",smash.config._values_)},smash.Exception=function(s,e){this.value=s,this.message=e,this.toString=function(){return"SmashException "+this.value+": "+this.message}},smash.input={},smash.input.init=function(){for(var s,e=document.querySelectorAll(".smash-input input, .smash-textarea textarea"),a=0;a<e.length;a++)if(s=e[a],!smash.class.has(s.parentElement,"smash-initialised")){if(s.parentElement.setValue=function(e){(s=this.querySelector("input"))?(s.value=e,s.onkeyup()):(s=this.querySelector("textarea"))&&(s.value=e,s.onkeyup())},s.parentElement.getValue=function(){if(s=this.querySelector("input")){var s=this.querySelector("input");return s.value}if(s=this.querySelector("textarea")){var s=this.querySelector("input");return s.value}return null},smash.class.has(s.parentElement,"has-floating-label")){smash.class.remove(s.parentElement,"has-floating-label"),smash.class.add(s.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=s.placeholder,s.parentElement.appendChild(t),s.onkeyup=function(s){var e=this.parentElement.querySelector("label");e&&(""!=this.value?smash.class.add(e,"show"):smash.class.remove(e,"show"))}}s.parentElement.getAttribute("value")&&s.parentElement.setValue(s.parentElement.getAttribute("value")),smash.class.add(s.parentElement,"smash-initialised")}for(var n,r=document.querySelectorAll(".smash-select select"),a=0;a<r.length;a++)if(n=r[a],!smash.class.has(n.parentElement,"smash-initialised")){if(smash.class.has(n.parentElement,"has-floating-label")){smash.class.remove(n.parentElement,"has-floating-label"),smash.class.add(n.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=n.getAttribute("placeholder"),n.parentElement.appendChild(t)}n.parentElement.setValue=function(s){smash.class.remove(this,"is-focussed");var e=this.querySelector("select"),a=this.querySelector("input");e.value=s,e.selectedIndex>-1&&(a.value=e.options[e.selectedIndex].text),a.focus(),a.onfocus()},n.parentElement.getValue=function(){var s=this.querySelector("select");return s.selectedIndex==-1?null:s.options[s.selectedIndex].value};var s=document.createElement("input");s.type="text",s.placeholder=n.getAttribute("placeholder"),s.setAttribute("readonly","readonly"),n.parentElement.appendChild(s);for(var o=n.querySelectorAll("option"),i=document.createElement("ul"),h=0;h<o.length;h++){var l=o[h];if(l.getAttribute("value")){var c=document.createElement("li");c.setAttribute("value",l.value),c.innerHTML=l.innerHTML,i.appendChild(c),c.onmousedown=function(s){this.parentElement.parentElement.setValue(this.getAttribute("value")),s.stopPropagation(),window.onmousedown=null}}}n.parentElement.appendChild(i),s.onfocus=function(s){var e=this.parentElement.querySelector("label");e&&(""!=this.value?smash.class.add(e,"show"):smash.class.remove(e,"show"))},n.parentElement.onclick=function(){smash.class.add(this,"is-focussed");var s=this;window.onmousedown=function(){console.log("click outside"),window.onmousedown=null,smash.class.remove(s,"is-focussed")}},n.parentElement.getAttribute("value")&&n.parentElement.setValue(n.parentElement.getAttribute("value")),smash.class.add(n.parentElement,"smash-initialised")}},smash.router={__parseRouteRegex:/{(.*?)}/gi,__dynamicParts:[],__routes:{static:[],dynamic:[]}},smash.router.add=function(s,e){var a=smash.router.parseRoute(s);return a.regex?(a.callback=e,smash.router.__routes.dynamic[a.depth]||(smash.router.__routes.dynamic[a.depth]=[]),smash.router.__routes.dynamic[a.depth][a.numVars]||(smash.router.__routes.dynamic[a.depth][a.numVars]=[]),void smash.router.__routes.dynamic[a.depth][a.numVars].push(a)):void(smash.router.__routes.static[s]=e)},smash.router.set=function(s){smash.router.displayURL(s),window.dispatchEvent(new Event("popstate"))},smash.router.displayURL=function(s){window.history.pushState("","",s)},smash.router.redirect=function(s){window.location=s},smash.router.handleNotFound=function(s){console.log("route: "+JSON.stringify(s)+" does not exist")},smash.router.run=function(){window.onpopstate=function(s){smash.router.execute()},smash.router.execute()},smash.router.execute=function(){var s=this.getPath();if(this.__routes.static[s.path])return void this.__routes.static[s.path]();var e=s.path.split("/").length-1;if(this.__routes.dynamic[e]){var a,t,n={};for(var r in this.__routes.dynamic[e])for(var o in this.__routes.dynamic[e][r]){var a=this.__routes.dynamic[e][r][o];if(t=s.path.match(a.regex)){for(var i=0;i<a.numVars;i++)n[a.vars[i]]=t[i+1];return void a.callback(n)}}}smash.router.handleNotFound(s)},smash.router.getPath=function(){var s=document.createElement("a");return s.href=window.location,{host:s.hostname,path:s.pathname}},smash.router.parseRoute=function(s){"/"!=s.substring(0,1)&&(s="/"+s),"/"==s.substring(s.length-2)&&(s="/"+s);var e={path:s,depth:s.split("/").length-1,vars:[],numVars:0};if(smash.router.__dynamicParts=s.match(smash.router.__parseRouteRegex),void 0!=smash.router.__dynamicParts&&null!=smash.router.__dynamicParts){for(var a="^"+s.replace(/\//gi,"\\/")+"$",t=0;t<smash.router.__dynamicParts.length;t++)e.numVars++,e.vars.push(smash.router.__dynamicParts[t].substring(1,smash.router.__dynamicParts[t].length-1)),a=a.replace(smash.router.__dynamicParts[t],"(.*?)");e.regex=new RegExp(a,"i")}return e},smash.router.queryParam=function(s){var e="[\\?&]"+s+"=([^&#]*)",a=new RegExp(e),t=a.exec(window.location.search);if(null!=t)return t[1]},smash.searchbox={i_:!1,minAutoCompleteLength:3,onfocus:void 0,onblur:void 0,onvalue:void 0},smash.searchbox.init=function(){if(!smash.searchbox.i_){var s=document.querySelector(".smash-searchbox input");s&&(s.onfocus=function(){0==this.value.length&&smash.searchbox.results('<div class="smash-instruction">Start typing to find results</div>'),smash.class.add(document.querySelector(".smash-header"),"is-focussed"),smash.class.add(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onfocus&&smash.searchbox.onfocus()},s.onblur=function(){smash.class.remove(document.querySelector(".smash-header"),"is-focussed"),smash.class.remove(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onblur&&smash.searchbox.onblur()},s.onkeyup=function(s){this.value.length<smash.searchbox.minAutoCompleteLength||smash.searchbox.onchange&&smash.searchbox.onchange(this.value)},smash.searchbox.i_=!0)}},smash.searchbox.results=function(s){var e=document.querySelector(".smash-searchbox .smash-searchbox-results");e.innerHTML=s},smash.sidebar={i_:!1},smash.sidebar.init=function(){if(!smash.sidebar.i_){var s=document.querySelector(".smash-sidebar .lock");if(s){s.onclick=function(){smash.sidebar.toggleLock()};var e=document.querySelector(".smash-sidebar");smash.class.add(e,"is-unlocked"),smash.sidebar.i_=!0,smash.config.get("sidebar_lock")&&smash.sidebar.toggleLock()}}},smash.sidebar.toggleLock=function(){smash.sidebar.i_&&(smash.class.toggle(document.querySelector(".smash-sidebar .lock"),"unlock"),smash.class.toggle(document.querySelector(".smash-sidebar"),"is-unlocked"),smash.config.set("sidebar_lock",!smash.class.has(document.querySelector(".smash-sidebar"),"is-unlocked")))},smash.storage={},smash.storage.set=function(s,e){localStorage.setItem(s,JSON.stringify(e))},smash.storage.get=function(s){var e=localStorage.getItem(s);if(e)return JSON.parse(e)},smash.storage.clear=function(){localStorage.clear()},smash.workspace={baseTitle:void 0,_ws_:void 0,_hdr_:void 0,_sb_:void 0,_tabs_:[]},smash.workspace.init=function(){smash.workspace._ws_=document.querySelector(".smash-workspace"),smash.workspace._ws_&&(smash.workspace._hdr_=document.querySelector(".smash-header"),smash.workspace._hdr_&&smash.class.add(smash.workspace._ws_,"has-header"),smash.workspace._sb_=document.querySelector(".smash-workspace .smash-sidebar"),smash.workspace._sb_&&smash.class.add(smash.workspace._ws_,"has-sidebar"))},smash.workspace.addTab=function(s,e,a,t){if(!smash.get(document,".smash-tab-pane")){var n=smash.get(document,".smash-panel");if(!n)return void console.log("To add a tab there needs to be a panel");n.innerHTML='<div class="smash-tab-pane"><div class="smash-tabs"></div><div class="smash-panes"></div></div>'}var r=smash.get(document,".smash-tab-pane .smash-tabs"),o=smash.get(document,".smash-tab-pane .smash-panes");if(document.title=e+(smash.workspace.baseTitle?" | "+smash.workspace.baseTitle:""),h=smash.get(r,'.smash-tab[data-id="'+s+'"]')){var i=smash.get(o,'.smash-pane[data-id="'+s+'"]').innerHTML=a;return h.dataset.url=t,void h.onclick()}smash.hide(o,".smash-pane"),(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active");var h=document.createElement("div");h.className="smash-tab active",h.dataset.id=s,h.dataset.url=t,h.innerHTML=e+'<i class="material-icons close">close</i>',h.onclick=function(s){(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active"),smash.class.add(this,"active"),smash.hide(document,".smash-pane"),smash.show(document,'.smash-pane[data-id="'+this.dataset.id+'"]'),this.dataset.url&&"undefined"!=this.dataset.url&&smash.router.displayURL(this.dataset.url)},smash.on(h,".close","onclick",function(s){smash.class.has(this.parentElement,"active")&&(this.parentElement.previousSibling?this.parentElement.previousSibling.onclick():this.parentElement.nextSibling&&this.parentElement.nextSibling.onclick()),(i=smash.get(document,'.smash-pane[data-id="'+this.parentElement.dataset.id+'"]'))&&i.parentElement.removeChild(i),this.parentElement.parentElement.removeChild(this.parentElement),s.stopPropagation()}),r.appendChild(h);var i=document.createElement("div");i.className="smash-pane",i.dataset.id=s,i.innerHTML=a,o.appendChild(i)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNtYXNoLmpzIiwiYWpheC5qcyIsImNsYXNzLmpzIiwiY29uZmlnLmpzIiwiZXhjZXB0aW9uLmpzIiwiaW5wdXQuanMiLCJyb3V0ZXIuanMiLCJzZWFyY2hib3guanMiLCJzaWRlYmFyLmpzIiwic3RvcmFnZS5qcyIsIndvcmtzcGFjZS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInNtYXNoIiwiaW5pdCIsImNvbmZpZyIsInNpZGViYXIiLCJzZWFyY2hib3giLCJ3b3Jrc3BhY2UiLCJpbnB1dCIsImdldCIsInBhcmVudCIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImNvbnNvbGUiLCJsb2ciLCJnZXRBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGlkZSIsImVsIiwiaSIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsInNob3ciLCJvbiIsImV2ZW50IiwiY2FsbGJhY2siLCJlbGVtZW50cyIsImFqYXgiLCJfaGVhZGVyc18iLCJhZGRIZWFkZXIiLCJuYW1lIiwidmFsdWUiLCJfeGhyXyIsIlhNTEh0dHBSZXF1ZXN0IiwieGhyIiwidmVyc2lvbnMiLCJBY3RpdmVYT2JqZWN0Iiwic2VuZCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJyZXNwb25zZVR5cGUiLCJhc3luYyIsInVuZGVmaW5lZCIsIngiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInF1ZXJ5Iiwia2V5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJwb3N0IiwiZGF0YVN0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJjbGFzcyIsImFkZCIsImNsYXNzTmFtZSIsImhhcyIsImNsYXNzTGlzdCIsInJlbW92ZSIsInJlcGxhY2UiLCJpbmRleE9mIiwidG9nZ2xlIiwiX3ZhbHVlc18iLCJfc2lkZWJhcl9sb2NrXyIsInYiLCJzdG9yYWdlIiwib3B0aW9uIiwibyIsIkV4Y2VwdGlvbiIsInNldCIsIm1lc3NhZ2UiLCJ0aGlzIiwidG9TdHJpbmciLCJpbnB1dHMiLCJkb2N1bWVudCIsInBhcmVudEVsZW1lbnQiLCJzZXRWYWx1ZSIsIm9ua2V5dXAiLCJnZXRWYWx1ZSIsImxhYmVsIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInBsYWNlaG9sZGVyIiwiYXBwZW5kQ2hpbGQiLCJsIiwiZ2V0QXR0cmlidXRlIiwic2VsZWN0Iiwic2VsZWN0cyIsInNlbGVjdGVkSW5kZXgiLCJvcHRpb25zIiwidGV4dCIsImZvY3VzIiwib25mb2N1cyIsInR5cGUiLCJzZXRBdHRyaWJ1dGUiLCJ1bCIsImoiLCJsaSIsIm9ubW91c2Vkb3duIiwic3RvcFByb3BhZ2F0aW9uIiwib25jbGljayIsInJvdXRlciIsIl9fcGFyc2VSb3V0ZVJlZ2V4IiwiX19keW5hbWljUGFydHMiLCJfX3JvdXRlcyIsInN0YXRpYyIsImR5bmFtaWMiLCJwYXRoIiwicm91dGUiLCJwYXJzZVJvdXRlIiwicmVnZXgiLCJkZXB0aCIsIm51bVZhcnMiLCJkaXNwbGF5VVJMIiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInJlZGlyZWN0IiwibG9jYXRpb24iLCJoYW5kbGVOb3RGb3VuZCIsInJ1biIsIm9ucG9wc3RhdGUiLCJleGVjdXRlIiwiZ2V0UGF0aCIsInNwbGl0IiwibWF0Y2hlcyIsInZhck51bSIsIml0ZW0iLCJtYXRjaCIsInZhcnMiLCJocmVmIiwiaG9zdCIsImhvc3RuYW1lIiwicGF0aG5hbWUiLCJzdWJzdHJpbmciLCJSZWdFeHAiLCJxdWVyeVBhcmFtIiwicGFyYW0iLCJyZWdleFMiLCJyZXN1bHRzIiwiZXhlYyIsInNlYXJjaCIsImlfIiwibWluQXV0b0NvbXBsZXRlTGVuZ3RoIiwib25ibHVyIiwib252YWx1ZSIsInNzYiIsIm9uY2hhbmdlIiwiY29udGVudCIsInNpYmwiLCJ0b2dnbGVMb2NrIiwic2liIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldEl0ZW0iLCJwYXJzZSIsImNsZWFyIiwiYmFzZVRpdGxlIiwiX3dzXyIsIl9oZHJfIiwiX3NiXyIsIl90YWJzXyIsImFkZFRhYiIsImlkIiwidGl0bGUiLCJwYW5lbCIsInRhYnMiLCJwYW5lc0NvbnRhaW5lciIsInRhYiIsInBhbmUiLCJkYXRhc2V0IiwiYWN0aXZlIiwicHJldmlvdXNTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJyZW1vdmVDaGlsZCJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQUFDLGlCQUFBLE9BQUEsU0FBQUMsR0FDQUMsTUFBQUMsU0FDQSxFQUVBLElBQUFELFNBRUFBLE9BQUFDLEtBQUEsV0FDQUQsTUFBQUUsT0FBQUQsT0FDQUQsTUFBQUcsUUFBQUYsT0FDQUQsTUFBQUksVUFBQUgsT0FDQUQsTUFBQUssVUFBQUosT0FDQUQsTUFBQU0sTUFBQUwsUUFHQUQsTUFBQU8sSUFBQSxTQUFBQyxFQUFBQyxHQUNBLElBQ0EsTUFBQUQsR0FBQUUsY0FBQUQsR0FDQSxNQUFBVixHQUNBWSxRQUFBQyxJQUFBYixLQUtBQyxNQUFBYSxPQUFBLFNBQUFMLEVBQUFDLEdBQ0EsSUFDQSxNQUFBRCxHQUFBTSxpQkFBQUwsR0FDQSxNQUFBVixHQUNBWSxRQUFBQyxJQUFBYixLQUtBQyxNQUFBZSxLQUFBLFNBQUFQLEVBQUFDLEdBRUEsSUFBQSxHQURBTyxHQUFBaEIsTUFBQWEsT0FBQUwsRUFBQUMsR0FDQVEsRUFBQSxFQUFBQSxFQUFBRCxFQUFBRSxPQUFBRCxJQUNBRCxFQUFBQyxHQUFBRSxNQUFBQyxRQUFBLFFBSUFwQixNQUFBcUIsS0FBQSxTQUFBYixFQUFBQyxHQUVBLElBQUEsR0FEQU8sR0FBQWhCLE1BQUFhLE9BQUFMLEVBQUFDLEdBQ0FRLEVBQUEsRUFBQUEsRUFBQUQsRUFBQUUsT0FBQUQsSUFDQUQsRUFBQUMsR0FBQUUsTUFBQUMsUUFBQSxJQUlBcEIsTUFBQXNCLEdBQUEsU0FBQWQsRUFBQUMsRUFBQWMsRUFBQUMsR0FFQSxJQUFBLEdBREFDLEdBQUF6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QUFBb0UsRUFDQW1CLEVBQUFyRixZQUFBdUYiLCJmaWxlIjoic21hc2guanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oZSl7XG4gICAgc21hc2guaW5pdCgpO1xufSwgZmFsc2UpO1xuXG52YXIgc21hc2ggPSB7fTtcblxuc21hc2guaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHNtYXNoLmNvbmZpZy5pbml0KCk7XG4gICAgc21hc2guc2lkZWJhci5pbml0KCk7XG4gICAgc21hc2guc2VhcmNoYm94LmluaXQoKTtcbiAgICBzbWFzaC53b3Jrc3BhY2UuaW5pdCgpO1xuICAgIHNtYXNoLmlucHV0LmluaXQoKTtcbn07XG5cbnNtYXNoLmdldCA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gcGFyZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbnNtYXNoLmdldEFsbCA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gcGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbnNtYXNoLmhpZGUgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdmFyIGVsID0gc21hc2guZ2V0QWxsKHBhcmVudCwgc2VsZWN0b3IpO1xuICAgIGZvciAodmFyIGk9MDsgaTxlbC5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbFtpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbn07XG5cbnNtYXNoLnNob3cgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdmFyIGVsID0gc21hc2guZ2V0QWxsKHBhcmVudCwgc2VsZWN0b3IpO1xuICAgIGZvciAodmFyIGk9MDsgaTxlbC5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbFtpXS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgfVxufTtcblxuc21hc2gub24gPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yLCBldmVudCwgY2FsbGJhY2spIHtcbiAgICB2YXIgZWxlbWVudHMgPSBzbWFzaC5nZXRBbGwocGFyZW50LCBzZWxlY3Rvcik7XG4gICAgZm9yICh2YXIgaT0wOyBpPGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVsZW1lbnRzW2ldW2V2ZW50XSA9IGNhbGxiYWNrO1xuICAgIH1cbn07XG4iLCJzbWFzaC5hamF4ID0ge1xuICAgIF9oZWFkZXJzXzogW11cbn07XG5cbnNtYXNoLmFqYXguYWRkSGVhZGVyID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBzbWFzaC5hamF4Ll9oZWFkZXJzX1tuYW1lXSA9IHZhbHVlO1xufTtcblxuc21hc2guYWpheC5feGhyXyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgfVxuICAgIHZhciB2ZXJzaW9ucyA9IFtcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC42LjBcIixcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC41LjBcIixcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC40LjBcIixcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC4zLjBcIixcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC4yLjBcIixcbiAgICAgICAgXCJNaWNyb3NvZnQuWG1sSHR0cFwiXG4gICAgXTtcbiAgICB2YXIgeGhyO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVyc2lvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHhociA9IG5ldyBBY3RpdmVYT2JqZWN0KHZlcnNpb25zW2ldKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHhocjtcbn07XG5cbnNtYXNoLmFqYXguc2VuZCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBtZXRob2QsIGRhdGEsIHJlc3BvbnNlVHlwZSwgYXN5bmMpIHtcbiAgICBpZiAoYXN5bmMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhc3luYyA9IHRydWU7XG4gICAgfVxuICAgIHZhciB4ID0gc21hc2guYWpheC5feGhyXygpO1xuICAgIHgucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xuICAgIHgub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHRcdGlmICh4LnJlYWR5U3RhdGUgPT0gNCkge1xuXHRcdFx0aWYgKHguc3RhdHVzID09IDIwMCB8fCB4LnN0YXR1cyA9PSAyMDEpIHtcblx0XHRcdFx0Y2FsbGJhY2sgJiYgY2FsbGJhY2soeC5yZXNwb25zZSk7XG5cdFx0XHR9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHguc3RhdHVzLCB4LnJlc3BvbnNlKTtcblx0XHRcdH1cblx0XHR9XG4gICAgfTtcbiAgICB4Lm9wZW4obWV0aG9kLCB1cmwsIGFzeW5jKTtcbiAgICBpZiAocmVzcG9uc2VUeXBlID09ICdqc29uJykge1xuICAgICAgICB4LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgfSBlbHNlIGlmIChtZXRob2QgPT0gJ1BPU1QnKSB7XG4gICAgICAgIHguc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpO1xuICAgIH1cbiAgICBmb3IgKHZhciBuYW1lIGluIHNtYXNoLmFqYXguX2hlYWRlcnNfKSB7XG4gICAgICAgIHguc2V0UmVxdWVzdEhlYWRlcihuYW1lLCBzbWFzaC5hamF4Ll9oZWFkZXJzX1tuYW1lXSk7XG4gICAgfVxuICAgIHguc2VuZChkYXRhKVxufTtcblxuc21hc2guYWpheC5nZXQgPSBmdW5jdGlvbiAodXJsLCBjYWxsYmFjaywgZGF0YSwgcmVzcG9uc2VUeXBlLCBhc3luYykge1xuICAgIHZhciBxdWVyeSA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgIHF1ZXJ5LnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YVtrZXldKSk7XG4gICAgfVxuICAgIHNtYXNoLmFqYXguc2VuZCh1cmwgKyAocXVlcnkubGVuZ3RoID8gJz8nICsgcXVlcnkuam9pbignJicpIDogJycpLCBjYWxsYmFjaywgJ0dFVCcsIG51bGwsIHJlc3BvbnNlVHlwZSwgIGFzeW5jKVxufTtcblxuc21hc2guYWpheC5wb3N0ID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2ssIGRhdGEsIHJlc3BvbnNlVHlwZSwgYXN5bmMpIHtcbiAgICB2YXIgZGF0YVN0cjtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgICBpZiAocmVzcG9uc2VUeXBlICE9ICdqc29uJykge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YVtrZXldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhU3RyID0gcXVlcnkuam9pbignJicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhU3RyID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc21hc2guYWpheC5zZW5kKHVybCwgY2FsbGJhY2ssICdQT1NUJywgZGF0YVN0ciwgcmVzcG9uc2VUeXBlLCBhc3luYylcbn07XG4iLCJzbWFzaC5jbGFzcyA9IHt9O1xuXG5zbWFzaC5jbGFzcy5hZGQgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKCFzbWFzaC5jbGFzcy5oYXMoZWwsIGNsYXNzTmFtZSkpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0ID8gZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpIDogZWwuY2xhc3NOYW1lICs9ICgnICcgKyBjbGFzc05hbWUpO1xuICAgIH1cbn07XG5cbnNtYXNoLmNsYXNzLnJlbW92ZSA9IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpIHtcbiAgICBpZiAoc21hc2guY2xhc3MuaGFzKGVsLCBjbGFzc05hbWUpKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdCA/IGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKSA6IGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKGNsYXNzTmFtZSwgJycpO1xuICAgIH1cbn07XG5cbnNtYXNoLmNsYXNzLmhhcyA9IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpIHtcbiAgICByZXR1cm4gKChcIiBcIiArIGVsLmNsYXNzTmFtZSArIFwiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLCBcIiBcIikuaW5kZXhPZihcIiBcIiArIGNsYXNzTmFtZSArIFwiIFwiKSA+IC0xKTtcbn07XG5cbnNtYXNoLmNsYXNzLnRvZ2dsZSA9IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpIHtcbiAgICBzbWFzaC5jbGFzcy5oYXMoZWwsIGNsYXNzTmFtZSkgPyBzbWFzaC5jbGFzcy5yZW1vdmUoZWwsIGNsYXNzTmFtZSkgOiBzbWFzaC5jbGFzcy5hZGQoZWwsIGNsYXNzTmFtZSk7XG59O1xuIiwic21hc2guY29uZmlnID0ge1xuICAgIF92YWx1ZXNfOiB7XG4gICAgICAgIF9zaWRlYmFyX2xvY2tfOiBmYWxzZVxuICAgIH1cbn1cblxuc21hc2guY29uZmlnLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHNtYXNoLnN0b3JhZ2UuZ2V0KCdjb25maWcnKTtcbiAgICBpZiAodikge1xuICAgICAgICBzbWFzaC5jb25maWcuX3ZhbHVlc18gPSB2O1xuICAgIH1cbn07XG5cbnNtYXNoLmNvbmZpZy5nZXQgPSBmdW5jdGlvbihvcHRpb24pIHtcbiAgICB2YXIgbyA9ICdfJyArIG9wdGlvbiArICdfJztcbiAgICBpZiAobyBpbiBzbWFzaC5jb25maWcuX3ZhbHVlc18pIHtcbiAgICAgICAgcmV0dXJuIHNtYXNoLmNvbmZpZy5fdmFsdWVzX1tvXTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IHNtYXNoLkV4Y2VwdGlvbignMDAxJywgJ0ludmFsaWQgY29uZmlnIG9wdGlvbiBcIicgKyBvcHRpb24gKyAnXCInKTtcbn07XG5cbnNtYXNoLmNvbmZpZy5zZXQgPSBmdW5jdGlvbihvcHRpb24sIHZhbHVlKSB7XG4gICAgdmFyIG8gPSAnXycgKyBvcHRpb24gKyAnXyc7XG4gICAgaWYgKCFvIGluIHNtYXNoLmNvbmZpZy5fdmFsdWVzXykge1xuICAgICAgICB0aHJvdyBuZXcgc21hc2guRXhjZXB0aW9uKCcwMDEnLCAnSW52YWxpZCBjb25maWcgb3B0aW9uIFwiJyArIG9wdGlvbiArICdcIicpO1xuICAgIH1cbiAgICBzbWFzaC5jb25maWcuX3ZhbHVlc19bb10gPSB2YWx1ZTtcbiAgICBzbWFzaC5zdG9yYWdlLnNldCgnY29uZmlnJywgc21hc2guY29uZmlnLl92YWx1ZXNfKTtcbn07XG4iLCJzbWFzaC5FeGNlcHRpb24gPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnU21hc2hFeGNlcHRpb24gJyArIHRoaXMudmFsdWUgKyAnOiAnICsgdGhpcy5tZXNzYWdlO1xuICAgIH07XG59O1xuIiwic21hc2guaW5wdXQgPSB7fTtcblxuc21hc2guaW5wdXQuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtYXNoLWlucHV0IGlucHV0LCAuc21hc2gtdGV4dGFyZWEgdGV4dGFyZWFcIik7XG4gICAgdmFyIGlucHV0O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlucHV0ID0gaW5wdXRzW2ldO1xuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKGlucHV0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaW5wdXQub25rZXl1cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKGlucHV0LnBhcmVudEVsZW1lbnQsICdmbG9hdGluZy1sYWJlbCcpO1xuXG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gaW5wdXQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGwsICdzaG93Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChpbnB1dC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKTtcbiAgICB9XG4gICAgdmFyIHNlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtYXNoLXNlbGVjdCBzZWxlY3RcIik7XG4gICAgdmFyIHNlbGVjdDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2VsZWN0ID0gc2VsZWN0c1tpXTtcbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhzZWxlY3QucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdoYXMtZmxvYXRpbmctbGFiZWwnKSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnaGFzLWZsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUodGhpcywgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgICAgICBzZWxlY3QudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmIChzZWxlY3Quc2VsZWN0ZWRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBzZWxlY3Qub3B0aW9uc1tzZWxlY3Quc2VsZWN0ZWRJbmRleF0udGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICBpbnB1dC5vbmZvY3VzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3QgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XG4gICAgICAgICAgICBpZiAoc2VsZWN0LnNlbGVjdGVkSW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Qub3B0aW9uc1tzZWxlY3Quc2VsZWN0ZWRJbmRleF0udmFsdWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGlucHV0KTtcblxuICAgICAgICB2YXIgb3B0aW9ucyA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKFwib3B0aW9uXCIpO1xuICAgICAgICB2YXIgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9wdGlvbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zW2pdO1xuICAgICAgICAgICAgaWYgKCFvcHRpb24uZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgb3B0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgIGxpLmlubmVySFRNTCA9IG9wdGlvbi5pbm5lckhUTUw7XG4gICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgICAgICBsaS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5zZXRWYWx1ZSh0aGlzLmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cub25tb3VzZWRvd24gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHVsKTtcbiAgICAgICAgaW5wdXQub25mb2N1cyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBsID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZCh0aGlzLCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3QgPSB0aGlzO1xuICAgICAgICAgICAgd2luZG93Lm9ubW91c2Vkb3duID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjbGljayBvdXRzaWRlXCIpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNlZG93biA9IG51bGw7XG4gICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHNlbGVjdCwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzZWxlY3QucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKHNlbGVjdC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgIH1cbiAgICAgICAgc21hc2guY2xhc3MuYWRkKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKTtcbiAgICB9XG59O1xuIiwic21hc2gucm91dGVyID0ge1xuICAgIF9fcGFyc2VSb3V0ZVJlZ2V4OiAveyguKj8pfS9pZyxcbiAgICBfX2R5bmFtaWNQYXJ0czogW10sXG4gICAgX19yb3V0ZXM6IHtcbiAgICAgICAgc3RhdGljOiBbXSxcbiAgICAgICAgZHluYW1pYzogW11cbiAgICB9XG59O1xuXG5zbWFzaC5yb3V0ZXIuYWRkID0gZnVuY3Rpb24ocGF0aCwgY2FsbGJhY2spIHtcbiAgICB2YXIgcm91dGUgPSBzbWFzaC5yb3V0ZXIucGFyc2VSb3V0ZShwYXRoKTtcbiAgICBpZiAocm91dGUucmVnZXgpIHtcbiAgICAgICAgcm91dGUuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgaWYgKCFzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF0pIHtcbiAgICAgICAgICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdKSB7XG4gICAgICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10ucHVzaChyb3V0ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc21hc2gucm91dGVyLl9fcm91dGVzLnN0YXRpY1twYXRoXSA9IGNhbGxiYWNrO1xufTtcblxuc21hc2gucm91dGVyLnNldCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgc21hc2gucm91dGVyLmRpc3BsYXlVUkwocm91dGUpO1xuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncG9wc3RhdGUnKSk7XG59O1xuXG5zbWFzaC5yb3V0ZXIuZGlzcGxheVVSTCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKFwiXCIsIFwiXCIsIHJvdXRlKTtcbn07XG5cbnNtYXNoLnJvdXRlci5yZWRpcmVjdCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgd2luZG93LmxvY2F0aW9uID0gcm91dGU7XG59O1xuXG5zbWFzaC5yb3V0ZXIuaGFuZGxlTm90Rm91bmQgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIGNvbnNvbGUubG9nKFwicm91dGU6IFwiICsgSlNPTi5zdHJpbmdpZnkocm91dGUpICsgXCIgZG9lcyBub3QgZXhpc3RcIik7XG59O1xuXG5zbWFzaC5yb3V0ZXIucnVuID0gZnVuY3Rpb24oKSB7XG4gICAgd2luZG93Lm9ucG9wc3RhdGUgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBzbWFzaC5yb3V0ZXIuZXhlY3V0ZSgpO1xuICAgIH07XG4gICAgc21hc2gucm91dGVyLmV4ZWN1dGUoKTtcbn1cblxuc21hc2gucm91dGVyLmV4ZWN1dGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGF0aCA9IHRoaXMuZ2V0UGF0aCgpO1xuICAgIGlmICh0aGlzLl9fcm91dGVzLnN0YXRpY1twYXRoLnBhdGhdKSB7XG4gICAgICAgIHRoaXMuX19yb3V0ZXMuc3RhdGljW3BhdGgucGF0aF0oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgZGVwdGggPSBwYXRoLnBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aC0xO1xuICAgIGlmICh0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdKSB7XG4gICAgICAgIHZhciByb3V0ZTtcbiAgICAgICAgdmFyIG1hdGNoZXM7XG4gICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgIGZvciAodmFyIHZhck51bSBpbiB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF1bdmFyTnVtXSkge1xuICAgICAgICAgICAgICAgIHZhciByb3V0ZSA9IHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF1bdmFyTnVtXVtpdGVtXTtcbiAgICAgICAgICAgICAgICBtYXRjaGVzID0gcGF0aC5wYXRoLm1hdGNoKHJvdXRlLnJlZ2V4KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxyb3V0ZS5udW1WYXJzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtyb3V0ZS52YXJzW2ldXSA9IG1hdGNoZXNbaSsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm91dGUuY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNtYXNoLnJvdXRlci5oYW5kbGVOb3RGb3VuZChwYXRoKTtcbn07XG5cbnNtYXNoLnJvdXRlci5nZXRQYXRoID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBsLmhyZWYgPSB3aW5kb3cubG9jYXRpb247XG4gICAgcmV0dXJuIHtob3N0OiBsLmhvc3RuYW1lLCBwYXRoOiBsLnBhdGhuYW1lfTtcbn07XG5cbnNtYXNoLnJvdXRlci5wYXJzZVJvdXRlID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIGlmIChwYXRoLnN1YnN0cmluZygwLDEpICE9IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG4gICAgfVxuICAgIGlmIChwYXRoLnN1YnN0cmluZyhwYXRoLmxlbmd0aC0yKSA9PSBcIi9cIikge1xuICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoO1xuICAgIH1cbiAgICB2YXIgcm91dGUgPSB7XG4gICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgIGRlcHRoOiAocGF0aC5zcGxpdChcIi9cIikubGVuZ3RoIC0gMSksXG4gICAgICAgIHZhcnM6IFtdLFxuICAgICAgICBudW1WYXJzOiAwXG4gICAgfTtcbiAgICBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMgPSBwYXRoLm1hdGNoKHNtYXNoLnJvdXRlci5fX3BhcnNlUm91dGVSZWdleCk7XG4gICAgaWYgKHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cyAhPSB1bmRlZmluZWQgJiYgc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzICE9IG51bGwpIHtcbiAgICAgICAgdmFyIHJlZ2V4ID0gXCJeXCIgKyBwYXRoLnJlcGxhY2UoL1xcLy9pZywgXCJcXFxcL1wiKSArIFwiJFwiO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByb3V0ZS5udW1WYXJzKys7XG4gICAgICAgICAgICByb3V0ZS52YXJzLnB1c2goc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzW2ldLnN1YnN0cmluZygxLCBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0ubGVuZ3RoLTEpKTtcbiAgICAgICAgICAgIHJlZ2V4ID0gcmVnZXgucmVwbGFjZShzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0sIFwiKC4qPylcIik7XG4gICAgICAgIH1cbiAgICAgICAgcm91dGUucmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4LCAnaScpO1xuICAgIH1cbiAgICByZXR1cm4gcm91dGU7XG59O1xuXG5zbWFzaC5yb3V0ZXIucXVlcnlQYXJhbSA9IGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgdmFyIHJlZ2V4UyA9IFwiW1xcXFw/Jl1cIitwYXJhbStcIj0oW14mI10qKVwiLFxuICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cCggcmVnZXhTICksXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWMoIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKTtcbiAgICBpZiggcmVzdWx0cyA9PSBudWxsICl7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzWzFdOy8vZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMV0ucmVwbGFjZSgvXFwrL2csIFwiIFwiKSk7XG59O1xuIiwic21hc2guc2VhcmNoYm94ID0ge1xuICAgIGlfOiBmYWxzZSxcbiAgICBtaW5BdXRvQ29tcGxldGVMZW5ndGg6IDMsXG4gICAgb25mb2N1czogdW5kZWZpbmVkLFxuICAgIG9uYmx1cjogdW5kZWZpbmVkLFxuICAgIG9udmFsdWU6IHVuZGVmaW5lZCxcbn07XG5cbnNtYXNoLnNlYXJjaGJveC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNtYXNoLnNlYXJjaGJveC5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzc2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCBpbnB1dFwiKTtcbiAgICBpZiAoIXNzYikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNzYi5vbmZvY3VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gucmVzdWx0cygnPGRpdiBjbGFzcz1cInNtYXNoLWluc3RydWN0aW9uXCI+U3RhcnQgdHlwaW5nIHRvIGZpbmQgcmVzdWx0czwvZGl2PicpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLWhlYWRlclwiKSwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCAuc21hc2gtc2VhcmNoYm94LXJlc3VsdHNcIiksICdzaG93Jyk7XG4gICAgICAgIGlmIChzbWFzaC5zZWFyY2hib3gub25mb2N1cykge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc3NiLm9uYmx1ciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1oZWFkZXJcIiksICdpcy1mb2N1c3NlZCcpO1xuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpLCAnc2hvdycpO1xuICAgICAgICBpZiAoc21hc2guc2VhcmNoYm94Lm9uYmx1cikge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uYmx1cigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzc2Iub25rZXl1cCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoIDwgc21hc2guc2VhcmNoYm94Lm1pbkF1dG9Db21wbGV0ZUxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzbWFzaC5zZWFyY2hib3gub25jaGFuZ2UpIHtcbiAgICAgICAgICAgIHNtYXNoLnNlYXJjaGJveC5vbmNoYW5nZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc21hc2guc2VhcmNoYm94LmlfID0gdHJ1ZTtcbn07XG5cbnNtYXNoLnNlYXJjaGJveC5yZXN1bHRzID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHZhciByZXN1bHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpO1xuICAgIHJlc3VsdHMuaW5uZXJIVE1MID0gY29udGVudDtcbn07XG4iLCJzbWFzaC5zaWRlYmFyID0ge1xuICAgIGlfOiBmYWxzZVxufTtcblxuc21hc2guc2lkZWJhci5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNtYXNoLnNpZGViYXIuaV8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc2libCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhciAubG9ja1wiKTtcbiAgICBpZiAoIXNpYmwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzaWJsLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc21hc2guc2lkZWJhci50b2dnbGVMb2NrKCk7XG4gICAgfTtcblxuICAgIHZhciBzaWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXJcIik7XG4gICAgc21hc2guY2xhc3MuYWRkKHNpYiwgJ2lzLXVubG9ja2VkJyk7XG4gICAgc21hc2guc2lkZWJhci5pXyA9IHRydWU7XG4gICAgaWYgKHNtYXNoLmNvbmZpZy5nZXQoJ3NpZGViYXJfbG9jaycpKSB7XG4gICAgICAgIHNtYXNoLnNpZGViYXIudG9nZ2xlTG9jaygpO1xuICAgIH1cbn07XG5cbnNtYXNoLnNpZGViYXIudG9nZ2xlTG9jayA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghc21hc2guc2lkZWJhci5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNtYXNoLmNsYXNzLnRvZ2dsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXIgLmxvY2tcIiksICd1bmxvY2snKTtcbiAgICBzbWFzaC5jbGFzcy50b2dnbGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyXCIpLCAnaXMtdW5sb2NrZWQnKTtcbiAgICBzbWFzaC5jb25maWcuc2V0KCdzaWRlYmFyX2xvY2snLCAhc21hc2guY2xhc3MuaGFzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhclwiKSwgJ2lzLXVubG9ja2VkJykpO1xufTtcbiIsInNtYXNoLnN0b3JhZ2UgPSB7fTtcblxuc21hc2guc3RvcmFnZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKG5hbWUsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG59O1xuXG5zbWFzaC5zdG9yYWdlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgaSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKG5hbWUpO1xuICAgIGlmICghaSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5wYXJzZShpKTtcbn07XG5cbnNtYXNoLnN0b3JhZ2UuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbn07XG4iLCJzbWFzaC53b3Jrc3BhY2UgPSB7XG4gICAgYmFzZVRpdGxlOiB1bmRlZmluZWQsXG4gICAgX3dzXzogdW5kZWZpbmVkLFxuICAgIF9oZHJfOiB1bmRlZmluZWQsXG4gICAgX3NiXzogdW5kZWZpbmVkLFxuICAgIF90YWJzXzogW11cbn07XG5cbnNtYXNoLndvcmtzcGFjZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgc21hc2gud29ya3NwYWNlLl93c18gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXdvcmtzcGFjZVwiKTtcbiAgICBpZiAoIXNtYXNoLndvcmtzcGFjZS5fd3NfKSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBzbWFzaC53b3Jrc3BhY2UuX2hkcl8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLWhlYWRlclwiKTtcbiAgICBpZiAoc21hc2gud29ya3NwYWNlLl9oZHJfKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChzbWFzaC53b3Jrc3BhY2UuX3dzXywgJ2hhcy1oZWFkZXInKTtcbiAgICB9XG4gICAgc21hc2gud29ya3NwYWNlLl9zYl8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXdvcmtzcGFjZSAuc21hc2gtc2lkZWJhclwiKTtcbiAgICBpZiAoc21hc2gud29ya3NwYWNlLl9zYl8pIHtcbiAgICAgICAgc21hc2guY2xhc3MuYWRkKHNtYXNoLndvcmtzcGFjZS5fd3NfLCAnaGFzLXNpZGViYXInKTtcbiAgICB9XG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuYWRkVGFiID0gZnVuY3Rpb24oaWQsIHRpdGxlLCBjb250ZW50LCB1cmwpIHtcbiAgICBpZiAoIXNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC10YWItcGFuZScpKSB7XG4gICAgICAgIHZhciBwYW5lbCA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC1wYW5lbCcpO1xuICAgICAgICBpZiAoIXBhbmVsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVG8gYWRkIGEgdGFiIHRoZXJlIG5lZWRzIHRvIGJlIGEgcGFuZWwnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwYW5lbC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cInNtYXNoLXRhYi1wYW5lXCI+PGRpdiBjbGFzcz1cInNtYXNoLXRhYnNcIj48L2Rpdj48ZGl2IGNsYXNzPVwic21hc2gtcGFuZXNcIj48L2Rpdj48L2Rpdj4nO1xuICAgIH1cbiAgICB2YXIgdGFicyA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC10YWItcGFuZSAuc21hc2gtdGFicycpO1xuICAgIHZhciBwYW5lc0NvbnRhaW5lciA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC10YWItcGFuZSAuc21hc2gtcGFuZXMnKTtcblxuICAgIGRvY3VtZW50LnRpdGxlID0gdGl0bGUgKyAoc21hc2gud29ya3NwYWNlLmJhc2VUaXRsZSA/ICcgfCAnICsgc21hc2gud29ya3NwYWNlLmJhc2VUaXRsZSA6IFwiXCIpO1xuXG4gICAgaWYgKHRhYiA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYltkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpKSB7XG4gICAgICAgIHZhciBwYW5lID0gc21hc2guZ2V0KHBhbmVzQ29udGFpbmVyLCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyBpZCArICdcIl0nKS5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgICAgICB0YWIuZGF0YXNldC51cmwgPSB1cmw7XG4gICAgICAgIHRhYi5vbmNsaWNrKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzbWFzaC5oaWRlKHBhbmVzQ29udGFpbmVyLCBcIi5zbWFzaC1wYW5lXCIpO1xuICAgIGlmIChhY3RpdmUgPSBzbWFzaC5nZXQodGFicywgJy5zbWFzaC10YWIuYWN0aXZlJykpIHtcbiAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGFjdGl2ZSwgJ2FjdGl2ZScpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIG5ldyB0YWJcbiAgICB2YXIgdGFiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0YWIuY2xhc3NOYW1lID0gJ3NtYXNoLXRhYiBhY3RpdmUnO1xuICAgIHRhYi5kYXRhc2V0LmlkID0gaWQ7XG4gICAgdGFiLmRhdGFzZXQudXJsID0gdXJsO1xuICAgIHRhYi5pbm5lckhUTUwgPSB0aXRsZSArICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNsb3NlXCI+Y2xvc2U8L2k+JztcbiAgICB0YWIub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGFjdGl2ZSA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYi5hY3RpdmUnKSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGFjdGl2ZSwgJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZCh0aGlzLCAnYWN0aXZlJyk7XG4gICAgICAgIHNtYXNoLmhpZGUoZG9jdW1lbnQsICcuc21hc2gtcGFuZScpO1xuICAgICAgICBzbWFzaC5zaG93KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyB0aGlzLmRhdGFzZXQuaWQgKyAnXCJdJyk7XG4gICAgICAgIGlmICh0aGlzLmRhdGFzZXQudXJsICYmIHRoaXMuZGF0YXNldC51cmwgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgc21hc2gucm91dGVyLmRpc3BsYXlVUkwodGhpcy5kYXRhc2V0LnVybCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNtYXNoLm9uKHRhYiwgJy5jbG9zZScsICdvbmNsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHRoaXMucGFyZW50RWxlbWVudCwgJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50LnByZXZpb3VzU2libGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wcmV2aW91c1NpYmxpbmcub25jbGljaygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBhcmVudEVsZW1lbnQubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQubmV4dFNpYmxpbmcub25jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYW5lID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyB0aGlzLnBhcmVudEVsZW1lbnQuZGF0YXNldC5pZCArICdcIl0nKSkge1xuICAgICAgICAgICAgcGFuZS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHBhbmUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMucGFyZW50RWxlbWVudCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG4gICAgdGFicy5hcHBlbmRDaGlsZCh0YWIpO1xuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHBhbmUgd2l0aCB0aGUgcHJvdmlkZWQgY29udGVudFxuICAgIHZhciBwYW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwYW5lLmNsYXNzTmFtZSA9ICdzbWFzaC1wYW5lJztcbiAgICBwYW5lLmRhdGFzZXQuaWQgPSBpZDtcbiAgICBwYW5lLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgcGFuZXNDb250YWluZXIuYXBwZW5kQ2hpbGQocGFuZSk7XG59O1xuIl19
