window.addEventListener("load",function(e){smash.init()},!1);var smash={};smash.init=function(){smash.config.init(),smash.sidebar.init(),smash.searchbox.init(),smash.workspace.init(),smash.input.init()},smash.get=function(e,s){try{return e.querySelector(s)}catch(e){console.log(e)}},smash.getAll=function(e,s){try{return e.querySelectorAll(s)}catch(e){console.log(e)}},smash.hide=function(e,s){var a;a="string"==typeof e&&"string"==typeof s?smash.getAll(e,s):e;for(var t=0;t<a.length;t++)a[t].style.display="none"},smash.show=function(e,s){var a;a="string"==typeof e&&"string"==typeof s?smash.getAll(e,s):e;for(var t=0;t<a.length;t++)a[t].style.display=""},smash.on=function(e,s,a,t){for(var n=smash.getAll(e,s),r=0;r<n.length;r++)n[r][a]=t},smash.fuzzyCompare=function(e,s){if(void 0==s||void 0==e)return!1;var a=".*?"+e.toLowerCase().split("").join(".*?")+".*?";return s.toLowerCase().match(a)},smash.ajax={_headers_:[]},smash.ajax.addHeader=function(e,s){smash.ajax._headers_[e]=s},smash.ajax.removeHeader=function(e){delete smash.ajax._headers_[e]},smash.ajax.onerror=function(e){console.log(e)},smash.ajax.onunauthorized=function(e){smash.ajax.onerror(e)},smash.ajax._xhr_=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,s=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],a=0;a<s.length;a++)try{e=new ActiveXObject(s[a]);break}catch(e){}return e},smash.ajax.send=function(e,s,a,t,n,r,o){void 0===o&&(o=!0),void 0===r&&(r=smash.ajax.onerror);var i=smash.ajax._xhr_();i.responseType=n,i.onreadystatechange=function(){if(4==i.readyState)switch(i.status){case 200:case 201:s&&s(i.response);break;case 401:smash.ajax.onunauthorized(i.response);break;default:r(i.response)}},i.open(a,e,o),"json"==n?i.setRequestHeader("Content-type","application/json"):"POST"==a&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var c in smash.ajax._headers_)i.setRequestHeader(c,smash.ajax._headers_[c]);i.send(t)},smash.ajax.get=function(e,s,a,t,n,r){var o=[];for(var i in a)o.push(encodeURIComponent(i)+"="+encodeURIComponent(a[i]));smash.ajax.send(e+(o.length?"?"+o.join("&"):""),s,"GET",null,t,n,r)},smash.ajax.post=function(e,s,a,t,n,r){var o;if(a)if("json"!=t){var i=[];for(var c in a)i.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));o=i.join("&")}else o=JSON.stringify(a);smash.ajax.send(e,s,"POST",o,t,n,r)},smash.class={},smash.class.add=function(e,s){smash.class.has(e,s)||(e.classList?e.classList.add(s):e.className+=" "+s)},smash.class.remove=function(e,s){smash.class.has(e,s)&&(e.classList?e.classList.remove(s):e.className=e.className.replace(s,""))},smash.class.has=function(e,s){return(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(" "+s+" ")>-1},smash.class.toggle=function(e,s){smash.class.has(e,s)?smash.class.remove(e,s):smash.class.add(e,s)},smash.config={_values_:{_sidebar_lock_:!1}},smash.config.init=function(){var e=smash.storage.get("config");e&&(smash.config._values_=e)},smash.config.get=function(e){var s="_"+e+"_";if(s in smash.config._values_)return smash.config._values_[s];throw new smash.Exception("001",'Invalid config option "'+e+'"')},smash.config.set=function(e,s){var a="_"+e+"_";if(!a in smash.config._values_)throw new smash.Exception("001",'Invalid config option "'+e+'"');smash.config._values_[a]=s,smash.storage.set("config",smash.config._values_)},smash.dialog={},smash.dialog.new=function(e){var s=smash.dialog.checkBackdrop(),a=document.createElement("div");a.className="smash-dialog",a.innerHTML=e,s.appendChild(a)},smash.dialog.checkBackdrop=function(){if(e=smash.get(document,".smash-dialog-backdrop"))return(dialog=smash.get(document,".smash-dialog-backdrop .smash-dialog"))&&e.removeChild(dialog),e;var e=document.createElement("div");return e.className="smash-dialog-backdrop",e.innerHTML='<div class="smash-dialog-background"></div>',smash.get(e,".smash-dialog-background").onclick=smash.dialog.close,smash.get(document,"body").appendChild(e),e},smash.dialog.close=function(){(dialog=smash.get(document,".smash-dialog-backdrop"))&&smash.get(document,"body").removeChild(dialog)},smash.Exception=function(e,s){this.value=e,this.message=s,this.toString=function(){return"SmashException "+this.value+": "+this.message}},smash.input={},smash.input.init=function(){for(var e,s=document.querySelectorAll(".smash-input input, .smash-textarea textarea"),a=0;a<s.length;a++)if(e=s[a],!smash.class.has(e.parentElement,"smash-initialised")){if(e.parentElement.setValue=function(s){(e=this.querySelector("input"))?(e.value=s,e.onkeyup()):(e=this.querySelector("textarea"))&&(e.value=s,e.onkeyup())},e.parentElement.getValue=function(){if(e=this.querySelector("input")){var e=this.querySelector("input");return e.value}if(e=this.querySelector("textarea")){var e=this.querySelector("textarea");return e.value}return null},smash.class.has(e.parentElement,"has-floating-label")){smash.class.remove(e.parentElement,"has-floating-label"),smash.class.add(e.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=e.placeholder,e.parentElement.appendChild(t),e.onkeyup=function(e){var s=this.parentElement.querySelector("label");s&&(""!=this.value?smash.class.add(s,"show"):smash.class.remove(s,"show"))}}e.parentElement.getAttribute("value")&&e.parentElement.setValue(e.parentElement.getAttribute("value")),smash.class.add(e.parentElement,"smash-initialised")}for(var n,r=document.querySelectorAll(".smash-select select"),a=0;a<r.length;a++)if(n=r[a],!smash.class.has(n.parentElement,"smash-initialised")){if(smash.class.has(n.parentElement,"has-floating-label")){smash.class.remove(n.parentElement,"has-floating-label"),smash.class.add(n.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=n.getAttribute("placeholder"),n.parentElement.appendChild(t)}n.parentElement.setValue=function(e){smash.class.remove(this,"is-focussed");var s=this.querySelector("select"),a=this.querySelector("input"),t=s.value;s.value=e,s.selectedIndex>-1&&(a.value=s.options[s.selectedIndex].text),a.focus(),a.onfocus(),t!=e&&s.onchange&&s.onchange()},n.parentElement.getValue=function(){var e=this.querySelector("select");return e.selectedIndex==-1?null:e.options[e.selectedIndex].value},n.parentElement.getText=function(){var e=this.querySelector("select");return e.selectedIndex==-1?null:e.options[e.selectedIndex].innerHTML};var e=document.createElement("input");e.type="text",e.placeholder=n.getAttribute("placeholder"),e.setAttribute("readonly","readonly"),n.parentElement.appendChild(e);for(var o=n.querySelectorAll("option"),i=document.createElement("ul"),c=0;c<o.length;c++){var h=o[c];if(h.getAttribute("value")){var l=document.createElement("li");l.setAttribute("value",h.value),l.innerHTML=h.innerHTML,i.appendChild(l),l.onmousedown=function(e){this.parentElement.parentElement.setValue(this.getAttribute("value")),e.stopPropagation(),window.onmousedown()}}}n.parentElement.appendChild(i),e.onfocus=function(e){var s=this.parentElement.querySelector("label");s&&(""!=this.value?smash.class.add(s,"show"):smash.class.remove(s,"show"))},n.parentElement.onclick=function(){smash.class.add(this,"is-focussed");var e=this,s="";window.onmousedown=function(){if(window.onmousedown=null,window.onkeyup=null,items=smash.getAll(e,"ul li")){for(var s=0;s<items.length;s++)items[s].style.display="";smash.show(e,"ul")}smash.class.remove(e,"is-focussed")},window.onkeyup=function(a){switch(a.keyCode){case 8:s.length>0&&(s=s.substring(0,s.length-1));break;case 27:s="";break;default:s+=String.fromCharCode(a.keyCode)}if(items=smash.getAll(e,"ul li")){smash.show(e,"ul");for(var t,n=!1,r=0;r<items.length;r++)t=items[r],smash.fuzzyCompare(s,t.innerHTML)?(t.style.display="",n=!0):t.style.display="none";n||smash.hide(e,"ul")}},window.focus()},n.parentElement.getAttribute("value")&&n.parentElement.setValue(n.parentElement.getAttribute("value")),smash.class.add(n.parentElement,"smash-initialised")}smash.input.checkboxInit()},smash.input.checkboxInit=function(){for(var e,s=document.querySelectorAll(".smash-checkbox input"),a=0;a<s.length;a++)if(e=s[a],!smash.class.has(e.parentElement,"smash-initialised")){var t=document.createElement("span");if(t.className="checks",t.innerHTML='<i class="material-icons">check_box_outline_blank</i><i class="material-icons checked">check_box</i>',e.parentElement.appendChild(t),label=e.getAttribute("label")){var n=document.createElement("span");n.className="label",n.innerHTML=label,e.parentElement.appendChild(n)}smash.class.add(e.parentElement,"smash-initialised"),e.checked=smash.class.has(e.parentElement,"checked"),e.parentElement.onclick=function(){smash.class.toggle(this,"checked"),smash.get(this,"input").checked=smash.class.has(this,"checked"),e.parentElement.onchange&&e.parentElement.onchange(smash.class.has(this,"checked"))},e.parentElement.getValue=function(){return smash.class.has(this,"checked")},e.parentElement.setValue=function(e){smash.class.has(this,"checked")!=e&&this.onclick()}}},smash.router={__parseRouteRegex:/{(.*?)}/gi,__dynamicParts:[],__routes:{static:[],dynamic:[]}},smash.router.add=function(e,s){var a=smash.router.parseRoute(e);return a.regex?(a.callback=s,smash.router.__routes.dynamic[a.depth]||(smash.router.__routes.dynamic[a.depth]=[]),smash.router.__routes.dynamic[a.depth][a.numVars]||(smash.router.__routes.dynamic[a.depth][a.numVars]=[]),void smash.router.__routes.dynamic[a.depth][a.numVars].push(a)):void(smash.router.__routes.static[e]=s)},smash.router.set=function(e){smash.router.displayURL(e),window.dispatchEvent(new Event("popstate"))},smash.router.displayURL=function(e){window.history.pushState("","",e)},smash.router.redirect=function(e){window.location=e},smash.router.handleNotFound=function(e){console.log("route: "+JSON.stringify(e)+" does not exist")},smash.router.run=function(){window.onpopstate=function(e){smash.router.execute()},smash.router.execute()},smash.router.execute=function(){var e=this.getPath();if(this.__routes.static[e.path])return void this.__routes.static[e.path]();var s=e.path.split("/").length-1;if(this.__routes.dynamic[s]){var a,t,n={};for(var r in this.__routes.dynamic[s])for(var o in this.__routes.dynamic[s][r]){var a=this.__routes.dynamic[s][r][o];if(t=e.path.match(a.regex)){for(var i=0;i<a.numVars;i++)n[a.vars[i]]=t[i+1];return void a.callback(n)}}}smash.router.handleNotFound(e)},smash.router.getPath=function(){var e=document.createElement("a");return e.href=window.location,{host:e.hostname,path:e.pathname}},smash.router.parseRoute=function(e){"/"!=e.substring(0,1)&&(e="/"+e),"/"==e.substring(e.length-2)&&(e="/"+e);var s={path:e,depth:e.split("/").length-1,vars:[],numVars:0};if(smash.router.__dynamicParts=e.match(smash.router.__parseRouteRegex),void 0!=smash.router.__dynamicParts&&null!=smash.router.__dynamicParts){for(var a="^"+e.replace(/\//gi,"\\/")+"$",t=0;t<smash.router.__dynamicParts.length;t++)s.numVars++,s.vars.push(smash.router.__dynamicParts[t].substring(1,smash.router.__dynamicParts[t].length-1)),a=a.replace(smash.router.__dynamicParts[t],"(.*?)");s.regex=new RegExp(a,"i")}return s},smash.router.queryParam=function(e){var s="[\\?&]"+e+"=([^&#]*)",a=new RegExp(s),t=a.exec(window.location.search);if(null!=t)return t[1]},smash.searchbox={i_:!1,minAutoCompleteLength:3,onfocus:void 0,onblur:void 0,onvalue:void 0},smash.searchbox.init=function(){if(!smash.searchbox.i_){var e=document.querySelector(".smash-searchbox input");e&&(e.onfocus=function(){0==this.value.length&&smash.searchbox.results('<div class="smash-instruction">Start typing to find results</div>'),smash.class.add(document.querySelector(".smash-header"),"is-focussed"),smash.class.add(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onfocus&&smash.searchbox.onfocus()},e.onblur=function(){smash.class.remove(document.querySelector(".smash-header"),"is-focussed"),smash.class.remove(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onblur&&smash.searchbox.onblur()},e.onkeyup=function(e){this.value.length<smash.searchbox.minAutoCompleteLength||smash.searchbox.onchange&&smash.searchbox.onchange(this.value)},smash.searchbox.i_=!0)}},smash.searchbox.results=function(e){var s=document.querySelector(".smash-searchbox .smash-searchbox-results");s.innerHTML=e},smash.sidebar={i_:!1},smash.sidebar.init=function(){if(!smash.sidebar.i_){var e=document.querySelector(".smash-sidebar .lock");if(e){e.onclick=function(){smash.sidebar.toggleLock()};var s=document.querySelector(".smash-sidebar");smash.class.add(s,"is-unlocked"),smash.sidebar.i_=!0,smash.config.get("sidebar_lock")&&smash.sidebar.toggleLock()}}},smash.sidebar.toggleLock=function(){smash.sidebar.i_&&(smash.class.toggle(document.querySelector(".smash-sidebar .lock"),"unlock"),smash.class.toggle(document.querySelector(".smash-sidebar"),"is-unlocked"),smash.config.set("sidebar_lock",!smash.class.has(document.querySelector(".smash-sidebar"),"is-unlocked")))},smash.storage={},smash.storage.set=function(e,s){localStorage.setItem(e,JSON.stringify(s))},smash.storage.unset=function(e){localStorage.removeItem(e)},smash.storage.get=function(e){var s=localStorage.getItem(e);if(s)return JSON.parse(s)},smash.storage.clear=function(){localStorage.clear()},smash.workspace={baseTitle:void 0,_ws_:void 0,_hdr_:void 0,_sb_:void 0,_tabs_:[]},smash.workspace.init=function(){smash.workspace._ws_=document.querySelector(".smash-workspace"),smash.workspace._ws_&&(smash.workspace._hdr_=document.querySelector(".smash-header"),smash.workspace._hdr_&&smash.class.add(smash.workspace._ws_,"has-header"),smash.workspace._sb_=document.querySelector(".smash-workspace .smash-sidebar"),smash.workspace._sb_&&smash.class.add(smash.workspace._ws_,"has-sidebar"))},smash.workspace.addTab=function(e,s,a,t){if(!smash.get(document,".smash-tab-pane")){var n=smash.get(document,".smash-panel");if(!n)return void console.log("To add a tab there needs to be a panel");n.innerHTML='<div class="smash-tab-pane"><div class="smash-tabs"></div><div class="smash-panes"></div></div>'}var r=smash.get(document,".smash-tab-pane .smash-tabs"),o=smash.get(document,".smash-tab-pane .smash-panes");if(document.title=smash.workspace.createTitle(s),c=smash.get(r,'.smash-tab[data-id="'+e+'"]')){var i=smash.get(o,'.smash-pane[data-id="'+e+'"]');return i.innerHTML=a,c.dataset.url=t,c.onclick(),{tab:c,pane:i}}smash.hide(o,".smash-pane"),(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active");var c=document.createElement("div");c.className="smash-tab active",c.dataset.id=e,c.dataset.url=t,c.innerHTML=s+'<i class="material-icons close">close</i>',c.onclick=function(e){(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active"),smash.class.add(this,"active"),smash.hide(document,".smash-pane"),smash.show(document,'.smash-pane[data-id="'+this.dataset.id+'"]'),this.dataset.url&&"undefined"!=this.dataset.url&&smash.router.displayURL(this.dataset.url),document.title=smash.workspace.createTitle(this.innerHTML)},smash.on(c,".close","onclick",function(e){this.parentElement.onclose&&!this.parentElement.onclose()||(smash.class.has(this.parentElement,"active")&&(this.parentElement.previousSibling?this.parentElement.previousSibling.onclick():this.parentElement.nextSibling&&this.parentElement.nextSibling.onclick()),(i=smash.get(document,'.smash-pane[data-id="'+this.parentElement.dataset.id+'"]'))&&i.parentElement.removeChild(i),this.parentElement.parentElement.removeChild(this.parentElement),e.stopPropagation())}),r.appendChild(c);var i=document.createElement("div");return i.className="smash-pane",i.dataset.id=e,i.innerHTML=a,o.appendChild(i),{tab:c,pane:i}},smash.workspace.activeTab=function(){var e=smash.get(tabs,".smash-tab.active");if(!e)return null;var s=smash.get(document,'.smash-pane[data-id="'+e.dataset.id+'"]');return s?{tab:e,pane:s}:null},smash.workspace.createTitle=function(e){return e.replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/gi,"")+(smash.workspace.baseTitle?" | "+smash.workspace.baseTitle:"")};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNtYXNoLmpzIiwiYWpheC5qcyIsImNsYXNzLmpzIiwiY29uZmlnLmpzIiwiZGlhbG9nLmpzIiwiZXhjZXB0aW9uLmpzIiwiaW5wdXQuanMiLCJyb3V0ZXIuanMiLCJzZWFyY2hib3guanMiLCJzaWRlYmFyLmpzIiwic3RvcmFnZS5qcyIsIndvcmtzcGFjZS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInNtYXNoIiwiaW5pdCIsImNvbmZpZyIsInNpZGViYXIiLCJzZWFyY2hib3giLCJ3b3Jrc3BhY2UiLCJpbnB1dCIsImdldCIsInBhcmVudCIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImNvbnNvbGUiLCJsb2ciLCJnZXRBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGlkZSIsImVsIiwiaSIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsInNob3ciLCJvbiIsImV2ZW50IiwiY2FsbGJhY2siLCJlbGVtZW50cyIsImZ1enp5Q29tcGFyZSIsInNlYXJjaCIsImNvbXBhcmUiLCJ1bmRlZmluZWQiLCJyZWdleCIsInRvTG93ZXJDYXNlIiwic3BsaXQiLCJqb2luIiwibWF0Y2giLCJhamF4IiwiX2hlYWRlcnNfIiwiYWRkSGVhZGVyIiwibmFtZSIsInZhbHVlIiwicmVtb3ZlSGVhZGVyIiwib25lcnJvciIsIm1lc3NhZ2UiLCJvbnVuYXV0aG9yaXplZCIsIl94aHJfIiwiWE1MSHR0cFJlcXVlc3QiLCJ4aHIiLCJ2ZXJzaW9ucyIsIkFjdGl2ZVhPYmplY3QiLCJzZW5kIiwidXJsIiwibWV0aG9kIiwiZGF0YSIsInJlc3BvbnNlVHlwZSIsImFzeW5jIiwieCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXNwb25zZSIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwicXVlcnkiLCJrZXkiLCJwdXNoIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicG9zdCIsImRhdGFTdHIiLCJKU09OIiwic3RyaW5naWZ5IiwiY2xhc3MiLCJhZGQiLCJjbGFzc05hbWUiLCJoYXMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJyZXBsYWNlIiwiaW5kZXhPZiIsInRvZ2dsZSIsIl92YWx1ZXNfIiwiX3NpZGViYXJfbG9ja18iLCJ2Iiwic3RvcmFnZSIsIm9wdGlvbiIsIm8iLCJFeGNlcHRpb24iLCJzZXQiLCJkaWFsb2ciLCJuZXciLCJjb250ZW50IiwiYmFja2Ryb3AiLCJjaGVja0JhY2tkcm9wIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaGlsZCIsIm9uY2xpY2siLCJjbG9zZSIsInRoaXMiLCJ0b1N0cmluZyIsImlucHV0cyIsInBhcmVudEVsZW1lbnQiLCJzZXRWYWx1ZSIsIm9ua2V5dXAiLCJnZXRWYWx1ZSIsImxhYmVsIiwicGxhY2Vob2xkZXIiLCJsIiwiZ2V0QXR0cmlidXRlIiwic2VsZWN0Iiwic2VsZWN0cyIsIm9sZCIsInNlbGVjdGVkSW5kZXgiLCJvcHRpb25zIiwidGV4dCIsImZvY3VzIiwib25mb2N1cyIsIm9uY2hhbmdlIiwiZ2V0VGV4dCIsInR5cGUiLCJzZXRBdHRyaWJ1dGUiLCJ1bCIsImoiLCJsaSIsIm9ubW91c2Vkb3duIiwic3RvcFByb3BhZ2F0aW9uIiwicSIsIml0ZW1zIiwia2V5Q29kZSIsInN1YnN0cmluZyIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIml0ZW0iLCJyZXN1bHRzIiwiY2hlY2tib3hJbml0IiwiY2hlY2tib3giLCJjaGVja2JveGVzIiwiYyIsImNoZWNrZWQiLCJyb3V0ZXIiLCJfX3BhcnNlUm91dGVSZWdleCIsIl9fZHluYW1pY1BhcnRzIiwiX19yb3V0ZXMiLCJzdGF0aWMiLCJkeW5hbWljIiwicGF0aCIsInJvdXRlIiwicGFyc2VSb3V0ZSIsImRlcHRoIiwibnVtVmFycyIsImRpc3BsYXlVUkwiLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwicmVkaXJlY3QiLCJsb2NhdGlvbiIsImhhbmRsZU5vdEZvdW5kIiwicnVuIiwib25wb3BzdGF0ZSIsImV4ZWN1dGUiLCJnZXRQYXRoIiwibWF0Y2hlcyIsInZhck51bSIsInZhcnMiLCJocmVmIiwiaG9zdCIsImhvc3RuYW1lIiwicGF0aG5hbWUiLCJSZWdFeHAiLCJxdWVyeVBhcmFtIiwicGFyYW0iLCJyZWdleFMiLCJleGVjIiwiaV8iLCJtaW5BdXRvQ29tcGxldGVMZW5ndGgiLCJvbmJsdXIiLCJvbnZhbHVlIiwic3NiIiwic2libCIsInRvZ2dsZUxvY2siLCJzaWIiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwidW5zZXQiLCJyZW1vdmVJdGVtIiwiZ2V0SXRlbSIsInBhcnNlIiwiY2xlYXIiLCJiYXNlVGl0bGUiLCJfd3NfIiwiX2hkcl8iLCJfc2JfIiwiX3RhYnNfIiwiYWRkVGFiIiwiaWQiLCJ0aXRsZSIsInBhbmVsIiwidGFicyIsInBhbmVzQ29udGFpbmVyIiwiY3JlYXRlVGl0bGUiLCJ0YWIiLCJwYW5lIiwiZGF0YXNldCIsImFjdGl2ZSIsIm9uY2xvc2UiLCJwcmV2aW91c1NpYmxpbmciLCJuZXh0U2libGluZyIsImFjdGl2ZVRhYiJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQUFDLGlCQUFBLE9BQUEsU0FBQUMsR0FDQUMsTUFBQUMsU0FDQSxFQUVBLElBQUFELFNBRUFBLE9BQUFDLEtBQUEsV0FDQUQsTUFBQUUsT0FBQUQsT0FDQUQsTUFBQUcsUUFBQUYsT0FDQUQsTUFBQUksVUFBQUgsT0FDQUQsTUFBQUssVUFBQUosT0FDQUQsTUFBQU0sTUFBQUwsUUFHQUQsTUFBQU8sSUFBQSxTQUFBQyxFQUFBQyxHQUNBLElBQ0EsTUFBQUQsR0FBQUUsY0FBQUQsR0FDQSxNQUFBVixHQUNBWSxRQUFBQyxJQUFBYixLQUtBQyxNQUFBYSxPQUFBLFNBQUFMLEVBQUFDLEdBQ0EsSUFDQSxNQUFBRCxHQUFBTSxpQkFBQUwsR0FDQSxNQUFBVixHQUNBWSxRQUFBQyxJQUFBYixLQUtBQyxNQUFBZSxLQUFBLFNBQUFQLEVBQUFDLEdBQ0EsR0FBQU8sRUFFQUEsR0FEQSxnQkFBQVIsSUFBQSxnQkFBQUMsR0FDQVQsTUFBQWEsT0FBQUwsRUFBQUMsR0FFQUQsQ0FFQSxLQUFBLEdBQUFTLEdBQUEsRUFBQUEsRUFBQUQsRUFBQUUsT0FBQUQsSUFDQUQsRUFBQUMsR0FBQUUsTUFBQUMsUUFBQSxRQUlBcEIsTUFBQXFCLEtBQUEsU0FBQWIsRUFBQUMsR0FDQSxHQUFBTyxFQUVBQSxHQURBLGdCQUFBUixJQUFBLGdCQUFBQyxHQUNBVCxNQUFBYSxPQUFBTCxFQUFBQyxHQUVBRCxDQUVBLEtBQUEsR0FBQVMsR0FBQSxFQUFBQSxFQUFBRCxFQUFBRSxPQUFBRCxJQUNBRCxFQUFBQyxHQUFBRSxNQUFBQyxRQUFBLElBSUFwQixNQUFBc0IsR0FBQSxTQUFBZCxFQUFBQyxFQUFBYyxFQUFBQyxHQUVBLElBQUEsR0FEQUMsR0FBQXpCLE1BQUFhLE9BQUFMLEVBQUFDLEdBQ0FRLEVBQUEsRUFBQUEsRUFBQVEsRUFBQVAsT0FBQUQsSUFDQVEsRUFBQVIsR0FBQU0sR0FBQUMsR0FJQXhCLE1BQUEwQixhQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsUUFBQUQsR0FBQUMsUUFBQUYsRUFDQSxPQUFBLENBRUEsSUFBQUcsR0FBQSxNQUFBSCxFQUFBSSxjQUFBQyxNQUFBLElBQUFDLEtBQUEsT0FBQSxLQUNBLE9BQUFMLEdBQUFHLGNBQUFHLE1BQUFKLElDcEVBOUIsTUFBQW1DLE1BQ0FDLGNBR0FwQyxNQUFBbUMsS0FBQUUsVUFBQSxTQUFBQyxFQUFBQyxHQUNBdkMsTUFBQW1DLEtBQUFDLFVBQUFFLEdBQUFDLEdBR0F2QyxNQUFBbUMsS0FBQUssYUFBQSxTQUFBRixTQUNBdEMsT0FBQW1DLEtBQUFDLFVBQUFFLElBR0F0QyxNQUFBbUMsS0FBQU0sUUFBQSxTQUFBQyxHQUNBL0IsUUFBQUMsSUFBQThCLElBR0ExQyxNQUFBbUMsS0FBQVEsZUFBQSxTQUFBRCxHQUNBMUMsTUFBQW1DLEtBQUFNLFFBQUFDLElBR0ExQyxNQUFBbUMsS0FBQVMsTUFBQSxXQUNBLEdBQUEsbUJBQUFDLGdCQUNBLE1BQUEsSUFBQUEsZUFXQSxLQUFBLEdBREFDLEdBUkFDLEdBQ0EscUJBQ0EscUJBQ0EscUJBQ0EscUJBQ0EscUJBQ0EscUJBR0E5QixFQUFBLEVBQUFBLEVBQUE4QixFQUFBN0IsT0FBQUQsSUFDQSxJQUNBNkIsRUFBQSxHQUFBRSxlQUFBRCxFQUFBOUIsR0FDQSxPQUNBLE1BQUFsQixJQUdBLE1BQUErQyxJQUdBOUMsTUFBQW1DLEtBQUFjLEtBQUEsU0FBQUMsRUFBQTFCLEVBQUEyQixFQUFBQyxFQUFBQyxFQUFBWixFQUFBYSxHQUNBekIsU0FBQXlCLElBQ0FBLEdBQUEsR0FFQXpCLFNBQUFZLElBQ0FBLEVBQUF6QyxNQUFBbUMsS0FBQU0sUUFFQSxJQUFBYyxHQUFBdkQsTUFBQW1DLEtBQUFTLE9BQ0FXLEdBQUFGLGFBQUFBLEVBQ0FFLEVBQUFDLG1CQUFBLFdBQ0EsR0FBQSxHQUFBRCxFQUFBRSxXQUNBLE9BQUFGLEVBQUFHLFFBQ0EsSUFBQSxLQUNBLElBQUEsS0FDQWxDLEdBQ0FBLEVBQUErQixFQUFBSSxTQUVBLE1BQ0EsS0FBQSxLQUNBM0QsTUFBQW1DLEtBQUFRLGVBQUFZLEVBQUFJLFNBQ0EsTUFDQSxTQUNBbEIsRUFBQWMsRUFBQUksWUFJQUosRUFBQUssS0FBQVQsRUFBQUQsRUFBQUksR0FDQSxRQUFBRCxFQUNBRSxFQUFBTSxpQkFBQSxlQUFBLG9CQUNBLFFBQUFWLEdBQ0FJLEVBQUFNLGlCQUFBLGVBQUEsb0NBRUEsS0FBQSxHQUFBdkIsS0FBQXRDLE9BQUFtQyxLQUFBQyxVQUNBbUIsRUFBQU0saUJBQUF2QixFQUFBdEMsTUFBQW1DLEtBQUFDLFVBQUFFLEdBRUFpQixHQUFBTixLQUFBRyxJQUdBcEQsTUFBQW1DLEtBQUE1QixJQUFBLFNBQUEyQyxFQUFBMUIsRUFBQTRCLEVBQUFDLEVBQUFaLEVBQUFhLEdBQ0EsR0FBQVEsS0FDQSxLQUFBLEdBQUFDLEtBQUFYLEdBQ0FVLEVBQUFFLEtBQUFDLG1CQUFBRixHQUFBLElBQUFFLG1CQUFBYixFQUFBVyxJQUVBL0QsT0FBQW1DLEtBQUFjLEtBQUFDLEdBQUFZLEVBQUE1QyxPQUFBLElBQUE0QyxFQUFBN0IsS0FBQSxLQUFBLElBQUFULEVBQUEsTUFBQSxLQUFBNkIsRUFBQVosRUFBQWEsSUFHQXRELE1BQUFtQyxLQUFBK0IsS0FBQSxTQUFBaEIsRUFBQTFCLEVBQUE0QixFQUFBQyxFQUFBWixFQUFBYSxHQUNBLEdBQUFhLEVBQ0EsSUFBQWYsRUFDQSxHQUFBLFFBQUFDLEVBQUEsQ0FDQSxHQUFBUyxLQUNBLEtBQUEsR0FBQUMsS0FBQVgsR0FDQVUsRUFBQUUsS0FBQUMsbUJBQUFGLEdBQUEsSUFBQUUsbUJBQUFiLEVBQUFXLElBRUFJLEdBQUFMLEVBQUE3QixLQUFBLFNBRUFrQyxHQUFBQyxLQUFBQyxVQUFBakIsRUFHQXBELE9BQUFtQyxLQUFBYyxLQUFBQyxFQUFBMUIsRUFBQSxPQUFBMkMsRUFBQWQsRUFBQVosRUFBQWEsSUN0R0F0RCxNQUFBc0UsU0FFQXRFLE1BQUFzRSxNQUFBQyxJQUFBLFNBQUF2RCxFQUFBd0QsR0FDQXhFLE1BQUFzRSxNQUFBRyxJQUFBekQsRUFBQXdELEtBQ0F4RCxFQUFBMEQsVUFBQTFELEVBQUEwRCxVQUFBSCxJQUFBQyxHQUFBeEQsRUFBQXdELFdBQUEsSUFBQUEsSUFJQXhFLE1BQUFzRSxNQUFBSyxPQUFBLFNBQUEzRCxFQUFBd0QsR0FDQXhFLE1BQUFzRSxNQUFBRyxJQUFBekQsRUFBQXdELEtBQ0F4RCxFQUFBMEQsVUFBQTFELEVBQUEwRCxVQUFBQyxPQUFBSCxHQUFBeEQsRUFBQXdELFVBQUF4RCxFQUFBd0QsVUFBQUksUUFBQUosRUFBQSxNQUlBeEUsTUFBQXNFLE1BQUFHLElBQUEsU0FBQXpELEVBQUF3RCxHQUNBLE9BQUEsSUFBQXhELEVBQUF3RCxVQUFBLEtBQUFJLFFBQUEsVUFBQSxLQUFBQyxRQUFBLElBQUFMLEVBQUEsTUFBQSxHQUdBeEUsTUFBQXNFLE1BQUFRLE9BQUEsU0FBQTlELEVBQUF3RCxHQUNBeEUsTUFBQXNFLE1BQUFHLElBQUF6RCxFQUFBd0QsR0FBQXhFLE1BQUFzRSxNQUFBSyxPQUFBM0QsRUFBQXdELEdBQUF4RSxNQUFBc0UsTUFBQUMsSUFBQXZELEVBQUF3RCxJQ25CQXhFLE1BQUFFLFFBQ0E2RSxVQUNBQyxnQkFBQSxJQUlBaEYsTUFBQUUsT0FBQUQsS0FBQSxXQUNBLEdBQUFnRixHQUFBakYsTUFBQWtGLFFBQUEzRSxJQUFBLFNBQ0EwRSxLQUNBakYsTUFBQUUsT0FBQTZFLFNBQUFFLElBSUFqRixNQUFBRSxPQUFBSyxJQUFBLFNBQUE0RSxHQUNBLEdBQUFDLEdBQUEsSUFBQUQsRUFBQSxHQUNBLElBQUFDLElBQUFwRixPQUFBRSxPQUFBNkUsU0FDQSxNQUFBL0UsT0FBQUUsT0FBQTZFLFNBQUFLLEVBRUEsTUFBQSxJQUFBcEYsT0FBQXFGLFVBQUEsTUFBQSwwQkFBQUYsRUFBQSxNQUdBbkYsTUFBQUUsT0FBQW9GLElBQUEsU0FBQUgsRUFBQTVDLEdBQ0EsR0FBQTZDLEdBQUEsSUFBQUQsRUFBQSxHQUNBLEtBQUFDLElBQUFwRixPQUFBRSxPQUFBNkUsU0FDQSxLQUFBLElBQUEvRSxPQUFBcUYsVUFBQSxNQUFBLDBCQUFBRixFQUFBLElBRUFuRixPQUFBRSxPQUFBNkUsU0FBQUssR0FBQTdDLEVBQ0F2QyxNQUFBa0YsUUFBQUksSUFBQSxTQUFBdEYsTUFBQUUsT0FBQTZFLFdDM0JBL0UsTUFBQXVGLFVBRUF2RixNQUFBdUYsT0FBQUMsSUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUExRixNQUFBdUYsT0FBQUksZ0JBRUFKLEVBQUFLLFNBQUFDLGNBQUEsTUFDQU4sR0FBQWYsVUFBQSxlQUNBZSxFQUFBTyxVQUFBTCxFQUNBQyxFQUFBSyxZQUFBUixJQUdBdkYsTUFBQXVGLE9BQUFJLGNBQUEsV0FDQSxHQUFBRCxFQUFBMUYsTUFBQU8sSUFBQXFGLFNBQUEsMEJBSUEsT0FIQUwsT0FBQXZGLE1BQUFPLElBQUFxRixTQUFBLDBDQUNBRixFQUFBTSxZQUFBVCxRQUVBRyxDQUVBLElBQUFBLEdBQUFFLFNBQUFDLGNBQUEsTUFLQSxPQUpBSCxHQUFBbEIsVUFBQSx3QkFDQWtCLEVBQUFJLFVBQUEsOENBQ0E5RixNQUFBTyxJQUFBbUYsRUFBQSw0QkFBQU8sUUFBQWpHLE1BQUF1RixPQUFBVyxNQUNBbEcsTUFBQU8sSUFBQXFGLFNBQUEsUUFBQUcsWUFBQUwsR0FDQUEsR0FHQTFGLE1BQUF1RixPQUFBVyxNQUFBLFlBQ0FYLE9BQUF2RixNQUFBTyxJQUFBcUYsU0FBQSw0QkFDQTVGLE1BQUFPLElBQUFxRixTQUFBLFFBQUFJLFlBQUFULFNDNUJBdkYsTUFBQXFGLFVBQUEsU0FBQTlDLEVBQUFHLEdBQ0F5RCxLQUFBNUQsTUFBQUEsRUFDQTRELEtBQUF6RCxRQUFBQSxFQUNBeUQsS0FBQUMsU0FBQSxXQUNBLE1BQUEsa0JBQUFELEtBQUE1RCxNQUFBLEtBQUE0RCxLQUFBekQsVUNKQTFDLE1BQUFNLFNBRUFOLE1BQUFNLE1BQUFMLEtBQUEsV0FHQSxJQUFBLEdBREFLLEdBREErRixFQUFBVCxTQUFBOUUsaUJBQUEsZ0RBRUFHLEVBQUEsRUFBQUEsRUFBQW9GLEVBQUFuRixPQUFBRCxJQUVBLEdBREFYLEVBQUErRixFQUFBcEYsSUFDQWpCLE1BQUFzRSxNQUFBRyxJQUFBbkUsRUFBQWdHLGNBQUEscUJBQUEsQ0F5QkEsR0FyQkFoRyxFQUFBZ0csY0FBQUMsU0FBQSxTQUFBaEUsSUFDQWpDLEVBQUE2RixLQUFBekYsY0FBQSxXQUNBSixFQUFBaUMsTUFBQUEsRUFDQWpDLEVBQUFrRyxZQUNBbEcsRUFBQTZGLEtBQUF6RixjQUFBLGVBQ0FKLEVBQUFpQyxNQUFBQSxFQUNBakMsRUFBQWtHLFlBSUFsRyxFQUFBZ0csY0FBQUcsU0FBQSxXQUNBLEdBQUFuRyxFQUFBNkYsS0FBQXpGLGNBQUEsU0FBQSxDQUNBLEdBQUFKLEdBQUE2RixLQUFBekYsY0FBQSxRQUNBLE9BQUFKLEdBQUFpQyxNQUNBLEdBQUFqQyxFQUFBNkYsS0FBQXpGLGNBQUEsWUFBQSxDQUNBLEdBQUFKLEdBQUE2RixLQUFBekYsY0FBQSxXQUNBLE9BQUFKLEdBQUFpQyxNQUVBLE1BQUEsT0FHQXZDLE1BQUFzRSxNQUFBRyxJQUFBbkUsRUFBQWdHLGNBQUEsc0JBQUEsQ0FDQXRHLE1BQUFzRSxNQUFBSyxPQUFBckUsRUFBQWdHLGNBQUEsc0JBQ0F0RyxNQUFBc0UsTUFBQUMsSUFBQWpFLEVBQUFnRyxjQUFBLGlCQUVBLElBQUFJLEdBQUFkLFNBQUFDLGNBQUEsUUFDQWEsR0FBQVosVUFBQXhGLEVBQUFxRyxZQUNBckcsRUFBQWdHLGNBQUFQLFlBQUFXLEdBQ0FwRyxFQUFBa0csUUFBQSxTQUFBekcsR0FDQSxHQUFBNkcsR0FBQVQsS0FBQUcsY0FBQTVGLGNBQUEsUUFDQWtHLEtBQ0EsSUFBQVQsS0FBQTVELE1BQ0F2QyxNQUFBc0UsTUFBQUMsSUFBQXFDLEVBQUEsUUFFQTVHLE1BQUFzRSxNQUFBSyxPQUFBaUMsRUFBQSxVQU1BdEcsRUFBQWdHLGNBQUFPLGFBQUEsVUFDQXZHLEVBQUFnRyxjQUFBQyxTQUFBakcsRUFBQWdHLGNBQUFPLGFBQUEsVUFHQTdHLE1BQUFzRSxNQUFBQyxJQUFBakUsRUFBQWdHLGNBQUEscUJBSUEsSUFBQSxHQURBUSxHQURBQyxFQUFBbkIsU0FBQTlFLGlCQUFBLHdCQUVBRyxFQUFBLEVBQUFBLEVBQUE4RixFQUFBN0YsT0FBQUQsSUFFQSxHQURBNkYsRUFBQUMsRUFBQTlGLElBQ0FqQixNQUFBc0UsTUFBQUcsSUFBQXFDLEVBQUFSLGNBQUEscUJBQUEsQ0FHQSxHQUFBdEcsTUFBQXNFLE1BQUFHLElBQUFxQyxFQUFBUixjQUFBLHNCQUFBLENBQ0F0RyxNQUFBc0UsTUFBQUssT0FBQW1DLEVBQUFSLGNBQUEsc0JBQ0F0RyxNQUFBc0UsTUFBQUMsSUFBQXVDLEVBQUFSLGNBQUEsaUJBQ0EsSUFBQUksR0FBQWQsU0FBQUMsY0FBQSxRQUNBYSxHQUFBWixVQUFBZ0IsRUFBQUQsYUFBQSxlQUNBQyxFQUFBUixjQUFBUCxZQUFBVyxHQUdBSSxFQUFBUixjQUFBQyxTQUFBLFNBQUFoRSxHQUNBdkMsTUFBQXNFLE1BQUFLLE9BQUF3QixLQUFBLGNBQ0EsSUFBQVcsR0FBQVgsS0FBQXpGLGNBQUEsVUFDQUosRUFBQTZGLEtBQUF6RixjQUFBLFNBQ0FzRyxFQUFBRixFQUFBdkUsS0FDQXVFLEdBQUF2RSxNQUFBQSxFQUNBdUUsRUFBQUcsZUFBQSxJQUNBM0csRUFBQWlDLE1BQUF1RSxFQUFBSSxRQUFBSixFQUFBRyxlQUFBRSxNQUVBN0csRUFBQThHLFFBQ0E5RyxFQUFBK0csVUFDQUwsR0FBQXpFLEdBQUF1RSxFQUFBUSxVQUNBUixFQUFBUSxZQUlBUixFQUFBUixjQUFBRyxTQUFBLFdBQ0EsR0FBQUssR0FBQVgsS0FBQXpGLGNBQUEsU0FDQSxPQUFBb0csR0FBQUcsZ0JBQUEsRUFDQSxLQUVBSCxFQUFBSSxRQUFBSixFQUFBRyxlQUFBMUUsT0FHQXVFLEVBQUFSLGNBQUFpQixRQUFBLFdBQ0EsR0FBQVQsR0FBQVgsS0FBQXpGLGNBQUEsU0FDQSxPQUFBb0csR0FBQUcsZ0JBQUEsRUFDQSxLQUVBSCxFQUFBSSxRQUFBSixFQUFBRyxlQUFBbkIsVUFHQSxJQUFBeEYsR0FBQXNGLFNBQUFDLGNBQUEsUUFDQXZGLEdBQUFrSCxLQUFBLE9BQ0FsSCxFQUFBcUcsWUFBQUcsRUFBQUQsYUFBQSxlQUNBdkcsRUFBQW1ILGFBQUEsV0FBQSxZQUNBWCxFQUFBUixjQUFBUCxZQUFBekYsRUFJQSxLQUFBLEdBRkE0RyxHQUFBSixFQUFBaEcsaUJBQUEsVUFDQTRHLEVBQUE5QixTQUFBQyxjQUFBLE1BQ0E4QixFQUFBLEVBQUFBLEVBQUFULEVBQUFoRyxPQUFBeUcsSUFBQSxDQUNBLEdBQUF4QyxHQUFBK0IsRUFBQVMsRUFDQSxJQUFBeEMsRUFBQTBCLGFBQUEsU0FBQSxDQUdBLEdBQUFlLEdBQUFoQyxTQUFBQyxjQUFBLEtBQ0ErQixHQUFBSCxhQUFBLFFBQUF0QyxFQUFBNUMsT0FDQXFGLEVBQUE5QixVQUFBWCxFQUFBVyxVQUNBNEIsRUFBQTNCLFlBQUE2QixHQUNBQSxFQUFBQyxZQUFBLFNBQUE5SCxHQUNBb0csS0FBQUcsY0FBQUEsY0FBQUMsU0FBQUosS0FBQVUsYUFBQSxVQUNBOUcsRUFBQStILGtCQUNBakksT0FBQWdJLGdCQUdBZixFQUFBUixjQUFBUCxZQUFBMkIsR0FDQXBILEVBQUErRyxRQUFBLFNBQUF0SCxHQUNBLEdBQUE2RyxHQUFBVCxLQUFBRyxjQUFBNUYsY0FBQSxRQUNBa0csS0FDQSxJQUFBVCxLQUFBNUQsTUFDQXZDLE1BQUFzRSxNQUFBQyxJQUFBcUMsRUFBQSxRQUVBNUcsTUFBQXNFLE1BQUFLLE9BQUFpQyxFQUFBLFVBSUFFLEVBQUFSLGNBQUFMLFFBQUEsV0FDQWpHLE1BQUFzRSxNQUFBQyxJQUFBNEIsS0FBQSxjQUNBLElBQUFXLEdBQUFYLEtBQ0E0QixFQUFBLEVBQ0FsSSxRQUFBZ0ksWUFBQSxXQUdBLEdBRkFoSSxPQUFBZ0ksWUFBQSxLQUNBaEksT0FBQTJHLFFBQUEsS0FDQXdCLE1BQUFoSSxNQUFBYSxPQUFBaUcsRUFBQSxTQUFBLENBQ0EsSUFBQSxHQUFBN0YsR0FBQSxFQUFBQSxFQUFBK0csTUFBQTlHLE9BQUFELElBQ0ErRyxNQUFBL0csR0FBQUUsTUFBQUMsUUFBQSxFQUVBcEIsT0FBQXFCLEtBQUF5RixFQUFBLE1BRUE5RyxNQUFBc0UsTUFBQUssT0FBQW1DLEVBQUEsZ0JBRUFqSCxPQUFBMkcsUUFBQSxTQUFBekcsR0FDQSxPQUFBQSxFQUFBa0ksU0FDQSxJQUFBLEdBQ0FGLEVBQUE3RyxPQUFBLElBQ0E2RyxFQUFBQSxFQUFBRyxVQUFBLEVBQUFILEVBQUE3RyxPQUFBLEdBRUEsTUFDQSxLQUFBLElBQ0E2RyxFQUFBLEVBQ0EsTUFDQSxTQUNBQSxHQUFBSSxPQUFBQyxhQUFBckksRUFBQWtJLFNBRUEsR0FBQUQsTUFBQWhJLE1BQUFhLE9BQUFpRyxFQUFBLFNBQUEsQ0FDQTlHLE1BQUFxQixLQUFBeUYsRUFBQSxLQUdBLEtBQUEsR0FGQXVCLEdBQ0FDLEdBQUEsRUFDQXJILEVBQUEsRUFBQUEsRUFBQStHLE1BQUE5RyxPQUFBRCxJQUNBb0gsRUFBQUwsTUFBQS9HLEdBQ0FqQixNQUFBMEIsYUFBQXFHLEVBQUFNLEVBQUF2QyxZQUNBdUMsRUFBQWxILE1BQUFDLFFBQUEsR0FDQWtILEdBQUEsR0FFQUQsRUFBQWxILE1BQUFDLFFBQUEsTUFHQWtILElBQ0F0SSxNQUFBZSxLQUFBK0YsRUFBQSxRQUlBakgsT0FBQXVILFNBR0FOLEVBQUFSLGNBQUFPLGFBQUEsVUFDQUMsRUFBQVIsY0FBQUMsU0FBQU8sRUFBQVIsY0FBQU8sYUFBQSxVQUVBN0csTUFBQXNFLE1BQUFDLElBQUF1QyxFQUFBUixjQUFBLHFCQUVBdEcsTUFBQU0sTUFBQWlJLGdCQUdBdkksTUFBQU0sTUFBQWlJLGFBQUEsV0FHQSxJQUFBLEdBREFDLEdBREFDLEVBQUE3QyxTQUFBOUUsaUJBQUEseUJBRUFHLEVBQUEsRUFBQUEsRUFBQXdILEVBQUF2SCxPQUFBRCxJQUVBLEdBREF1SCxFQUFBQyxFQUFBeEgsSUFDQWpCLE1BQUFzRSxNQUFBRyxJQUFBK0QsRUFBQWxDLGNBQUEscUJBQUEsQ0FJQSxHQUFBb0MsR0FBQTlDLFNBQUFDLGNBQUEsT0FLQSxJQUpBNkMsRUFBQWxFLFVBQUEsU0FDQWtFLEVBQUE1QyxVQUFBLHVHQUNBMEMsRUFBQWxDLGNBQUFQLFlBQUEyQyxHQUVBaEMsTUFBQThCLEVBQUEzQixhQUFBLFNBQUEsQ0FDQSxHQUFBRCxHQUFBaEIsU0FBQUMsY0FBQSxPQUNBZSxHQUFBcEMsVUFBQSxRQUNBb0MsRUFBQWQsVUFBQVksTUFDQThCLEVBQUFsQyxjQUFBUCxZQUFBYSxHQUVBNUcsTUFBQXNFLE1BQUFDLElBQUFpRSxFQUFBbEMsY0FBQSxxQkFDQWtDLEVBQUFHLFFBQUEzSSxNQUFBc0UsTUFBQUcsSUFBQStELEVBQUFsQyxjQUFBLFdBRUFrQyxFQUFBbEMsY0FBQUwsUUFBQSxXQUNBakcsTUFBQXNFLE1BQUFRLE9BQUFxQixLQUFBLFdBQ0FuRyxNQUFBTyxJQUFBNEYsS0FBQSxTQUFBd0MsUUFBQTNJLE1BQUFzRSxNQUFBRyxJQUFBMEIsS0FBQSxXQUNBcUMsRUFBQWxDLGNBQUFnQixVQUNBa0IsRUFBQWxDLGNBQUFnQixTQUFBdEgsTUFBQXNFLE1BQUFHLElBQUEwQixLQUFBLGFBSUFxQyxFQUFBbEMsY0FBQUcsU0FBQSxXQUNBLE1BQUF6RyxPQUFBc0UsTUFBQUcsSUFBQTBCLEtBQUEsWUFHQXFDLEVBQUFsQyxjQUFBQyxTQUFBLFNBQUFoRSxHQUNBdkMsTUFBQXNFLE1BQUFHLElBQUEwQixLQUFBLFlBQUE1RCxHQUdBNEQsS0FBQUYsYUMxT0FqRyxNQUFBNEksUUFDQUMsa0JBQUEsWUFDQUMsa0JBQ0FDLFVBQ0FDLFVBQ0FDLGFBSUFqSixNQUFBNEksT0FBQXJFLElBQUEsU0FBQTJFLEVBQUExSCxHQUNBLEdBQUEySCxHQUFBbkosTUFBQTRJLE9BQUFRLFdBQUFGLEVBQ0EsT0FBQUMsR0FBQXJILE9BQ0FxSCxFQUFBM0gsU0FBQUEsRUFDQXhCLE1BQUE0SSxPQUFBRyxTQUFBRSxRQUFBRSxFQUFBRSxTQUNBckosTUFBQTRJLE9BQUFHLFNBQUFFLFFBQUFFLEVBQUFFLFdBRUFySixNQUFBNEksT0FBQUcsU0FBQUUsUUFBQUUsRUFBQUUsT0FBQUYsRUFBQUcsV0FDQXRKLE1BQUE0SSxPQUFBRyxTQUFBRSxRQUFBRSxFQUFBRSxPQUFBRixFQUFBRyxpQkFFQXRKLE9BQUE0SSxPQUFBRyxTQUFBRSxRQUFBRSxFQUFBRSxPQUFBRixFQUFBRyxTQUFBdEYsS0FBQW1GLFNBR0FuSixNQUFBNEksT0FBQUcsU0FBQUMsT0FBQUUsR0FBQTFILElBR0F4QixNQUFBNEksT0FBQXRELElBQUEsU0FBQTZELEdBQ0FuSixNQUFBNEksT0FBQVcsV0FBQUosR0FDQXRKLE9BQUEySixjQUFBLEdBQUFDLE9BQUEsY0FHQXpKLE1BQUE0SSxPQUFBVyxXQUFBLFNBQUFKLEdBQ0F0SixPQUFBNkosUUFBQUMsVUFBQSxHQUFBLEdBQUFSLElBR0FuSixNQUFBNEksT0FBQWdCLFNBQUEsU0FBQVQsR0FDQXRKLE9BQUFnSyxTQUFBVixHQUdBbkosTUFBQTRJLE9BQUFrQixlQUFBLFNBQUFYLEdBQ0F4SSxRQUFBQyxJQUFBLFVBQUF3RCxLQUFBQyxVQUFBOEUsR0FBQSxvQkFHQW5KLE1BQUE0SSxPQUFBbUIsSUFBQSxXQUNBbEssT0FBQW1LLFdBQUEsU0FBQXpJLEdBQ0F2QixNQUFBNEksT0FBQXFCLFdBRUFqSyxNQUFBNEksT0FBQXFCLFdBR0FqSyxNQUFBNEksT0FBQXFCLFFBQUEsV0FDQSxHQUFBZixHQUFBL0MsS0FBQStELFNBQ0EsSUFBQS9ELEtBQUE0QyxTQUFBQyxPQUFBRSxFQUFBQSxNQUVBLFdBREEvQyxNQUFBNEMsU0FBQUMsT0FBQUUsRUFBQUEsT0FHQSxJQUFBRyxHQUFBSCxFQUFBQSxLQUFBbEgsTUFBQSxLQUFBZCxPQUFBLENBQ0EsSUFBQWlGLEtBQUE0QyxTQUFBRSxRQUFBSSxHQUFBLENBQ0EsR0FBQUYsR0FDQWdCLEVBQ0EvRyxJQUNBLEtBQUEsR0FBQWdILEtBQUFqRSxNQUFBNEMsU0FBQUUsUUFBQUksR0FDQSxJQUFBLEdBQUFoQixLQUFBbEMsTUFBQTRDLFNBQUFFLFFBQUFJLEdBQUFlLEdBQUEsQ0FDQSxHQUFBakIsR0FBQWhELEtBQUE0QyxTQUFBRSxRQUFBSSxHQUFBZSxHQUFBL0IsRUFFQSxJQURBOEIsRUFBQWpCLEVBQUFBLEtBQUFoSCxNQUFBaUgsRUFBQXJILE9BQ0EsQ0FHQSxJQUFBLEdBQUFiLEdBQUEsRUFBQUEsRUFBQWtJLEVBQUFHLFFBQUFySSxJQUNBbUMsRUFBQStGLEVBQUFrQixLQUFBcEosSUFBQWtKLEVBQUFsSixFQUFBLEVBR0EsWUFEQWtJLEdBQUEzSCxTQUFBNEIsS0FLQXBELE1BQUE0SSxPQUFBa0IsZUFBQVosSUFHQWxKLE1BQUE0SSxPQUFBc0IsUUFBQSxXQUNBLEdBQUF0RCxHQUFBaEIsU0FBQUMsY0FBQSxJQUVBLE9BREFlLEdBQUEwRCxLQUFBekssT0FBQWdLLFVBQ0FVLEtBQUEzRCxFQUFBNEQsU0FBQXRCLEtBQUF0QyxFQUFBNkQsV0FHQXpLLE1BQUE0SSxPQUFBUSxXQUFBLFNBQUFGLEdBQ0EsS0FBQUEsRUFBQWhCLFVBQUEsRUFBQSxLQUNBZ0IsRUFBQSxJQUFBQSxHQUVBLEtBQUFBLEVBQUFoQixVQUFBZ0IsRUFBQWhJLE9BQUEsS0FDQWdJLEVBQUEsSUFBQUEsRUFFQSxJQUFBQyxJQUNBRCxLQUFBQSxFQUNBRyxNQUFBSCxFQUFBbEgsTUFBQSxLQUFBZCxPQUFBLEVBQ0FtSixRQUNBZixRQUFBLEVBR0EsSUFEQXRKLE1BQUE0SSxPQUFBRSxlQUFBSSxFQUFBaEgsTUFBQWxDLE1BQUE0SSxPQUFBQyxtQkFDQWhILFFBQUE3QixNQUFBNEksT0FBQUUsZ0JBQUEsTUFBQTlJLE1BQUE0SSxPQUFBRSxlQUFBLENBRUEsSUFBQSxHQURBaEgsR0FBQSxJQUFBb0gsRUFBQXRFLFFBQUEsT0FBQSxPQUFBLElBQ0EzRCxFQUFBLEVBQUFBLEVBQUFqQixNQUFBNEksT0FBQUUsZUFBQTVILE9BQUFELElBQ0FrSSxFQUFBRyxVQUNBSCxFQUFBa0IsS0FBQXJHLEtBQUFoRSxNQUFBNEksT0FBQUUsZUFBQTdILEdBQUFpSCxVQUFBLEVBQUFsSSxNQUFBNEksT0FBQUUsZUFBQTdILEdBQUFDLE9BQUEsSUFDQVksRUFBQUEsRUFBQThDLFFBQUE1RSxNQUFBNEksT0FBQUUsZUFBQTdILEdBQUEsUUFFQWtJLEdBQUFySCxNQUFBLEdBQUE0SSxRQUFBNUksRUFBQSxLQUVBLE1BQUFxSCxJQUdBbkosTUFBQTRJLE9BQUErQixXQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQSxTQUFBRCxFQUFBLFlBQ0E5SSxFQUFBLEdBQUE0SSxRQUFBRyxHQUNBdkMsRUFBQXhHLEVBQUFnSixLQUFBakwsT0FBQWdLLFNBQUFsSSxPQUNBLElBQUEsTUFBQTJHLEVBR0EsTUFBQUEsR0FBQSxJQ3JIQXRJLE1BQUFJLFdBQ0EySyxJQUFBLEVBQ0FDLHNCQUFBLEVBQ0EzRCxRQUFBeEYsT0FDQW9KLE9BQUFwSixPQUNBcUosUUFBQXJKLFFBR0E3QixNQUFBSSxVQUFBSCxLQUFBLFdBQ0EsSUFBQUQsTUFBQUksVUFBQTJLLEdBQUEsQ0FHQSxHQUFBSSxHQUFBdkYsU0FBQWxGLGNBQUEseUJBQ0F5SyxLQUdBQSxFQUFBOUQsUUFBQSxXQUNBLEdBQUFsQixLQUFBNUQsTUFBQXJCLFFBQ0FsQixNQUFBSSxVQUFBa0ksUUFBQSxxRUFFQXRJLE1BQUFzRSxNQUFBQyxJQUFBcUIsU0FBQWxGLGNBQUEsaUJBQUEsZUFDQVYsTUFBQXNFLE1BQUFDLElBQUFxQixTQUFBbEYsY0FBQSw2Q0FBQSxRQUNBVixNQUFBSSxVQUFBaUgsU0FDQXJILE1BQUFJLFVBQUFpSCxXQUdBOEQsRUFBQUYsT0FBQSxXQUNBakwsTUFBQXNFLE1BQUFLLE9BQUFpQixTQUFBbEYsY0FBQSxpQkFBQSxlQUNBVixNQUFBc0UsTUFBQUssT0FBQWlCLFNBQUFsRixjQUFBLDZDQUFBLFFBQ0FWLE1BQUFJLFVBQUE2SyxRQUNBakwsTUFBQUksVUFBQTZLLFVBR0FFLEVBQUEzRSxRQUFBLFNBQUF6RyxHQUNBb0csS0FBQTVELE1BQUFyQixPQUFBbEIsTUFBQUksVUFBQTRLLHVCQUdBaEwsTUFBQUksVUFBQWtILFVBQ0F0SCxNQUFBSSxVQUFBa0gsU0FBQW5CLEtBQUE1RCxRQUdBdkMsTUFBQUksVUFBQTJLLElBQUEsS0FHQS9LLE1BQUFJLFVBQUFrSSxRQUFBLFNBQUE3QyxHQUNBLEdBQUE2QyxHQUFBMUMsU0FBQWxGLGNBQUEsNENBQ0E0SCxHQUFBeEMsVUFBQUwsR0M5Q0F6RixNQUFBRyxTQUNBNEssSUFBQSxHQUdBL0ssTUFBQUcsUUFBQUYsS0FBQSxXQUNBLElBQUFELE1BQUFHLFFBQUE0SyxHQUFBLENBR0EsR0FBQUssR0FBQXhGLFNBQUFsRixjQUFBLHVCQUNBLElBQUEwSyxFQUFBLENBR0FBLEVBQUFuRixRQUFBLFdBQ0FqRyxNQUFBRyxRQUFBa0wsYUFHQSxJQUFBQyxHQUFBMUYsU0FBQWxGLGNBQUEsaUJBQ0FWLE9BQUFzRSxNQUFBQyxJQUFBK0csRUFBQSxlQUNBdEwsTUFBQUcsUUFBQTRLLElBQUEsRUFDQS9LLE1BQUFFLE9BQUFLLElBQUEsaUJBQ0FQLE1BQUFHLFFBQUFrTCxnQkFJQXJMLE1BQUFHLFFBQUFrTCxXQUFBLFdBQ0FyTCxNQUFBRyxRQUFBNEssS0FHQS9LLE1BQUFzRSxNQUFBUSxPQUFBYyxTQUFBbEYsY0FBQSx3QkFBQSxVQUNBVixNQUFBc0UsTUFBQVEsT0FBQWMsU0FBQWxGLGNBQUEsa0JBQUEsZUFDQVYsTUFBQUUsT0FBQW9GLElBQUEsZ0JBQUF0RixNQUFBc0UsTUFBQUcsSUFBQW1CLFNBQUFsRixjQUFBLGtCQUFBLGtCQzlCQVYsTUFBQWtGLFdBRUFsRixNQUFBa0YsUUFBQUksSUFBQSxTQUFBdkIsRUFBQXhCLEdBQ0FnSixhQUFBQyxRQUFBekgsRUFBQUssS0FBQUMsVUFBQTlCLEtBR0F2QyxNQUFBa0YsUUFBQXVHLE1BQUEsU0FBQTFILEdBQ0F3SCxhQUFBRyxXQUFBM0gsSUFHQS9ELE1BQUFrRixRQUFBM0UsSUFBQSxTQUFBd0QsR0FDQSxHQUFBOUMsR0FBQXNLLGFBQUFJLFFBQUE1SCxFQUNBLElBQUE5QyxFQUdBLE1BQUFtRCxNQUFBd0gsTUFBQTNLLElBR0FqQixNQUFBa0YsUUFBQTJHLE1BQUEsV0FDQU4sYUFBQU0sU0NuQkE3TCxNQUFBSyxXQUNBeUwsVUFBQWpLLE9BQ0FrSyxLQUFBbEssT0FDQW1LLE1BQUFuSyxPQUNBb0ssS0FBQXBLLE9BQ0FxSyxXQUdBbE0sTUFBQUssVUFBQUosS0FBQSxXQUNBRCxNQUFBSyxVQUFBMEwsS0FBQW5HLFNBQUFsRixjQUFBLG9CQUNBVixNQUFBSyxVQUFBMEwsT0FHQS9MLE1BQUFLLFVBQUEyTCxNQUFBcEcsU0FBQWxGLGNBQUEsaUJBQ0FWLE1BQUFLLFVBQUEyTCxPQUNBaE0sTUFBQXNFLE1BQUFDLElBQUF2RSxNQUFBSyxVQUFBMEwsS0FBQSxjQUVBL0wsTUFBQUssVUFBQTRMLEtBQUFyRyxTQUFBbEYsY0FBQSxtQ0FDQVYsTUFBQUssVUFBQTRMLE1BQ0FqTSxNQUFBc0UsTUFBQUMsSUFBQXZFLE1BQUFLLFVBQUEwTCxLQUFBLGlCQUlBL0wsTUFBQUssVUFBQThMLE9BQUEsU0FBQUMsRUFBQUMsRUFBQTVHLEVBQUF2QyxHQUNBLElBQUFsRCxNQUFBTyxJQUFBcUYsU0FBQSxtQkFBQSxDQUNBLEdBQUEwRyxHQUFBdE0sTUFBQU8sSUFBQXFGLFNBQUEsZUFDQSxLQUFBMEcsRUFFQSxXQURBM0wsU0FBQUMsSUFBQSx5Q0FHQTBMLEdBQUF4RyxVQUFBLGtHQUVBLEdBQUF5RyxHQUFBdk0sTUFBQU8sSUFBQXFGLFNBQUEsK0JBQ0E0RyxFQUFBeE0sTUFBQU8sSUFBQXFGLFNBQUEsK0JBSUEsSUFGQUEsU0FBQXlHLE1BQUFyTSxNQUFBSyxVQUFBb00sWUFBQUosR0FFQUssRUFBQTFNLE1BQUFPLElBQUFnTSxFQUFBLHVCQUFBSCxFQUFBLE1BQUEsQ0FDQSxHQUFBTyxHQUFBM00sTUFBQU8sSUFBQWlNLEVBQUEsd0JBQUFKLEVBQUEsS0FJQSxPQUhBTyxHQUFBN0csVUFBQUwsRUFDQWlILEVBQUFFLFFBQUExSixJQUFBQSxFQUNBd0osRUFBQXpHLFdBQ0F5RyxJQUFBQSxFQUFBQyxLQUFBQSxHQUdBM00sTUFBQWUsS0FBQXlMLEVBQUEsZ0JBQ0FLLE9BQUE3TSxNQUFBTyxJQUFBZ00sRUFBQSx1QkFDQXZNLE1BQUFzRSxNQUFBSyxPQUFBa0ksT0FBQSxTQUlBLElBQUFILEdBQUE5RyxTQUFBQyxjQUFBLE1BQ0E2RyxHQUFBbEksVUFBQSxtQkFDQWtJLEVBQUFFLFFBQUFSLEdBQUFBLEVBQ0FNLEVBQUFFLFFBQUExSixJQUFBQSxFQUNBd0osRUFBQTVHLFVBQUF1RyxFQUFBLDRDQUNBSyxFQUFBekcsUUFBQSxTQUFBbEcsSUFDQThNLE9BQUE3TSxNQUFBTyxJQUFBZ00sRUFBQSx1QkFDQXZNLE1BQUFzRSxNQUFBSyxPQUFBa0ksT0FBQSxVQUVBN00sTUFBQXNFLE1BQUFDLElBQUE0QixLQUFBLFVBQ0FuRyxNQUFBZSxLQUFBNkUsU0FBQSxlQUNBNUYsTUFBQXFCLEtBQUF1RSxTQUFBLHdCQUFBTyxLQUFBeUcsUUFBQVIsR0FBQSxNQUNBakcsS0FBQXlHLFFBQUExSixLQUFBLGFBQUFpRCxLQUFBeUcsUUFBQTFKLEtBQ0FsRCxNQUFBNEksT0FBQVcsV0FBQXBELEtBQUF5RyxRQUFBMUosS0FFQTBDLFNBQUF5RyxNQUFBck0sTUFBQUssVUFBQW9NLFlBQUF0RyxLQUFBTCxZQUVBOUYsTUFBQXNCLEdBQUFvTCxFQUFBLFNBQUEsVUFBQSxTQUFBM00sR0FDQW9HLEtBQUFHLGNBQUF3RyxVQUFBM0csS0FBQUcsY0FBQXdHLFlBR0E5TSxNQUFBc0UsTUFBQUcsSUFBQTBCLEtBQUFHLGNBQUEsWUFDQUgsS0FBQUcsY0FBQXlHLGdCQUNBNUcsS0FBQUcsY0FBQXlHLGdCQUFBOUcsVUFDQUUsS0FBQUcsY0FBQTBHLGFBQ0E3RyxLQUFBRyxjQUFBMEcsWUFBQS9HLFlBR0EwRyxFQUFBM00sTUFBQU8sSUFBQXFGLFNBQUEsd0JBQUFPLEtBQUFHLGNBQUFzRyxRQUFBUixHQUFBLFFBQ0FPLEVBQUFyRyxjQUFBTixZQUFBMkcsR0FFQXhHLEtBQUFHLGNBQUFBLGNBQUFOLFlBQUFHLEtBQUFHLGVBQ0F2RyxFQUFBK0gscUJBRUF5RSxFQUFBeEcsWUFBQTJHLEVBR0EsSUFBQUMsR0FBQS9HLFNBQUFDLGNBQUEsTUFLQSxPQUpBOEcsR0FBQW5JLFVBQUEsYUFDQW1JLEVBQUFDLFFBQUFSLEdBQUFBLEVBQ0FPLEVBQUE3RyxVQUFBTCxFQUNBK0csRUFBQXpHLFlBQUE0RyxJQUNBRCxJQUFBQSxFQUFBQyxLQUFBQSxJQUdBM00sTUFBQUssVUFBQTRNLFVBQUEsV0FDQSxHQUFBUCxHQUFBMU0sTUFBQU8sSUFBQWdNLEtBQUEsb0JBQ0EsS0FBQUcsRUFDQSxNQUFBLEtBRUEsSUFBQUMsR0FBQTNNLE1BQUFPLElBQUFxRixTQUFBLHdCQUFBOEcsRUFBQUUsUUFBQVIsR0FBQSxLQUNBLE9BQUFPLElBR0FELElBQUFBLEVBQUFDLEtBQUFBLEdBRkEsTUFLQTNNLE1BQUFLLFVBQUFvTSxZQUFBLFNBQUFKLEdBQ0EsTUFBQUEsR0FBQXpILFFBQUEsa0NBQUEsS0FBQTVFLE1BQUFLLFVBQUF5TCxVQUFBLE1BQUE5TCxNQUFBSyxVQUFBeUwsVUFBQSIsImZpbGUiOiJzbWFzaC5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbihlKXtcbiAgICBzbWFzaC5pbml0KCk7XG59LCBmYWxzZSk7XG5cbnZhciBzbWFzaCA9IHt9O1xuXG5zbWFzaC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgc21hc2guY29uZmlnLmluaXQoKTtcbiAgICBzbWFzaC5zaWRlYmFyLmluaXQoKTtcbiAgICBzbWFzaC5zZWFyY2hib3guaW5pdCgpO1xuICAgIHNtYXNoLndvcmtzcGFjZS5pbml0KCk7XG4gICAgc21hc2guaW5wdXQuaW5pdCgpO1xufTtcblxuc21hc2guZ2V0ID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuc21hc2guZ2V0QWxsID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuc21hc2guaGlkZSA9IGZ1bmN0aW9uKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgICB2YXIgZWw7XG4gICAgaWYgKHR5cGVvZiBwYXJlbnQgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZWwgPSBzbWFzaC5nZXRBbGwocGFyZW50LCBzZWxlY3Rvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWwgPSBwYXJlbnQ7XG4gICAgfVxuICAgIGZvciAodmFyIGk9MDsgaTxlbC5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbFtpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbn07XG5cbnNtYXNoLnNob3cgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdmFyIGVsO1xuICAgIGlmICh0eXBlb2YgcGFyZW50ID09PSAnc3RyaW5nJyAmJiB0eXBlb2Ygc2VsZWN0b3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGVsID0gc21hc2guZ2V0QWxsKHBhcmVudCwgc2VsZWN0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGVsID0gcGFyZW50O1xuICAgIH1cbiAgICBmb3IgKHZhciBpPTA7IGk8ZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgIH1cbn07XG5cbnNtYXNoLm9uID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3RvciwgZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGVsZW1lbnRzID0gc21hc2guZ2V0QWxsKHBhcmVudCwgc2VsZWN0b3IpO1xuICAgIGZvciAodmFyIGk9MDsgaTxlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbGVtZW50c1tpXVtldmVudF0gPSBjYWxsYmFjaztcbiAgICB9XG59O1xuXG5zbWFzaC5mdXp6eUNvbXBhcmUgPSBmdW5jdGlvbihzZWFyY2gsIGNvbXBhcmUpIHtcbiAgICBpZiAoY29tcGFyZSA9PSB1bmRlZmluZWQgfHwgc2VhcmNoID09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciByZWdleCA9IFwiLio/XCIgKyBzZWFyY2gudG9Mb3dlckNhc2UoKS5zcGxpdChcIlwiKS5qb2luKFwiLio/XCIpICsgXCIuKj9cIjtcbiAgICByZXR1cm4gY29tcGFyZS50b0xvd2VyQ2FzZSgpLm1hdGNoKHJlZ2V4KTtcbn07XG4iLCJzbWFzaC5hamF4ID0ge1xuICAgIF9oZWFkZXJzXzogW11cbn07XG5cbnNtYXNoLmFqYXguYWRkSGVhZGVyID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBzbWFzaC5hamF4Ll9oZWFkZXJzX1tuYW1lXSA9IHZhbHVlO1xufTtcblxuc21hc2guYWpheC5yZW1vdmVIZWFkZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHNtYXNoLmFqYXguX2hlYWRlcnNfW25hbWVdO1xufTtcblxuc21hc2guYWpheC5vbmVycm9yID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xufTtcblxuc21hc2guYWpheC5vbnVuYXV0aG9yaXplZCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICBzbWFzaC5hamF4Lm9uZXJyb3IobWVzc2FnZSk7XG59O1xuXG5zbWFzaC5hamF4Ll94aHJfID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB9XG4gICAgdmFyIHZlcnNpb25zID0gW1xuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjYuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjUuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjQuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjMuMFwiLFxuICAgICAgICBcIk1TWE1MMi5YbWxIdHRwLjIuMFwiLFxuICAgICAgICBcIk1pY3Jvc29mdC5YbWxIdHRwXCJcbiAgICBdO1xuICAgIHZhciB4aHI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJzaW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgeGhyID0gbmV3IEFjdGl2ZVhPYmplY3QodmVyc2lvbnNbaV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geGhyO1xufTtcblxuc21hc2guYWpheC5zZW5kID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2ssIG1ldGhvZCwgZGF0YSwgcmVzcG9uc2VUeXBlLCBvbmVycm9yLCBhc3luYykge1xuICAgIGlmIChhc3luYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFzeW5jID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9uZXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvbmVycm9yID0gc21hc2guYWpheC5vbmVycm9yO1xuICAgIH1cbiAgICB2YXIgeCA9IHNtYXNoLmFqYXguX3hocl8oKTtcbiAgICB4LnJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZTtcbiAgICB4Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoeC5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoeC5zdGF0dXMpIHtcbiAgICAgICAgICAgIGNhc2UgMjAwOlxuICAgICAgICAgICAgY2FzZSAyMDE6XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHgucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDAxOlxuICAgICAgICAgICAgICAgIHNtYXNoLmFqYXgub251bmF1dGhvcml6ZWQoeC5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIG9uZXJyb3IoeC5yZXNwb25zZSk7XG4gICAgICAgICAgICB9XG5cdFx0fVxuICAgIH07XG4gICAgeC5vcGVuKG1ldGhvZCwgdXJsLCBhc3luYyk7XG4gICAgaWYgKHJlc3BvbnNlVHlwZSA9PSAnanNvbicpIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIH0gZWxzZSBpZiAobWV0aG9kID09ICdQT1NUJykge1xuICAgICAgICB4LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKTtcbiAgICB9XG4gICAgZm9yICh2YXIgbmFtZSBpbiBzbWFzaC5hamF4Ll9oZWFkZXJzXykge1xuICAgICAgICB4LnNldFJlcXVlc3RIZWFkZXIobmFtZSwgc21hc2guYWpheC5faGVhZGVyc19bbmFtZV0pO1xuICAgIH1cbiAgICB4LnNlbmQoZGF0YSlcbn07XG5cbnNtYXNoLmFqYXguZ2V0ID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2ssIGRhdGEsIHJlc3BvbnNlVHlwZSwgb25lcnJvciwgYXN5bmMpIHtcbiAgICB2YXIgcXVlcnkgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICBxdWVyeS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba2V5XSkpO1xuICAgIH1cbiAgICBzbWFzaC5hamF4LnNlbmQodXJsICsgKHF1ZXJ5Lmxlbmd0aCA/ICc/JyArIHF1ZXJ5LmpvaW4oJyYnKSA6ICcnKSwgY2FsbGJhY2ssICdHRVQnLCBudWxsLCByZXNwb25zZVR5cGUsIG9uZXJyb3IsICBhc3luYylcbn07XG5cbnNtYXNoLmFqYXgucG9zdCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBkYXRhLCByZXNwb25zZVR5cGUsIG9uZXJyb3IsIGFzeW5jKSB7XG4gICAgdmFyIGRhdGFTdHI7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlVHlwZSAhPSAnanNvbicpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba2V5XSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YVN0ciA9IHF1ZXJ5LmpvaW4oJyYnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YVN0ciA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNtYXNoLmFqYXguc2VuZCh1cmwsIGNhbGxiYWNrLCAnUE9TVCcsIGRhdGFTdHIsIHJlc3BvbnNlVHlwZSwgb25lcnJvciwgYXN5bmMpXG59O1xuIiwic21hc2guY2xhc3MgPSB7fTtcblxuc21hc2guY2xhc3MuYWRkID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIGlmICghc21hc2guY2xhc3MuaGFzKGVsLCBjbGFzc05hbWUpKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdCA/IGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKSA6IGVsLmNsYXNzTmFtZSArPSAoJyAnICsgY2xhc3NOYW1lKTtcbiAgICB9XG59O1xuXG5zbWFzaC5jbGFzcy5yZW1vdmUgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhlbCwgY2xhc3NOYW1lKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QgPyBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSkgOiBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShjbGFzc05hbWUsICcnKTtcbiAgICB9XG59O1xuXG5zbWFzaC5jbGFzcy5oYXMgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuICgoXCIgXCIgKyBlbC5jbGFzc05hbWUgKyBcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZywgXCIgXCIpLmluZGV4T2YoXCIgXCIgKyBjbGFzc05hbWUgKyBcIiBcIikgPiAtMSk7XG59O1xuXG5zbWFzaC5jbGFzcy50b2dnbGUgPSBmdW5jdGlvbihlbCwgY2xhc3NOYW1lKSB7XG4gICAgc21hc2guY2xhc3MuaGFzKGVsLCBjbGFzc05hbWUpID8gc21hc2guY2xhc3MucmVtb3ZlKGVsLCBjbGFzc05hbWUpIDogc21hc2guY2xhc3MuYWRkKGVsLCBjbGFzc05hbWUpO1xufTtcbiIsInNtYXNoLmNvbmZpZyA9IHtcbiAgICBfdmFsdWVzXzoge1xuICAgICAgICBfc2lkZWJhcl9sb2NrXzogZmFsc2VcbiAgICB9XG59XG5cbnNtYXNoLmNvbmZpZy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSBzbWFzaC5zdG9yYWdlLmdldCgnY29uZmlnJyk7XG4gICAgaWYgKHYpIHtcbiAgICAgICAgc21hc2guY29uZmlnLl92YWx1ZXNfID0gdjtcbiAgICB9XG59O1xuXG5zbWFzaC5jb25maWcuZ2V0ID0gZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgdmFyIG8gPSAnXycgKyBvcHRpb24gKyAnXyc7XG4gICAgaWYgKG8gaW4gc21hc2guY29uZmlnLl92YWx1ZXNfKSB7XG4gICAgICAgIHJldHVybiBzbWFzaC5jb25maWcuX3ZhbHVlc19bb107XG4gICAgfVxuICAgIHRocm93IG5ldyBzbWFzaC5FeGNlcHRpb24oJzAwMScsICdJbnZhbGlkIGNvbmZpZyBvcHRpb24gXCInICsgb3B0aW9uICsgJ1wiJyk7XG59O1xuXG5zbWFzaC5jb25maWcuc2V0ID0gZnVuY3Rpb24ob3B0aW9uLCB2YWx1ZSkge1xuICAgIHZhciBvID0gJ18nICsgb3B0aW9uICsgJ18nO1xuICAgIGlmICghbyBpbiBzbWFzaC5jb25maWcuX3ZhbHVlc18pIHtcbiAgICAgICAgdGhyb3cgbmV3IHNtYXNoLkV4Y2VwdGlvbignMDAxJywgJ0ludmFsaWQgY29uZmlnIG9wdGlvbiBcIicgKyBvcHRpb24gKyAnXCInKTtcbiAgICB9XG4gICAgc21hc2guY29uZmlnLl92YWx1ZXNfW29dID0gdmFsdWU7XG4gICAgc21hc2guc3RvcmFnZS5zZXQoJ2NvbmZpZycsIHNtYXNoLmNvbmZpZy5fdmFsdWVzXyk7XG59O1xuIiwic21hc2guZGlhbG9nID0ge307XG5cbnNtYXNoLmRpYWxvZy5uZXcgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgdmFyIGJhY2tkcm9wID0gc21hc2guZGlhbG9nLmNoZWNrQmFja2Ryb3AoKTtcblxuICAgIHZhciBkaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaWFsb2cuY2xhc3NOYW1lID0gJ3NtYXNoLWRpYWxvZyc7XG4gICAgZGlhbG9nLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgYmFja2Ryb3AuYXBwZW5kQ2hpbGQoZGlhbG9nKTtcbn07XG5cbnNtYXNoLmRpYWxvZy5jaGVja0JhY2tkcm9wID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGJhY2tkcm9wID0gc21hc2guZ2V0KGRvY3VtZW50LCBcIi5zbWFzaC1kaWFsb2ctYmFja2Ryb3BcIikpIHtcbiAgICAgICAgaWYgKGRpYWxvZyA9IHNtYXNoLmdldChkb2N1bWVudCwgXCIuc21hc2gtZGlhbG9nLWJhY2tkcm9wIC5zbWFzaC1kaWFsb2dcIikpIHtcbiAgICAgICAgICAgIGJhY2tkcm9wLnJlbW92ZUNoaWxkKGRpYWxvZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhY2tkcm9wO1xuICAgIH1cbiAgICB2YXIgYmFja2Ryb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBiYWNrZHJvcC5jbGFzc05hbWUgPSAnc21hc2gtZGlhbG9nLWJhY2tkcm9wJztcbiAgICBiYWNrZHJvcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cInNtYXNoLWRpYWxvZy1iYWNrZ3JvdW5kXCI+PC9kaXY+JztcbiAgICBzbWFzaC5nZXQoYmFja2Ryb3AsICcuc21hc2gtZGlhbG9nLWJhY2tncm91bmQnKS5vbmNsaWNrID0gc21hc2guZGlhbG9nLmNsb3NlO1xuICAgIHNtYXNoLmdldChkb2N1bWVudCwgJ2JvZHknKS5hcHBlbmRDaGlsZChiYWNrZHJvcCk7XG4gICAgcmV0dXJuIGJhY2tkcm9wO1xufTtcblxuc21hc2guZGlhbG9nLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGRpYWxvZyA9IHNtYXNoLmdldChkb2N1bWVudCwgXCIuc21hc2gtZGlhbG9nLWJhY2tkcm9wXCIpKSB7XG4gICAgICAgIHNtYXNoLmdldChkb2N1bWVudCwgJ2JvZHknKS5yZW1vdmVDaGlsZChkaWFsb2cpO1xuICAgIH1cbn07XG4iLCJzbWFzaC5FeGNlcHRpb24gPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnU21hc2hFeGNlcHRpb24gJyArIHRoaXMudmFsdWUgKyAnOiAnICsgdGhpcy5tZXNzYWdlO1xuICAgIH07XG59O1xuIiwic21hc2guaW5wdXQgPSB7fTtcblxuc21hc2guaW5wdXQuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtYXNoLWlucHV0IGlucHV0LCAuc21hc2gtdGV4dGFyZWEgdGV4dGFyZWFcIik7XG4gICAgdmFyIGlucHV0O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlucHV0ID0gaW5wdXRzW2ldO1xuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKGlucHV0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaW5wdXQub25rZXl1cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKGlucHV0LnBhcmVudEVsZW1lbnQsICdmbG9hdGluZy1sYWJlbCcpO1xuXG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gaW5wdXQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGwsICdzaG93Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChpbnB1dC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKTtcbiAgICB9XG4gICAgdmFyIHNlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtYXNoLXNlbGVjdCBzZWxlY3RcIik7XG4gICAgdmFyIHNlbGVjdDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2VsZWN0ID0gc2VsZWN0c1tpXTtcbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhzZWxlY3QucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdoYXMtZmxvYXRpbmctbGFiZWwnKSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnaGFzLWZsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUodGhpcywgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgICAgICB2YXIgb2xkID0gc2VsZWN0LnZhbHVlO1xuICAgICAgICAgICAgc2VsZWN0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoc2VsZWN0LnNlbGVjdGVkSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgaW5wdXQub25mb2N1cygpO1xuICAgICAgICAgICAgaWYgKG9sZCAhPSB2YWx1ZSAmJiBzZWxlY3Qub25jaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Qub25jaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5nZXRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXMucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3Quc2VsZWN0ZWRJbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdC5vcHRpb25zW3NlbGVjdC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5nZXRUZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdC5zZWxlY3RlZEluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLmlubmVySFRNTDtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBpbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gc2VsZWN0LmdldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgXCJyZWFkb25seVwiKTtcbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuXG4gICAgICAgIHZhciBvcHRpb25zID0gc2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJvcHRpb25cIik7XG4gICAgICAgIHZhciB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb3B0aW9ucy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IG9wdGlvbnNbal07XG4gICAgICAgICAgICBpZiAoIW9wdGlvbi5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBvcHRpb24udmFsdWUpO1xuICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gb3B0aW9uLmlubmVySFRNTDtcbiAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGxpKTtcbiAgICAgICAgICAgIGxpLm9ubW91c2Vkb3duID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKHRoaXMuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNlZG93bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHVsKTtcbiAgICAgICAgaW5wdXQub25mb2N1cyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBsID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUobCwgJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZCh0aGlzLCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3QgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHEgPSAnJztcbiAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNlZG93biA9IG51bGw7XG4gICAgICAgICAgICAgICAgd2luZG93Lm9ua2V5dXAgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtcyA9IHNtYXNoLmdldEFsbChzZWxlY3QsICd1bCBsaScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNbaV0uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc21hc2guc2hvdyhzZWxlY3QsICd1bCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoc2VsZWN0LCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3aW5kb3cub25rZXl1cCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEuc3Vic3RyaW5nKDAsIHEubGVuZ3RoLTEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgICAgIHEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBxICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZS5rZXlDb2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1zID0gc21hc2guZ2V0QWxsKHNlbGVjdCwgJ3VsIGxpJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc21hc2guc2hvdyhzZWxlY3QsICd1bCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc21hc2guZnV6enlDb21wYXJlKHEsIGl0ZW0uaW5uZXJIVE1MKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guaGlkZShzZWxlY3QsICd1bCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHdpbmRvdy5mb2N1cygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzZWxlY3QucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKHNlbGVjdC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgIH1cbiAgICAgICAgc21hc2guY2xhc3MuYWRkKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKTtcbiAgICB9XG4gICAgc21hc2guaW5wdXQuY2hlY2tib3hJbml0KCk7XG59O1xuXG5zbWFzaC5pbnB1dC5jaGVja2JveEluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2hlY2tib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc21hc2gtY2hlY2tib3ggaW5wdXRcIik7XG4gICAgdmFyIGNoZWNrYm94O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hlY2tib3hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjaGVja2JveCA9IGNoZWNrYm94ZXNbaV07XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoY2hlY2tib3gucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGMgPSAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBjLmNsYXNzTmFtZSA9ICdjaGVja3MnO1xuICAgICAgICBjLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+Y2hlY2tfYm94X291dGxpbmVfYmxhbms8L2k+PGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyBjaGVja2VkXCI+Y2hlY2tfYm94PC9pPic7XG4gICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoYyk7XG5cbiAgICAgICAgaWYgKGxhYmVsID0gY2hlY2tib3guZ2V0QXR0cmlidXRlKCdsYWJlbCcpKSB7XG4gICAgICAgICAgICB2YXIgbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIGwuY2xhc3NOYW1lID0gJ2xhYmVsJztcbiAgICAgICAgICAgIGwuaW5uZXJIVE1MID0gbGFiZWw7XG4gICAgICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGwpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChjaGVja2JveC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKTtcbiAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHNtYXNoLmNsYXNzLmhhcyhjaGVja2JveC5wYXJlbnRFbGVtZW50LCAnY2hlY2tlZCcpO1xuXG4gICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MudG9nZ2xlKHRoaXMsICdjaGVja2VkJyk7XG4gICAgICAgICAgICBzbWFzaC5nZXQodGhpcywgJ2lucHV0JykuY2hlY2tlZCA9IHNtYXNoLmNsYXNzLmhhcyh0aGlzLCAnY2hlY2tlZCcpO1xuICAgICAgICAgICAgaWYgKGNoZWNrYm94LnBhcmVudEVsZW1lbnQub25jaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50Lm9uY2hhbmdlKHNtYXNoLmNsYXNzLmhhcyh0aGlzLCAnY2hlY2tlZCcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50LmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gc21hc2guY2xhc3MuaGFzKHRoaXMsICdjaGVja2VkJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHRoaXMsICdjaGVja2VkJykgPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uY2xpY2soKTtcbiAgICAgICAgfTtcbiAgICB9XG59O1xuIiwic21hc2gucm91dGVyID0ge1xuICAgIF9fcGFyc2VSb3V0ZVJlZ2V4OiAveyguKj8pfS9pZyxcbiAgICBfX2R5bmFtaWNQYXJ0czogW10sXG4gICAgX19yb3V0ZXM6IHtcbiAgICAgICAgc3RhdGljOiBbXSxcbiAgICAgICAgZHluYW1pYzogW11cbiAgICB9XG59O1xuXG5zbWFzaC5yb3V0ZXIuYWRkID0gZnVuY3Rpb24ocGF0aCwgY2FsbGJhY2spIHtcbiAgICB2YXIgcm91dGUgPSBzbWFzaC5yb3V0ZXIucGFyc2VSb3V0ZShwYXRoKTtcbiAgICBpZiAocm91dGUucmVnZXgpIHtcbiAgICAgICAgcm91dGUuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgaWYgKCFzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF0pIHtcbiAgICAgICAgICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdW3JvdXRlLm51bVZhcnNdKSB7XG4gICAgICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10ucHVzaChyb3V0ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc21hc2gucm91dGVyLl9fcm91dGVzLnN0YXRpY1twYXRoXSA9IGNhbGxiYWNrO1xufTtcblxuc21hc2gucm91dGVyLnNldCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgc21hc2gucm91dGVyLmRpc3BsYXlVUkwocm91dGUpO1xuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncG9wc3RhdGUnKSk7XG59O1xuXG5zbWFzaC5yb3V0ZXIuZGlzcGxheVVSTCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKFwiXCIsIFwiXCIsIHJvdXRlKTtcbn07XG5cbnNtYXNoLnJvdXRlci5yZWRpcmVjdCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgd2luZG93LmxvY2F0aW9uID0gcm91dGU7XG59O1xuXG5zbWFzaC5yb3V0ZXIuaGFuZGxlTm90Rm91bmQgPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIGNvbnNvbGUubG9nKFwicm91dGU6IFwiICsgSlNPTi5zdHJpbmdpZnkocm91dGUpICsgXCIgZG9lcyBub3QgZXhpc3RcIik7XG59O1xuXG5zbWFzaC5yb3V0ZXIucnVuID0gZnVuY3Rpb24oKSB7XG4gICAgd2luZG93Lm9ucG9wc3RhdGUgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBzbWFzaC5yb3V0ZXIuZXhlY3V0ZSgpO1xuICAgIH07XG4gICAgc21hc2gucm91dGVyLmV4ZWN1dGUoKTtcbn1cblxuc21hc2gucm91dGVyLmV4ZWN1dGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGF0aCA9IHRoaXMuZ2V0UGF0aCgpO1xuICAgIGlmICh0aGlzLl9fcm91dGVzLnN0YXRpY1twYXRoLnBhdGhdKSB7XG4gICAgICAgIHRoaXMuX19yb3V0ZXMuc3RhdGljW3BhdGgucGF0aF0oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgZGVwdGggPSBwYXRoLnBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aC0xO1xuICAgIGlmICh0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdKSB7XG4gICAgICAgIHZhciByb3V0ZTtcbiAgICAgICAgdmFyIG1hdGNoZXM7XG4gICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgIGZvciAodmFyIHZhck51bSBpbiB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF1bdmFyTnVtXSkge1xuICAgICAgICAgICAgICAgIHZhciByb3V0ZSA9IHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF1bdmFyTnVtXVtpdGVtXTtcbiAgICAgICAgICAgICAgICBtYXRjaGVzID0gcGF0aC5wYXRoLm1hdGNoKHJvdXRlLnJlZ2V4KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxyb3V0ZS5udW1WYXJzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtyb3V0ZS52YXJzW2ldXSA9IG1hdGNoZXNbaSsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm91dGUuY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNtYXNoLnJvdXRlci5oYW5kbGVOb3RGb3VuZChwYXRoKTtcbn07XG5cbnNtYXNoLnJvdXRlci5nZXRQYXRoID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBsLmhyZWYgPSB3aW5kb3cubG9jYXRpb247XG4gICAgcmV0dXJuIHtob3N0OiBsLmhvc3RuYW1lLCBwYXRoOiBsLnBhdGhuYW1lfTtcbn07XG5cbnNtYXNoLnJvdXRlci5wYXJzZVJvdXRlID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIGlmIChwYXRoLnN1YnN0cmluZygwLDEpICE9IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG4gICAgfVxuICAgIGlmIChwYXRoLnN1YnN0cmluZyhwYXRoLmxlbmd0aC0yKSA9PSBcIi9cIikge1xuICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoO1xuICAgIH1cbiAgICB2YXIgcm91dGUgPSB7XG4gICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgIGRlcHRoOiAocGF0aC5zcGxpdChcIi9cIikubGVuZ3RoIC0gMSksXG4gICAgICAgIHZhcnM6IFtdLFxuICAgICAgICBudW1WYXJzOiAwXG4gICAgfTtcbiAgICBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMgPSBwYXRoLm1hdGNoKHNtYXNoLnJvdXRlci5fX3BhcnNlUm91dGVSZWdleCk7XG4gICAgaWYgKHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cyAhPSB1bmRlZmluZWQgJiYgc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzICE9IG51bGwpIHtcbiAgICAgICAgdmFyIHJlZ2V4ID0gXCJeXCIgKyBwYXRoLnJlcGxhY2UoL1xcLy9pZywgXCJcXFxcL1wiKSArIFwiJFwiO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByb3V0ZS5udW1WYXJzKys7XG4gICAgICAgICAgICByb3V0ZS52YXJzLnB1c2goc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzW2ldLnN1YnN0cmluZygxLCBzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0ubGVuZ3RoLTEpKTtcbiAgICAgICAgICAgIHJlZ2V4ID0gcmVnZXgucmVwbGFjZShzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHNbaV0sIFwiKC4qPylcIik7XG4gICAgICAgIH1cbiAgICAgICAgcm91dGUucmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4LCAnaScpO1xuICAgIH1cbiAgICByZXR1cm4gcm91dGU7XG59O1xuXG5zbWFzaC5yb3V0ZXIucXVlcnlQYXJhbSA9IGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgdmFyIHJlZ2V4UyA9IFwiW1xcXFw/Jl1cIitwYXJhbStcIj0oW14mI10qKVwiLFxuICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cCggcmVnZXhTICksXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWMoIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKTtcbiAgICBpZiggcmVzdWx0cyA9PSBudWxsICl7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzWzFdOy8vZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMV0ucmVwbGFjZSgvXFwrL2csIFwiIFwiKSk7XG59O1xuIiwic21hc2guc2VhcmNoYm94ID0ge1xuICAgIGlfOiBmYWxzZSxcbiAgICBtaW5BdXRvQ29tcGxldGVMZW5ndGg6IDMsXG4gICAgb25mb2N1czogdW5kZWZpbmVkLFxuICAgIG9uYmx1cjogdW5kZWZpbmVkLFxuICAgIG9udmFsdWU6IHVuZGVmaW5lZCxcbn07XG5cbnNtYXNoLnNlYXJjaGJveC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNtYXNoLnNlYXJjaGJveC5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzc2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCBpbnB1dFwiKTtcbiAgICBpZiAoIXNzYikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNzYi5vbmZvY3VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gucmVzdWx0cygnPGRpdiBjbGFzcz1cInNtYXNoLWluc3RydWN0aW9uXCI+U3RhcnQgdHlwaW5nIHRvIGZpbmQgcmVzdWx0czwvZGl2PicpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLWhlYWRlclwiKSwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCAuc21hc2gtc2VhcmNoYm94LXJlc3VsdHNcIiksICdzaG93Jyk7XG4gICAgICAgIGlmIChzbWFzaC5zZWFyY2hib3gub25mb2N1cykge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc3NiLm9uYmx1ciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1oZWFkZXJcIiksICdpcy1mb2N1c3NlZCcpO1xuICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpLCAnc2hvdycpO1xuICAgICAgICBpZiAoc21hc2guc2VhcmNoYm94Lm9uYmx1cikge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uYmx1cigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzc2Iub25rZXl1cCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoIDwgc21hc2guc2VhcmNoYm94Lm1pbkF1dG9Db21wbGV0ZUxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzbWFzaC5zZWFyY2hib3gub25jaGFuZ2UpIHtcbiAgICAgICAgICAgIHNtYXNoLnNlYXJjaGJveC5vbmNoYW5nZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc21hc2guc2VhcmNoYm94LmlfID0gdHJ1ZTtcbn07XG5cbnNtYXNoLnNlYXJjaGJveC5yZXN1bHRzID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHZhciByZXN1bHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpO1xuICAgIHJlc3VsdHMuaW5uZXJIVE1MID0gY29udGVudDtcbn07XG4iLCJzbWFzaC5zaWRlYmFyID0ge1xuICAgIGlfOiBmYWxzZVxufTtcblxuc21hc2guc2lkZWJhci5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNtYXNoLnNpZGViYXIuaV8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc2libCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhciAubG9ja1wiKTtcbiAgICBpZiAoIXNpYmwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzaWJsLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc21hc2guc2lkZWJhci50b2dnbGVMb2NrKCk7XG4gICAgfTtcblxuICAgIHZhciBzaWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXJcIik7XG4gICAgc21hc2guY2xhc3MuYWRkKHNpYiwgJ2lzLXVubG9ja2VkJyk7XG4gICAgc21hc2guc2lkZWJhci5pXyA9IHRydWU7XG4gICAgaWYgKHNtYXNoLmNvbmZpZy5nZXQoJ3NpZGViYXJfbG9jaycpKSB7XG4gICAgICAgIHNtYXNoLnNpZGViYXIudG9nZ2xlTG9jaygpO1xuICAgIH1cbn07XG5cbnNtYXNoLnNpZGViYXIudG9nZ2xlTG9jayA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghc21hc2guc2lkZWJhci5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNtYXNoLmNsYXNzLnRvZ2dsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXIgLmxvY2tcIiksICd1bmxvY2snKTtcbiAgICBzbWFzaC5jbGFzcy50b2dnbGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyXCIpLCAnaXMtdW5sb2NrZWQnKTtcbiAgICBzbWFzaC5jb25maWcuc2V0KCdzaWRlYmFyX2xvY2snLCAhc21hc2guY2xhc3MuaGFzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhclwiKSwgJ2lzLXVubG9ja2VkJykpO1xufTtcbiIsInNtYXNoLnN0b3JhZ2UgPSB7fTtcblxuc21hc2guc3RvcmFnZS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xufTtcblxuc21hc2guc3RvcmFnZS51bnNldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG59O1xuXG5zbWFzaC5zdG9yYWdlLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHZhciBpID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICBpZiAoIWkpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoaSk7XG59O1xuXG5zbWFzaC5zdG9yYWdlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG59O1xuIiwic21hc2gud29ya3NwYWNlID0ge1xuICAgIGJhc2VUaXRsZTogdW5kZWZpbmVkLFxuICAgIF93c186IHVuZGVmaW5lZCxcbiAgICBfaGRyXzogdW5kZWZpbmVkLFxuICAgIF9zYl86IHVuZGVmaW5lZCxcbiAgICBfdGFic186IFtdXG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHNtYXNoLndvcmtzcGFjZS5fd3NfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC13b3Jrc3BhY2VcIik7XG4gICAgaWYgKCFzbWFzaC53b3Jrc3BhY2UuX3dzXykge1xuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgc21hc2gud29ya3NwYWNlLl9oZHJfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1oZWFkZXJcIik7XG4gICAgaWYgKHNtYXNoLndvcmtzcGFjZS5faGRyXykge1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc21hc2gud29ya3NwYWNlLl93c18sICdoYXMtaGVhZGVyJyk7XG4gICAgfVxuICAgIHNtYXNoLndvcmtzcGFjZS5fc2JfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC13b3Jrc3BhY2UgLnNtYXNoLXNpZGViYXJcIik7XG4gICAgaWYgKHNtYXNoLndvcmtzcGFjZS5fc2JfKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChzbWFzaC53b3Jrc3BhY2UuX3dzXywgJ2hhcy1zaWRlYmFyJyk7XG4gICAgfVxufTtcblxuc21hc2gud29ya3NwYWNlLmFkZFRhYiA9IGZ1bmN0aW9uKGlkLCB0aXRsZSwgY29udGVudCwgdXJsKSB7XG4gICAgaWYgKCFzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLXBhbmUnKSkge1xuICAgICAgICB2YXIgcGFuZWwgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtcGFuZWwnKTtcbiAgICAgICAgaWYgKCFwYW5lbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1RvIGFkZCBhIHRhYiB0aGVyZSBuZWVkcyB0byBiZSBhIHBhbmVsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcGFuZWwuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJzbWFzaC10YWItcGFuZVwiPjxkaXYgY2xhc3M9XCJzbWFzaC10YWJzXCI+PC9kaXY+PGRpdiBjbGFzcz1cInNtYXNoLXBhbmVzXCI+PC9kaXY+PC9kaXY+JztcbiAgICB9XG4gICAgdmFyIHRhYnMgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLXBhbmUgLnNtYXNoLXRhYnMnKTtcbiAgICB2YXIgcGFuZXNDb250YWluZXIgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLXBhbmUgLnNtYXNoLXBhbmVzJyk7XG5cbiAgICBkb2N1bWVudC50aXRsZSA9IHNtYXNoLndvcmtzcGFjZS5jcmVhdGVUaXRsZSh0aXRsZSk7XG5cbiAgICBpZiAodGFiID0gc21hc2guZ2V0KHRhYnMsICcuc21hc2gtdGFiW2RhdGEtaWQ9XCInICsgaWQgKyAnXCJdJykpIHtcbiAgICAgICAgdmFyIHBhbmUgPSBzbWFzaC5nZXQocGFuZXNDb250YWluZXIsICcuc21hc2gtcGFuZVtkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpO1xuICAgICAgICBwYW5lLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgICAgIHRhYi5kYXRhc2V0LnVybCA9IHVybDtcbiAgICAgICAgdGFiLm9uY2xpY2soKTtcbiAgICAgICAgcmV0dXJuIHt0YWI6IHRhYiwgcGFuZTogcGFuZX07XG4gICAgfVxuXG4gICAgc21hc2guaGlkZShwYW5lc0NvbnRhaW5lciwgXCIuc21hc2gtcGFuZVwiKTtcbiAgICBpZiAoYWN0aXZlID0gc21hc2guZ2V0KHRhYnMsICcuc21hc2gtdGFiLmFjdGl2ZScpKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShhY3RpdmUsICdhY3RpdmUnKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgdGFiXG4gICAgdmFyIHRhYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFiLmNsYXNzTmFtZSA9ICdzbWFzaC10YWIgYWN0aXZlJztcbiAgICB0YWIuZGF0YXNldC5pZCA9IGlkO1xuICAgIHRhYi5kYXRhc2V0LnVybCA9IHVybDtcbiAgICB0YWIuaW5uZXJIVE1MID0gdGl0bGUgKyAnPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyBjbG9zZVwiPmNsb3NlPC9pPic7XG4gICAgdGFiLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChhY3RpdmUgPSBzbWFzaC5nZXQodGFicywgJy5zbWFzaC10YWIuYWN0aXZlJykpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShhY3RpdmUsICdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQodGhpcywgJ2FjdGl2ZScpO1xuICAgICAgICBzbWFzaC5oaWRlKGRvY3VtZW50LCAnLnNtYXNoLXBhbmUnKTtcbiAgICAgICAgc21hc2guc2hvdyhkb2N1bWVudCwgJy5zbWFzaC1wYW5lW2RhdGEtaWQ9XCInICsgdGhpcy5kYXRhc2V0LmlkICsgJ1wiXScpO1xuICAgICAgICBpZiAodGhpcy5kYXRhc2V0LnVybCAmJiB0aGlzLmRhdGFzZXQudXJsICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHNtYXNoLnJvdXRlci5kaXNwbGF5VVJMKHRoaXMuZGF0YXNldC51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gc21hc2gud29ya3NwYWNlLmNyZWF0ZVRpdGxlKHRoaXMuaW5uZXJIVE1MKTtcbiAgICB9O1xuICAgIHNtYXNoLm9uKHRhYiwgJy5jbG9zZScsICdvbmNsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50Lm9uY2xvc2UgJiYgIXRoaXMucGFyZW50RWxlbWVudC5vbmNsb3NlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHRoaXMucGFyZW50RWxlbWVudCwgJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50LnByZXZpb3VzU2libGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wcmV2aW91c1NpYmxpbmcub25jbGljaygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBhcmVudEVsZW1lbnQubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQubmV4dFNpYmxpbmcub25jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYW5lID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyB0aGlzLnBhcmVudEVsZW1lbnQuZGF0YXNldC5pZCArICdcIl0nKSkge1xuICAgICAgICAgICAgcGFuZS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHBhbmUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMucGFyZW50RWxlbWVudCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG4gICAgdGFicy5hcHBlbmRDaGlsZCh0YWIpO1xuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHBhbmUgd2l0aCB0aGUgcHJvdmlkZWQgY29udGVudFxuICAgIHZhciBwYW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwYW5lLmNsYXNzTmFtZSA9ICdzbWFzaC1wYW5lJztcbiAgICBwYW5lLmRhdGFzZXQuaWQgPSBpZDtcbiAgICBwYW5lLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgcGFuZXNDb250YWluZXIuYXBwZW5kQ2hpbGQocGFuZSk7XG4gICAgcmV0dXJuIHt0YWI6IHRhYiwgcGFuZTogcGFuZX07XG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuYWN0aXZlVGFiID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRhYiA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYi5hY3RpdmUnKVxuICAgIGlmICghdGFiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgcGFuZSA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC1wYW5lW2RhdGEtaWQ9XCInICsgdGFiLmRhdGFzZXQuaWQgKyAnXCJdJyk7XG4gICAgaWYgKCFwYW5lKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4ge3RhYjogdGFiLCBwYW5lOiBwYW5lfTtcbn07XG5cbnNtYXNoLndvcmtzcGFjZS5jcmVhdGVUaXRsZSA9IGZ1bmN0aW9uKHRpdGxlKSB7XG4gICAgcmV0dXJuIHRpdGxlLnJlcGxhY2UoLzwoW14+XSs/KShbXj5dKj8pPiguKj8pPFxcL1xcMT4vaWcsIFwiXCIpICsgKHNtYXNoLndvcmtzcGFjZS5iYXNlVGl0bGUgPyAnIHwgJyArIHNtYXNoLndvcmtzcGFjZS5iYXNlVGl0bGUgOiBcIlwiKVxufTtcbiJdfQ==
