window.addEventListener("load",function(e){smash.init()},!1);var smash={};smash.init=function(){smash.config.init(),smash.sidebar.init(),smash.searchbox.init(),smash.workspace.init(),smash.input.init()},smash.get=function(e,s){try{return e.querySelector(s)}catch(e){console.log(e)}},smash.getAll=function(e,s){try{return e.querySelectorAll(s)}catch(e){console.log(e)}},smash.hide=function(e,s){var a;a=s&&"string"==typeof s?smash.getAll(e,s):[e];for(var t=0;t<a.length;t++)a[t].style.display="none"},smash.show=function(e,s){var a;a=s&&"string"==typeof s?smash.getAll(e,s):[e];for(var t=0;t<a.length;t++)a[t].style.display=""},smash.on=function(e,s,a,t){for(var n=smash.getAll(e,s),r=0;r<n.length;r++)n[r][a]=t},smash.fuzzyCompare=function(e,s){if(void 0==s||void 0==e)return!1;var a=".*?"+e.toLowerCase().replace(/-/g,"\\-").split("").join(".*?")+".*?";return s.toLowerCase().match(a)},smash.ajax={_headers_:[]},smash.ajax.addHeader=function(e,s){smash.ajax._headers_[e]=s},smash.ajax.removeHeader=function(e){delete smash.ajax._headers_[e]},smash.ajax.onerror=function(e){console.log(e)},smash.ajax.onunauthorized=function(e){smash.ajax.onerror(e)},smash.ajax._xhr_=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,s=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],a=0;a<s.length;a++)try{e=new ActiveXObject(s[a]);break}catch(e){}return e},smash.ajax.send=function(e,s,a,t,n,r,o){void 0===o&&(o=!0),void 0===r&&(r=smash.ajax.onerror);var i=smash.ajax._xhr_();i.responseType=n,i.onreadystatechange=function(){if(4==i.readyState)switch(i.status){case 200:case 201:s&&s(i.response);break;case 401:smash.ajax.onunauthorized(i.response);break;default:r(i.response)}},i.open(a,e,o),"json"==n?i.setRequestHeader("Content-type","application/json"):"POST"==a&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var c in smash.ajax._headers_)i.setRequestHeader(c,smash.ajax._headers_[c]);i.send(t)},smash.ajax.get=function(e,s,a,t,n,r){var o=[];for(var i in a)o.push(encodeURIComponent(i)+"="+encodeURIComponent(a[i]));smash.ajax.send(e+(o.length?"?"+o.join("&"):""),s,"GET",null,t,n,r)},smash.ajax.post=function(e,s,a,t,n,r){var o;if(a)if("json"!=t){var i=[];for(var c in a)i.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));o=i.join("&")}else o=JSON.stringify(a);smash.ajax.send(e,s,"POST",o,t,n,r)},smash.class={},smash.class.add=function(e,s){smash.class.has(e,s)||(e.classList?e.classList.add(s):e.className+=" "+s)},smash.class.remove=function(e,s){smash.class.has(e,s)&&(e.classList?e.classList.remove(s):e.className=e.className.replace(s,""))},smash.class.has=function(e,s){return(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(" "+s+" ")>-1},smash.class.toggle=function(e,s){smash.class.has(e,s)?smash.class.remove(e,s):smash.class.add(e,s)},smash.config={_values_:{_sidebar_lock_:!1}},smash.config.init=function(){var e=smash.storage.get("config");e&&(smash.config._values_=e)},smash.config.get=function(e){var s="_"+e+"_";if(s in smash.config._values_)return smash.config._values_[s];throw new smash.Exception("001",'Invalid config option "'+e+'"')},smash.config.set=function(e,s){var a="_"+e+"_";if(!a in smash.config._values_)throw new smash.Exception("001",'Invalid config option "'+e+'"');smash.config._values_[a]=s,smash.storage.set("config",smash.config._values_)},smash.cookie={},smash.cookie.set=function(e,s,a){var t=new Date;t.setTime(t.getTime()+24*a*60*60*1e3);var n="expires="+t.toUTCString();document.cookie=e+"="+s+";"+n+";path=/"},smash.cookie.get=function(e){for(var e=e+"=",s=decodeURIComponent(document.cookie),a=s.split(";"),t=0;t<a.length;t++){for(var n=a[t];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""},smash.dialog={},smash.dialog.new=function(e){var s=smash.dialog.checkBackdrop(),a=document.createElement("div");a.className="smash-dialog",a.innerHTML=e,s.appendChild(a)},smash.dialog.checkBackdrop=function(){if(e=smash.get(document,".smash-dialog-backdrop"))return(dialog=smash.get(document,".smash-dialog-backdrop .smash-dialog"))&&e.removeChild(dialog),e;var e=document.createElement("div");return e.className="smash-dialog-backdrop",e.innerHTML='<div class="smash-dialog-background"></div>',smash.get(e,".smash-dialog-background").onclick=smash.dialog.close,smash.get(document,"body").appendChild(e),e},smash.dialog.close=function(){(dialog=smash.get(document,".smash-dialog-backdrop"))&&smash.get(document,"body").removeChild(dialog)},smash.Exception=function(e,s){this.value=e,this.message=s,this.toString=function(){return"SmashException "+this.value+": "+this.message}},smash.input={},smash.input.init=function(){for(var e,s=document.querySelectorAll(".smash-input input, .smash-textarea textarea"),a=0;a<s.length;a++)if(e=s[a],!smash.class.has(e.parentElement,"smash-initialised")){if(e.parentElement.setValue=function(s){(e=this.querySelector("input"))?(e.value=s,e.onkeyup()):(e=this.querySelector("textarea"))&&(e.value=s,e.onkeyup())},e.parentElement.getValue=function(){if(e=this.querySelector("input")){var e=this.querySelector("input");return e.value}if(e=this.querySelector("textarea")){var e=this.querySelector("textarea");return e.value}return null},smash.class.has(e.parentElement,"has-floating-label")){smash.class.remove(e.parentElement,"has-floating-label"),smash.class.add(e.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=e.placeholder,e.parentElement.appendChild(t),e.onkeyup=function(e){var s=this.parentElement.querySelector("label");s&&(""!=this.value?smash.class.add(s,"show"):smash.class.remove(s,"show"))}}e.parentElement.getAttribute("value")&&e.parentElement.setValue(e.parentElement.getAttribute("value")),smash.class.add(e.parentElement,"smash-initialised")}for(var n,r=document.querySelectorAll(".smash-select select"),a=0;a<r.length;a++)if(n=r[a],!smash.class.has(n.parentElement,"smash-initialised")){if(smash.class.has(n.parentElement,"has-floating-label")){smash.class.remove(n.parentElement,"has-floating-label"),smash.class.add(n.parentElement,"floating-label");var t=document.createElement("label");t.innerHTML=n.getAttribute("placeholder"),n.parentElement.appendChild(t)}n.parentElement.setValue=function(e){smash.class.remove(this,"is-focussed");var s=this.querySelector("select"),a=this.querySelector("input"),t=s.value;s.value=e,s.selectedIndex>-1?a.value=s.options[s.selectedIndex].text:a.value="",a.focus(),a.onfocus(),t!=e&&s.onchange&&s.onchange()},n.parentElement.getValue=function(){var e=this.querySelector("select");return e.selectedIndex==-1?null:e.options[e.selectedIndex].value},n.parentElement.reset=function(){smash.get(this,"input").value=this.getText()},n.parentElement.getText=function(){var e=this.querySelector("select");return e.selectedIndex==-1?null:e.options[e.selectedIndex].innerHTML};var e=document.createElement("input");e.type="text",e.placeholder=n.getAttribute("placeholder"),e.setAttribute("readonly","readonly"),n.parentElement.appendChild(e);var o=n.querySelectorAll("option"),i=document.createElement("ul");i.onmouseup=function(e){e.stopPropagation()};for(var c=0;c<o.length;c++){var h=o[c];if(h.getAttribute("value")){var l=document.createElement("li");l.setAttribute("value",h.value),l.innerHTML=h.innerHTML,i.appendChild(l),l.onmousedown=function(e){this.parentElement.parentElement.setValue(this.getAttribute("value")),e.stopPropagation(),window.onmouseup()}}}n.parentElement.appendChild(i),e.onfocus=function(e){var s=this.parentElement.querySelector("label");s&&(""!=this.value?smash.class.add(s,"show"):smash.class.remove(s,"show"))},n.parentElement.onclick=function(){var e=smash.get(this,"input"),s=this;smash.class.add(this,"is-focussed");var a="";window.onmouseup=function(){if(window.onmouseup=null,window.onkeyup=null,s.reset(),items=smash.getAll(s,"ul li")){for(var e=0;e<items.length;e++)items[e].style.display="";smash.show(s,"ul")}smash.class.remove(s,"is-focussed")},window.onkeyup=function(t){switch(t.keyCode){case 8:a.length>0&&(a=a.substring(0,a.length-1));break;case 27:a="";break;case 189:a+="-";break;case 190:a+=".";break;case 191:a+="/";break;case 220:a+="\\";break;default:a+=String.fromCharCode(t.keyCode)}if(""!=a?e.value=a.toLowerCase():s.reset(),items=smash.getAll(s,"ul li")){smash.show(s,"ul");for(var n,r=!1,o=0;o<items.length;o++)n=items[o],""==a||smash.fuzzyCompare(a,n.innerHTML)?(n.style.display="",r=!0):n.style.display="none";r||smash.hide(s,"ul")}},window.focus()},n.parentElement.getAttribute("value")&&n.parentElement.setValue(n.parentElement.getAttribute("value")),smash.class.add(n.parentElement,"smash-initialised")}smash.input.checkboxInit()},smash.input.checkboxInit=function(){for(var e,s=document.querySelectorAll(".smash-checkbox input"),a=0;a<s.length;a++)if(e=s[a],!smash.class.has(e.parentElement,"smash-initialised")){var t=document.createElement("span");if(t.className="checks",t.innerHTML='<i class="material-icons">check_box_outline_blank</i><i class="material-icons checked">check_box</i>',e.parentElement.appendChild(t),label=e.getAttribute("label")){var n=document.createElement("span");n.className="label",n.innerHTML=label,e.parentElement.appendChild(n)}smash.class.add(e.parentElement,"smash-initialised"),e.checked=smash.class.has(e.parentElement,"checked"),e.parentElement.onclick=function(){smash.class.toggle(this,"checked"),smash.get(this,"input").checked=smash.class.has(this,"checked"),e.parentElement.onchange&&e.parentElement.onchange(smash.class.has(this,"checked"))},e.parentElement.getValue=function(){return smash.class.has(this,"checked")},e.parentElement.setValue=function(e){smash.class.has(this,"checked")!=e&&this.onclick()}}},smash.router={__parseRouteRegex:/{(.*?)}/gi,__dynamicParts:[],__baseDirectory:null,__routes:{static:[],dynamic:[]}},smash.router.add=function(e,s){var a=smash.router.parseRoute(e);return a.regex?(a.callback=s,smash.router.__routes.dynamic[a.depth]||(smash.router.__routes.dynamic[a.depth]=[]),smash.router.__routes.dynamic[a.depth][a.numVars]||(smash.router.__routes.dynamic[a.depth][a.numVars]=[]),void smash.router.__routes.dynamic[a.depth][a.numVars].push(a)):void(smash.router.__routes.static[e]=s)},smash.router.set=function(e){smash.router.displayURL(e),window.dispatchEvent(new Event("popstate"))},smash.router.displayURL=function(e){e=smash.router.addBaseDirectory(e),window.history.pushState("","",e)},smash.router.redirect=function(e){e.search(/^http[s]?:\/\//)||(e=smash.router.addBaseDirectory(e)),window.location=e},smash.router.handleNotFound=function(e){console.log("route: "+JSON.stringify(e)+" does not exist")},smash.router.run=function(){window.onpopstate=function(e){smash.router.execute()},smash.router.execute()},smash.router.execute=function(){var e=this.getPath();if(this.__routes.static[e.path])return void this.__routes.static[e.path]();var s=e.path.split("/").length-1;if(this.__routes.dynamic[s]){var a,t,n={};for(var r in this.__routes.dynamic[s])for(var o in this.__routes.dynamic[s][r]){var a=this.__routes.dynamic[s][r][o];if(t=e.path.match(a.regex)){for(var i=0;i<a.numVars;i++)n[a.vars[i]]=t[i+1];return void a.callback(n)}}}smash.router.handleNotFound(e)},smash.router.getPath=function(){var e=document.createElement("a");return e.href=window.location,{host:e.hostname,path:smash.router.checkPath(e.pathname)}},smash.router.parseRoute=function(e){e=smash.router.cleanPath(e);var s={path:e,depth:e.split("/").length-1,vars:[],numVars:0};if(smash.router.__dynamicParts=e.match(smash.router.__parseRouteRegex),void 0!=smash.router.__dynamicParts&&null!=smash.router.__dynamicParts){for(var a="^"+e.replace(/\//gi,"\\/")+"$",t=0;t<smash.router.__dynamicParts.length;t++)s.numVars++,s.vars.push(smash.router.__dynamicParts[t].substring(1,smash.router.__dynamicParts[t].length-1)),a=a.replace(smash.router.__dynamicParts[t],"(.*?)");s.regex=new RegExp(a,"i")}return s},smash.router.setBaseDirectory=function(e){return e?void(smash.router.__baseDirectory=smash.router.cleanPath(e)):void(smash.router.__baseDirectory=void 0)},smash.router.addBaseDirectory=function(e){return smash.router.__baseDirectory?(e.indexOf(smash.router.__baseDirectory)===-1&&(e=smash.router.__baseDirectory+e),e):e},smash.router.cleanPath=function(e){return e.length>0&&"/"!=e.substring(0,1)&&(e="/"+e),e.length>2&&"/"==e.substring(e.length-2)&&(e=e.substring(0,e.length-2)),e},smash.router.checkPath=function(e){return e=smash.router.cleanPath(e),smash.router.__baseDirectory&&e.indexOf(smash.router.__baseDirectory)!==-1&&(e=e.replace(smash.router.__baseDirectory,"")),e},smash.router.queryParam=function(e){var s="[\\?&]"+e+"=([^&#]*)",a=new RegExp(s),t=a.exec(window.location.search);if(null!=t)return t[1]},smash.searchbox={i_:!1,minAutoCompleteLength:3,onfocus:void 0,onblur:void 0,onchange:void 0},smash.searchbox.init=function(){if(!smash.searchbox.i_){var e=document.querySelector(".smash-searchbox input");e&&(e.onfocus=function(){0==this.value.length&&smash.searchbox.results('<div class="smash-instruction">Start typing to find results</div>'),smash.class.add(document.querySelector(".smash-header"),"is-focussed"),smash.class.add(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onfocus&&smash.searchbox.onfocus()},e.onblur=function(){smash.class.remove(document.querySelector(".smash-header"),"is-focussed"),smash.class.remove(document.querySelector(".smash-searchbox .smash-searchbox-results"),"show"),smash.searchbox.onblur&&smash.searchbox.onblur()},e.onkeyup=function(e){this.value.length<smash.searchbox.minAutoCompleteLength||smash.searchbox.onchange&&smash.searchbox.onchange(this.value)},smash.searchbox.i_=!0)}},smash.searchbox.empty=function(){return!(i=smash.get(document,".smash-searchbox input"))||0==i.value.length},smash.searchbox.appendTo=function(e){var s=document.createElement("div");s.innerHTML=e;var a=document.querySelector(".smash-searchbox .smash-searchbox-results");a.appendChild(s)},smash.searchbox.results=function(e){var s=document.querySelector(".smash-searchbox .smash-searchbox-results");s.innerHTML=e},smash.sidebar={i_:!1},smash.sidebar.init=function(){if(!smash.sidebar.i_){var e=document.querySelector(".smash-sidebar .lock");if(e){e.onclick=function(){smash.sidebar.toggleLock()};var s=document.querySelector(".smash-sidebar");smash.class.add(s,"is-unlocked"),smash.sidebar.i_=!0,smash.config.get("sidebar_lock")&&smash.sidebar.toggleLock()}}},smash.sidebar.toggleLock=function(){smash.sidebar.i_&&(smash.class.toggle(document.querySelector(".smash-sidebar .lock"),"unlock"),smash.class.toggle(document.querySelector(".smash-sidebar"),"is-unlocked"),smash.config.set("sidebar_lock",!smash.class.has(document.querySelector(".smash-sidebar"),"is-unlocked")))},smash.storage={},smash.storage.set=function(e,s){localStorage.setItem(e,JSON.stringify(s))},smash.storage.unset=function(e){localStorage.removeItem(e)},smash.storage.get=function(e){var s=localStorage.getItem(e);if(s)return JSON.parse(s)},smash.storage.clear=function(){localStorage.clear()},smash.workspace={baseTitle:void 0,_ws_:void 0,_hdr_:void 0,_sb_:void 0,_tabs_:[]},smash.workspace.init=function(){smash.workspace._ws_=document.querySelector(".smash-workspace"),smash.workspace._ws_&&(smash.workspace._hdr_=document.querySelector(".smash-header"),smash.workspace._hdr_&&smash.class.add(smash.workspace._ws_,"has-header"),smash.workspace._sb_=document.querySelector(".smash-workspace .smash-sidebar"),smash.workspace._sb_&&smash.class.add(smash.workspace._ws_,"has-sidebar"))},smash.workspace.addTab=function(e,s,a,t){if(!smash.get(document,".smash-tab-pane")){var n=smash.get(document,".smash-panel");if(!n)return void console.log("To add a tab there needs to be a panel");n.innerHTML='<div class="smash-tab-pane"><div class="smash-tabs"></div><div class="smash-panes"></div></div>'}var r=smash.get(document,".smash-tab-pane .smash-tabs"),o=smash.get(document,".smash-tab-pane .smash-panes");if(document.title=smash.workspace.createTitle(s),c=smash.get(r,'.smash-tab[data-id="'+e+'"]')){var i=smash.get(o,'.smash-pane[data-id="'+e+'"]');return i.innerHTML=a,c.dataset.url=t,c.onclick(),{tab:c,pane:i}}smash.hide(o,".smash-pane"),(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active");var c=document.createElement("div");c.className="smash-tab active",c.dataset.id=e,c.dataset.url=t,c.innerHTML=s+'<i class="material-icons close">close</i>',c.onclick=function(e){(active=smash.get(r,".smash-tab.active"))&&smash.class.remove(active,"active"),smash.class.add(this,"active"),smash.hide(document,".smash-pane"),smash.show(document,'.smash-pane[data-id="'+this.dataset.id+'"]'),this.dataset.url&&"undefined"!=this.dataset.url&&smash.router.displayURL(this.dataset.url),document.title=smash.workspace.createTitle(this.innerHTML)},smash.on(c,".close","onclick",function(e){this.parentElement.onclose&&!this.parentElement.onclose()||(smash.class.has(this.parentElement,"active")&&(this.parentElement.previousSibling?this.parentElement.previousSibling.onclick():this.parentElement.nextSibling&&this.parentElement.nextSibling.onclick()),(i=smash.get(document,'.smash-pane[data-id="'+this.parentElement.dataset.id+'"]'))&&i.parentElement.removeChild(i),this.parentElement.parentElement.removeChild(this.parentElement),e.stopPropagation())}),r.appendChild(c);var i=document.createElement("div");return i.className="smash-pane",i.dataset.id=e,i.innerHTML=a,o.appendChild(i),{tab:c,pane:i}},smash.workspace.activeTab=function(){var e=smash.get(tabs,".smash-tab.active");if(!e)return null;var s=smash.get(document,'.smash-pane[data-id="'+e.dataset.id+'"]');return s?{tab:e,pane:s}:null},smash.workspace.createTitle=function(e){var s=e.replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/gi,"");if(""==s){var a=document.createElement("div");a.innerHTML=e,(ts=smash.get(a,".title"))&&(s=ts.innerHTML),""==s&&(s="unknown")}return s+(smash.workspace.baseTitle?" | "+smash.workspace.baseTitle:"")};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNtYXNoLmpzIiwiYWpheC5qcyIsImNsYXNzLmpzIiwiY29uZmlnLmpzIiwiY29va2llLmpzIiwiZGlhbG9nLmpzIiwiZXhjZXB0aW9uLmpzIiwiaW5wdXQuanMiLCJyb3V0ZXIuanMiLCJzZWFyY2hib3guanMiLCJzaWRlYmFyLmpzIiwic3RvcmFnZS5qcyIsIndvcmtzcGFjZS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInNtYXNoIiwiaW5pdCIsImNvbmZpZyIsInNpZGViYXIiLCJzZWFyY2hib3giLCJ3b3Jrc3BhY2UiLCJpbnB1dCIsImdldCIsInBhcmVudCIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImNvbnNvbGUiLCJsb2ciLCJnZXRBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGlkZSIsImVsIiwiaSIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsInNob3ciLCJvbiIsImV2ZW50IiwiY2FsbGJhY2siLCJlbGVtZW50cyIsImZ1enp5Q29tcGFyZSIsInNlYXJjaCIsImNvbXBhcmUiLCJ1bmRlZmluZWQiLCJyZWdleCIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsInNwbGl0Iiwiam9pbiIsIm1hdGNoIiwiYWpheCIsIl9oZWFkZXJzXyIsImFkZEhlYWRlciIsIm5hbWUiLCJ2YWx1ZSIsInJlbW92ZUhlYWRlciIsIm9uZXJyb3IiLCJtZXNzYWdlIiwib251bmF1dGhvcml6ZWQiLCJfeGhyXyIsIlhNTEh0dHBSZXF1ZXN0IiwieGhyIiwidmVyc2lvbnMiLCJBY3RpdmVYT2JqZWN0Iiwic2VuZCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJyZXNwb25zZVR5cGUiLCJhc3luYyIsIngiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInF1ZXJ5Iiwia2V5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsInBvc3QiLCJkYXRhU3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsImNsYXNzIiwiYWRkIiwiY2xhc3NOYW1lIiwiaGFzIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiaW5kZXhPZiIsInRvZ2dsZSIsIl92YWx1ZXNfIiwiX3NpZGViYXJfbG9ja18iLCJ2Iiwic3RvcmFnZSIsIm9wdGlvbiIsIm8iLCJFeGNlcHRpb24iLCJzZXQiLCJjb29raWUiLCJleHBpcnlEYXlzIiwiZCIsIkRhdGUiLCJzZXRUaW1lIiwiZ2V0VGltZSIsImV4cGlyZXMiLCJ0b1VUQ1N0cmluZyIsImRvY3VtZW50IiwiZGVjb2RlZENvb2tpZSIsImRlY29kZVVSSUNvbXBvbmVudCIsImNhIiwiYyIsImNoYXJBdCIsInN1YnN0cmluZyIsImRpYWxvZyIsIm5ldyIsImNvbnRlbnQiLCJiYWNrZHJvcCIsImNoZWNrQmFja2Ryb3AiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaGlsZCIsIm9uY2xpY2siLCJjbG9zZSIsInRoaXMiLCJ0b1N0cmluZyIsImlucHV0cyIsInBhcmVudEVsZW1lbnQiLCJzZXRWYWx1ZSIsIm9ua2V5dXAiLCJnZXRWYWx1ZSIsImxhYmVsIiwicGxhY2Vob2xkZXIiLCJsIiwiZ2V0QXR0cmlidXRlIiwic2VsZWN0Iiwic2VsZWN0cyIsIm9sZCIsInNlbGVjdGVkSW5kZXgiLCJvcHRpb25zIiwidGV4dCIsImZvY3VzIiwib25mb2N1cyIsIm9uY2hhbmdlIiwicmVzZXQiLCJnZXRUZXh0IiwidHlwZSIsInNldEF0dHJpYnV0ZSIsInVsIiwib25tb3VzZXVwIiwic3RvcFByb3BhZ2F0aW9uIiwiaiIsImxpIiwib25tb3VzZWRvd24iLCJxIiwiaXRlbXMiLCJrZXlDb2RlIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiaXRlbSIsInJlc3VsdHMiLCJjaGVja2JveEluaXQiLCJjaGVja2JveCIsImNoZWNrYm94ZXMiLCJjaGVja2VkIiwicm91dGVyIiwiX19wYXJzZVJvdXRlUmVnZXgiLCJfX2R5bmFtaWNQYXJ0cyIsIl9fYmFzZURpcmVjdG9yeSIsIl9fcm91dGVzIiwic3RhdGljIiwiZHluYW1pYyIsInBhdGgiLCJyb3V0ZSIsInBhcnNlUm91dGUiLCJkZXB0aCIsIm51bVZhcnMiLCJkaXNwbGF5VVJMIiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiYWRkQmFzZURpcmVjdG9yeSIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJyZWRpcmVjdCIsImxvY2F0aW9uIiwiaGFuZGxlTm90Rm91bmQiLCJydW4iLCJvbnBvcHN0YXRlIiwiZXhlY3V0ZSIsImdldFBhdGgiLCJtYXRjaGVzIiwidmFyTnVtIiwidmFycyIsImhyZWYiLCJob3N0IiwiaG9zdG5hbWUiLCJjaGVja1BhdGgiLCJwYXRobmFtZSIsImNsZWFuUGF0aCIsIlJlZ0V4cCIsInNldEJhc2VEaXJlY3RvcnkiLCJkaXJlY3RvcnkiLCJxdWVyeVBhcmFtIiwicGFyYW0iLCJyZWdleFMiLCJleGVjIiwiaV8iLCJtaW5BdXRvQ29tcGxldGVMZW5ndGgiLCJvbmJsdXIiLCJzc2IiLCJlbXB0eSIsImFwcGVuZFRvIiwibm9kZSIsInNpYmwiLCJ0b2dnbGVMb2NrIiwic2liIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInVuc2V0IiwicmVtb3ZlSXRlbSIsImdldEl0ZW0iLCJwYXJzZSIsImNsZWFyIiwiYmFzZVRpdGxlIiwiX3dzXyIsIl9oZHJfIiwiX3NiXyIsIl90YWJzXyIsImFkZFRhYiIsImlkIiwidGl0bGUiLCJwYW5lbCIsInRhYnMiLCJwYW5lc0NvbnRhaW5lciIsImNyZWF0ZVRpdGxlIiwidGFiIiwicGFuZSIsImRhdGFzZXQiLCJhY3RpdmUiLCJvbmNsb3NlIiwicHJldmlvdXNTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJhY3RpdmVUYWIiLCJ0IiwiZGl2IiwidHMiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFBQyxpQkFBQSxPQUFBLFNBQUFDLEdBQ0FDLE1BQUFDLFNBQ0EsRUFFQSxJQUFBRCxTQUVBQSxPQUFBQyxLQUFB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QUFBc04sS0FBQSxvQkFDQSxLQUFBRyxFQUNBLE1BQUEsS0FFQSxJQUFBQyxHQUFBak8sTUFBQU8sSUFBQXdGLFNBQUEsd0JBQUFpSSxFQUFBRSxRQUFBUixHQUFBLEtBQ0EsT0FBQU8sSUFHQUQsSUFBQUEsRUFBQUMsS0FBQUEsR0FGQSxNQUtBak8sTUFBQUssVUFBQTBOLFlBQUEsU0FBQUosR0FDQSxHQUFBYSxHQUFBYixFQUFBM0wsUUFBQSxrQ0FBQSxHQUNBLElBQUEsSUFBQXdNLEVBQUEsQ0FDQSxHQUFBQyxHQUFBMUksU0FBQVksY0FBQSxNQUNBOEgsR0FBQTdILFVBQUErRyxHQUNBZSxHQUFBMU8sTUFBQU8sSUFBQWtPLEVBQUEsYUFDQUQsRUFBQUUsR0FBQTlILFdBRUEsSUFBQTRILElBQ0FBLEVBQUEsV0FHQSxNQUFBQSxJQUFBeE8sTUFBQUssVUFBQStNLFVBQUEsTUFBQXBOLE1BQUFLLFVBQUErTSxVQUFBIiwiZmlsZSI6InNtYXNoLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKGUpe1xuICAgIHNtYXNoLmluaXQoKTtcbn0sIGZhbHNlKTtcblxudmFyIHNtYXNoID0ge307XG5cbnNtYXNoLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBzbWFzaC5jb25maWcuaW5pdCgpO1xuICAgIHNtYXNoLnNpZGViYXIuaW5pdCgpO1xuICAgIHNtYXNoLnNlYXJjaGJveC5pbml0KCk7XG4gICAgc21hc2gud29ya3NwYWNlLmluaXQoKTtcbiAgICBzbWFzaC5pbnB1dC5pbml0KCk7XG59O1xuXG5zbWFzaC5nZXQgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5nZXRBbGwgPSBmdW5jdGlvbihwYXJlbnQsIHNlbGVjdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5zbWFzaC5oaWRlID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHZhciBlbDtcbiAgICBpZiAoc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICBlbCA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBlbCA9IFtwYXJlbnRdO1xuICAgIH1cbiAgICBmb3IgKHZhciBpPTA7IGk8ZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG59O1xuXG5zbWFzaC5zaG93ID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3Rvcikge1xuICAgIHZhciBlbDtcbiAgICBpZiAoc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICBlbCA9IHNtYXNoLmdldEFsbChwYXJlbnQsIHNlbGVjdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBlbCA9IFtwYXJlbnRdO1xuICAgIH1cbiAgICBmb3IgKHZhciBpPTA7IGk8ZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgIH1cbn07XG5cbnNtYXNoLm9uID0gZnVuY3Rpb24ocGFyZW50LCBzZWxlY3RvciwgZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGVsZW1lbnRzID0gc21hc2guZ2V0QWxsKHBhcmVudCwgc2VsZWN0b3IpO1xuICAgIGZvciAodmFyIGk9MDsgaTxlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbGVtZW50c1tpXVtldmVudF0gPSBjYWxsYmFjaztcbiAgICB9XG59O1xuXG5zbWFzaC5mdXp6eUNvbXBhcmUgPSBmdW5jdGlvbihzZWFyY2gsIGNvbXBhcmUpIHtcbiAgICBpZiAoY29tcGFyZSA9PSB1bmRlZmluZWQgfHwgc2VhcmNoID09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciByZWdleCA9IFwiLio/XCIgKyBzZWFyY2gudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8tL2csIFwiXFxcXC1cIikuc3BsaXQoXCJcIikuam9pbihcIi4qP1wiKSArIFwiLio/XCI7XG4gICAgcmV0dXJuIGNvbXBhcmUudG9Mb3dlckNhc2UoKS5tYXRjaChyZWdleCk7XG59O1xuIiwic21hc2guYWpheCA9IHtcbiAgICBfaGVhZGVyc186IFtdXG59O1xuXG5zbWFzaC5hamF4LmFkZEhlYWRlciA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgc21hc2guYWpheC5faGVhZGVyc19bbmFtZV0gPSB2YWx1ZTtcbn07XG5cbnNtYXNoLmFqYXgucmVtb3ZlSGVhZGVyID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSBzbWFzaC5hamF4Ll9oZWFkZXJzX1tuYW1lXTtcbn07XG5cbnNtYXNoLmFqYXgub25lcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbn07XG5cbnNtYXNoLmFqYXgub251bmF1dGhvcml6ZWQgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgc21hc2guYWpheC5vbmVycm9yKG1lc3NhZ2UpO1xufTtcblxuc21hc2guYWpheC5feGhyXyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgfVxuICAgIHZhciB2ZXJzaW9ucyA9IFtcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC42LjBcIixcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC41LjBcIixcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC40LjBcIixcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC4zLjBcIixcbiAgICAgICAgXCJNU1hNTDIuWG1sSHR0cC4yLjBcIixcbiAgICAgICAgXCJNaWNyb3NvZnQuWG1sSHR0cFwiXG4gICAgXTtcbiAgICB2YXIgeGhyO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVyc2lvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHhociA9IG5ldyBBY3RpdmVYT2JqZWN0KHZlcnNpb25zW2ldKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHhocjtcbn07XG5cbnNtYXNoLmFqYXguc2VuZCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBtZXRob2QsIGRhdGEsIHJlc3BvbnNlVHlwZSwgb25lcnJvciwgYXN5bmMpIHtcbiAgICBpZiAoYXN5bmMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhc3luYyA9IHRydWU7XG4gICAgfVxuICAgIGlmIChvbmVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb25lcnJvciA9IHNtYXNoLmFqYXgub25lcnJvcjtcbiAgICB9XG4gICAgdmFyIHggPSBzbWFzaC5hamF4Ll94aHJfKCk7XG4gICAgeC5yZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGU7XG4gICAgeC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHgucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHguc3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIDIwMDpcbiAgICAgICAgICAgIGNhc2UgMjAxOlxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh4LnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQwMTpcbiAgICAgICAgICAgICAgICBzbWFzaC5hamF4Lm9udW5hdXRob3JpemVkKHgucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBvbmVycm9yKHgucmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuXHRcdH1cbiAgICB9O1xuICAgIHgub3BlbihtZXRob2QsIHVybCwgYXN5bmMpO1xuICAgIGlmIChyZXNwb25zZVR5cGUgPT0gJ2pzb24nKSB7XG4gICAgICAgIHguc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PSAnUE9TVCcpIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7XG4gICAgfVxuICAgIGZvciAodmFyIG5hbWUgaW4gc21hc2guYWpheC5faGVhZGVyc18pIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHNtYXNoLmFqYXguX2hlYWRlcnNfW25hbWVdKTtcbiAgICB9XG4gICAgeC5zZW5kKGRhdGEpXG59O1xuXG5zbWFzaC5hamF4LmdldCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBkYXRhLCByZXNwb25zZVR5cGUsIG9uZXJyb3IsIGFzeW5jKSB7XG4gICAgdmFyIHF1ZXJ5ID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgICAgcXVlcnkucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW2tleV0pKTtcbiAgICB9XG4gICAgc21hc2guYWpheC5zZW5kKHVybCArIChxdWVyeS5sZW5ndGggPyAnPycgKyBxdWVyeS5qb2luKCcmJykgOiAnJyksIGNhbGxiYWNrLCAnR0VUJywgbnVsbCwgcmVzcG9uc2VUeXBlLCBvbmVycm9yLCAgYXN5bmMpXG59O1xuXG5zbWFzaC5hamF4LnBvc3QgPSBmdW5jdGlvbiAodXJsLCBjYWxsYmFjaywgZGF0YSwgcmVzcG9uc2VUeXBlLCBvbmVycm9yLCBhc3luYykge1xuICAgIHZhciBkYXRhU3RyO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICAgIGlmIChyZXNwb25zZVR5cGUgIT0gJ2pzb24nKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW2tleV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGFTdHIgPSBxdWVyeS5qb2luKCcmJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGFTdHIgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzbWFzaC5hamF4LnNlbmQodXJsLCBjYWxsYmFjaywgJ1BPU1QnLCBkYXRhU3RyLCByZXNwb25zZVR5cGUsIG9uZXJyb3IsIGFzeW5jKVxufTtcbiIsInNtYXNoLmNsYXNzID0ge307XG5cbnNtYXNoLmNsYXNzLmFkZCA9IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpIHtcbiAgICBpZiAoIXNtYXNoLmNsYXNzLmhhcyhlbCwgY2xhc3NOYW1lKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QgPyBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSkgOiBlbC5jbGFzc05hbWUgKz0gKCcgJyArIGNsYXNzTmFtZSk7XG4gICAgfVxufTtcblxuc21hc2guY2xhc3MucmVtb3ZlID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoZWwsIGNsYXNzTmFtZSkpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0ID8gZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpIDogZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UoY2xhc3NOYW1lLCAnJyk7XG4gICAgfVxufTtcblxuc21hc2guY2xhc3MuaGFzID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIHJldHVybiAoKFwiIFwiICsgZWwuY2xhc3NOYW1lICsgXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csIFwiIFwiKS5pbmRleE9mKFwiIFwiICsgY2xhc3NOYW1lICsgXCIgXCIpID4gLTEpO1xufTtcblxuc21hc2guY2xhc3MudG9nZ2xlID0gZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSkge1xuICAgIHNtYXNoLmNsYXNzLmhhcyhlbCwgY2xhc3NOYW1lKSA/IHNtYXNoLmNsYXNzLnJlbW92ZShlbCwgY2xhc3NOYW1lKSA6IHNtYXNoLmNsYXNzLmFkZChlbCwgY2xhc3NOYW1lKTtcbn07XG4iLCJzbWFzaC5jb25maWcgPSB7XG4gICAgX3ZhbHVlc186IHtcbiAgICAgICAgX3NpZGViYXJfbG9ja186IGZhbHNlXG4gICAgfVxufVxuXG5zbWFzaC5jb25maWcuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gc21hc2guc3RvcmFnZS5nZXQoJ2NvbmZpZycpO1xuICAgIGlmICh2KSB7XG4gICAgICAgIHNtYXNoLmNvbmZpZy5fdmFsdWVzXyA9IHY7XG4gICAgfVxufTtcblxuc21hc2guY29uZmlnLmdldCA9IGZ1bmN0aW9uKG9wdGlvbikge1xuICAgIHZhciBvID0gJ18nICsgb3B0aW9uICsgJ18nO1xuICAgIGlmIChvIGluIHNtYXNoLmNvbmZpZy5fdmFsdWVzXykge1xuICAgICAgICByZXR1cm4gc21hc2guY29uZmlnLl92YWx1ZXNfW29dO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgc21hc2guRXhjZXB0aW9uKCcwMDEnLCAnSW52YWxpZCBjb25maWcgb3B0aW9uIFwiJyArIG9wdGlvbiArICdcIicpO1xufTtcblxuc21hc2guY29uZmlnLnNldCA9IGZ1bmN0aW9uKG9wdGlvbiwgdmFsdWUpIHtcbiAgICB2YXIgbyA9ICdfJyArIG9wdGlvbiArICdfJztcbiAgICBpZiAoIW8gaW4gc21hc2guY29uZmlnLl92YWx1ZXNfKSB7XG4gICAgICAgIHRocm93IG5ldyBzbWFzaC5FeGNlcHRpb24oJzAwMScsICdJbnZhbGlkIGNvbmZpZyBvcHRpb24gXCInICsgb3B0aW9uICsgJ1wiJyk7XG4gICAgfVxuICAgIHNtYXNoLmNvbmZpZy5fdmFsdWVzX1tvXSA9IHZhbHVlO1xuICAgIHNtYXNoLnN0b3JhZ2Uuc2V0KCdjb25maWcnLCBzbWFzaC5jb25maWcuX3ZhbHVlc18pO1xufTtcbiIsInNtYXNoLmNvb2tpZSA9IHt9O1xuXG5zbWFzaC5jb29raWUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGV4cGlyeURheXMpIHtcbiAgICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gICAgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgKGV4cGlyeURheXMqMjQqNjAqNjAqMTAwMCkpO1xuICAgIHZhciBleHBpcmVzID0gXCJleHBpcmVzPVwiKyBkLnRvVVRDU3RyaW5nKCk7XG4gICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArIFwiPVwiICsgdmFsdWUgKyBcIjtcIiArIGV4cGlyZXMgKyBcIjtwYXRoPS9cIjtcbn07XG5cbnNtYXNoLmNvb2tpZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIG5hbWUgPSBuYW1lICsgXCI9XCI7XG4gICAgdmFyIGRlY29kZWRDb29raWUgPSBkZWNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuY29va2llKTtcbiAgICB2YXIgY2EgPSBkZWNvZGVkQ29va2llLnNwbGl0KCc7Jyk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8Y2EubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGMgPSBjYVtpXTtcbiAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09ICcgJykge1xuICAgICAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjLmluZGV4T2YobmFtZSkgPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWUubGVuZ3RoLCBjLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFwiXCI7XG59O1xuIiwic21hc2guZGlhbG9nID0ge307XG5cbnNtYXNoLmRpYWxvZy5uZXcgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgdmFyIGJhY2tkcm9wID0gc21hc2guZGlhbG9nLmNoZWNrQmFja2Ryb3AoKTtcblxuICAgIHZhciBkaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaWFsb2cuY2xhc3NOYW1lID0gJ3NtYXNoLWRpYWxvZyc7XG4gICAgZGlhbG9nLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgYmFja2Ryb3AuYXBwZW5kQ2hpbGQoZGlhbG9nKTtcbn07XG5cbnNtYXNoLmRpYWxvZy5jaGVja0JhY2tkcm9wID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGJhY2tkcm9wID0gc21hc2guZ2V0KGRvY3VtZW50LCBcIi5zbWFzaC1kaWFsb2ctYmFja2Ryb3BcIikpIHtcbiAgICAgICAgaWYgKGRpYWxvZyA9IHNtYXNoLmdldChkb2N1bWVudCwgXCIuc21hc2gtZGlhbG9nLWJhY2tkcm9wIC5zbWFzaC1kaWFsb2dcIikpIHtcbiAgICAgICAgICAgIGJhY2tkcm9wLnJlbW92ZUNoaWxkKGRpYWxvZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhY2tkcm9wO1xuICAgIH1cbiAgICB2YXIgYmFja2Ryb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBiYWNrZHJvcC5jbGFzc05hbWUgPSAnc21hc2gtZGlhbG9nLWJhY2tkcm9wJztcbiAgICBiYWNrZHJvcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cInNtYXNoLWRpYWxvZy1iYWNrZ3JvdW5kXCI+PC9kaXY+JztcbiAgICBzbWFzaC5nZXQoYmFja2Ryb3AsICcuc21hc2gtZGlhbG9nLWJhY2tncm91bmQnKS5vbmNsaWNrID0gc21hc2guZGlhbG9nLmNsb3NlO1xuICAgIHNtYXNoLmdldChkb2N1bWVudCwgJ2JvZHknKS5hcHBlbmRDaGlsZChiYWNrZHJvcCk7XG4gICAgcmV0dXJuIGJhY2tkcm9wO1xufTtcblxuc21hc2guZGlhbG9nLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGRpYWxvZyA9IHNtYXNoLmdldChkb2N1bWVudCwgXCIuc21hc2gtZGlhbG9nLWJhY2tkcm9wXCIpKSB7XG4gICAgICAgIHNtYXNoLmdldChkb2N1bWVudCwgJ2JvZHknKS5yZW1vdmVDaGlsZChkaWFsb2cpO1xuICAgIH1cbn07XG4iLCJzbWFzaC5FeGNlcHRpb24gPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnU21hc2hFeGNlcHRpb24gJyArIHRoaXMudmFsdWUgKyAnOiAnICsgdGhpcy5tZXNzYWdlO1xuICAgIH07XG59O1xuIiwic21hc2guaW5wdXQgPSB7fTtcblxuc21hc2guaW5wdXQuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtYXNoLWlucHV0IGlucHV0LCAuc21hc2gtdGV4dGFyZWEgdGV4dGFyZWFcIik7XG4gICAgdmFyIGlucHV0O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlucHV0ID0gaW5wdXRzW2ldO1xuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKGlucHV0LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaW5wdXQub25rZXl1cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoaW5wdXQucGFyZW50RWxlbWVudCwgJ2hhcy1mbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKGlucHV0LnBhcmVudEVsZW1lbnQsICdmbG9hdGluZy1sYWJlbCcpO1xuXG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gaW5wdXQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGlucHV0Lm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZChsLCAnc2hvdycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGwsICdzaG93Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKGlucHV0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChpbnB1dC5wYXJlbnRFbGVtZW50LCAnc21hc2gtaW5pdGlhbGlzZWQnKTtcbiAgICB9XG4gICAgdmFyIHNlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtYXNoLXNlbGVjdCBzZWxlY3RcIik7XG4gICAgdmFyIHNlbGVjdDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2VsZWN0ID0gc2VsZWN0c1tpXTtcbiAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyhzZWxlY3QucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzbWFzaC5jbGFzcy5oYXMoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdoYXMtZmxvYXRpbmctbGFiZWwnKSkge1xuICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKHNlbGVjdC5wYXJlbnRFbGVtZW50LCAnaGFzLWZsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc2VsZWN0LnBhcmVudEVsZW1lbnQsICdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IHNlbGVjdC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUodGhpcywgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgICAgICB2YXIgb2xkID0gc2VsZWN0LnZhbHVlO1xuICAgICAgICAgICAgc2VsZWN0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoc2VsZWN0LnNlbGVjdGVkSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnRleHQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICBpbnB1dC5vbmZvY3VzKCk7XG4gICAgICAgICAgICBpZiAob2xkICE9IHZhbHVlICYmIHNlbGVjdC5vbmNoYW5nZSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdC5vbmNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LmdldFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdC5zZWxlY3RlZEluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGVjdC5wYXJlbnRFbGVtZW50LnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzbWFzaC5nZXQodGhpcywgJ2lucHV0JykudmFsdWUgPSB0aGlzLmdldFRleHQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5nZXRUZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdC5zZWxlY3RlZEluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLmlubmVySFRNTDtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBpbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gc2VsZWN0LmdldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgXCJyZWFkb25seVwiKTtcbiAgICAgICAgc2VsZWN0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuXG4gICAgICAgIHZhciBvcHRpb25zID0gc2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJvcHRpb25cIik7XG4gICAgICAgIHZhciB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgIHVsLm9ubW91c2V1cCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb3B0aW9ucy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IG9wdGlvbnNbal07XG4gICAgICAgICAgICBpZiAoIW9wdGlvbi5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBvcHRpb24udmFsdWUpO1xuICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gb3B0aW9uLmlubmVySFRNTDtcbiAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGxpKTtcbiAgICAgICAgICAgIGxpLm9ubW91c2Vkb3duID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnNldFZhbHVlKHRoaXMuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vbm1vdXNldXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh1bCk7XG4gICAgICAgIGlucHV0Lm9uZm9jdXMgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgbCA9IHRoaXMucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwibGFiZWxcIik7XG4gICAgICAgICAgICBpZiAobCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MuYWRkKGwsICdzaG93Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc21hc2guY2xhc3MucmVtb3ZlKGwsICdzaG93Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBzbWFzaC5nZXQodGhpcywgJ2lucHV0Jyk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcztcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLmFkZCh0aGlzLCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgICAgIHZhciBxID0gJyc7XG4gICAgICAgICAgICB3aW5kb3cub25tb3VzZXVwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgd2luZG93Lm9ubW91c2V1cCA9IG51bGw7XG4gICAgICAgICAgICAgICAgd2luZG93Lm9ua2V5dXAgPSBudWxsO1xuICAgICAgICAgICAgICAgIHNlbGVjdC5yZXNldCgpO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtcyA9IHNtYXNoLmdldEFsbChzZWxlY3QsICd1bCBsaScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNbaV0uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc21hc2guc2hvdyhzZWxlY3QsICd1bCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzbWFzaC5jbGFzcy5yZW1vdmUoc2VsZWN0LCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3aW5kb3cub25rZXl1cCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlLmtleUNvZGUsIFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCkpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBpZiAocS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxID0gcS5zdWJzdHJpbmcoMCwgcS5sZW5ndGgtMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgcSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTg5OlxuICAgICAgICAgICAgICAgICAgICBxICs9IFwiLVwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE5MDpcbiAgICAgICAgICAgICAgICAgICAgcSArPSBcIi5cIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxOTE6XG4gICAgICAgICAgICAgICAgICAgIHEgKz0gXCIvXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjIwOlxuICAgICAgICAgICAgICAgICAgICBxICs9IFwiXFxcXFwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBxICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZS5rZXlDb2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHEgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3QucmVzZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1zID0gc21hc2guZ2V0QWxsKHNlbGVjdCwgJ3VsIGxpJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc21hc2guc2hvdyhzZWxlY3QsICd1bCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocSA9PSBcIlwiIHx8IHNtYXNoLmZ1enp5Q29tcGFyZShxLCBpdGVtLmlubmVySFRNTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYXNoLmhpZGUoc2VsZWN0LCAndWwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3aW5kb3cuZm9jdXMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoc2VsZWN0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICBzZWxlY3QucGFyZW50RWxlbWVudC5zZXRWYWx1ZShzZWxlY3QucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChzZWxlY3QucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJyk7XG4gICAgfVxuICAgIHNtYXNoLmlucHV0LmNoZWNrYm94SW5pdCgpO1xufTtcblxuc21hc2guaW5wdXQuY2hlY2tib3hJbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtYXNoLWNoZWNrYm94IGlucHV0XCIpO1xuICAgIHZhciBjaGVja2JveDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZWNrYm94ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2hlY2tib3ggPSBjaGVja2JveGVzW2ldO1xuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKGNoZWNrYm94LnBhcmVudEVsZW1lbnQsICdzbWFzaC1pbml0aWFsaXNlZCcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjID0gIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgYy5jbGFzc05hbWUgPSAnY2hlY2tzJztcbiAgICAgICAgYy5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPmNoZWNrX2JveF9vdXRsaW5lX2JsYW5rPC9pPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2hlY2tlZFwiPmNoZWNrX2JveDwvaT4nO1xuICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGMpO1xuXG4gICAgICAgIGlmIChsYWJlbCA9IGNoZWNrYm94LmdldEF0dHJpYnV0ZSgnbGFiZWwnKSkge1xuICAgICAgICAgICAgdmFyIGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBsLmNsYXNzTmFtZSA9ICdsYWJlbCc7XG4gICAgICAgICAgICBsLmlubmVySFRNTCA9IGxhYmVsO1xuICAgICAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChsKTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoY2hlY2tib3gucGFyZW50RWxlbWVudCwgJ3NtYXNoLWluaXRpYWxpc2VkJyk7XG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBzbWFzaC5jbGFzcy5oYXMoY2hlY2tib3gucGFyZW50RWxlbWVudCwgJ2NoZWNrZWQnKTtcblxuICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLnRvZ2dsZSh0aGlzLCAnY2hlY2tlZCcpO1xuICAgICAgICAgICAgc21hc2guZ2V0KHRoaXMsICdpbnB1dCcpLmNoZWNrZWQgPSBzbWFzaC5jbGFzcy5oYXModGhpcywgJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgIGlmIChjaGVja2JveC5wYXJlbnRFbGVtZW50Lm9uY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5vbmNoYW5nZShzbWFzaC5jbGFzcy5oYXModGhpcywgJ2NoZWNrZWQnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY2hlY2tib3gucGFyZW50RWxlbWVudC5nZXRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNtYXNoLmNsYXNzLmhhcyh0aGlzLCAnY2hlY2tlZCcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHNtYXNoLmNsYXNzLmhhcyh0aGlzLCAnY2hlY2tlZCcpID09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbmNsaWNrKCk7XG4gICAgICAgIH07XG4gICAgfVxufTtcbiIsInNtYXNoLnJvdXRlciA9IHtcbiAgICBfX3BhcnNlUm91dGVSZWdleDogL3soLio/KX0vaWcsXG4gICAgX19keW5hbWljUGFydHM6IFtdLFxuICAgIF9fYmFzZURpcmVjdG9yeTogbnVsbCxcbiAgICBfX3JvdXRlczoge1xuICAgICAgICBzdGF0aWM6IFtdLFxuICAgICAgICBkeW5hbWljOiBbXVxuICAgIH1cbn07XG5cbi8qKlxuICogQWRkIGEgcm91dGUgaGFuZGxlciB0byB0aGUgcm91dGVyXG4gKiBAcGFyYW0gc3RyaW5nICAgcGF0aFxuICogQHBhcmFtIEZ1bmN0aW9uIGNhbGxiYWNrXG4gKi9cbnNtYXNoLnJvdXRlci5hZGQgPSBmdW5jdGlvbihwYXRoLCBjYWxsYmFjaykge1xuICAgIHZhciByb3V0ZSA9IHNtYXNoLnJvdXRlci5wYXJzZVJvdXRlKHBhdGgpO1xuICAgIGlmIChyb3V0ZS5yZWdleCkge1xuICAgICAgICByb3V0ZS5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICBpZiAoIXNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXSkge1xuICAgICAgICAgICAgc21hc2gucm91dGVyLl9fcm91dGVzLmR5bmFtaWNbcm91dGUuZGVwdGhdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuZHluYW1pY1tyb3V0ZS5kZXB0aF1bcm91dGUubnVtVmFyc10pIHtcbiAgICAgICAgICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXVtyb3V0ZS5udW1WYXJzXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHNtYXNoLnJvdXRlci5fX3JvdXRlcy5keW5hbWljW3JvdXRlLmRlcHRoXVtyb3V0ZS5udW1WYXJzXS5wdXNoKHJvdXRlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzbWFzaC5yb3V0ZXIuX19yb3V0ZXMuc3RhdGljW3BhdGhdID0gY2FsbGJhY2s7XG59O1xuXG4vKipcbiAqIFNldCBhbmQgZXhlY3V0ZSB0aGUgZ2l2ZW4gcGF0aFxuICogQHBhcmFtIHN0cmluZyBwYXRoXG4gKi9cbnNtYXNoLnJvdXRlci5zZXQgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgc21hc2gucm91dGVyLmRpc3BsYXlVUkwocGF0aCk7XG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdwb3BzdGF0ZScpKTtcbn07XG5cbi8qKlxuICogRGlzcGxheSB0aGUgdXJsIGluIHRoZSBicm93c2VyXG4gKiBAcGFyYW0gIHN0cmluZyBwYXRoXG4gKiBAcmV0dXJuIHZvaWRcbiAqL1xuc21hc2gucm91dGVyLmRpc3BsYXlVUkwgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgcGF0aCA9IHNtYXNoLnJvdXRlci5hZGRCYXNlRGlyZWN0b3J5KHBhdGgpO1xuICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShcIlwiLCBcIlwiLCBwYXRoKTtcbn07XG5cbi8qKlxuICogUmVkaXJlY3QgdG8gdGhlIGNvcnJlY3QgdXJsXG4gKiBAcGFyYW0gIHN0cmluZyBwYXRoXG4gKiBAcmV0dXJuIHZvaWRcbiAqL1xuc21hc2gucm91dGVyLnJlZGlyZWN0ID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIGlmICghcGF0aC5zZWFyY2goL15odHRwW3NdPzpcXC9cXC8vKSkge1xuICAgICAgICBwYXRoID0gc21hc2gucm91dGVyLmFkZEJhc2VEaXJlY3RvcnkocGF0aCk7XG4gICAgfVxuICAgIHdpbmRvdy5sb2NhdGlvbiA9IHBhdGg7XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgd2hlbiBhIHBhdGggaXMgbm90IGZvdW5kLlxuICogQHBhcmFtICBSb3V0ZSByb3V0ZVxuICogQHJldHVybiB2b2lkXG4gKi9cbnNtYXNoLnJvdXRlci5oYW5kbGVOb3RGb3VuZCA9IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgY29uc29sZS5sb2coXCJyb3V0ZTogXCIgKyBKU09OLnN0cmluZ2lmeShyb3V0ZSkgKyBcIiBkb2VzIG5vdCBleGlzdFwiKTtcbn07XG5cbi8qKlxuICogUnVuIHRoZSByb3V0ZXIgYW5kIGNoZWNrIHRoZSBnaXZlbiBwYXRoXG4gKiBAcmV0dXJuIHZvaWRcbiAqL1xuc21hc2gucm91dGVyLnJ1biA9IGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5vbnBvcHN0YXRlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgc21hc2gucm91dGVyLmV4ZWN1dGUoKTtcbiAgICB9O1xuICAgIHNtYXNoLnJvdXRlci5leGVjdXRlKCk7XG59XG5cbi8qKlxuICogRXhlY3V0ZSB0aGUgcm91dGVyIGFuZCBjaGVjayBnaXZlbiBwYXRoXG4gKiBAcmV0dXJuIHZvaWRcbiAqL1xuc21hc2gucm91dGVyLmV4ZWN1dGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGF0aCA9IHRoaXMuZ2V0UGF0aCgpO1xuICAgIGlmICh0aGlzLl9fcm91dGVzLnN0YXRpY1twYXRoLnBhdGhdKSB7XG4gICAgICAgIHRoaXMuX19yb3V0ZXMuc3RhdGljW3BhdGgucGF0aF0oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgZGVwdGggPSBwYXRoLnBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aC0xO1xuICAgIGlmICh0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdKSB7XG4gICAgICAgIHZhciByb3V0ZTtcbiAgICAgICAgdmFyIG1hdGNoZXM7XG4gICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgIGZvciAodmFyIHZhck51bSBpbiB0aGlzLl9fcm91dGVzLmR5bmFtaWNbZGVwdGhdKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF1bdmFyTnVtXSkge1xuICAgICAgICAgICAgICAgIHZhciByb3V0ZSA9IHRoaXMuX19yb3V0ZXMuZHluYW1pY1tkZXB0aF1bdmFyTnVtXVtpdGVtXTtcbiAgICAgICAgICAgICAgICBtYXRjaGVzID0gcGF0aC5wYXRoLm1hdGNoKHJvdXRlLnJlZ2V4KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxyb3V0ZS5udW1WYXJzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtyb3V0ZS52YXJzW2ldXSA9IG1hdGNoZXNbaSsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm91dGUuY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNtYXNoLnJvdXRlci5oYW5kbGVOb3RGb3VuZChwYXRoKTtcbn07XG5cbi8qKlxuICogR2V0IHBhdGggd2l0aG91dCBiYXNlIGRpcmVjdG9yeSBpZiBhdmFpbGFibGVcbiAqIEByZXR1cm4gUGF0aFxuICovXG5zbWFzaC5yb3V0ZXIuZ2V0UGF0aCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgbC5ocmVmID0gd2luZG93LmxvY2F0aW9uO1xuICAgIHJldHVybiB7aG9zdDogbC5ob3N0bmFtZSwgcGF0aDogc21hc2gucm91dGVyLmNoZWNrUGF0aChsLnBhdGhuYW1lKX07XG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiByb3V0ZSBnaXZlbiBieSBhZGRcbiAqIEBwYXJhbSAgc3RyaW5nIHBhdGhcbiAqIEByZXR1cm4gUm91dGVcbiAqL1xuc21hc2gucm91dGVyLnBhcnNlUm91dGUgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgcGF0aCA9IHNtYXNoLnJvdXRlci5jbGVhblBhdGgocGF0aCk7XG4gICAgdmFyIHJvdXRlID0ge1xuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICBkZXB0aDogKHBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aCAtIDEpLFxuICAgICAgICB2YXJzOiBbXSxcbiAgICAgICAgbnVtVmFyczogMFxuICAgIH07XG4gICAgc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzID0gcGF0aC5tYXRjaChzbWFzaC5yb3V0ZXIuX19wYXJzZVJvdXRlUmVnZXgpO1xuICAgIGlmIChzbWFzaC5yb3V0ZXIuX19keW5hbWljUGFydHMgIT0gdW5kZWZpbmVkICYmIHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cyAhPSBudWxsKSB7XG4gICAgICAgIHZhciByZWdleCA9IFwiXlwiICsgcGF0aC5yZXBsYWNlKC9cXC8vaWcsIFwiXFxcXC9cIikgKyBcIiRcIjtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcm91dGUubnVtVmFycysrO1xuICAgICAgICAgICAgcm91dGUudmFycy5wdXNoKHNtYXNoLnJvdXRlci5fX2R5bmFtaWNQYXJ0c1tpXS5zdWJzdHJpbmcoMSwgc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzW2ldLmxlbmd0aC0xKSk7XG4gICAgICAgICAgICByZWdleCA9IHJlZ2V4LnJlcGxhY2Uoc21hc2gucm91dGVyLl9fZHluYW1pY1BhcnRzW2ldLCBcIiguKj8pXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJvdXRlLnJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleCwgJ2knKTtcbiAgICB9XG4gICAgcmV0dXJuIHJvdXRlO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIGJhc2UgZGlyZWN0b3J5IHRvIGJlIHVzZWQgYnkgYWxsIHJvdXRlc1xuICogQHBhcmFtIHN0cmluZyBkaXJlY3RvcnlcbiAqL1xuc21hc2gucm91dGVyLnNldEJhc2VEaXJlY3RvcnkgPSBmdW5jdGlvbihkaXJlY3RvcnkpIHtcbiAgICBpZiAoIWRpcmVjdG9yeSkge1xuICAgICAgICBzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5ID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNtYXNoLnJvdXRlci5fX2Jhc2VEaXJlY3RvcnkgPSBzbWFzaC5yb3V0ZXIuY2xlYW5QYXRoKGRpcmVjdG9yeSk7XG59O1xuXG4vKipcbiAqIEFkZCB0aGUgYmFzZSBkaXJlY3RvcnkgaWYgaXQgaXMgYXZhaWxhYmxlXG4gKiBAcGFyYW0gc3RyaW5nIHBhdGhcbiAqIEByZXR1cm4gc3RyaW5nXG4gKi9cbnNtYXNoLnJvdXRlci5hZGRCYXNlRGlyZWN0b3J5ID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIGlmICghc21hc2gucm91dGVyLl9fYmFzZURpcmVjdG9yeSkge1xuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICB9XG4gICAgaWYgKHBhdGguaW5kZXhPZihzbWFzaC5yb3V0ZXIuX19iYXNlRGlyZWN0b3J5KSA9PT0gLTEpIHtcbiAgICAgICAgcGF0aCA9IHNtYXNoLnJvdXRlci5fX2Jhc2VEaXJlY3RvcnkgKyBwYXRoO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aDtcbn07XG5cbi8qKlxuICogQ2xlYW4gdGhlIGdpdmVuIHBhdGggdG8gdGhlIHByb3BlciBwYXRoIHRvIGJlIHVzZWQgYnkgdGhlIHJvdXRlclxuICogQHBhcmFtICBzdHJpbmcgcGF0aFxuICogQHJldHVybiBzdHJpbmdcbiAqL1xuc21hc2gucm91dGVyLmNsZWFuUGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICBpZiAocGF0aC5sZW5ndGggPiAwICYmIHBhdGguc3Vic3RyaW5nKDAsIDEpICE9IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG4gICAgfVxuICAgIGlmIChwYXRoLmxlbmd0aCA+IDIgJiYgcGF0aC5zdWJzdHJpbmcocGF0aC5sZW5ndGgtMikgPT0gXCIvXCIpIHtcbiAgICAgICAgcGF0aCA9IHBhdGguc3Vic3RyaW5nKDAsIHBhdGgubGVuZ3RoLTIpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aDtcbn07XG5cbi8qKlxuICogQ2hlY2sgdGhlIHBhdGggaWYgdGhlcmUgaXMgYSBiYXNlIGRpcmVjdG9yeSBhdmFpbGFibGVcbiAqIEBwYXJhbSAgc3RyaW5nIHBhdGggVGhlIHBhdGggdG8gY2hlY2tcbiAqIEByZXR1cm4gc3RyaW5nICAgICAgVGhlIHBhdGggd2l0aG91dCBhIGJhc2UgZGlyZWN0b3J5IGZvciB1c2Ugb2YgY2hlY2tpbmcgcm91dGVzXG4gKi9cbnNtYXNoLnJvdXRlci5jaGVja1BhdGggPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgcGF0aCA9IHNtYXNoLnJvdXRlci5jbGVhblBhdGgocGF0aCk7XG4gICAgaWYgKHNtYXNoLnJvdXRlci5fX2Jhc2VEaXJlY3RvcnkgJiYgcGF0aC5pbmRleE9mKHNtYXNoLnJvdXRlci5fX2Jhc2VEaXJlY3RvcnkpICE9PSAtMSkge1xuICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKHNtYXNoLnJvdXRlci5fX2Jhc2VEaXJlY3RvcnksICcnKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgcXVlcnkgcGFyYW0gaW4gdGhlIHVybFxuICogQHBhcmFtICBzdHJpbmcgcGFyYW0gVGhlIHBhcmFtIHlvdSB3YW50IHRvIGhhdmVcbiAqIEByZXR1cm4gc3RyaW5nICAgICAgIFRoZSB2YWx1ZSBvZiB0aGUgcGFyYW0gb3IgdW5kZWZpbmVkIGlmIGl0IGlzIG5vdCBhdmFpbGFibGVcbiAqL1xuc21hc2gucm91dGVyLnF1ZXJ5UGFyYW0gPSBmdW5jdGlvbihwYXJhbSkge1xuICAgIHZhciByZWdleFMgPSBcIltcXFxcPyZdXCIrcGFyYW0rXCI9KFteJiNdKilcIixcbiAgICByZWdleCA9IG5ldyBSZWdFeHAoIHJlZ2V4UyApLFxuICAgIHJlc3VsdHMgPSByZWdleC5leGVjKCB3aW5kb3cubG9jYXRpb24uc2VhcmNoICk7XG4gICAgaWYoIHJlc3VsdHMgPT0gbnVsbCApe1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0c1sxXTsvL2RlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzFdLnJlcGxhY2UoL1xcKy9nLCBcIiBcIikpO1xufTtcbiIsInNtYXNoLnNlYXJjaGJveCA9IHtcbiAgICBpXzogZmFsc2UsXG4gICAgbWluQXV0b0NvbXBsZXRlTGVuZ3RoOiAzLFxuICAgIG9uZm9jdXM6IHVuZGVmaW5lZCxcbiAgICBvbmJsdXI6IHVuZGVmaW5lZCxcbiAgICBvbmNoYW5nZTogdW5kZWZpbmVkLFxufTtcblxuc21hc2guc2VhcmNoYm94LmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc21hc2guc2VhcmNoYm94LmlfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHNzYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2VhcmNoYm94IGlucHV0XCIpO1xuICAgIGlmICghc3NiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3NiLm9uZm9jdXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHNtYXNoLnNlYXJjaGJveC5yZXN1bHRzKCc8ZGl2IGNsYXNzPVwic21hc2gtaW5zdHJ1Y3Rpb25cIj5TdGFydCB0eXBpbmcgdG8gZmluZCByZXN1bHRzPC9kaXY+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgc21hc2guY2xhc3MuYWRkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtaGVhZGVyXCIpLCAnaXMtZm9jdXNzZWQnKTtcbiAgICAgICAgc21hc2guY2xhc3MuYWRkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2VhcmNoYm94IC5zbWFzaC1zZWFyY2hib3gtcmVzdWx0c1wiKSwgJ3Nob3cnKTtcbiAgICAgICAgaWYgKHNtYXNoLnNlYXJjaGJveC5vbmZvY3VzKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gub25mb2N1cygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzc2Iub25ibHVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLWhlYWRlclwiKSwgJ2lzLWZvY3Vzc2VkJyk7XG4gICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCAuc21hc2gtc2VhcmNoYm94LXJlc3VsdHNcIiksICdzaG93Jyk7XG4gICAgICAgIGlmIChzbWFzaC5zZWFyY2hib3gub25ibHVyKSB7XG4gICAgICAgICAgICBzbWFzaC5zZWFyY2hib3gub25ibHVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNzYi5vbmtleXVwID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPCBzbWFzaC5zZWFyY2hib3gubWluQXV0b0NvbXBsZXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNtYXNoLnNlYXJjaGJveC5vbmNoYW5nZSkge1xuICAgICAgICAgICAgc21hc2guc2VhcmNoYm94Lm9uY2hhbmdlKHRoaXMudmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzbWFzaC5zZWFyY2hib3guaV8gPSB0cnVlO1xufTtcblxuc21hc2guc2VhcmNoYm94LmVtcHR5ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGkgPSBzbWFzaC5nZXQoZG9jdW1lbnQsIFwiLnNtYXNoLXNlYXJjaGJveCBpbnB1dFwiKSkge1xuICAgICAgICByZXR1cm4gKGkudmFsdWUubGVuZ3RoID09IDApO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuc21hc2guc2VhcmNoYm94LmFwcGVuZFRvID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBub2RlLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgdmFyIHJlc3VsdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNlYXJjaGJveCAuc21hc2gtc2VhcmNoYm94LXJlc3VsdHNcIik7XG4gICAgcmVzdWx0cy5hcHBlbmRDaGlsZChub2RlKTtcbn07XG5cbnNtYXNoLnNlYXJjaGJveC5yZXN1bHRzID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHZhciByZXN1bHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zZWFyY2hib3ggLnNtYXNoLXNlYXJjaGJveC1yZXN1bHRzXCIpO1xuICAgIHJlc3VsdHMuaW5uZXJIVE1MID0gY29udGVudDtcbn07XG4iLCJzbWFzaC5zaWRlYmFyID0ge1xuICAgIGlfOiBmYWxzZVxufTtcblxuc21hc2guc2lkZWJhci5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNtYXNoLnNpZGViYXIuaV8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc2libCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhciAubG9ja1wiKTtcbiAgICBpZiAoIXNpYmwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzaWJsLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc21hc2guc2lkZWJhci50b2dnbGVMb2NrKCk7XG4gICAgfTtcblxuICAgIHZhciBzaWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXJcIik7XG4gICAgc21hc2guY2xhc3MuYWRkKHNpYiwgJ2lzLXVubG9ja2VkJyk7XG4gICAgc21hc2guc2lkZWJhci5pXyA9IHRydWU7XG4gICAgaWYgKHNtYXNoLmNvbmZpZy5nZXQoJ3NpZGViYXJfbG9jaycpKSB7XG4gICAgICAgIHNtYXNoLnNpZGViYXIudG9nZ2xlTG9jaygpO1xuICAgIH1cbn07XG5cbnNtYXNoLnNpZGViYXIudG9nZ2xlTG9jayA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghc21hc2guc2lkZWJhci5pXykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNtYXNoLmNsYXNzLnRvZ2dsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNtYXNoLXNpZGViYXIgLmxvY2tcIiksICd1bmxvY2snKTtcbiAgICBzbWFzaC5jbGFzcy50b2dnbGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1zaWRlYmFyXCIpLCAnaXMtdW5sb2NrZWQnKTtcbiAgICBzbWFzaC5jb25maWcuc2V0KCdzaWRlYmFyX2xvY2snLCAhc21hc2guY2xhc3MuaGFzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc21hc2gtc2lkZWJhclwiKSwgJ2lzLXVubG9ja2VkJykpO1xufTtcbiIsInNtYXNoLnN0b3JhZ2UgPSB7fTtcblxuc21hc2guc3RvcmFnZS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xufTtcblxuc21hc2guc3RvcmFnZS51bnNldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG59O1xuXG5zbWFzaC5zdG9yYWdlLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHZhciBpID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICBpZiAoIWkpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoaSk7XG59O1xuXG5zbWFzaC5zdG9yYWdlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG59O1xuIiwic21hc2gud29ya3NwYWNlID0ge1xuICAgIGJhc2VUaXRsZTogdW5kZWZpbmVkLFxuICAgIF93c186IHVuZGVmaW5lZCxcbiAgICBfaGRyXzogdW5kZWZpbmVkLFxuICAgIF9zYl86IHVuZGVmaW5lZCxcbiAgICBfdGFic186IFtdXG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHNtYXNoLndvcmtzcGFjZS5fd3NfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC13b3Jrc3BhY2VcIik7XG4gICAgaWYgKCFzbWFzaC53b3Jrc3BhY2UuX3dzXykge1xuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgc21hc2gud29ya3NwYWNlLl9oZHJfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC1oZWFkZXJcIik7XG4gICAgaWYgKHNtYXNoLndvcmtzcGFjZS5faGRyXykge1xuICAgICAgICBzbWFzaC5jbGFzcy5hZGQoc21hc2gud29ya3NwYWNlLl93c18sICdoYXMtaGVhZGVyJyk7XG4gICAgfVxuICAgIHNtYXNoLndvcmtzcGFjZS5fc2JfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbWFzaC13b3Jrc3BhY2UgLnNtYXNoLXNpZGViYXJcIik7XG4gICAgaWYgKHNtYXNoLndvcmtzcGFjZS5fc2JfKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLmFkZChzbWFzaC53b3Jrc3BhY2UuX3dzXywgJ2hhcy1zaWRlYmFyJyk7XG4gICAgfVxufTtcblxuc21hc2gud29ya3NwYWNlLmFkZFRhYiA9IGZ1bmN0aW9uKGlkLCB0aXRsZSwgY29udGVudCwgdXJsKSB7XG4gICAgaWYgKCFzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLXBhbmUnKSkge1xuICAgICAgICB2YXIgcGFuZWwgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtcGFuZWwnKTtcbiAgICAgICAgaWYgKCFwYW5lbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1RvIGFkZCBhIHRhYiB0aGVyZSBuZWVkcyB0byBiZSBhIHBhbmVsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcGFuZWwuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJzbWFzaC10YWItcGFuZVwiPjxkaXYgY2xhc3M9XCJzbWFzaC10YWJzXCI+PC9kaXY+PGRpdiBjbGFzcz1cInNtYXNoLXBhbmVzXCI+PC9kaXY+PC9kaXY+JztcbiAgICB9XG4gICAgdmFyIHRhYnMgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLXBhbmUgLnNtYXNoLXRhYnMnKTtcbiAgICB2YXIgcGFuZXNDb250YWluZXIgPSBzbWFzaC5nZXQoZG9jdW1lbnQsICcuc21hc2gtdGFiLXBhbmUgLnNtYXNoLXBhbmVzJyk7XG5cbiAgICBkb2N1bWVudC50aXRsZSA9IHNtYXNoLndvcmtzcGFjZS5jcmVhdGVUaXRsZSh0aXRsZSk7XG5cbiAgICBpZiAodGFiID0gc21hc2guZ2V0KHRhYnMsICcuc21hc2gtdGFiW2RhdGEtaWQ9XCInICsgaWQgKyAnXCJdJykpIHtcbiAgICAgICAgdmFyIHBhbmUgPSBzbWFzaC5nZXQocGFuZXNDb250YWluZXIsICcuc21hc2gtcGFuZVtkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpO1xuICAgICAgICBwYW5lLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgICAgIHRhYi5kYXRhc2V0LnVybCA9IHVybDtcbiAgICAgICAgdGFiLm9uY2xpY2soKTtcbiAgICAgICAgcmV0dXJuIHt0YWI6IHRhYiwgcGFuZTogcGFuZX07XG4gICAgfVxuXG4gICAgc21hc2guaGlkZShwYW5lc0NvbnRhaW5lciwgXCIuc21hc2gtcGFuZVwiKTtcbiAgICBpZiAoYWN0aXZlID0gc21hc2guZ2V0KHRhYnMsICcuc21hc2gtdGFiLmFjdGl2ZScpKSB7XG4gICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShhY3RpdmUsICdhY3RpdmUnKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgdGFiXG4gICAgdmFyIHRhYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFiLmNsYXNzTmFtZSA9ICdzbWFzaC10YWIgYWN0aXZlJztcbiAgICB0YWIuZGF0YXNldC5pZCA9IGlkO1xuICAgIHRhYi5kYXRhc2V0LnVybCA9IHVybDtcbiAgICB0YWIuaW5uZXJIVE1MID0gdGl0bGUgKyAnPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyBjbG9zZVwiPmNsb3NlPC9pPic7XG4gICAgdGFiLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChhY3RpdmUgPSBzbWFzaC5nZXQodGFicywgJy5zbWFzaC10YWIuYWN0aXZlJykpIHtcbiAgICAgICAgICAgIHNtYXNoLmNsYXNzLnJlbW92ZShhY3RpdmUsICdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICBzbWFzaC5jbGFzcy5hZGQodGhpcywgJ2FjdGl2ZScpO1xuICAgICAgICBzbWFzaC5oaWRlKGRvY3VtZW50LCAnLnNtYXNoLXBhbmUnKTtcbiAgICAgICAgc21hc2guc2hvdyhkb2N1bWVudCwgJy5zbWFzaC1wYW5lW2RhdGEtaWQ9XCInICsgdGhpcy5kYXRhc2V0LmlkICsgJ1wiXScpO1xuICAgICAgICBpZiAodGhpcy5kYXRhc2V0LnVybCAmJiB0aGlzLmRhdGFzZXQudXJsICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHNtYXNoLnJvdXRlci5kaXNwbGF5VVJMKHRoaXMuZGF0YXNldC51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gc21hc2gud29ya3NwYWNlLmNyZWF0ZVRpdGxlKHRoaXMuaW5uZXJIVE1MKTtcbiAgICB9O1xuICAgIHNtYXNoLm9uKHRhYiwgJy5jbG9zZScsICdvbmNsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50Lm9uY2xvc2UgJiYgIXRoaXMucGFyZW50RWxlbWVudC5vbmNsb3NlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc21hc2guY2xhc3MuaGFzKHRoaXMucGFyZW50RWxlbWVudCwgJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50LnByZXZpb3VzU2libGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wcmV2aW91c1NpYmxpbmcub25jbGljaygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBhcmVudEVsZW1lbnQubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQubmV4dFNpYmxpbmcub25jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYW5lID0gc21hc2guZ2V0KGRvY3VtZW50LCAnLnNtYXNoLXBhbmVbZGF0YS1pZD1cIicgKyB0aGlzLnBhcmVudEVsZW1lbnQuZGF0YXNldC5pZCArICdcIl0nKSkge1xuICAgICAgICAgICAgcGFuZS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHBhbmUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMucGFyZW50RWxlbWVudCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG4gICAgdGFicy5hcHBlbmRDaGlsZCh0YWIpO1xuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHBhbmUgd2l0aCB0aGUgcHJvdmlkZWQgY29udGVudFxuICAgIHZhciBwYW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwYW5lLmNsYXNzTmFtZSA9ICdzbWFzaC1wYW5lJztcbiAgICBwYW5lLmRhdGFzZXQuaWQgPSBpZDtcbiAgICBwYW5lLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgcGFuZXNDb250YWluZXIuYXBwZW5kQ2hpbGQocGFuZSk7XG4gICAgcmV0dXJuIHt0YWI6IHRhYiwgcGFuZTogcGFuZX07XG59O1xuXG5zbWFzaC53b3Jrc3BhY2UuYWN0aXZlVGFiID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRhYiA9IHNtYXNoLmdldCh0YWJzLCAnLnNtYXNoLXRhYi5hY3RpdmUnKVxuICAgIGlmICghdGFiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgcGFuZSA9IHNtYXNoLmdldChkb2N1bWVudCwgJy5zbWFzaC1wYW5lW2RhdGEtaWQ9XCInICsgdGFiLmRhdGFzZXQuaWQgKyAnXCJdJyk7XG4gICAgaWYgKCFwYW5lKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4ge3RhYjogdGFiLCBwYW5lOiBwYW5lfTtcbn07XG5cbnNtYXNoLndvcmtzcGFjZS5jcmVhdGVUaXRsZSA9IGZ1bmN0aW9uKHRpdGxlKSB7XG4gICAgdmFyIHQgPSB0aXRsZS5yZXBsYWNlKC88KFtePl0rPykoW14+XSo/KT4oLio/KTxcXC9cXDE+L2lnLCBcIlwiKTtcbiAgICBpZiAodCA9PSAnJykge1xuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IHRpdGxlO1xuICAgICAgICBpZiAodHMgPSBzbWFzaC5nZXQoZGl2LCAnLnRpdGxlJykpIHtcbiAgICAgICAgICAgIHQgPSB0cy5pbm5lckhUTUw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgPT0gJycpIHtcbiAgICAgICAgICAgIHQgPSAndW5rbm93bic7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHQgKyAoc21hc2gud29ya3NwYWNlLmJhc2VUaXRsZSA/ICcgfCAnICsgc21hc2gud29ya3NwYWNlLmJhc2VUaXRsZSA6IFwiXCIpO1xufTtcbiJdfQ==
